!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.openplayerjs=t():e.openplayerjs=t()}(this,(function(){return function(){"use strict";var e={d:function(t,i){for(var s in i)e.o(i,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:i[s]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r:function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{default:function(){return Ji}});const i=()=>null===window||void 0===window?void 0:window.navigator,s=()=>{var e,t;return(null===(t=null===(e=i())||void 0===e?void 0:e.userAgent)||void 0===t?void 0:t.toLowerCase())||null},n=()=>/iphone/i.test(s()||"")&&!window.MSStream,a=()=>/ipad|iphone|ipod/i.test(s()||"")&&!window.MSStream,o=()=>/android/i.test(s()||""),r=()=>/safari/i.test(s()||"")&&!/chrome/i.test(s()||""),l={passive:!1};function h(e){const t=document.createElement("a");return t.href=e,t.href}function d(e){return"video"===e.tagName.toLowerCase()}function f(e){return"audio"===e.tagName.toLowerCase()}function c(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new Promise(((i,s)=>{try{const n=document.createElement("script"),a=document.head||document.body;n.async=t,n.src=e,n.addEventListener("load",(()=>{i()})),n.addEventListener("error",(()=>{s(new Error(`Failed to load the script ${e}`))})),a.appendChild(n)}catch(e){s(e)}}))}function u(e){const t=e.getBoundingClientRect();return{left:t.left+(window.pageXOffset||document.documentElement.scrollLeft),top:t.top+(window.pageYOffset||document.documentElement.scrollTop)}}function p(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e)return"";const i=new DOMParser,s=i.parseFromString(e,"text/html"),n=s.body||document.createElement("body"),a=n.querySelectorAll("script");for(let e=0,t=a.length;e<t;e++)a[e].remove();const o=e=>{const t=e.children;for(let e=0,i=t.length;e<i;e++){const i=t[e],{attributes:s}=i;for(let e=0,t=s.length;e<t;e++){const{name:t,value:n}=s[e]||{},a=(n||"").replace(/\s+/g,"").toLowerCase();t&&["src","href","xlink:href"].includes(t)&&(a.includes("javascript:")||a.includes("data:"))&&i.removeAttribute(t),t&&t.startsWith("on")&&i.removeAttribute(t)}o(i)}};return o(n),t?(n.textContent||"").replace(/\s{2,}/g,""):n.innerHTML}function m(e){e="string"!=typeof e?JSON.stringify(e):e;try{e=JSON.parse(e)}catch(e){return!1}return"object"==typeof e&&null!==e}function v(e,t){let i={};return t&&t.detail&&(i={detail:t.detail}),new CustomEvent(e,i)}function g(e,t){const i=Math.floor(e%1*(t||0));let s=Math.floor(e),n=Math.floor(s/60);const a=Math.floor(n/60),o=e=>{const t=e.toString();return e<10?e<=0?"00":`0${t}`:t};return n%=60,s%=60,`${a>0?`${o(a)}:`:""}${o(n)}:${o(s)}${i?`:${o(i)}`:""}`}function b(e){const t=e.replace(/;/g,":").split(":");let i=0;return 3===t.length?(i+=60*parseFloat(t[0])*60,i+=60*parseFloat(t[1]),i+=parseFloat(t[2])):(i+=60*parseFloat(t[0]),i+=parseFloat(t[1])),i}var y,E,_,w,k,A,L,T,M,C,S,P,O,W=function(e,t,i,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(e,i):n?n.value=i:t.set(e,i),i},x=function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)};class ${constructor(e,t,i){y.set(this,void 0),E.set(this,void 0),_.set(this,void 0),w.set(this,void 0),k.set(this,{button:{},global:{},media:{}}),A.set(this,{}),L.set(this,void 0),T.set(this,{}),M.set(this,void 0),C.set(this,void 0),S.set(this,"off"),P.set(this,void 0),O.set(this,void 0),W(this,y,e,"f"),W(this,P,t,"f"),W(this,O,i,"f"),this._getCuesFromText=this._getCuesFromText.bind(this),this._getNativeCues=this._getNativeCues.bind(this),this._displayCaptions=this._displayCaptions.bind(this),this._hideCaptions=this._hideCaptions.bind(this),this._search=this._search.bind(this),this._prepareTrack=this._prepareTrack.bind(this),this._formatMenuItems=this._formatMenuItems.bind(this)}create(){const e=x(this,y,"f").getElement().textTracks,t=[];for(let i=0,s=e.length;i<s;i++){const s=[`track[kind="subtitles"][srclang="${e[i].language}"][label="${e[i].label}"]`,`track[kind="captions"][srclang="${e[i].language}"][label="${e[i].label}"]`];x(this,y,"f").getElement().querySelector(s.join(", "))&&t.push(e[i])}if(!t.length)for(let i=0,s=e.length;i<s;i++)t.push(e[i]);if(W(this,L,t,"f"),W(this,M,!!x(this,L,"f").length,"f"),!x(this,M,"f"))return;const{labels:i,detachMenus:s}=x(this,y,"f").getOptions(),n=p((null==i?void 0:i.toggleCaptions)||"");W(this,E,document.createElement("button"),"f"),x(this,E,"f").className=`op-controls__captions op-control__${x(this,P,"f")}`,x(this,E,"f").tabIndex=0,x(this,E,"f").title=n,x(this,E,"f").setAttribute("aria-controls",x(this,y,"f").id),x(this,E,"f").setAttribute("aria-pressed","false"),x(this,E,"f").setAttribute("aria-label",n),x(this,E,"f").setAttribute("data-active-captions","off"),s&&(x(this,E,"f").classList.add("op-control--no-hover"),W(this,w,document.createElement("div"),"f"),x(this,w,"f").className="op-settings op-captions__menu",x(this,w,"f").setAttribute("aria-hidden","true"),x(this,w,"f").innerHTML=`<div class="op-settings__menu" role="menu" id="menu-item-captions">\n                <div class="op-settings__submenu-item" tabindex="0" role="menuitemradio" aria-checked="${"off"===x(this,S,"f")?"true":"false"}">\n                    <div class="op-settings__submenu-label op-subtitles__option" data-value="captions-off">${p((null==i?void 0:i.off)||"")}</div>\n                </div>\n            </div>`);for(let e=0,t=x(this,y,"f").getElement().querySelectorAll("track"),s=t.length;e<s;e++){const s=t[e];if("subtitles"===s.kind||"captions"===s.kind){s.default&&(W(this,S,s.srclang,"f"),x(this,E,"f").setAttribute("data-active-captions",s.srclang));const t=h(s.src),n=x(this,L,"f")[e];n&&n.language===s.srclang&&(n.cues&&n.cues.length>0?(x(this,A,"f")[s.srclang]=this._getNativeCues(x(this,L,"f")[e]),this._prepareTrack(e,s.srclang,t,s.default||!1)):fetch(t).then((e=>{if(!e.ok)throw new Error("Network response was not ok");return e.text()})).then((n=>{x(this,A,"f")[s.srclang]=this._getCuesFromText(n),this._prepareTrack(e,s.srclang,t,s.default||!1);const a=`.op-subtitles__option[data-value="captions-${x(this,L,"f")[e].language}"]`;if(x(this,w,"f")&&!x(this,w,"f").querySelector(a)){const t=document.createElement("div"),s=(null==i?void 0:i.lang)?i.lang[x(this,L,"f")[e].language]:null;t.className="op-settings__submenu-item",t.tabIndex=0,t.setAttribute("role","menuitemradio"),t.setAttribute("aria-checked",x(this,S,"f")===x(this,L,"f")[e].language?"true":"false"),t.innerHTML=`<div class="op-settings__submenu-label op-subtitles__option"\n                                        data-value="captions-${x(this,L,"f")[e].language}">\n                                        ${s||x(this,L,"f")[e].label}\n                                    </div>`,x(this,w,"f").appendChild(t)}})))}}W(this,_,document.createElement("div"),"f"),x(this,_,"f").className="op-captions",x(this,_,"f").innerHTML="<span></span>";const r=x(this,_,"f").querySelector("span");if(x(this,k,"f").media.timeupdate=()=>{if(x(this,y,"f").isMedia())if(x(this,C,"f")){const e=x(this,A,"f")[x(this,C,"f").language];if(r&&void 0!==e){const t=this._search(e,x(this,y,"f").getMedia().currentTime);r.innerHTML="",t>-1&&x(this,E,"f").classList.contains("op-controls__captions--on")?(x(this,_,"f").classList.add("op-captions--on"),r.innerHTML=p(e[t].text,!1)):this._hideCaptions()}}else this._hideCaptions();else this._hideCaptions()},x(this,k,"f").button.click=e=>{const t=e.target;if(s){const e=x(this,y,"f").getContainer().querySelectorAll(".op-settings");for(let t=0,i=e.length;t<i;++t)e[t]!==x(this,w,"f")&&e[t].setAttribute("aria-hidden","true");"true"===x(this,w,"f").getAttribute("aria-hidden")?x(this,w,"f").setAttribute("aria-hidden","false"):x(this,w,"f").setAttribute("aria-hidden","true")}else if(t.setAttribute("aria-pressed","true"),t.classList.contains("op-controls__captions--on"))this._hideCaptions(),t.classList.remove("op-controls__captions--on"),t.setAttribute("data-active-captions","off");else{if(!x(this,C,"f")){const[e]=x(this,L,"f");W(this,C,e,"f")}this._displayCaptions(),t.classList.add("op-controls__captions--on"),t.setAttribute("data-active-captions",x(this,C,"f").language)}},x(this,k,"f").button.mouseover=()=>{if(!a()&&!o()&&s){const e=x(this,y,"f").getContainer().querySelectorAll(".op-settings");for(let t=0,i=e.length;t<i;++t)e[t]!==x(this,w,"f")&&e[t].setAttribute("aria-hidden","true");"true"===x(this,w,"f").getAttribute("aria-hidden")&&x(this,w,"f").setAttribute("aria-hidden","false")}},x(this,k,"f").button.mouseout=()=>{if(!a()&&!o()&&s){const e=x(this,y,"f").getContainer().querySelectorAll(".op-settings");for(let t=0,i=e.length;t<i;++t)e[t].setAttribute("aria-hidden","true");"false"===x(this,w,"f").getAttribute("aria-hidden")&&x(this,w,"f").setAttribute("aria-hidden","true")}},x(this,M,"f")){const e=x(this,y,"f").getContainer();if(e.insertBefore(x(this,_,"f"),e.firstChild),s){const e=document.createElement("div");e.className=`op-controls__container op-control__${x(this,P,"f")}`,e.appendChild(x(this,E,"f")),e.appendChild(x(this,w,"f")),x(this,y,"f").getControls().getLayer(x(this,O,"f")).appendChild(e)}else x(this,y,"f").getControls().getLayer(x(this,O,"f")).appendChild(x(this,E,"f"));x(this,E,"f").addEventListener("click",x(this,k,"f").button.click,l)}x(this,L,"f").length<=1&&!s||!x(this,L,"f").length&&s||(x(this,k,"f").global.click=e=>{const t=e.target;if(t.closest(`#${x(this,y,"f").id}`)&&t.classList.contains("op-subtitles__option")){const e=t.getAttribute("data-value"),i=e?e.replace("captions-",""):"",n=Array.from(x(this,L,"f")).filter((e=>e.language===i));if(W(this,C,n?n.pop():void 0,"f"),s){if(x(this,E,"f").classList.contains("op-controls__captions--on")?(this._hideCaptions(),x(this,E,"f").classList.remove("op-controls__captions--on"),x(this,E,"f").setAttribute("data-active-captions","off")):(this._displayCaptions(),x(this,E,"f").classList.add("op-controls__captions--on"),x(this,E,"f").setAttribute("data-active-captions",i)),t.parentElement&&t.parentElement.parentElement){const e=t.parentElement.parentElement.querySelectorAll(".op-settings__submenu-item");for(let t=0,i=e.length;t<i;++t)e[t].setAttribute("aria-checked","false")}t.parentElement&&t.parentElement.setAttribute("aria-checked","true"),x(this,w,"f").setAttribute("aria-hidden","false")}else this._displayCaptions(),x(this,E,"f").setAttribute("data-active-captions",i);const a=v("captionschanged");x(this,y,"f").getElement().dispatchEvent(a)}},s&&(x(this,E,"f").addEventListener("mouseover",x(this,k,"f").button.mouseover,l),x(this,w,"f").addEventListener("mouseover",x(this,k,"f").button.mouseover,l),x(this,w,"f").addEventListener("mouseout",x(this,k,"f").button.mouseout,l),x(this,y,"f").getElement().addEventListener("controlshidden",x(this,k,"f").button.mouseout,l)),void 0!==x(this,k,"f").global.click&&document.addEventListener("click",x(this,k,"f").global.click,l))}destroy(){const{detachMenus:e}=x(this,y,"f").getOptions();void 0!==x(this,k,"f").global.click&&document.removeEventListener("click",x(this,k,"f").global.click),x(this,M,"f")&&(x(this,E,"f").removeEventListener("click",x(this,k,"f").button.click),e&&(x(this,E,"f").removeEventListener("mouseover",x(this,k,"f").button.mouseover),x(this,w,"f").removeEventListener("mouseover",x(this,k,"f").button.mouseover),x(this,w,"f").removeEventListener("mouseout",x(this,k,"f").button.mouseout),x(this,y,"f").getElement().removeEventListener("controlshidden",x(this,k,"f").button.mouseout),x(this,w,"f").remove()),x(this,y,"f").getElement().removeEventListener("timeupdate",x(this,k,"f").media.timeupdate),x(this,E,"f").remove(),x(this,_,"f").remove())}addSettings(){const{detachMenus:e,labels:t}=x(this,y,"f").getOptions();if(e||x(this,L,"f").length<=1)return{};const i=this._formatMenuItems();return i.length>2?{className:"op-subtitles__option",default:x(this,S,"f")||"off",key:"captions",name:p((null==t?void 0:t.captions)||""),subitems:i}:{}}_getCuesFromText(e){const t=e.split(/\r?\n/),i=[],s=/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#/%?=~_|!:,.;]*[-A-Z0-9+&@#/%=~_|])/gi;let n="^((?:[0-9]{1,2}:)?[0-9]{2}:[0-9]{2}([,.][0-9]{1,3})?) --\x3e ";n+="((?:[0-9]{1,2}:)?[0-9]{2}:[0-9]{2}([,.][0-9]{3})?)(.*?)$";const a=new RegExp("^((?:[0-9]{1,2}:)?[0-9]{2}:[0-9]{2}([,.][0-9]{1,3})?) --\x3e ((?:[0-9]{1,2}:)?[0-9]{2}:[0-9]{2}([,.][0-9]{3})?)(.*?)$");let o;for(let e=0,n=t.length;e<n;e++){const n=a.exec(t[e]);if(n&&e<t.length){e-1>=0&&""!==t[e-1]&&(o=t[e-1]),e++;let a=t[e];for(e++;""!==t[e]&&e<t.length;)a=`${a}\n${t[e]}`,e++;a=a.trim().replace(s,"<a href='$1' target='_blank'>$1</a>");const r=b(n[1]);i.push({endTime:b(n[3]),identifier:o||"",settings:m(n[5])?JSON.parse(n[5]):{},startTime:0===r?.2:r,text:a})}o=""}return i}_getNativeCues(e){const t=[],i=e.cues;return Object.keys(i).forEach((e=>{const s=parseInt(e,10),n=i[s];t.push({endTime:n.endTime,identifier:n.id,settings:{},startTime:n.startTime,text:n.text})})),t}_displayCaptions(){if(!x(this,_,"f")||!x(this,C,"f")||void 0===x(this,C,"f").cues)return;const e=x(this,_,"f").querySelector("span");e&&(e.innerHTML=""),x(this,y,"f").getElement().addEventListener("timeupdate",x(this,k,"f").media.timeupdate,l)}_hideCaptions(){x(this,_,"f").classList.remove("op-captions--on"),x(this,C,"f")||(x(this,E,"f").classList.remove("op-controls__captions--on"),x(this,E,"f").setAttribute("data-active-captions","off"))}_search(e,t){let i=0,s=e.length-1;for(;i<=s;){const n=i+s>>1,a=e[n].startTime,o=e[n].endTime;if(t>=a&&t<o)return n;a<t?i=n+1:a>t&&(s=n-1)}return-1}_prepareTrack(e,t,i){let s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];x(this,T,"f")[t]=i,x(this,L,"f")[e].mode="disabled",s&&(W(this,S,t,"f"),x(this,E,"f").classList.add("op-controls__captions--on"),x(this,E,"f").setAttribute("data-active-captions",t),W(this,C,Array.from(x(this,L,"f")).filter((e=>e.language===x(this,S,"f"))).pop(),"f"),this._displayCaptions(),x(this,y,"f").getContainer().classList.contains("op-captions--detected")||x(this,y,"f").getContainer().classList.add("op-captions--detected"))}_formatMenuItems(){const{labels:e}=x(this,y,"f").getOptions();let t=[{key:"off",label:p((null==e?void 0:e.off)||"")}];for(let i=0,s=x(this,L,"f").length;i<s;i++){const s=x(this,L,"f")[i],n=(null==e?void 0:e.lang)?p(e.lang[s.language]):null;t=t.filter((e=>e.key!==s.language)),t.push({key:s.language,label:n||x(this,L,"f")[i].label})}return t}}y=new WeakMap,E=new WeakMap,_=new WeakMap,w=new WeakMap,k=new WeakMap,A=new WeakMap,L=new WeakMap,T=new WeakMap,M=new WeakMap,C=new WeakMap,S=new WeakMap,P=new WeakMap,O=new WeakMap;var R,N,I,j,D,F,B,q,H,K=function(e,t,i,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(e,i):n?n.value=i:t.set(e,i),i},z=function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)};class V{constructor(e,t,i){R.set(this,void 0),N.set(this,void 0),I.set(this,void 0),j.set(this,[]),D.set(this,0),F.set(this,0),B.set(this,void 0),q.set(this,void 0),H.set(this,void 0),K(this,R,e,"f"),K(this,q,t,"f"),K(this,H,i,"f"),K(this,N,document.body.classList.contains("op-fullscreen__on"),"f");const s=document;this.fullScreenEnabled=!!(s.fullscreenEnabled||s.mozFullScreenEnabled||s.msFullscreenEnabled||s.webkitSupportsFullscreen||s.webkitFullscreenEnabled||document.createElement("video").webkitRequestFullScreen),this._enterSpaceKeyEvent=this._enterSpaceKeyEvent.bind(this),this._resize=this._resize.bind(this),this._fullscreenChange=this._fullscreenChange.bind(this),this._setFullscreen=this._setFullscreen.bind(this),this._unsetFullscreen=this._unsetFullscreen.bind(this),K(this,j,["fullscreenchange","mozfullscreenchange","webkitfullscreenchange","msfullscreenchange"],"f"),z(this,j,"f").forEach((e=>{document.addEventListener(e,this._fullscreenChange,l)})),this._setFullscreenData(!1),z(this,R,"f").getContainer().addEventListener("keydown",this._enterSpaceKeyEvent,l),n()&&(z(this,R,"f").getElement().addEventListener("webkitbeginfullscreen",this._setFullscreen,l),z(this,R,"f").getElement().addEventListener("webkitendfullscreen",this._unsetFullscreen,l))}create(){const{labels:e}=z(this,R,"f").getOptions(),t=p((null==e?void 0:e.fullscreen)||"");K(this,I,document.createElement("button"),"f"),z(this,I,"f").type="button",z(this,I,"f").className=`op-controls__fullscreen op-control__${z(this,q,"f")}`,z(this,I,"f").tabIndex=0,z(this,I,"f").title=t,z(this,I,"f").setAttribute("aria-controls",z(this,R,"f").id),z(this,I,"f").setAttribute("aria-pressed","false"),z(this,I,"f").setAttribute("aria-label",t),K(this,B,(()=>{z(this,I,"f").setAttribute("aria-pressed","true"),this.toggleFullscreen()}),"f"),K(this,B,z(this,B,"f").bind(this),"f"),z(this,I,"f").addEventListener("click",z(this,B,"f"),l),z(this,R,"f").getControls().getLayer(z(this,H,"f")).appendChild(z(this,I,"f"))}destroy(){z(this,R,"f").getContainer().removeEventListener("keydown",this._enterSpaceKeyEvent),z(this,j,"f").forEach((e=>{document.removeEventListener(e,this._fullscreenChange)})),n()&&(z(this,R,"f").getElement().removeEventListener("webkitbeginfullscreen",this._setFullscreen),z(this,R,"f").getElement().removeEventListener("webkitendfullscreen",this._unsetFullscreen)),z(this,I,"f").removeEventListener("click",z(this,B,"f")),z(this,I,"f").remove()}toggleFullscreen(){if(z(this,N,"f")){const e=document;e.exitFullscreen?e.exitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.webkitCancelFullScreen?e.webkitCancelFullScreen():e.msExitFullscreen?e.msExitFullscreen():this._fullscreenChange(),document.body.classList.remove("op-fullscreen__on")}else{const e=z(this,R,"f").getElement();K(this,D,window.screen.width,"f"),K(this,F,window.screen.height,"f"),e.requestFullscreen?e.parentElement.requestFullscreen():e.mozRequestFullScreen?e.parentElement.mozRequestFullScreen():e.webkitRequestFullScreen?e.parentElement.webkitRequestFullScreen():e.msRequestFullscreen?e.parentElement.msRequestFullscreen():e.webkitEnterFullscreen?e.webkitEnterFullscreen():this._fullscreenChange(),document.body.classList.add("op-fullscreen__on")}if("undefined"!=typeof window&&(o()||n())){const{screen:e}=window;e.orientation&&!z(this,N,"f")&&e.orientation.lock("landscape")}}_fullscreenChange(){const e=z(this,N,"f")?void 0:z(this,D,"f"),t=z(this,N,"f")?void 0:z(this,F,"f");this._setFullscreenData(!z(this,N,"f")),z(this,R,"f").isAd()&&z(this,R,"f").getAd().resizeAds(e,t),K(this,N,!z(this,N,"f"),"f"),z(this,N,"f")?document.body.classList.add("op-fullscreen__on"):document.body.classList.remove("op-fullscreen__on"),this._resize(e,t)}_setFullscreenData(e){z(this,R,"f").getContainer().setAttribute("data-fullscreen",(!!e).toString()),z(this,I,"f")&&(e?z(this,I,"f").classList.add("op-controls__fullscreen--out"):z(this,I,"f").classList.remove("op-controls__fullscreen--out"))}_resize(e,t){const i=z(this,R,"f").getContainer(),s=z(this,R,"f").getElement(),n=z(this,R,"f").getOptions();let a="";if(e)i.style.width="100%",s.style.width="100%";else if(n.width){a+=`width: ${"number"==typeof n.width?`${n.width}px`:n.width} !important;`,s.style.removeProperty("width")}else s.style.removeProperty("width"),i.style.removeProperty("width");if(t)s.style.height="100%",i.style.height="100%";else if(n.height){a+=`height: ${"number"==typeof n.height?`${n.height}px`:n.height} !important;`,s.style.removeProperty("height")}else s.style.removeProperty("height"),i.style.removeProperty("height");a&&i.setAttribute("style",a)}_enterSpaceKeyEvent(e){var t;const i=e.which||e.keyCode||0;!(null===(t=null===document||void 0===document?void 0:document.activeElement)||void 0===t?void 0:t.classList.contains("op-controls__fullscreen"))||13!==i&&32!==i||(this.toggleFullscreen(),e.preventDefault(),e.stopPropagation())}_setFullscreen(){K(this,N,!0,"f"),this._setFullscreenData(!0),document.body.classList.add("op-fullscreen__on")}_unsetFullscreen(){K(this,N,!1,"f"),this._setFullscreenData(!1),document.body.classList.remove("op-fullscreen__on")}}R=new WeakMap,N=new WeakMap,I=new WeakMap,j=new WeakMap,D=new WeakMap,F=new WeakMap,B=new WeakMap,q=new WeakMap,H=new WeakMap;var U=function(e,t,i,s){return new(i||(i=Promise))((function(n,a){function o(e){try{l(s.next(e))}catch(e){a(e)}}function r(e){try{l(s.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,r)}l((s=s.apply(e,t||[])).next())}))};const G=e=>/\.m3u8$/i.test(e.src)||["application/x-mpegURL","application/vnd.apple.mpegurl"].includes(e.type),J=(e,t)=>{const i=(e=>{const t=((((e.split("?")[0]||"").split("\\")||[]).pop()||"").split("/")||[]).pop()||"";return t.includes(".")?t.substring(t.lastIndexOf(".")+1):""})(e);if(!i)return f(t)?"audio/mp3":"video/mp4";switch(i){case"m3u8":case"m3u":return"application/x-mpegURL";case"mpd":return"application/dash+xml";case"mp4":return f(t)?"audio/mp4":"video/mp4";case"mp3":return"audio/mp3";case"webm":return f(t)?"audio/webm":"video/webm";case"ogg":return f(t)?"audio/ogg":"video/ogg";case"ogv":return"video/ogg";case"oga":return"audio/ogg";case"3gp":return"audio/3gpp";case"wav":return"audio/wav";case"aac":return"audio/aac";case"flac":return"audio/flac";default:return f(t)?"audio/mp3":"video/mp4"}};var Q,X,Y,Z,ee,te,ie,se,ne=function(e,t,i,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(e,i):n?n.value=i:t.set(e,i),i},ae=function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)};class oe{constructor(e,t,i){Q.set(this,void 0),X.set(this,void 0),Y.set(this,void 0),Z.set(this,{button:{},global:{},media:{}}),ee.set(this,[]),te.set(this,""),ie.set(this,void 0),se.set(this,void 0),ne(this,Q,e,"f"),ne(this,ie,t,"f"),ne(this,se,i,"f")}create(){var e,t,s;const{labels:n,defaultLevel:r,detachMenus:h}=ae(this,Q,"f").getOptions(),d=null!==r?parseInt(r||"0",10):ae(this,Q,"f").getMedia().level;ne(this,te,`${d}`,"f");const f=this._formatMenuItems(),c=f.length?f.find((e=>e.key===ae(this,te,"f"))):null,u=c?c.label:p((null==n?void 0:n.auto)||""),m=p((null==n?void 0:n.mediaLevels)||"");let g=!1;ne(this,X,document.createElement("button"),"f"),ae(this,X,"f").className=`op-controls__levels op-control__${ae(this,ie,"f")}`,ae(this,X,"f").tabIndex=0,ae(this,X,"f").title=m,ae(this,X,"f").setAttribute("aria-controls",ae(this,Q,"f").id),ae(this,X,"f").setAttribute("aria-label",m),ae(this,X,"f").setAttribute("data-active-level",ae(this,te,"f")),ae(this,X,"f").innerHTML=`<span>${u}</span>`;const b=()=>{ae(this,ee,"f").length?g||(ae(this,Q,"f").getMedia().level=d,g=!0):(this._gatherLevels(),setTimeout((()=>{ae(this,Q,"f").getMedia().level=d;const e=v("controlschanged");ae(this,Q,"f").getElement().dispatchEvent(e)}),0))};ae(this,Z,"f").media.loadedmetadata=b.bind(this),ae(this,Z,"f").media.manifestLoaded=b.bind(this),ae(this,Z,"f").media.hlsManifestParsed=b.bind(this),h&&(this._buildMenu(),ae(this,Z,"f").button.click=()=>{if(h){const e=ae(this,Q,"f").getContainer().querySelectorAll(".op-settings");for(let t=0,i=e.length;t<i;++t)e[t]!==ae(this,Y,"f")&&e[t].setAttribute("aria-hidden","true");"true"===ae(this,Y,"f").getAttribute("aria-hidden")?ae(this,Y,"f").setAttribute("aria-hidden","false"):ae(this,Y,"f").setAttribute("aria-hidden","true")}},ae(this,Z,"f").button.mouseover=()=>{if(!a()&&!o()){const e=ae(this,Q,"f").getContainer().querySelectorAll(".op-settings");for(let t=0,i=e.length;t<i;++t)e[t]!==ae(this,Y,"f")&&e[t].setAttribute("aria-hidden","true");"true"===ae(this,Y,"f").getAttribute("aria-hidden")&&ae(this,Y,"f").setAttribute("aria-hidden","false")}},ae(this,Z,"f").button.mouseout=()=>{if(!a()&&!o()){const e=ae(this,Q,"f").getContainer().querySelectorAll(".op-settings");for(let t=0,i=e.length;t<i;++t)e[t].setAttribute("aria-hidden","true");"false"===ae(this,Y,"f").getAttribute("aria-hidden")&&ae(this,Y,"f").setAttribute("aria-hidden","true")}},ae(this,X,"f").addEventListener("click",ae(this,Z,"f").button.click,l),ae(this,X,"f").addEventListener("mouseover",ae(this,Z,"f").button.mouseover,l),ae(this,Y,"f").addEventListener("mouseover",ae(this,Z,"f").button.mouseover,l),ae(this,Y,"f").addEventListener("mouseout",ae(this,Z,"f").button.mouseout,l),ae(this,Q,"f").getElement().addEventListener("controlshidden",ae(this,Z,"f").button.mouseout,l)),ae(this,Z,"f").global.click=e=>{const t=e.target,{currentTime:i}=ae(this,Q,"f").getMedia(),s=ae(this,Q,"f").getMedia().paused;if(t.closest(`#${ae(this,Q,"f").id}`)&&t.classList.contains("op-levels__option")){const n=t.getAttribute("data-value"),a=n?n.replace("levels-",""):"-1";if(ne(this,te,`${a}`,"f"),h){ae(this,X,"f").setAttribute("data-active-level",`${a}`),ae(this,X,"f").innerHTML=`<span>${p(t.innerText)}</span>`;const e=t.parentElement&&t.parentElement.parentElement?t.parentElement.parentElement.querySelectorAll(".op-settings__submenu-item"):[];for(let t=0,i=e.length;t<i;++t)e[t].setAttribute("aria-checked","false");t.parentElement&&t.parentElement.setAttribute("aria-checked","true"),ae(this,Y,"f").setAttribute("aria-hidden","false")}ae(this,Q,"f").getMedia().level=a,ae(this,Q,"f").getMedia().currentTime=i,s||ae(this,Q,"f").play();const o=v("levelchanged",{detail:{label:t.innerText.trim(),level:a}});ae(this,Q,"f").getElement().dispatchEvent(o),e.preventDefault(),e.stopPropagation()}};const y=(null===(e=i())||void 0===e?void 0:e.connection)||(null===(t=i())||void 0===t?void 0:t.mozConnection)||(null===(s=i())||void 0===s?void 0:s.webkitConnection);ae(this,Z,"f").global.connection=()=>{const e=ae(this,Q,"f").getMedia().current;if(!G(e)){const e=(null==y?void 0:y.effectiveType)||"",t=ae(this,ee,"f").map((e=>Object.assign(Object.assign({},e),{resolution:parseInt(e.label.replace("p",""),10)})));let i=t.find((e=>e.resolution<360));"4g"===e?i=t.find((e=>e.resolution>=720)):"3g"===e&&(i=t.find((e=>e.resolution>=360&&e.resolution<720))),i&&(ae(this,Q,"f").pause(),ae(this,Q,"f").getMedia().level=i.id,ae(this,Q,"f").play())}},Object.keys(ae(this,Z,"f").media).forEach((e=>{ae(this,Q,"f").getElement().addEventListener(e,ae(this,Z,"f").media[e],l)})),document.addEventListener("click",ae(this,Z,"f").global.click,l),y&&y.addEventListener("change",ae(this,Z,"f").global.connection,l)}destroy(){var e,t,s;const{detachMenus:n}=ae(this,Q,"f").getOptions(),a=(null===(e=i())||void 0===e?void 0:e.connection)||(null===(t=i())||void 0===t?void 0:t.mozConnection)||(null===(s=i())||void 0===s?void 0:s.webkitConnection);Object.keys(ae(this,Z,"f").media).forEach((e=>{ae(this,Q,"f").getElement().removeEventListener(e,ae(this,Z,"f").media[e])})),document.removeEventListener("click",ae(this,Z,"f").global.click),a&&a.removeEventListener("change",ae(this,Z,"f").global.connection),n&&(ae(this,X,"f").removeEventListener("click",ae(this,Z,"f").button.click),ae(this,X,"f").remove(),ae(this,X,"f").removeEventListener("mouseover",ae(this,Z,"f").button.mouseover),ae(this,Y,"f").removeEventListener("mouseover",ae(this,Z,"f").button.mouseover),ae(this,Y,"f").removeEventListener("mouseout",ae(this,Z,"f").button.mouseout),ae(this,Q,"f").getElement().removeEventListener("controlshidden",ae(this,Z,"f").button.mouseout),ae(this,Y,"f").remove())}addSettings(){const{labels:e,detachMenus:t}=ae(this,Q,"f").getOptions();if(t)return{};const i=this._formatMenuItems();return i.length>2?{className:"op-levels__option",default:ae(this,te,"f")||"-1",key:"levels",name:p((null==e?void 0:e.levels)||""),subitems:i}:{}}_formatMenuItems(){const{labels:e}=ae(this,Q,"f").getOptions(),t=this._gatherLevels(),i=t.length;let s=i?[{key:"-1",label:p((null==e?void 0:e.auto)||"")}]:[];for(let e=0;e<i;e++){const i=t[e];s=s.filter((e=>e.key!==i.id)),s.push({key:i.id,label:i.label})}return s.reduce(((e,t)=>e.find((e=>e.label===t.label))?e:e.concat([t])),[]).sort(((e,t)=>parseInt((null==e?void 0:e.label)||"",10)>parseInt((null==t?void 0:t.label)||"",10)?1:-1))}_getResolutionsLabel(e){const{labels:t}=ae(this,Q,"f").getOptions();return e>=4320?"8K":e>=2160?"4K":e>=1440?"1440p":e>=1080?"1080p":e>=720?"720p":e>=480?"480p":e>=360?"360p":e>=240?"240p":e>=144?"144p":p((null==t?void 0:t.auto)||"")}_gatherLevels(){return ae(this,ee,"f").length||ae(this,Q,"f").getMedia().levels.forEach((e=>{ae(this,ee,"f").push(Object.assign(Object.assign({},e),{label:e.label||this._getResolutionsLabel(e.height)}))})),ae(this,ee,"f")}_buildMenu(){const{detachMenus:e}=ae(this,Q,"f").getOptions();if(e){ae(this,X,"f").classList.add("op-control--no-hover"),ne(this,Y,document.createElement("div"),"f"),ae(this,Y,"f").className="op-settings op-levels__menu",ae(this,Y,"f").setAttribute("aria-hidden","true");const e="op-levels__option",t=`<div class="op-settings__menu" role="menu" id="menu-item-levels">\n                ${this._formatMenuItems().map((t=>`\n                <div class="op-settings__submenu-item" tabindex="0" role="menuitemradio"\n                    aria-checked="${ae(this,te,"f")===t.key?"true":"false"}">\n                    <div class="op-settings__submenu-label ${e||""}" data-value="levels-${t.key}">${t.label}</div>\n                </div>`)).join("")}\n            </div>`;ae(this,Y,"f").innerHTML=t;const i=document.createElement("div");i.className=`op-controls__container op-control__${ae(this,ie,"f")}`,i.appendChild(ae(this,X,"f")),i.appendChild(ae(this,Y,"f")),ae(this,Q,"f").getControls().getLayer(ae(this,se,"f")).appendChild(i)}}}Q=new WeakMap,X=new WeakMap,Y=new WeakMap,Z=new WeakMap,ee=new WeakMap,te=new WeakMap,ie=new WeakMap,se=new WeakMap;var re,le,he,de,fe,ce=function(e,t,i,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(e,i):n?n.value=i:t.set(e,i),i},ue=function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)};class pe{constructor(e,t,i){re.set(this,void 0),le.set(this,void 0),he.set(this,{controls:{},media:{}}),de.set(this,void 0),fe.set(this,void 0),ce(this,re,e,"f"),ce(this,de,t,"f"),ce(this,fe,i,"f"),this._enterSpaceKeyEvent=this._enterSpaceKeyEvent.bind(this)}create(){var e;const{labels:t}=ue(this,re,"f").getOptions(),i=p((null==t?void 0:t.play)||""),s=p((null==t?void 0:t.pause)||"");ce(this,le,document.createElement("button"),"f"),ue(this,le,"f").type="button",ue(this,le,"f").className=`op-controls__playpause op-control__${ue(this,de,"f")}`,ue(this,le,"f").tabIndex=0,ue(this,le,"f").title=i,ue(this,le,"f").setAttribute("aria-controls",ue(this,re,"f").id),ue(this,le,"f").setAttribute("aria-pressed","false"),ue(this,le,"f").setAttribute("aria-label",i),ue(this,re,"f").getControls().getLayer(ue(this,fe,"f")).appendChild(ue(this,le,"f")),ue(this,he,"f").button=e=>{ue(this,le,"f").setAttribute("aria-pressed","true");const t=ue(this,re,"f").activeElement();t.paused||t.ended?(t.play(),ue(this,he,"f").media.play()):(t.pause(),ue(this,he,"f").media.pause()),e.preventDefault(),e.stopPropagation()};const n=f(ue(this,re,"f").getElement());ue(this,he,"f").media.play=()=>{var e;ue(this,re,"f").activeElement().ended?(ue(this,re,"f").isMedia()?ue(this,le,"f").classList.add("op-controls__playpause--replay"):ue(this,le,"f").classList.add("op-controls__playpause--pause"),ue(this,le,"f").title=i,ue(this,le,"f").setAttribute("aria-label",i)):(ue(this,le,"f").classList.remove("op-controls__playpause--replay"),ue(this,le,"f").classList.add("op-controls__playpause--pause"),ue(this,le,"f").title=s,ue(this,le,"f").setAttribute("aria-label",s),(null===(e=ue(this,re,"f").getOptions())||void 0===e?void 0:e.pauseOthers)&&Object.keys(Ji.instances).forEach((e=>{if(e!==ue(this,re,"f").id){Ji.instances[e].activeElement().pause()}})))},ue(this,he,"f").media.loadedmetadata=()=>{ue(this,le,"f").classList.contains("op-controls__playpause--pause")&&(ue(this,le,"f").classList.remove("op-controls__playpause--replay"),ue(this,le,"f").classList.remove("op-controls__playpause--pause"),ue(this,le,"f").title=i,ue(this,le,"f").setAttribute("aria-label",i))},ue(this,he,"f").media.playing=()=>{ue(this,le,"f").classList.contains("op-controls__playpause--pause")||(ue(this,le,"f").classList.remove("op-controls__playpause--replay"),ue(this,le,"f").classList.add("op-controls__playpause--pause"),ue(this,le,"f").title=s,ue(this,le,"f").setAttribute("aria-label",s))},ue(this,he,"f").media.pause=()=>{ue(this,le,"f").classList.remove("op-controls__playpause--pause"),ue(this,le,"f").title=i,ue(this,le,"f").setAttribute("aria-label",i)},ue(this,he,"f").media.ended=()=>{ue(this,re,"f").activeElement().ended&&ue(this,re,"f").isMedia()||ue(this,re,"f").getElement().currentTime>=ue(this,re,"f").getElement().duration||ue(this,re,"f").getElement().currentTime<=0?(ue(this,le,"f").classList.add("op-controls__playpause--replay"),ue(this,le,"f").classList.remove("op-controls__playpause--pause")):(ue(this,le,"f").classList.remove("op-controls__playpause--replay"),ue(this,le,"f").classList.add("op-controls__playpause--pause")),ue(this,le,"f").title=i,ue(this,le,"f").setAttribute("aria-label",i)},ue(this,he,"f").media.adsmediaended=()=>{ue(this,le,"f").classList.remove("op-controls__playpause--replay"),ue(this,le,"f").classList.add("op-controls__playpause--pause"),ue(this,le,"f").title=s,ue(this,le,"f").setAttribute("aria-label",s)},ue(this,he,"f").media.playererror=()=>{if(n){ue(this,re,"f").activeElement().pause()}};const a=ue(this,re,"f").getElement();ue(this,he,"f").controls.controlschanged=()=>{if(!ue(this,re,"f").activeElement().paused){const e=v("playing");a.dispatchEvent(e)}},Object.keys(ue(this,he,"f").media).forEach((e=>{a.addEventListener(e,ue(this,he,"f").media[e],l)})),(null===(e=ue(this,re,"f").getOptions().media)||void 0===e?void 0:e.pauseOnClick)&&a.addEventListener("click",ue(this,he,"f").button,l),ue(this,re,"f").getControls().getContainer().addEventListener("controlschanged",ue(this,he,"f").controls.controlschanged,l),ue(this,re,"f").getContainer().addEventListener("keydown",this._enterSpaceKeyEvent,l),ue(this,le,"f").addEventListener("click",ue(this,he,"f").button,l)}destroy(){var e;Object.keys(ue(this,he,"f").media).forEach((e=>{ue(this,re,"f").getElement().removeEventListener(e,ue(this,he,"f").media[e])})),(null===(e=ue(this,re,"f").getOptions().media)||void 0===e?void 0:e.pauseOnClick)&&ue(this,re,"f").getElement().removeEventListener("click",ue(this,he,"f").button),ue(this,re,"f").getControls().getContainer().removeEventListener("controlschanged",ue(this,he,"f").controls.controlschanged),ue(this,re,"f").getContainer().removeEventListener("keydown",this._enterSpaceKeyEvent),ue(this,le,"f").removeEventListener("click",ue(this,he,"f").button),ue(this,le,"f").remove()}_enterSpaceKeyEvent(e){var t;const i=e.which||e.keyCode||0;!(null===(t=null===document||void 0===document?void 0:document.activeElement)||void 0===t?void 0:t.classList.contains("op-controls__playpause"))||13!==i&&32!==i||ue(this,he,"f").button(e)}}re=new WeakMap,le=new WeakMap,he=new WeakMap,de=new WeakMap,fe=new WeakMap;var me,ve,ge,be,ye,Ee,_e,we,ke,Ae,Le=function(e,t,i,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(e,i):n?n.value=i:t.set(e,i),i},Te=function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)};class Me{constructor(e,t,i){me.set(this,void 0),ve.set(this,void 0),ge.set(this,void 0),be.set(this,void 0),ye.set(this,void 0),Ee.set(this,void 0),_e.set(this,{container:{},controls:{},global:{},media:{},slider:{}}),we.set(this,!1),ke.set(this,void 0),Ae.set(this,void 0),Le(this,me,e,"f"),Le(this,ke,t,"f"),Le(this,Ae,i,"f"),this._enterSpaceKeyEvent=this._enterSpaceKeyEvent.bind(this)}create(){var e;const{labels:t,progress:i}=Te(this,me,"f").getOptions();Le(this,ve,document.createElement("div"),"f"),Te(this,ve,"f").className=`op-controls__progress op-control__${Te(this,ke,"f")}`,Te(this,ve,"f").tabIndex=0,Te(this,ve,"f").setAttribute("aria-label",p((null==t?void 0:t.progressSlider)||"")),Te(this,ve,"f").setAttribute("aria-valuemin","0"),Le(this,ge,document.createElement("input"),"f"),Te(this,ge,"f").type="range",Te(this,ge,"f").className="op-controls__progress--seek",Te(this,ge,"f").tabIndex=-1,Te(this,ge,"f").setAttribute("min","0"),Te(this,ge,"f").setAttribute("max","0"),Te(this,ge,"f").setAttribute("step","0.1"),Te(this,ge,"f").value="0",Te(this,ge,"f").setAttribute("aria-label",p((null==t?void 0:t.progressRail)||"")),Te(this,ge,"f").setAttribute("role","slider"),Le(this,be,document.createElement("progress"),"f"),Te(this,be,"f").className="op-controls__progress--buffer",Te(this,be,"f").setAttribute("max","100"),Te(this,be,"f").value=0,Le(this,ye,document.createElement("progress"),"f"),Te(this,ye,"f").className="op-controls__progress--played",Te(this,ye,"f").setAttribute("max","100"),Te(this,ye,"f").setAttribute("role","presentation"),Te(this,ye,"f").value=0,Te(this,ve,"f").appendChild(Te(this,ge,"f")),Te(this,ve,"f").appendChild(Te(this,ye,"f")),Te(this,ve,"f").appendChild(Te(this,be,"f")),a()||o()||(Le(this,Ee,document.createElement("span"),"f"),Te(this,Ee,"f").className="op-controls__tooltip",Te(this,Ee,"f").tabIndex=-1,Te(this,Ee,"f").innerHTML="00:00",Te(this,ve,"f").appendChild(Te(this,Ee,"f")));const s=()=>{var e;Te(this,ge,"f").classList.contains("error")&&Te(this,ge,"f").classList.remove("error");const t=Te(this,me,"f").activeElement();if(t.duration===1/0||Te(this,me,"f").getElement().getAttribute("op-live__enabled")||Te(this,me,"f").getElement().getAttribute("data-op-dvr__enabled"))Te(this,me,"f").getElement().getAttribute("data-op-dvr__enabled")?(Te(this,ge,"f").setAttribute("max","1"),Te(this,ge,"f").value="1",Te(this,ge,"f").style.backgroundSize="100% 100%",Te(this,ye,"f").value=1,Te(this,ve,"f").setAttribute("aria-valuemax","1"),Te(this,ve,"f").setAttribute("aria-hidden","false")):(null===(e=Te(this,me,"f").getOptions().live)||void 0===e?void 0:e.showProgress)||Te(this,ve,"f").setAttribute("aria-hidden","true");else{Te(this,ge,"f").setAttribute("max",`${t.duration}`);const e=Te(this,me,"f").isMedia()?t.currentTime:t.duration-t.currentTime;Te(this,ge,"f").value=e.toString(),Te(this,ve,"f").setAttribute("aria-valuemax",t.duration.toString())}};let n=0;const r=(null===(e=Te(this,me,"f").getOptions().progress)||void 0===e?void 0:e.duration)||0,h=f(Te(this,me,"f").getElement());Te(this,_e,"f").media.loadedmetadata=s.bind(this),Te(this,_e,"f").controls.controlschanged=s.bind(this),Te(this,_e,"f").media.progress=e=>{var t;const i=e.target;if(i.duration===1/0||Te(this,me,"f").getElement().getAttribute("op-live__enabled"))Te(this,me,"f").getElement().getAttribute("data-op-dvr__enabled")||"false"!==Te(this,ve,"f").getAttribute("aria-hidden")||(null===(t=Te(this,me,"f").getOptions().live)||void 0===t?void 0:t.showProgress)||Te(this,ve,"f").setAttribute("aria-hidden","true");else if(i.duration>0)for(let e=0,t=i.buffered.length;e<t;e++)if(i.buffered.start(i.buffered.length-1-e)<i.currentTime){Te(this,be,"f").value=i.buffered.end(i.buffered.length-1-e)/i.duration*100;break}},Te(this,_e,"f").media.waiting=()=>{h&&!Te(this,ge,"f").classList.contains("loading")&&Te(this,ge,"f").classList.add("loading"),h&&Te(this,ge,"f").classList.contains("error")&&Te(this,ge,"f").classList.remove("error")},Te(this,_e,"f").media.playererror=()=>{h&&!Te(this,ge,"f").classList.contains("error")&&Te(this,ge,"f").classList.add("error"),h&&Te(this,ge,"f").classList.contains("loading")&&Te(this,ge,"f").classList.remove("loading")},Te(this,_e,"f").media.pause=()=>{const e=Te(this,me,"f").activeElement();if(e.duration!==1/0&&!Te(this,me,"f").getElement().getAttribute("op-live__enabled")){const t=e.currentTime;Te(this,ve,"f").setAttribute("aria-valuenow",t.toString()),Te(this,ve,"f").setAttribute("aria-valuetext",g(t))}},Te(this,_e,"f").media.play=()=>{h&&Te(this,ge,"f").classList.contains("loading")&&Te(this,ge,"f").classList.remove("loading"),h&&Te(this,ge,"f").classList.contains("error")&&Te(this,ge,"f").classList.remove("error"),Te(this,me,"f").activeElement().duration===1/0||Te(this,me,"f").getElement().getAttribute("op-live__enabled")||(Te(this,ve,"f").removeAttribute("aria-valuenow"),Te(this,ve,"f").removeAttribute("aria-valuetext"))},Te(this,_e,"f").media.playing=()=>{h&&Te(this,ge,"f").classList.contains("loading")&&Te(this,ge,"f").classList.remove("loading"),h&&Te(this,ge,"f").classList.contains("error")&&Te(this,ge,"f").classList.remove("error")},Te(this,_e,"f").media.timeupdate=()=>{var e;const t=Te(this,me,"f").activeElement();if(t.duration===1/0||Te(this,me,"f").getElement().getAttribute("op-live__enabled")&&!Te(this,me,"f").getElement().getAttribute("data-op-dvr__enabled"))Te(this,me,"f").getElement().getAttribute("data-op-dvr__enabled")||"false"!==Te(this,ve,"f").getAttribute("aria-hidden")||(null===(e=Te(this,me,"f").getOptions().live)||void 0===e?void 0:e.showProgress)||Te(this,ve,"f").setAttribute("aria-hidden","true");else{Te(this,ge,"f").getAttribute("max")&&"0"!==Te(this,ge,"f").getAttribute("max")&&parseFloat(Te(this,ge,"f").getAttribute("max")||"-1")===t.duration||(Te(this,ge,"f").setAttribute("max",`${t.duration}`),Te(this,ve,"f").setAttribute("aria-hidden","false"));const e=t.duration-t.currentTime+1>=100?100:t.duration-t.currentTime+1,i=Te(this,me,"f").isMedia()?t.currentTime:e,s=parseFloat(Te(this,ge,"f").min),a=parseFloat(Te(this,ge,"f").max);Te(this,ge,"f").value=i.toString(),Te(this,ge,"f").style.backgroundSize=100*(i-s)/(a-s)+"% 100%",Te(this,ye,"f").value=t.duration<=0||Number.isNaN(t.duration)||!Number.isFinite(t.duration)?r:i/t.duration*100,Te(this,me,"f").getElement().getAttribute("data-op-dvr__enabled")&&Math.floor(Te(this,ye,"f").value)>=99&&(n=t.currentTime,Te(this,ve,"f").setAttribute("aria-hidden","false"))}},Te(this,_e,"f").media.durationchange=()=>{const e=Te(this,me,"f").activeElement(),t=Te(this,me,"f").isMedia()?e.currentTime:e.duration-e.currentTime;Te(this,ge,"f").setAttribute("max",`${e.duration}`),Te(this,ve,"f").setAttribute("aria-valuemax",e.duration.toString()),Te(this,ye,"f").value=e.duration<=0||Number.isNaN(e.duration)||!Number.isFinite(e.duration)?r:t/e.duration*100},Te(this,_e,"f").media.ended=()=>{Te(this,ge,"f").style.backgroundSize="0% 100%",Te(this,ge,"f").setAttribute("max","0"),Te(this,be,"f").value=0,Te(this,ye,"f").value=0};const d=e=>{const t=Te(this,me,"f").activeElement(),s=e.target,a=parseFloat(s.value);if(Te(this,ge,"f").classList.contains("op-progress--pressed")||a<t.currentTime&&!(null==i?void 0:i.allowRewind)||a>t.currentTime&&!(null==i?void 0:i.allowSkip))return void(Te(this,ge,"f").value=t.currentTime.toString());Te(this,ge,"f").classList.add(".op-progress--pressed");const o=parseFloat(s.min),l=parseFloat(s.max),h=parseFloat(s.value);Te(this,ge,"f").style.backgroundSize=100*(h-o)/(l-o)+"% 100%",Te(this,ye,"f").value=t.duration<=0||Number.isNaN(t.duration)||!Number.isFinite(t.duration)?r:h/t.duration*100,Te(this,me,"f").getElement().getAttribute("data-op-dvr__enabled")?t.currentTime=Math.round(Te(this,ye,"f").value)>=99?n:h:t.currentTime=h,Te(this,ge,"f").classList.remove(".op-progress--pressed")},c=()=>{const e=Te(this,me,"f").activeElement();!0===Te(this,we,"f")&&Te(this,me,"f").isMedia()&&e.paused&&(e.play(),Le(this,we,!1,"f"))};Te(this,_e,"f").slider.input=d.bind(this),Te(this,_e,"f").slider.change=d.bind(this),Te(this,_e,"f").slider.mousedown=(e=>{const t=Te(this,me,"f").activeElement(),s=e.which||e.keyCode||0,n=Te(this,ge,"f"),a=Math.round(Number(n.value)),o=Math.round(t.currentTime);!(a<o&&(null==i?void 0:i.allowRewind)||a>=o&&(null==i?void 0:i.allowSkip))||1!==s&&0!==s||!Te(this,me,"f").isMedia()||t.paused||(t.pause(),Le(this,we,!0,"f"))}).bind(this),Te(this,_e,"f").slider.mouseup=c.bind(this),Te(this,_e,"f").slider.touchstart=(e=>{var t;const s=Te(this,me,"f").activeElement();if(s.duration!==1/0){const{changedTouches:n}=e,a=(((null===(t=n[0])||void 0===t?void 0:t.pageX)||0)-u(Te(this,ve,"f")).left)/Te(this,ve,"f").offsetWidth*s.duration;(a<s.currentTime&&(null==i?void 0:i.allowRewind)||a>s.currentTime&&(null==i?void 0:i.allowSkip))&&(Te(this,ge,"f").value=a.toString(),d(e),s.paused||(s.pause(),Le(this,we,!0,"f")))}}).bind(this),Te(this,_e,"f").slider.touchend=c.bind(this),a()||o()||(Te(this,_e,"f").container.mousemove=e=>{const t=Te(this,me,"f").activeElement();if(t.duration!==1/0&&!Te(this,me,"f").isAd()){const i=e.pageX;let s=i-u(Te(this,ve,"f")).left;const n=Te(this,Ee,"f").offsetWidth/2,a=s/Te(this,ve,"f").offsetWidth,o=a*t.duration,r=Te(this,me,"f").getContainer(),l=r.offsetWidth-Te(this,Ee,"f").offsetWidth;s<=0||i-u(r).left<=n?s=0:i-u(r).left>=l?s=l-u(Te(this,ge,"f")).left-10:s-=n,a>=0&&a<=1?Te(this,Ee,"f").classList.add("op-controls__tooltip--visible"):Te(this,Ee,"f").classList.remove("op-controls__tooltip--visible"),Te(this,Ee,"f").style.left=`${s}px`,Te(this,Ee,"f").innerHTML=Number.isNaN(o)?"00:00":g(o)}},Te(this,_e,"f").global.mousemove=e=>{e.target.closest(".op-controls__progress")&&!Te(this,me,"f").isAd()||Te(this,Ee,"f").classList.remove("op-controls__tooltip--visible")}),Object.keys(Te(this,_e,"f").media).forEach((e=>{Te(this,me,"f").getElement().addEventListener(e,Te(this,_e,"f").media[e],l)})),Object.keys(Te(this,_e,"f").slider).forEach((e=>{Te(this,ge,"f").addEventListener(e,Te(this,_e,"f").slider[e],l)})),Te(this,ve,"f").addEventListener("keydown",Te(this,me,"f").getEvents().keydown,l),Te(this,ve,"f").addEventListener("mousemove",Te(this,_e,"f").container.mousemove,l),document.addEventListener("mousemove",Te(this,_e,"f").global.mousemove,l),Te(this,me,"f").getContainer().addEventListener("keydown",this._enterSpaceKeyEvent,l),Te(this,me,"f").getControls().getContainer().addEventListener("controlschanged",Te(this,_e,"f").controls.controlschanged,l),Te(this,me,"f").getControls().getLayer(Te(this,Ae,"f")).appendChild(Te(this,ve,"f"))}destroy(){Object.keys(Te(this,_e,"f")).forEach((e=>{Te(this,me,"f").getElement().removeEventListener(e,Te(this,_e,"f")[e])})),Object.keys(Te(this,_e,"f").slider).forEach((e=>{Te(this,ge,"f").removeEventListener(e,Te(this,_e,"f").slider[e])})),Te(this,ve,"f").removeEventListener("keydown",Te(this,me,"f").getEvents().keydown),Te(this,ve,"f").removeEventListener("mousemove",Te(this,_e,"f").container.mousemove),document.removeEventListener("mousemove",Te(this,_e,"f").global.mousemove),Te(this,me,"f").getContainer().removeEventListener("keydown",this._enterSpaceKeyEvent),Te(this,me,"f").getControls().getContainer().removeEventListener("controlschanged",Te(this,_e,"f").controls.controlschanged),Te(this,be,"f").remove(),Te(this,ye,"f").remove(),Te(this,ge,"f").remove(),a()||o()||Te(this,Ee,"f").remove(),Te(this,ve,"f").remove()}_enterSpaceKeyEvent(e){const t=Te(this,me,"f").activeElement(),i=Te(this,me,"f").isAd(),s=e.which||e.keyCode||0;if(!i&&s>=48&&s<=57&&t.duration!==1/0){let i=0;for(let e=48,t=57;e<=t;e++)e<s&&i++;t.currentTime=t.duration*(.1*i),e.preventDefault(),e.stopPropagation()}}}me=new WeakMap,ve=new WeakMap,ge=new WeakMap,be=new WeakMap,ye=new WeakMap,Ee=new WeakMap,_e=new WeakMap,we=new WeakMap,ke=new WeakMap,Ae=new WeakMap;var Ce,Se,Pe,Oe,We,xe,$e,Re,Ne=function(e,t,i,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(e,i):n?n.value=i:t.set(e,i),i},Ie=function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)};class je{constructor(e,t,i){Ce.set(this,void 0),Se.set(this,{}),Pe.set(this,void 0),Oe.set(this,void 0),We.set(this,{global:{},media:{}}),xe.set(this,""),$e.set(this,void 0),Re.set(this,void 0),Ne(this,Ce,e,"f"),Ne(this,$e,t,"f"),Ne(this,Re,i,"f"),this._enterSpaceKeyEvent=this._enterSpaceKeyEvent.bind(this)}create(){const{labels:e}=Ie(this,Ce,"f").getOptions(),t=p((null==e?void 0:e.settings)||"");Ne(this,Pe,document.createElement("button"),"f"),Ie(this,Pe,"f").className=`op-controls__settings op-control__${Ie(this,$e,"f")}`,Ie(this,Pe,"f").tabIndex=0,Ie(this,Pe,"f").title=t,Ie(this,Pe,"f").setAttribute("aria-controls",Ie(this,Ce,"f").id),Ie(this,Pe,"f").setAttribute("aria-pressed","false"),Ie(this,Pe,"f").setAttribute("aria-label",t),Ne(this,Oe,document.createElement("div"),"f"),Ie(this,Oe,"f").className="op-settings",Ie(this,Oe,"f").setAttribute("aria-hidden","true"),Ie(this,Oe,"f").innerHTML='<div class="op-settings__menu" role="menu"></div>',this.clickEvent=()=>{Ie(this,Pe,"f").setAttribute("aria-pressed","true");const e=Ie(this,Ce,"f").getContainer().querySelectorAll(".op-settings");for(let t=0,i=e.length;t<i;++t)e[t]!==Ie(this,Oe,"f")&&e[t].setAttribute("aria-hidden","true");Ie(this,Oe,"f").setAttribute("aria-hidden","false"===Ie(this,Oe,"f").getAttribute("aria-hidden")?"true":"false")},this.hideEvent=()=>{let e;e&&"undefined"!=typeof window&&window.cancelAnimationFrame(e),"undefined"!=typeof window&&(e=window.requestAnimationFrame((()=>{Ie(this,Oe,"f").innerHTML=Ie(this,xe,"f"),Ie(this,Oe,"f").setAttribute("aria-hidden","true")})))},this.removeEvent=e=>{const{id:t,type:i}=e.detail;this.removeItem(t,i)},this.clickEvent=this.clickEvent.bind(this),this.hideEvent=this.hideEvent.bind(this),this.removeEvent=this.removeEvent.bind(this),Ie(this,We,"f").media.controlshidden=this.hideEvent.bind(this),Ie(this,We,"f").media.settingremoved=this.removeEvent.bind(this),Ie(this,We,"f").media.play=this.hideEvent.bind(this),Ie(this,We,"f").media.pause=this.hideEvent.bind(this),Ie(this,Ce,"f").getContainer().addEventListener("keydown",this._enterSpaceKeyEvent,l),Ie(this,We,"f").global.click=e=>{const{target:t}=e,i=t;if((null==i?void 0:i.closest(`#${Ie(this,Ce,"f").id}`))&&(null==i?void 0:i.classList.contains("op-speed__option"))){const e=(null==i?void 0:i.getAttribute("data-value"))||"";Ie(this,Ce,"f").getMedia().playbackRate=parseFloat(e.replace("speed-",""))}},Ie(this,We,"f").global.resize=this.hideEvent.bind(this),Ie(this,Pe,"f").addEventListener("click",this.clickEvent,l),Object.keys(Ie(this,We,"f")).forEach((e=>{Ie(this,Ce,"f").getElement().addEventListener(e,Ie(this,We,"f").media[e],l)})),document.addEventListener("click",Ie(this,We,"f").global.click,l),document.addEventListener("keydown",Ie(this,We,"f").global.click,l),"undefined"!=typeof window&&window.addEventListener("resize",Ie(this,We,"f").global.resize,l),Ie(this,Ce,"f").getControls().getLayer(Ie(this,Re,"f")).appendChild(Ie(this,Pe,"f")),Ie(this,Ce,"f").getContainer().appendChild(Ie(this,Oe,"f"))}destroy(){Ie(this,Pe,"f").removeEventListener("click",this.clickEvent),Object.keys(Ie(this,We,"f")).forEach((e=>{Ie(this,Ce,"f").getElement().removeEventListener(e,Ie(this,We,"f").media[e])})),document.removeEventListener("click",Ie(this,We,"f").global.click),document.removeEventListener("keydown",Ie(this,We,"f").global.click),"undefined"!=typeof window&&window.removeEventListener("resize",Ie(this,We,"f").global.resize),void 0!==Ie(this,We,"f").global["settings.submenu"]&&(document.removeEventListener("click",Ie(this,We,"f").global["settings.submenu"]),Ie(this,Ce,"f").getElement().removeEventListener("controlshidden",this.hideEvent)),Ie(this,Ce,"f").getContainer().removeEventListener("keydown",this._enterSpaceKeyEvent),Ie(this,Oe,"f").remove(),Ie(this,Pe,"f").remove()}addSettings(){const e=Ie(this,Ce,"f").getMedia(),{labels:t}=Ie(this,Ce,"f").getOptions();let i=1;return Ie(this,Ce,"f")&&e&&(i=e.defaultPlaybackRate!==e.playbackRate?e.playbackRate:e.defaultPlaybackRate),{className:"op-speed__option",default:i.toString(),key:"speed",name:p((null==t?void 0:t.speed)||""),subitems:[{key:"0.25",label:"0.25"},{key:"0.5",label:"0.5"},{key:"0.75",label:"0.75"},{key:"1",label:p((null==t?void 0:t.speedNormal)||"")},{key:"1.25",label:"1.25"},{key:"1.5",label:"1.5"},{key:"2",label:"2"}]}}addItem(e,t,i,s,n){const a=`${t}-${p(i,!0)}`,o=document.createElement("div");o.className="op-settings__menu-item",o.tabIndex=0,o.setAttribute("role","menuitemradio"),o.innerHTML=`<div class="op-settings__menu-label" data-value="${a}">${e}</div>`;const r=s?s.find((e=>e.key===i)):null;r&&(o.innerHTML+=`<div class="op-settings__menu-content" tabindex="0">${r.label}</div>`);const h=Ie(this,Oe,"f").querySelector(".op-settings__menu");if(h&&h.appendChild(o),Ne(this,xe,Ie(this,Oe,"f").innerHTML,"f"),s){const a=`\n                <div class="op-settings__header">\n                    <button type="button" class="op-settings__back" tabindex="0">${e}</button>\n                </div>\n                <div class="op-settings__menu" role="menu" id="menu-item-${t}">\n                    ${s.map((e=>`\n                    <div class="op-settings__submenu-item" role="menuitemradio" aria-checked="${i===e.key?"true":"false"}">\n                        <div class="op-settings__submenu-label ${n||""}" tabindex="0" data-value="${t}-${e.key}">\n                            ${e.label}\n                        </div>\n                    </div>`)).join("")}\n                </div>`;Ie(this,Se,"f")[t]=a}Ie(this,We,"f").global["settings.submenu"]=e=>{const s=e.target;if(s.closest(`#${Ie(this,Ce,"f").id}`)){if(s.classList.contains("op-settings__back"))Ie(this,Oe,"f").classList.add("op-settings--sliding"),setTimeout((()=>{Ie(this,Oe,"f").innerHTML=Ie(this,xe,"f"),Ie(this,Oe,"f").classList.remove("op-settings--sliding")}),100);else if(s.classList.contains("op-settings__menu-content")){const e=s.parentElement?s.parentElement.querySelector(".op-settings__menu-label"):null,t=e?e.getAttribute("data-value"):null,i=t?t.split("-"):[];if(i.length>0){i.pop();const e=i.join("-").replace(/^\-|\-$/,"");void 0!==Ie(this,Se,"f")[e]&&(Ie(this,Oe,"f").classList.add("op-settings--sliding"),setTimeout((()=>{Ie(this,Oe,"f").innerHTML=Ie(this,Se,"f")[e],Ie(this,Oe,"f").classList.remove("op-settings--sliding")}),100))}}else if(s.classList.contains("op-settings__submenu-label")){const e=s.getAttribute("data-value"),n=e?e.replace(`${t}-`,""):"",a=s.innerText,o=Ie(this,Oe,"f").querySelector(`#menu-item-${t} .op-settings__submenu-item[aria-checked=true]`);o&&(o.setAttribute("aria-checked","false"),s.parentElement&&s.parentElement.setAttribute("aria-checked","true"),Ie(this,Se,"f")[t]=Ie(this,Oe,"f").innerHTML,Ie(this,Oe,"f").classList.add("op-settings--sliding"),setTimeout((()=>{Ie(this,Oe,"f").innerHTML=Ie(this,xe,"f");const s=Ie(this,Oe,"f").querySelector(`.op-settings__menu-label[data-value="${t}-${i}"]`);s&&(s.setAttribute("data-value",`${e}`),s.nextElementSibling&&(s.nextElementSibling.textContent=a)),i=n,Ne(this,xe,Ie(this,Oe,"f").innerHTML,"f"),Ie(this,Oe,"f").classList.remove("op-settings--sliding")}),100))}}else this.hideEvent()},document.addEventListener("click",Ie(this,We,"f").global["settings.submenu"],l),Ie(this,Ce,"f").getElement().addEventListener("controlshidden",this.hideEvent,l)}removeItem(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;const s=Ie(this,Ce,"f").getElement().querySelector(`.op-settings__submenu-label[data-value=${t}-${e}]`);if(s&&s.remove(),Ie(this,Ce,"f").getElement().querySelectorAll(`.op-settings__submenu-label[data-value^=${t}]`).length<i){delete Ie(this,Se,"f")[t];const e=Ie(this,Ce,"f").getElement().querySelector(`.op-settings__menu-label[data-value^=${t}]`),i=e?e.closest(".op-settings__menu-item"):null;i&&i.remove()}}_enterSpaceKeyEvent(e){var t,i,s,n;const a=e.which||e.keyCode||0,o=Ie(this,Ce,"f").isAd(),r=null===(t=null===document||void 0===document?void 0:document.activeElement)||void 0===t?void 0:t.classList.contains("op-controls__settings"),l=(null===(i=null===document||void 0===document?void 0:document.activeElement)||void 0===i?void 0:i.classList.contains("op-settings__menu-content"))||(null===(s=null===document||void 0===document?void 0:document.activeElement)||void 0===s?void 0:s.classList.contains("op-settings__back"))||(null===(n=null===document||void 0===document?void 0:document.activeElement)||void 0===n?void 0:n.classList.contains("op-settings__submenu-label"));o||(!r||13!==a&&32!==a?!l||13!==a&&32!==a||(Ie(this,We,"f").global["settings.submenu"](e),e.preventDefault(),e.stopPropagation()):(this.clickEvent(),e.preventDefault(),e.stopPropagation()))}}Ce=new WeakMap,Se=new WeakMap,Pe=new WeakMap,Oe=new WeakMap,We=new WeakMap,xe=new WeakMap,$e=new WeakMap,Re=new WeakMap;var De,Fe,Be,qe,He,Ke,ze,Ve,Ue=function(e,t,i,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(e,i):n?n.value=i:t.set(e,i),i},Ge=function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)};class Je{constructor(e,t,i){De.set(this,void 0),Fe.set(this,void 0),Be.set(this,void 0),qe.set(this,void 0),He.set(this,void 0),Ke.set(this,{controls:{},media:{}}),ze.set(this,void 0),Ve.set(this,void 0),Ue(this,De,e,"f"),Ue(this,ze,t,"f"),Ue(this,Ve,i,"f")}create(){const{labels:e,progress:t}=Ge(this,De,"f").getOptions(),i=(null==e?void 0:e.live)||"";Ue(this,Fe,document.createElement("time"),"f"),Ge(this,Fe,"f").className="op-controls__current",Ge(this,Fe,"f").setAttribute("role","timer"),Ge(this,Fe,"f").setAttribute("aria-live","off"),Ge(this,Fe,"f").setAttribute("aria-hidden","false"),Ge(this,Fe,"f").innerText="0:00";const s=(null==t?void 0:t.showCurrentTimeOnly)||!1;s||(Ue(this,Be,document.createElement("span"),"f"),Ge(this,Be,"f").className="op-controls__time-delimiter",Ge(this,Be,"f").setAttribute("aria-hidden","false"),Ge(this,Be,"f").innerText="/",Ue(this,qe,document.createElement("time"),"f"),Ge(this,qe,"f").className="op-controls__duration",Ge(this,qe,"f").setAttribute("aria-hidden","false"),Ge(this,qe,"f").innerText=g((null==t?void 0:t.duration)||0));const n=Ge(this,De,"f").getControls().getLayer(Ge(this,Ve,"f"));Ue(this,He,document.createElement("span"),"f"),Ge(this,He,"f").className=`op-controls-time op-control__${Ge(this,ze,"f")}`,Ge(this,He,"f").appendChild(Ge(this,Fe,"f")),s||(Ge(this,He,"f").appendChild(Ge(this,Be,"f")),Ge(this,He,"f").appendChild(Ge(this,qe,"f"))),n.appendChild(Ge(this,He,"f"));const a=()=>{var e;const t=Ge(this,De,"f").activeElement();if(t.duration===1/0||Ge(this,De,"f").getElement().getAttribute("op-live__enabled"))s||(Ge(this,qe,"f").setAttribute("aria-hidden","true"),Ge(this,Be,"f").setAttribute("aria-hidden","true"));else{if(!s){const i=Number.isNaN(t.duration)?(null===(e=Ge(this,De,"f").getOptions().progress)||void 0===e?void 0:e.duration)||0:t.duration;Ge(this,qe,"f").innerText=g(i)}Ge(this,Fe,"f").innerText=g(t.currentTime)}};Ge(this,Ke,"f").media.loadedmetadata=a.bind(this),Ge(this,Ke,"f").controls.controlschanged=a.bind(this);const{showLabel:o}=Ge(this,De,"f").getOptions().live||{};Ge(this,Ke,"f").media.timeupdate=()=>{const e=Ge(this,De,"f").activeElement();if(e.duration===1/0||Ge(this,De,"f").getElement().getAttribute("op-live__enabled")||Ge(this,De,"f").getElement().getAttribute("data-op-dvr__enabled"))Ge(this,De,"f").getElement().getAttribute("data-op-dvr__enabled")?(s||(Ge(this,qe,"f").setAttribute("aria-hidden","true"),Ge(this,Be,"f").setAttribute("aria-hidden","true")),Ge(this,Fe,"f").innerText=g(e.currentTime)):s||!Ge(this,De,"f").getElement().getAttribute("data-op-dvr__enabled")&&"false"===Ge(this,qe,"f").getAttribute("aria-hidden")?(s||(Ge(this,qe,"f").setAttribute("aria-hidden","true"),Ge(this,Be,"f").setAttribute("aria-hidden","true")),Ge(this,Fe,"f").innerText=o?i:g(e.currentTime)):Ge(this,Fe,"f").innerText=o?i:g(e.currentTime);else{const t=g(e.duration);s||Number.isNaN(e.duration)||t===Ge(this,qe,"f").innerText?(s||t!==Ge(this,qe,"f").innerText)&&(Ge(this,Fe,"f").innerText=o?i:g(e.currentTime)):(Ge(this,qe,"f").innerText=t,Ge(this,qe,"f").setAttribute("aria-hidden","false"),Ge(this,Be,"f").setAttribute("aria-hidden","false")),Ge(this,Fe,"f").innerText=g(e.currentTime)}},Ge(this,Ke,"f").media.ended=()=>{var e;const t=Ge(this,De,"f").activeElement(),i=Number.isNaN(t.duration)?(null===(e=Ge(this,De,"f").getOptions().progress)||void 0===e?void 0:e.duration)||0:t.duration;!s&&Ge(this,De,"f").isMedia()&&(Ge(this,qe,"f").innerText=g(i))},Object.keys(Ge(this,Ke,"f").media).forEach((e=>{Ge(this,De,"f").getElement().addEventListener(e,Ge(this,Ke,"f").media[e],l)})),Ge(this,De,"f").getControls().getContainer().addEventListener("controlschanged",Ge(this,Ke,"f").controls.controlschanged,l)}destroy(){Object.keys(Ge(this,Ke,"f").media).forEach((e=>{Ge(this,De,"f").getElement().removeEventListener(e,Ge(this,Ke,"f").media[e])})),Ge(this,De,"f").getControls().getContainer().removeEventListener("controlschanged",Ge(this,Ke,"f").controls.controlschanged),Ge(this,Fe,"f").remove();const{showCurrentTimeOnly:e}=Ge(this,De,"f").getOptions().progress||{};e||(Ge(this,Be,"f").remove(),Ge(this,qe,"f").remove()),Ge(this,He,"f").remove()}}De=new WeakMap,Fe=new WeakMap,Be=new WeakMap,qe=new WeakMap,He=new WeakMap,Ke=new WeakMap,ze=new WeakMap,Ve=new WeakMap;var Qe,Xe,Ye,Ze,et,tt,it,st,nt,at=function(e,t,i,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(e,i):n?n.value=i:t.set(e,i),i},ot=function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)};class rt{constructor(e,t,i){Qe.set(this,void 0),Xe.set(this,void 0),Ye.set(this,void 0),Ze.set(this,void 0),et.set(this,void 0),tt.set(this,{button:{},media:{},slider:{}}),it.set(this,void 0),st.set(this,void 0),nt.set(this,void 0),at(this,Qe,e,"f"),at(this,it,ot(this,Qe,"f").getMedia().volume,"f"),at(this,st,t,"f"),at(this,nt,i,"f"),this._enterSpaceKeyEvent=this._enterSpaceKeyEvent.bind(this)}create(){const{labels:e}=ot(this,Qe,"f").getOptions(),t=p((null==e?void 0:e.mute)||""),i=p((null==e?void 0:e.unmute)||"");at(this,Ye,document.createElement("div"),"f"),ot(this,Ye,"f").className=`op-controls__volume op-control__${ot(this,st,"f")}`,ot(this,Ye,"f").tabIndex=0,ot(this,Ye,"f").setAttribute("aria-valuemin","0"),ot(this,Ye,"f").setAttribute("aria-valuemax","100"),ot(this,Ye,"f").setAttribute("aria-valuenow",`${ot(this,it,"f")}`),ot(this,Ye,"f").setAttribute("aria-valuetext",`${p((null==e?void 0:e.volume)||ot(this,it,"f").toString())}: ${ot(this,it,"f")}`),ot(this,Ye,"f").setAttribute("aria-orientation","vertical"),ot(this,Ye,"f").setAttribute("aria-label",p((null==e?void 0:e.volumeSlider)||"")),at(this,et,document.createElement("input"),"f"),ot(this,et,"f").type="range",ot(this,et,"f").className="op-controls__volume--input",ot(this,et,"f").tabIndex=-1,ot(this,et,"f").value=ot(this,Qe,"f").getMedia().volume.toString(),ot(this,et,"f").setAttribute("min","0"),ot(this,et,"f").setAttribute("max","1"),ot(this,et,"f").setAttribute("step","0.1"),ot(this,et,"f").setAttribute("aria-label",p((null==e?void 0:e.volumeControl)||"")),at(this,Ze,document.createElement("progress"),"f"),ot(this,Ze,"f").className="op-controls__volume--display",ot(this,Ze,"f").setAttribute("max","10"),ot(this,Ze,"f").setAttribute("role","presentation"),ot(this,Ze,"f").value=10*ot(this,Qe,"f").getMedia().volume,ot(this,Ye,"f").appendChild(ot(this,et,"f")),ot(this,Ye,"f").appendChild(ot(this,Ze,"f")),at(this,Xe,document.createElement("button"),"f"),ot(this,Xe,"f").type="button",ot(this,Xe,"f").className=`op-controls__mute op-control__${ot(this,st,"f")}`,ot(this,Xe,"f").tabIndex=0,ot(this,Xe,"f").title=t,ot(this,Xe,"f").setAttribute("aria-controls",ot(this,Qe,"f").id),ot(this,Xe,"f").setAttribute("aria-pressed","false"),ot(this,Xe,"f").setAttribute("aria-label",t);const s=t=>{const i=1*t.volume,s=Math.floor(100*i);ot(this,et,"f").value=`${t.volume}`,ot(this,Ze,"f").value=10*i,ot(this,Ye,"f").setAttribute("aria-valuenow",`${s}`),ot(this,Ye,"f").setAttribute("aria-valuetext",`${p((null==e?void 0:e.volume)||s.toString())}: ${s}`)},n=e=>{const t=e.volume;t<=.5&&t>0?(ot(this,Xe,"f").classList.remove("op-controls__mute--muted"),ot(this,Xe,"f").classList.add("op-controls__mute--half")):0===t?(ot(this,Xe,"f").classList.add("op-controls__mute--muted"),ot(this,Xe,"f").classList.remove("op-controls__mute--half")):(ot(this,Xe,"f").classList.remove("op-controls__mute--muted"),ot(this,Xe,"f").classList.remove("op-controls__mute--half"))},r=e=>{const t=ot(this,Qe,"f").activeElement(),i=parseFloat(e.target.value);t.volume=i,t.muted=0===t.volume,at(this,it,i,"f");const s=ot(this,Qe,"f").getContainer().querySelector(".op-player__unmute");!t.muted&&s&&s.remove();const n=v("volumechange");ot(this,Qe,"f").getElement().dispatchEvent(n)};if(ot(this,tt,"f").media.volumechange=()=>{const e=ot(this,Qe,"f").activeElement();s(e),n(e)},ot(this,tt,"f").media.loadedmetadata=()=>{const e=ot(this,Qe,"f").activeElement();e.muted&&(e.volume=0);const t=v("volumechange");ot(this,Qe,"f").getElement().dispatchEvent(t)},ot(this,tt,"f").slider.input=r.bind(this),ot(this,tt,"f").slider.change=r.bind(this),ot(this,tt,"f").button.click=()=>{ot(this,Xe,"f").setAttribute("aria-pressed","true");const e=ot(this,Qe,"f").activeElement();e.muted=!e.muted,e.muted?(e.volume=0,ot(this,Xe,"f").title=i,ot(this,Xe,"f").setAttribute("aria-label",i)):(e.volume=ot(this,it,"f"),ot(this,Xe,"f").title=t,ot(this,Xe,"f").setAttribute("aria-label",t));const s=v("volumechange");ot(this,Qe,"f").getElement().dispatchEvent(s)},ot(this,Xe,"f").addEventListener("click",ot(this,tt,"f").button.click,l),Object.keys(ot(this,tt,"f").media).forEach((e=>{ot(this,Qe,"f").getElement().addEventListener(e,ot(this,tt,"f").media[e],l)})),Object.keys(ot(this,tt,"f").slider).forEach((e=>{ot(this,et,"f").addEventListener(e,ot(this,tt,"f").slider[e],l)})),ot(this,Qe,"f").getContainer().addEventListener("keydown",this._enterSpaceKeyEvent,l),!o()&&!a()||!ot(this,Qe,"f").getOptions().useDeviceVolume){const e=ot(this,Qe,"f").getControls().getLayer(ot(this,nt,"f"));e.appendChild(ot(this,Xe,"f")),e.appendChild(ot(this,Ye,"f"))}}destroy(){ot(this,Xe,"f").removeEventListener("click",ot(this,tt,"f").button.click),Object.keys(ot(this,tt,"f").media).forEach((e=>{ot(this,Qe,"f").getElement().removeEventListener(e,ot(this,tt,"f").media[e])})),Object.keys(ot(this,tt,"f").slider).forEach((e=>{ot(this,et,"f").removeEventListener(e,ot(this,tt,"f").slider[e])})),ot(this,Qe,"f").getContainer().removeEventListener("keydown",this._enterSpaceKeyEvent),ot(this,et,"f").remove(),ot(this,Ze,"f").remove(),ot(this,Ye,"f").remove()}_enterSpaceKeyEvent(e){var t;const i=e.which||e.keyCode||0,s=ot(this,Qe,"f").activeElement();!(null===(t=null===document||void 0===document?void 0:document.activeElement)||void 0===t?void 0:t.classList.contains("op-controls__mute"))||13!==i&&32!==i||(s.muted=!s.muted,s.volume=s.muted?0:ot(this,it,"f"),ot(this,tt,"f").button.click(),e.preventDefault(),e.stopPropagation())}}Qe=new WeakMap,Xe=new WeakMap,Ye=new WeakMap,Ze=new WeakMap,et=new WeakMap,tt=new WeakMap,it=new WeakMap,st=new WeakMap,nt=new WeakMap;var lt,ht,dt,ft,ct,ut,pt=function(e,t,i,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(e,i):n?n.value=i:t.set(e,i),i},mt=function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)};class vt{constructor(e){this.events={media:{},mouse:{}},lt.set(this,void 0),ht.set(this,0),dt.set(this,void 0),ft.set(this,void 0),ct.set(this,void 0),ut.set(this,{Captions:$,Fullscreen:V,Levels:oe,Play:pe,Progress:Me,Settings:je,Time:Je,Volume:rt}),pt(this,ft,e,"f"),this._setElements()}create(){mt(this,ft,"f").getElement().controls=!1;const e=d(mt(this,ft,"f").getElement());this._createControlsLayer(),this._buildElements(),this.events.controlschanged=()=>{this.destroy(),this._setElements(),this.create()},this.events.ended=()=>{mt(this,ft,"f").getContainer().classList.remove("op-controls--hidden")},mt(this,ft,"f").getElement().addEventListener("controlschanged",this.events.controlschanged,l),mt(this,ft,"f").getElement().addEventListener("ended",this.events.ended,l);const{alwaysVisible:t}=mt(this,ft,"f").getOptions().controls||{};if(!t){const t=()=>{e&&(mt(this,ft,"f").getContainer().classList.remove("op-controls--hidden"),this._stopControlTimer())};this.events.mouse.mouseenter=()=>{e&&!mt(this,ft,"f").activeElement().paused&&(this._stopControlTimer(),mt(this,ft,"f").activeElement().currentTime?(mt(this,ft,"f").playBtn.setAttribute("aria-hidden",mt(this,ft,"f").isMedia()?"false":"true"),mt(this,ft,"f").loader.setAttribute("aria-hidden","true")):mt(this,ft,"f").getOptions().showLoaderOnInit&&(mt(this,ft,"f").playBtn.setAttribute("aria-hidden","true"),mt(this,ft,"f").loader.setAttribute("aria-hidden","false")),mt(this,ft,"f").getContainer().classList.remove("op-controls--hidden"),this._startControlTimer(2500))},this.events.mouse.mousemove=()=>{e&&!mt(this,ft,"f").activeElement().paused&&(mt(this,ft,"f").activeElement().currentTime?(mt(this,ft,"f").loader.setAttribute("aria-hidden","true"),mt(this,ft,"f").playBtn.setAttribute("aria-hidden",mt(this,ft,"f").isMedia()?"false":"true")):(mt(this,ft,"f").playBtn.setAttribute("aria-hidden",mt(this,ft,"f").getOptions().showLoaderOnInit?"true":"false"),mt(this,ft,"f").loader.setAttribute("aria-hidden",mt(this,ft,"f").getOptions().showLoaderOnInit?"false":"true")),mt(this,ft,"f").getContainer().classList.remove("op-controls--hidden"),this._startControlTimer(2500))},this.events.mouse.mouseleave=()=>{e&&!mt(this,ft,"f").activeElement().paused&&this._startControlTimer(1e3)},this.events.media.play=()=>{e&&this._startControlTimer(mt(this,ft,"f").getOptions().hidePlayBtnTimer||350)},this.events.media.loadedmetadata=t.bind(this),this.events.media.pause=t.bind(this),this.events.media.waiting=t.bind(this),this.events.media.stalled=t.bind(this),this.events.media.playererror=t.bind(this),Object.keys(this.events.media).forEach((e=>{mt(this,ft,"f").getElement().addEventListener(e,this.events.media[e],l)})),o()||a()?mt(this,ft,"f").getContainer().addEventListener("click",this.events.mouse.mouseenter,l):Object.keys(this.events.mouse).forEach((e=>{mt(this,ft,"f").getContainer().addEventListener(e,this.events.mouse[e],l)})),e&&!mt(this,ft,"f").activeElement().paused&&this._startControlTimer(3e3)}}destroy(){o()||a()||(Object.keys(this.events.mouse).forEach((e=>{mt(this,ft,"f").getContainer().removeEventListener(e,this.events.mouse[e])})),Object.keys(this.events.media).forEach((e=>{mt(this,ft,"f").getElement().removeEventListener(e,this.events.media[e])})),this._stopControlTimer()),mt(this,ft,"f").getElement().removeEventListener("controlschanged",this.events.controlschanged),mt(this,ft,"f").getElement().removeEventListener("ended",this.events.ended),Object.keys(mt(this,ct,"f")).forEach((e=>{mt(this,ct,"f")[e].forEach((e=>{e.custom?this._destroyCustomElement(e):"function"==typeof e.destroy&&e.destroy()}))})),mt(this,dt,"f").remove()}getContainer(){return mt(this,dt,"f")}getLayer(e){return mt(this,dt,"f").querySelector(`.op-controls-layer__${e}`)||mt(this,dt,"f")}_createControlsLayer(){if(!mt(this,dt,"f")||!mt(this,ft,"f").getContainer().querySelector(".op-controls")){pt(this,dt,document.createElement("div"),"f"),mt(this,dt,"f").className="op-controls",mt(this,ft,"f").getContainer().appendChild(mt(this,dt,"f"));const e=document.createElement("div");e.className="op-status",e.innerHTML="<span></span>",e.tabIndex=-1,e.setAttribute("aria-hidden","true"),f(mt(this,ft,"f").getElement())&&mt(this,dt,"f").appendChild(e)}}_startControlTimer(e){const t=mt(this,ft,"f").activeElement();this._stopControlTimer(),"undefined"!=typeof window&&pt(this,ht,window.setTimeout((()=>{if((!t.paused||!t.ended)&&d(mt(this,ft,"f").getElement())){mt(this,ft,"f").getContainer().classList.add("op-controls--hidden"),mt(this,ft,"f").playBtn.setAttribute("aria-hidden","true"),this._stopControlTimer();const e=v("controlshidden");mt(this,ft,"f").getElement().dispatchEvent(e)}}),e),"f")}_stopControlTimer(){0!==mt(this,ht,"f")&&(clearTimeout(mt(this,ht,"f")),pt(this,ht,0,"f"))}_setElements(){var e;const t=(null===(e=mt(this,ft,"f").getOptions().controls)||void 0===e?void 0:e.layers)||{};pt(this,ct,{"bottom-left":[],"bottom-middle":[],"bottom-right":[],left:[],main:[],middle:[],right:[],"top-left":[],"top-middle":[],"top-right":[]},"f");const i=d(mt(this,ft,"f").getElement()),s=f(mt(this,ft,"f").getElement()),n=Object.keys(t),a=n.find((e=>/^(top|bottom)/.test(e)));this._createControlsLayer(),n.forEach((e=>{const[n,o]=e.split("-");if(o){mt(this,dt,"f").classList.contains("op-controls__stacked")||mt(this,dt,"f").classList.add("op-controls__stacked");const e=`op-controls-layer__${n}`;if(!mt(this,dt,"f").querySelector(`.${e}`)){const t=document.createElement("div");t.className=e,mt(this,dt,"f").appendChild(t)}}else if(a){const e="op-controls-layer__center";if(!mt(this,dt,"f").querySelector(`.${e}`)){const t=document.createElement("div");t.className=e,mt(this,dt,"f").appendChild(t)}}const r=t?t[e]:null;r&&r.filter(((e,t,i)=>i.indexOf(e)===t)).forEach((t=>{const r=a&&!o?"center":n,l=`${t.charAt(0).toUpperCase()}${t.slice(1)}`,h=new(mt(this,ut,"f")[l])(mt(this,ft,"f"),o||n,r);"settings"===t&&pt(this,lt,h,"f"),(i||"fullscreen"!==t&&s)&&mt(this,ct,"f")[e].push(h)}))})),mt(this,ft,"f").getCustomControls().forEach((e=>{const[t,i]=e.position.split("-"),s=a&&!i?"center":t;e.layer=s,e.position=i||t,"right"===e.position?mt(this,ct,"f")[e.position].unshift(e):mt(this,ct,"f")[e.position].push(e)}))}_buildElements(){Object.keys(mt(this,ct,"f")).forEach((e=>{mt(this,ct,"f")[e].forEach((e=>{e.custom?this._createCustomElement(e):e.create()}))})),Object.keys(mt(this,ct,"f")).forEach((e=>{mt(this,ct,"f")[e].forEach((e=>{const t=e;if((!mt(this,ft,"f").getOptions().detachMenus||e instanceof je)&&!t.custom&&"function"==typeof t.addSettings){const e=t.addSettings();mt(this,lt,"f")&&Object.keys(e).length&&mt(this,lt,"f").addItem(e.name,e.key,e.default,e.subitems,e.className)}}))}));const e=v("controlschanged");mt(this,dt,"f").dispatchEvent(e)}_hideCustomMenu(e){let t;t&&"undefined"!=typeof window&&window.cancelAnimationFrame(t),"undefined"!=typeof window&&(t=window.requestAnimationFrame((()=>{e.setAttribute("aria-hidden","true")})))}_toggleCustomMenu(e,t,i){mt(this,ft,"f").getContainer().querySelectorAll(".op-settings").forEach((e=>{"false"===e.getAttribute("aria-hidden")&&e.id!==t.id&&e.setAttribute("aria-hidden","true")})),t.setAttribute("aria-hidden","true"===t.getAttribute("aria-hidden")?"false":"true"),"function"==typeof i.click&&i.click(e)}_createCustomElement(e){const t=document.createElement(e.type);if(t.tabIndex=0,t.id=e.id,t.className=`op-controls__${e.id} op-control__${e.position} ${e.showInAds?"":"op-control__hide-in-ad"}`,e.styles&&Object.assign(t.style,e.styles),"button"===e.type&&e.icon?t.innerHTML=/\.(jpg|png|svg|gif)$/.test(e.icon)?`<img src="${p(e.icon)}">`:p(e.icon):e.content&&(t.innerHTML=p(e.content,!1)),"button"===e.type&&e.title&&(t.title=e.title),"button"!==e.type&&e.click&&"function"==typeof e.click&&t.setAttribute("aria-role","button"),"button"===e.type&&e.subitems&&Array.isArray(e.subitems)&&e.subitems.length>0){const i=document.createElement("div");i.className="op-settings op-settings__custom",i.id=`${e.id}-menu`,i.setAttribute("aria-hidden","true");const s=e.subitems.map((t=>{let i="";return t.icon&&(i=/\.(jpg|png|svg|gif)$/.test(t.icon)?`<img src="${p(t.icon)}">`:p(t.icon,!1)),`<div class="op-settings__menu-item" tabindex="0" ${t.title?`title="${t.title}"`:""} role="menuitemradio">\n                    <div class="op-settings__menu-label" id="${t.id}" data-value="${e.id}-${t.id}">${i} ${t.label}</div>\n                </div>`}));i.innerHTML=`<div class="op-settings__menu" role="menu">${s.join("")}</div>`,mt(this,ft,"f").getContainer().appendChild(i),e.subitems.forEach((e=>{const t=i.querySelector(`#${e.id}`);t&&e.click&&"function"==typeof e.click&&t.addEventListener("click",e.click,l)})),t.addEventListener("click",(t=>this._toggleCustomMenu(t,i,e)),l),mt(this,ft,"f").getElement().addEventListener("controlshidden",(()=>this._hideCustomMenu(i)),l)}else e.click&&"function"==typeof e.click&&t.addEventListener("click",e.click,l);e.mouseenter&&"function"==typeof e.mouseenter&&t.addEventListener("mouseenter",e.mouseenter,l),e.mouseleave&&"function"==typeof e.mouseleave&&t.addEventListener("mouseleave",e.mouseleave,l),e.keydown&&"function"==typeof e.keydown&&t.addEventListener("keydown",e.keydown,l),e.blur&&"function"==typeof e.blur&&t.addEventListener("blur",e.blur,l),e.focus&&"function"==typeof e.focus&&t.addEventListener("focus",e.focus,l),e.layer&&("main"===e.layer?mt(this,ft,"f").getContainer().appendChild(t):this.getLayer(e.layer).appendChild(t)),e.init&&"function"==typeof e.init&&e.init(mt(this,ft,"f"))}_destroyCustomElement(e){const t=this.getContainer().querySelector(`.op-controls__${e.id}`);if(t){if(e.subitems&&Array.isArray(e.subitems)&&e.subitems.length>0){const i=mt(this,ft,"f").getContainer().querySelector(`#${e.id}-menu`);i&&(e.subitems.forEach((e=>{const t=i.querySelector(`#${e.id}`);t&&e.click&&"function"==typeof e.click&&t.removeEventListener("click",e.click)})),t.removeEventListener("click",(t=>this._toggleCustomMenu(t,i,e))),mt(this,ft,"f").getElement().removeEventListener("controlshidden",(()=>this._hideCustomMenu(i))),i.remove())}e.click&&"function"==typeof e.click&&t.removeEventListener("click",e.click),e.mouseenter&&"function"==typeof e.mouseenter&&t.removeEventListener("mouseenter",e.mouseenter),e.mouseleave&&"function"==typeof e.mouseleave&&t.removeEventListener("mouseleave",e.mouseleave),e.keydown&&"function"==typeof e.keydown&&t.removeEventListener("keydown",e.keydown),e.blur&&"function"==typeof e.blur&&t.removeEventListener("blur",e.blur),e.focus&&"function"==typeof e.focus&&t.removeEventListener("focus",e.focus),t.remove(),e.destroy&&"function"==typeof e.destroy&&e.destroy(mt(this,ft,"f"))}}}lt=new WeakMap,ht=new WeakMap,dt=new WeakMap,ft=new WeakMap,ct=new WeakMap,ut=new WeakMap;var gt,bt=function(e,t,i,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(e,i):n?n.value=i:t.set(e,i),i},yt=function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)};class Et{constructor(e,t){var i,s;gt.set(this,void 0),this.element=e;const n=e.src||(null===(i=e.querySelector("source"))||void 0===i?void 0:i.src)||"",a=n?J(n,e):(null===(s=e.querySelector("source"))||void 0===s?void 0:s.type)||"video/mp4";this.media=t||{src:n,type:a},this.promise=new Promise((e=>{e()}))}set instance(e){bt(this,gt,e,"f")}get instance(){return yt(this,gt,"f")}play(){return this.element.play()}pause(){this.element.pause()}set volume(e){this.element.volume=e}get volume(){return this.element.volume}set muted(e){this.element.muted=e}get muted(){return this.element.muted}set playbackRate(e){this.element.playbackRate=e}get playbackRate(){return this.element.playbackRate}set defaultPlaybackRate(e){this.element.defaultPlaybackRate=e}get defaultPlaybackRate(){return this.element.defaultPlaybackRate}set currentTime(e){this.element.currentTime=e}get currentTime(){return this.element.currentTime}get duration(){return this.element.duration}get paused(){return this.element.paused}get ended(){return this.element.ended}}gt=new WeakMap;var _t,wt,kt,At,Lt,Tt,Mt=function(e,t,i,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(e,i):n?n.value=i:t.set(e,i),i},Ct=function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)};class St extends Et{constructor(e,t,i,s){super(e,t),_t.set(this,void 0),wt.set(this,{}),kt.set(this,0),At.set(this,0),Lt.set(this,void 0),Tt.set(this,void 0),Mt(this,Lt,s||{},"f"),this.element=e,this.media=t,Mt(this,Tt,i,"f"),this._create=this._create.bind(this),this._play=this._play.bind(this),this._pause=this._pause.bind(this),this._assign=this._assign.bind(this),this.promise="undefined"==typeof Hls?c("https://cdn.jsdelivr.net/npm/hls.js@latest/dist/hls.min.js"):new Promise((e=>{e({})})),this.promise.then(this._create)}canPlayType(e){return(()=>{if("undefined"==typeof window)return!1;const e=window.MediaSource||window.WebKitMediaSource,t=window.SourceBuffer||window.WebKitSourceBuffer,i=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),s=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return!!i&&!!s&&!r()})()&&"application/x-mpegURL"===e}load(){var e=this;Ct(this,_t,"f")&&(Ct(this,_t,"f").detachMedia(),Ct(this,_t,"f").loadSource(this.media.src),Ct(this,_t,"f").attachMedia(this.element));const t=v("loadedmetadata");this.element.dispatchEvent(t),Ct(this,wt,"f")||(Mt(this,wt,Hls.Events,"f"),Object.keys(Ct(this,wt,"f")).forEach((t=>{Ct(this,_t,"f").on(Ct(this,wt,"f")[t],(function(){for(var i=arguments.length,s=new Array(i),n=0;n<i;n++)s[n]=arguments[n];return e._assign(Ct(e,wt,"f")[t],s)}))})))}destroy(){var e=this;Ct(this,_t,"f")&&Ct(this,_t,"f").stopLoad(),Ct(this,wt,"f")&&Object.keys(Ct(this,wt,"f")).forEach((t=>{Ct(this,_t,"f").off(Ct(this,wt,"f")[t],(function(){for(var i=arguments.length,s=new Array(i),n=0;n<i;n++)s[n]=arguments[n];return e._assign(Ct(e,wt,"f")[t],s)}))})),this.element.removeEventListener("play",this._play),this.element.removeEventListener("pause",this._pause),Ct(this,_t,"f")&&(Ct(this,_t,"f").destroy(),Mt(this,_t,null,"f"))}set src(e){var t=this;G(e)&&(this.destroy(),Mt(this,_t,new Hls(Ct(this,Lt,"f")),"f"),Ct(this,_t,"f").loadSource(e.src),Ct(this,_t,"f").attachMedia(this.element),Mt(this,wt,Hls.Events,"f"),Object.keys(Ct(this,wt,"f")).forEach((e=>{Ct(this,_t,"f").on(Ct(this,wt,"f")[e],(function(){for(var i=arguments.length,s=new Array(i),n=0;n<i;n++)s[n]=arguments[n];return t._assign(Ct(t,wt,"f")[e],s)}))})))}get levels(){const e=[];return Ct(this,_t,"f")&&Ct(this,_t,"f").levels&&Ct(this,_t,"f").levels.length&&Object.keys(Ct(this,_t,"f").levels).forEach((t=>{const{height:i,name:s}=Ct(this,_t,"f").levels[t],n={height:i,id:t,label:s||null};e.push(n)})),e}set level(e){Ct(this,_t,"f").currentLevel=e}get level(){return Ct(this,_t,"f")?Ct(this,_t,"f").currentLevel:"-1"}_create(){var e=this;const t=!("auto"!==this.element.preload&&!Ct(this,Tt,"f"));Ct(this,Lt,"f").autoStartLoad=t,Mt(this,_t,new Hls(Ct(this,Lt,"f")),"f"),this.instance=Ct(this,_t,"f"),Mt(this,wt,Hls.Events,"f"),Object.keys(Ct(this,wt,"f")).forEach((t=>{Ct(this,_t,"f").on(Ct(this,wt,"f")[t],(function(){for(var i=arguments.length,s=new Array(i),n=0;n<i;n++)s[n]=arguments[n];return e._assign(Ct(e,wt,"f")[t],s)}))})),t||(this.element.addEventListener("play",this._play,l),this.element.addEventListener("pause",this._pause,l))}_assign(e,t){if("hlsError"===e){const e=v("playererror",{detail:{data:t,message:t[1].details,type:"HLS"}});this.element.dispatchEvent(e);const i=t[1].type,{fatal:s}=t[1],n=t[1];if(s)switch(i){case"mediaError":const e=(new Date).getTime();if(!Ct(this,kt,"f")||e-Ct(this,kt,"f")>3e3)Mt(this,kt,(new Date).getTime(),"f"),Ct(this,_t,"f").recoverMediaError();else if(!Ct(this,At,"f")||e-Ct(this,At,"f")>3e3)Mt(this,At,(new Date).getTime(),"f"),console.warn("Attempting to swap Audio Codec and recover from media error"),Ct(this,_t,"f").swapAudioCodec(),Ct(this,_t,"f").recoverMediaError();else{const e="Cannot recover, last media error recovery failed";console.error(e);const t=v(i,{detail:{data:n}});this.element.dispatchEvent(t)}break;case"networkError":const t="Network error";console.error(t);const s=v(i,{detail:{data:n}});this.element.dispatchEvent(s);break;default:Ct(this,_t,"f").destroy();const a=v(i,{detail:{data:n}});this.element.dispatchEvent(a)}else{const e=v(i,{detail:{data:n}});this.element.dispatchEvent(e)}}else{const i=t[1];if("hlsLevelLoaded"===e&&!0===i.live){this.element.setAttribute("op-live__enabled","true");const e=v("timeupdate");this.element.dispatchEvent(e)}else if("hlsLevelUpdated"===e&&!0===i.live&&i.totalduration>120){this.element.setAttribute("data-op-dvr__enabled","true");const e=v("timeupdate");this.element.dispatchEvent(e)}else if("hlsFragParsingMetadata"===e){const e=v("metadataready",{detail:{data:t[1]}});this.element.dispatchEvent(e)}const s=v(e,{detail:{data:t[1]}});this.element.dispatchEvent(s)}}_play(){Ct(this,_t,"f")&&Ct(this,_t,"f").startLoad()}_pause(){Ct(this,_t,"f")&&Ct(this,_t,"f").stopLoad()}}_t=new WeakMap,wt=new WeakMap,kt=new WeakMap,At=new WeakMap,Lt=new WeakMap,Tt=new WeakMap;var Pt,Ot,Wt,xt,$t,Rt,Nt=function(e,t,i,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(e,i):n?n.value=i:t.set(e,i),i},It=function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)};class jt extends Et{constructor(e,t){if(super(e,t),Pt.set(this,void 0),Ot.set(this,[]),Wt.set(this,!1),xt.set(this,0),$t.set(this,!1),Rt.set(this,void 0),!f(e)&&!d(e))throw new TypeError("Native method only supports video/audio tags");this._clearTimeout=this._clearTimeout.bind(this),this._setTimeout=this._setTimeout.bind(this),this._dispatchError=this._dispatchError.bind(this),this._isDvrEnabled=this._isDvrEnabled.bind(this),this._readMediadataInfo=this._readMediadataInfo.bind(this),Nt(this,Wt,G(this.media),"f"),this.element.addEventListener("playing",this._clearTimeout,l),this.element.addEventListener("stalled",this._setTimeout,l),this.element.addEventListener("error",this._dispatchError,l),this.element.addEventListener("loadeddata",this._isDvrEnabled,l),this.element.textTracks.addEventListener("addtrack",this._readMediadataInfo,l)}canPlayType(e){return!!this.element.canPlayType(e).replace("no","")}load(){this.element.load()}destroy(){this.element.removeAttribute("data-op-dvr__enabled"),this.element.removeEventListener("playing",this._clearTimeout),this.element.removeEventListener("stalled",this._setTimeout),this.element.removeEventListener("error",this._dispatchError),this.element.removeEventListener("loadeddata",this._isDvrEnabled),this.element.textTracks.removeEventListener("addtrack",this._readMediadataInfo)}get levels(){if(!It(this,Ot,"f").length){const e=this.element.querySelectorAll("source[title]");for(let t=0,i=e.length;t<i;++t){const i={height:0,id:`${t}`,label:e[t].getAttribute("title")||""};It(this,Ot,"f").push(i)}}return It(this,Ot,"f")}set level(e){const t=It(this,Ot,"f").findIndex((t=>t.id===e));if(t>-1){Nt(this,Pt,this.levels[t],"f");const e=this.element.querySelectorAll("source[title]");for(let t=0,i=e.length;t<i;++t){const i=e[t].getAttribute("src");i&&parseInt(It(this,Pt,"f").id,10)===t&&(this.element.src=i)}}}get level(){var e;return(null===(e=It(this,Pt,"f"))||void 0===e?void 0:e.id)||"-1"}set src(e){this.element.src=e.src,this.media=e}get src(){return this.media}_isDvrEnabled(){const e=this.element.seekable.end(this.element.seekable.length-1)-this.element.seekable.start(0);if(It(this,Wt,"f")&&e>120&&!this.element.getAttribute("data-op-dvr__enabled")){this.element.setAttribute("data-op-dvr__enabled","true");const e=v("timeupdate");this.element.dispatchEvent(e)}}_readMediadataInfo(e){var t;const i=e;"metadata"===(null===(t=null==i?void 0:i.track)||void 0===t?void 0:t.kind)&&(i.track.mode="hidden",i.track.addEventListener("cuechange",(e=>{const t=e.target,i=t.activeCues?t.activeCues[0]:null;if(i){const e=v("metadataready",{detail:i});this.element.dispatchEvent(e)}}),l))}_setTimeout(){It(this,$t,"f")||void 0===window||(Nt(this,$t,!0,"f"),Nt(this,Rt,window.setInterval((()=>{var e;if(It(this,xt,"f")>=30){clearInterval(It(this,Rt,"f"));const e="Media download failed part-way due to a network error",t=v("playererror",{detail:{data:{message:e,error:2},message:e,type:"HTML5"}});this.element.dispatchEvent(t),Nt(this,xt,0,"f"),Nt(this,$t,!1,"f")}else Nt(this,xt,(e=It(this,xt,"f"),++e),"f")}),1e3),"f"))}_clearTimeout(){It(this,Rt,"f")&&(clearInterval(It(this,Rt,"f")),Nt(this,xt,0,"f"),Nt(this,$t,!1,"f"))}_dispatchError(e){let t;const i=e.target,s=null==i?void 0:i.error;switch(null==s?void 0:s.code){case null==s?void 0:s.MEDIA_ERR_ABORTED:t="Media playback aborted";break;case null==s?void 0:s.MEDIA_ERR_NETWORK:t="Media download failed part-way due to a network error";break;case null==s?void 0:s.MEDIA_ERR_DECODE:t="Media playback aborted due to a corruption problem or because the\n                    media used features your browser did not support.";break;case null==s?void 0:s.MEDIA_ERR_SRC_NOT_SUPPORTED:t="Media could not be loaded, either because the server or network failed\n                    or because the format is not supported.";break;default:t="Unknown error occurred."}const n=v("playererror",{detail:{data:Object.assign(Object.assign({},e),{message:t,error:null==s?void 0:s.code}),message:t,type:"HTML5"}});this.element.dispatchEvent(n)}}Pt=new WeakMap,Ot=new WeakMap,Wt=new WeakMap,xt=new WeakMap,$t=new WeakMap,Rt=new WeakMap;var Dt,Ft,Bt,qt,Ht,Kt,zt,Vt,Ut,Gt=function(e,t,i,s){return new(i||(i=Promise))((function(n,a){function o(e){try{l(s.next(e))}catch(e){a(e)}}function r(e){try{l(s.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,r)}l((s=s.apply(e,t||[])).next())}))},Jt=function(e,t,i,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(e,i):n?n.value=i:t.set(e,i),i},Qt=function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)};class Xt{constructor(e,t,i,s){Dt.set(this,void 0),Ft.set(this,void 0),Bt.set(this,void 0),qt.set(this,void 0),Ht.set(this,void 0),Kt.set(this,void 0),zt.set(this,!1),Vt.set(this,{media:{},optionsKey:{},rules:[]}),Ut.set(this,void 0),Jt(this,Dt,e,"f"),Jt(this,Ht,t,"f"),Jt(this,Bt,this._getMediaFiles(),"f"),Jt(this,Vt,s,"f"),Jt(this,Kt,i,"f")}canPlayType(e){return Qt(this,Ft,"f").canPlayType(e)}load(){return Gt(this,void 0,void 0,(function*(){if(!Qt(this,zt,"f")){if(Jt(this,zt,!0,"f"),!Qt(this,Bt,"f").length)throw new TypeError("Media not set");if(Qt(this,Ft,"f")&&"function"==typeof Qt(this,Ft,"f").destroy){1===Qt(this,Bt,"f").length&&Qt(this,Bt,"f")[0].src===Qt(this,Ft,"f").media.src||Qt(this,Ft,"f").destroy()}Qt(this,Bt,"f").some((e=>{try{Jt(this,Ft,this._invoke(e),"f")}catch(t){Jt(this,Ft,new jt(Qt(this,Dt,"f"),e),"f")}return Qt(this,Ft,"f").canPlayType(e.type)}));try{if(null===Qt(this,Ft,"f"))throw new TypeError("Media cannot be played with any valid media type");yield Qt(this,Ft,"f").promise,Qt(this,Ft,"f").load()}catch(e){throw Qt(this,Ft,"f")&&Qt(this,Ft,"f").destroy(),e}}}))}play(){return Gt(this,void 0,void 0,(function*(){return Qt(this,zt,"f")?yield Qt(this,Ft,"f").promise:(Jt(this,zt,!0,"f"),yield this.load(),Jt(this,zt,!1,"f")),Jt(this,qt,Qt(this,Ft,"f").play(),"f"),Qt(this,qt,"f")}))}pause(){return Gt(this,void 0,void 0,(function*(){void 0!==Qt(this,qt,"f")&&(yield Qt(this,qt,"f")),Qt(this,Ft,"f").pause()}))}destroy(){Qt(this,Ft,"f")&&Qt(this,Ft,"f").destroy()}set src(e){if("string"==typeof e?Qt(this,Bt,"f").push({src:e,type:J(e,Qt(this,Dt,"f"))}):Array.isArray(e)?Jt(this,Bt,e,"f"):"object"==typeof e&&Qt(this,Bt,"f").push(e),Jt(this,Bt,Qt(this,Bt,"f").filter((e=>e.src)),"f"),Qt(this,Bt,"f").length>0){const[e]=Qt(this,Bt,"f");Qt(this,Dt,"f").src&&Qt(this,Dt,"f").setAttribute("data-op-file",Qt(this,Bt,"f")[0].src),Qt(this,Dt,"f").src=e.src,Jt(this,Ut,e,"f"),Qt(this,Ft,"f")&&(Qt(this,Ft,"f").src=e)}else Qt(this,Dt,"f").src=""}get src(){return Qt(this,Bt,"f")}get current(){return Qt(this,Ut,"f")}set mediaFiles(e){Jt(this,Bt,e,"f")}get mediaFiles(){return Qt(this,Bt,"f")}set volume(e){Qt(this,Ft,"f")&&(Qt(this,Ft,"f").volume=e)}get volume(){return Qt(this,Ft,"f")?Qt(this,Ft,"f").volume:Qt(this,Dt,"f").volume}set muted(e){Qt(this,Ft,"f")&&(Qt(this,Ft,"f").muted=e)}get muted(){return Qt(this,Ft,"f")?Qt(this,Ft,"f").muted:Qt(this,Dt,"f").muted}set playbackRate(e){Qt(this,Ft,"f")&&(Qt(this,Ft,"f").playbackRate=e)}get playbackRate(){return Qt(this,Ft,"f")?Qt(this,Ft,"f").playbackRate:Qt(this,Dt,"f").playbackRate}set defaultPlaybackRate(e){Qt(this,Ft,"f")&&(Qt(this,Ft,"f").defaultPlaybackRate=e)}get defaultPlaybackRate(){return Qt(this,Ft,"f")?Qt(this,Ft,"f").defaultPlaybackRate:Qt(this,Dt,"f").defaultPlaybackRate}set currentTime(e){Qt(this,Ft,"f")&&(Qt(this,Ft,"f").currentTime=e)}get currentTime(){return Qt(this,Ft,"f")?Qt(this,Ft,"f").currentTime:Qt(this,Dt,"f").currentTime}get duration(){const e=Qt(this,Ft,"f")?Qt(this,Ft,"f").duration:Qt(this,Dt,"f").duration;return e===1/0&&Qt(this,Dt,"f").seekable&&Qt(this,Dt,"f").seekable.length?Qt(this,Dt,"f").seekable.end(0):e}get paused(){return Qt(this,Ft,"f")?Qt(this,Ft,"f").paused:Qt(this,Dt,"f").paused}get ended(){return Qt(this,Ft,"f")?Qt(this,Ft,"f").ended:Qt(this,Dt,"f").ended}set loaded(e){Jt(this,zt,e,"f")}get loaded(){return Qt(this,zt,"f")}set level(e){Qt(this,Ft,"f")&&(Qt(this,Ft,"f").level=e)}get level(){return Qt(this,Ft,"f")?Qt(this,Ft,"f").level:-1}get levels(){return Qt(this,Ft,"f")?Qt(this,Ft,"f").levels:[]}get instance(){return Qt(this,Ft,"f")?Qt(this,Ft,"f").instance:null}get element(){return Qt(this,Dt,"f")}_getMediaFiles(){const e=[],t=Qt(this,Dt,"f").querySelectorAll("source"),i=Qt(this,Dt,"f").src;i&&e.push({src:i,type:Qt(this,Dt,"f").getAttribute("type")||J(i,Qt(this,Dt,"f"))});for(let i=0,s=t.length;i<s;i++){const s=t[i],{src:n}=s;if(e.push({src:n,type:s.getAttribute("type")||J(n,Qt(this,Dt,"f"))}),0===i){const[t]=e;Jt(this,Ut,t,"f")}}return e.length||e.push({src:"",type:J("",Qt(this,Dt,"f"))}),e}_invoke(e){var t;const i=Qt(this,Dt,"f").canPlayType("application/vnd.apple.mpegurl")||Qt(this,Dt,"f").canPlayType("application/x-mpegURL");Jt(this,Ut,e,"f");const{layers:s}=Qt(this,Ht,"f").controls||{};let n=!1;if(s&&Object.keys(s).forEach((e=>{const t=s?s[e]:null;t&&t.indexOf("levels")>-1&&(n=!0)})),Object.keys(Qt(this,Vt,"f").media).length){let t;return Qt(this,Vt,"f").rules.forEach((i=>{const s=i(e.src);if(s){const i=Qt(this,Vt,"f").media[s],n=Qt(this,Ht,"f")[Qt(this,Vt,"f").optionsKey[s]]||void 0;t=i(Qt(this,Dt,"f"),e,Qt(this,Kt,"f"),n)}})),t?(t.create(),t):new jt(Qt(this,Dt,"f"),e)}if(G(e)){if(i&&Qt(this,Ht,"f").forceNative&&!n)return new jt(Qt(this,Dt,"f"),e);const s=(null===(t=Qt(this,Ht,"f"))||void 0===t?void 0:t.hls)||void 0;return new St(Qt(this,Dt,"f"),e,Qt(this,Kt,"f"),s)}return new jt(Qt(this,Dt,"f"),e)}}Dt=new WeakMap,Ft=new WeakMap,Bt=new WeakMap,qt=new WeakMap,Ht=new WeakMap,Kt=new WeakMap,zt=new WeakMap,Vt=new WeakMap,Ut=new WeakMap;var Yt,Zt,ei,ti,ii,si,ni,ai,oi,ri,li,hi,di,fi,ci,ui,pi,mi,vi,gi,bi,yi,Ei,_i,wi,ki,Ai,Li,Ti=function(e,t,i,s){return new(i||(i=Promise))((function(n,a){function o(e){try{l(s.next(e))}catch(e){a(e)}}function r(e){try{l(s.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,r)}l((s=s.apply(e,t||[])).next())}))},Mi=function(e,t,i,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(e,i):n?n.value=i:t.set(e,i),i},Ci=function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)};class Si{constructor(e,t,i,s,n){Yt.set(this,void 0),Zt.set(this,!1),ei.set(this,!1),ti.set(this,!1),ii.set(this,!1),si.set(this,1),ni.set(this,1),ai.set(this,0),oi.set(this,0),ri.set(this,0),li.set(this,30),hi.set(this,!1),di.set(this,[]),fi.set(this,void 0),ci.set(this,void 0),ui.set(this,void 0),pi.set(this,void 0),mi.set(this,void 0),vi.set(this,void 0),gi.set(this,void 0),bi.set(this,0),yi.set(this,!1),Ei.set(this,!1),_i.set(this,void 0),wi.set(this,void 0),ki.set(this,null),Ai.set(this,0),Li.set(this,{autoPlayAdBreaks:!0,customClick:{enabled:!1,label:"Click here for more info"},audioSkip:{enabled:!0,label:"Skip Ad",remainingLabel:"Skip in [[secs]] seconds"},debug:!1,enablePreloading:!1,language:"en",live:!1,numRedirects:4,publisherId:void 0,sdkPath:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",sessionId:void 0,src:[],vpaidMode:"enabled"}),Mi(this,_i,t,"f"),Mi(this,fi,e,"f"),Mi(this,Zt,i||!1,"f"),Mi(this,ei,s||!1,"f"),Mi(this,ni,Ci(this,fi,"f").element.volume,"f"),Mi(this,wi,Object.assign(Object.assign({},Ci(this,Li,"f")),n),"f"),(null==n?void 0:n.audioSkip)&&Object.keys(n.audioSkip).length&&(Ci(this,wi,"f").audioSkip=Object.assign(Object.assign({},Ci(this,Li,"f").audioSkip),n.audioSkip)),(null==n?void 0:n.customClick)&&Object.keys(n.customClick).length&&(Ci(this,wi,"f").customClick=Object.assign(Object.assign({},Ci(this,Li,"f").customClick),n.customClick)),this._loadAds=this._loadAds.bind(this),this._handleClickInContainer=this._handleClickInContainer.bind(this),this._handleResizeAds=this._handleResizeAds.bind(this),this._handleSkipAds=this._handleSkipAds.bind(this),this._onError=this._onError.bind(this),this._onAdsManagerLoaded=this._onAdsManagerLoaded.bind(this),this._onMetadataLoaded=this._onMetadataLoaded.bind(this),this._onEvent=this._onEvent.bind(this),this._onPlay=this._onPlay.bind(this),this._onPause=this._onPause.bind(this),this._onEnded=this._onEnded.bind(this)}load(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Ti(this,void 0,void 0,(function*(){yield this._loadIMA(),(e||Ci(this,wi,"f").autoPlayAdBreaks)&&(Mi(this,Ei,!0,"f"),this._setAdSettings(),this._createCustomClick(),this._createSkipElement(),this._loadAdsContainer(),this._loadAdsLoader(),e&&(this._requestAds(),Ci(this,wi,"f").autoPlayAdBreaks||Mi(this,yi,!0,"f")),"undefined"!=typeof window&&window.addEventListener("resize",this._handleResizeAds,l),Ci(this,fi,"f").element.addEventListener("loadedmetadata",this._handleResizeAds,l))}))}play(){return Ti(this,void 0,void 0,(function*(){try{if(!Ci(this,yi,"f"))return Mi(this,yi,!0,"f"),void(Ci(this,pi,"f")?(Ci(this,pi,"f").initialize(),yield this._onPreloadContent()):yield this.load());Ci(this,mi,"f")?(Ci(this,oi,"f")?Ci(this,mi,"f").resume():Ci(this,mi,"f").start(),Mi(this,ti,!0,"f")):yield this._onPlay();const e=v("play");Ci(this,fi,"f").element.dispatchEvent(e)}catch(e){yield this._onPlay()}}))}pause(){if(Ci(this,mi,"f")){Mi(this,ti,!1,"f"),Ci(this,mi,"f").pause();const e=v("pause");Ci(this,fi,"f").element.dispatchEvent(e)}}resizeAds(e,t){if(Ci(this,mi,"f")){const i=Ci(this,fi,"f").element,s="true"===i.getAttribute("data-fullscreen")?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL;let n=e;const a=e?e.toString():"";e&&a.indexOf("%")>-1&&Ci(this,fi,"f").element.parentElement&&(n=Ci(this,fi,"f").element.parentElement.offsetWidth*(parseInt(a,10)/100));let o=t;const r=t?t.toString():"";let l;t&&r.indexOf("%")>-1&&Ci(this,fi,"f").element.parentElement&&(o=Ci(this,fi,"f").element.parentElement.offsetHeight*(parseInt(r,10)/100)),l&&"undefined"!=typeof window&&window.cancelAnimationFrame(l),"undefined"!=typeof window&&(l=window.requestAnimationFrame((()=>{Ci(this,mi,"f").resize(n||i.offsetWidth,o||i.offsetHeight,s)})))}}getAdsManager(){return Ci(this,mi,"f")}getAdsLoader(){return Ci(this,Yt,"f")}started(){return Ci(this,Ei,"f")}destroy(){var e,t,i;Ci(this,Ai,"f")&&clearInterval(Ci(this,Ai,"f")),Ci(this,mi,"f")&&(Ci(this,mi,"f").removeEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this._onError),Ci(this,di,"f")&&Ci(this,di,"f").forEach((e=>{Ci(this,mi,"f").removeEventListener(e,this._onEvent)}))),Ci(this,Yt,"f")&&(Ci(this,Yt,"f").removeEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this._onError),Ci(this,Yt,"f").removeEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this._onAdsManagerLoaded));const s=!Array.isArray(Ci(this,_i,"f"))||Ci(this,bi,"f")>Ci(this,_i,"f").length;Ci(this,mi,"f")&&s&&Ci(this,mi,"f").destroy(),(null===(e=Ci(this,wi,"f").customClick)||void 0===e?void 0:e.enabled)&&Ci(this,ui,"f")&&Ci(this,ui,"f").remove(),(null===(t=Ci(this,wi,"f").audioSkip)||void 0===t?void 0:t.enabled)&&Ci(this,gi,"f")&&(Ci(this,gi,"f").removeEventListener("click",this._handleSkipAds),(null===(i=Ci(this,gi,"f"))||void 0===i?void 0:i.classList.contains("op-ads__skip"))&&Ci(this,gi,"f").remove()),(a()||o())&&Ci(this,fi,"f").element.removeEventListener("loadedmetadata",this._loadAds),Ci(this,fi,"f").element.removeEventListener("loadedmetadata",this._handleResizeAds),Ci(this,fi,"f").element.removeEventListener("loadedmetadata",this._onPreloadContent),Ci(this,fi,"f").element.removeEventListener("ended",this._onEnded),"undefined"!=typeof window&&window.removeEventListener("resize",this._handleResizeAds),Ci(this,ci,"f")&&(Ci(this,ci,"f").removeEventListener("click",this._handleClickInContainer),Ci(this,ci,"f").remove()),Mi(this,ti,!1,"f"),Mi(this,ai,0,"f"),Mi(this,oi,0,"f")}set src(e){Mi(this,_i,e,"f")}set volume(e){Ci(this,mi,"f")&&(Mi(this,si,e,"f"),Ci(this,mi,"f").setVolume(e),this._setMediaVolume(e),Mi(this,hi,0===e,"f"))}get volume(){return Ci(this,mi,"f")?Ci(this,mi,"f").getVolume():Ci(this,ni,"f")}set muted(e){Ci(this,mi,"f")&&(e?(Ci(this,mi,"f").setVolume(0),Mi(this,hi,!0,"f"),this._setMediaVolume(0)):(Ci(this,mi,"f").setVolume(Ci(this,si,"f")),Mi(this,hi,!1,"f"),this._setMediaVolume(Ci(this,si,"f"))))}get muted(){return Ci(this,hi,"f")}set currentTime(e){Mi(this,oi,e,"f")}get currentTime(){return Ci(this,oi,"f")}get duration(){return Ci(this,ai,"f")}get paused(){return!Ci(this,ti,"f")}get ended(){return Ci(this,ii,"f")}_loadIMA(){var e,t,i,s,n;return Ti(this,void 0,void 0,(function*(){const a=(null===(e=Ci(this,wi,"f"))||void 0===e?void 0:e.debug)?null===(i=null===(t=Ci(this,wi,"f"))||void 0===t?void 0:t.sdkPath)||void 0===i?void 0:i.replace(/(\.js$)/,"_debug.js"):null===(s=Ci(this,wi,"f"))||void 0===s?void 0:s.sdkPath;try{a&&!(null===(n=window.google)||void 0===n?void 0:n.ima)&&(yield c(a))}catch(e){const t="Ad script could not be loaded; please check if you have an AdBlock turned on, or if you provided a valid URL";console.error(`Ad error: ${t}.`);const i=v("playererror",{detail:{data:e,message:t,type:"Ads"}});Ci(this,fi,"f").element.dispatchEvent(i)}}))}_setAdSettings(){const e={disabled:google.ima.ImaSdkSettings.VpaidMode.DISABLED,enabled:google.ima.ImaSdkSettings.VpaidMode.ENABLED,insecure:google.ima.ImaSdkSettings.VpaidMode.INSECURE};google.ima.settings.setVpaidMode(e[Ci(this,wi,"f").vpaidMode||"enabled"]),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0),google.ima.settings.setNumRedirects(Ci(this,wi,"f").numRedirects),google.ima.settings.setLocale(Ci(this,wi,"f").language),Ci(this,wi,"f").sessionId&&google.ima.settings.setSessionId(Ci(this,wi,"f").sessionId),Ci(this,wi,"f").publisherId&&google.ima.settings.setPpid(Ci(this,wi,"f").publisherId),google.ima.settings.setPlayerType("openplayerjs"),google.ima.settings.setPlayerVersion("3.0.0")}_loadAdsContainer(){Mi(this,ci,document.createElement("div"),"f"),Ci(this,ci,"f").className="op-ads",Ci(this,ci,"f").tabIndex=-1,Ci(this,fi,"f").element.parentElement&&Ci(this,fi,"f").element.parentElement.insertBefore(Ci(this,ci,"f"),Ci(this,fi,"f").element.nextSibling),Ci(this,ci,"f").addEventListener("click",this._handleClickInContainer,l),Mi(this,pi,new google.ima.AdDisplayContainer(Ci(this,ci,"f"),Ci(this,fi,"f").element,Ci(this,ui,"f")),"f"),Ci(this,wi,"f").autoPlayAdBreaks||Ci(this,pi,"f").initialize()}_loadAdsLoader(){return Ti(this,void 0,void 0,(function*(){Mi(this,Yt,new google.ima.AdsLoader(Ci(this,pi,"f")),"f"),Ci(this,wi,"f").autoPlayAdBreaks||Ci(this,Yt,"f").getSettings().setAutoPlayAdBreaks(!1),Ci(this,Yt,"f").addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this._onAdsManagerLoaded,l),Ci(this,Yt,"f").addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this._onError,l),Ci(this,fi,"f").element.addEventListener("ended",this._onEnded,l)}))}_handleClickInContainer(){if(Ci(this,fi,"f").paused){Mi(this,ti,!1,"f");const e=v("paused");Ci(this,fi,"f").element.dispatchEvent(e),this.pause()}}_requestAds(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const t=Array.isArray(Ci(this,_i,"f"))?Ci(this,_i,"f")[Ci(this,bi,"f")]:Ci(this,_i,"f");Mi(this,vi,new google.ima.AdsRequest,"f"),Ci(this,wi,"f").autoPlayAdBreaks||Ci(this,Yt,"f").getSettings().setAutoPlayAdBreaks(!1),!function(e){let t;if("undefined"==typeof DOMParser)return!1;t=e=>(new DOMParser).parseFromString(e,"text/xml");try{if(t(e).getElementsByTagName("parsererror").length>0)return!1}catch(e){return!1}return!0}(t)?Ci(this,vi,"f").adTagUrl=t:Ci(this,vi,"f").adsResponse=t;const i=Ci(this,fi,"f").element.parentElement?Ci(this,fi,"f").element.parentElement.offsetWidth:0,s=Ci(this,fi,"f").element.parentElement?Ci(this,fi,"f").element.parentElement.offsetHeight:0;Ci(this,vi,"f").linearAdSlotWidth=i,Ci(this,vi,"f").linearAdSlotHeight=s,Ci(this,vi,"f").nonLinearAdSlotWidth=i,Ci(this,vi,"f").nonLinearAdSlotHeight=s/3,Ci(this,wi,"f").live&&(Ci(this,vi,"f").liveStreamPrefetchSeconds=e),Ci(this,wi,"f").autoPlayAdBreaks&&(Ci(this,vi,"f").setAdWillAutoPlay(Ci(this,Zt,"f")),Ci(this,vi,"f").setAdWillPlayMuted(Ci(this,ei,"f"))),Ci(this,Yt,"f").requestAds(Ci(this,vi,"f"))}_setMediaVolume(e){Ci(this,fi,"f").volume=e,Ci(this,fi,"f").muted=0===e}_handleResizeAds(){this.resizeAds()}_createCustomClick(){var e;(null===(e=Ci(this,wi,"f").customClick)||void 0===e?void 0:e.enabled)&&(Ci(this,ui,"f")&&Ci(this,ui,"f").remove(),Mi(this,ui,document.createElement("div"),"f"),Ci(this,ui,"f").className="op-ads__click-container",Ci(this,ui,"f").innerHTML=`<div class="op-ads__click-label">${p(Ci(this,wi,"f").customClick.label)}</div>`,Ci(this,fi,"f").element.parentElement&&Ci(this,fi,"f").element.parentElement.insertBefore(Ci(this,ui,"f"),Ci(this,fi,"f").element.nextSibling))}_createSkipElement(){var e,t,i;if(f(Ci(this,fi,"f").element)&&(null===(e=Ci(this,wi,"f").audioSkip)||void 0===e?void 0:e.enabled)){if(null===(t=Ci(this,wi,"f").audioSkip)||void 0===t?void 0:t.element){const{element:e}=Ci(this,wi,"f").audioSkip||{};if("string"==typeof e){const t=document.getElementById(e);t&&Mi(this,gi,t,"f")}else e instanceof HTMLElement&&Mi(this,gi,e,"f")}else Mi(this,gi,(null===(i=Ci(this,fi,"f").element.parentElement)||void 0===i?void 0:i.querySelector(".op-ads__skip"))||void 0,"f");Ci(this,gi,"f")&&Ci(this,gi,"f").addEventListener("click",this._handleSkipAds,l)}}_handleSkipAds(){Ci(this,mi,"f").skip()}_onError(e){var t;return Ti(this,void 0,void 0,(function*(){const i=e.getError(),s=v("playererror",{detail:{data:i,message:i.toString(),type:"Ads"}});Ci(this,fi,"f").element.dispatchEvent(s);const n=[100,101,102,300,301,302,303,400,401,402,403,405,406,407,408,409,410,500,501,502,503,900,901,1005];Array.isArray(Ci(this,_i,"f"))&&Ci(this,_i,"f").length>1&&Ci(this,bi,"f")<Ci(this,_i,"f").length-1?(Mi(this,bi,(t=Ci(this,bi,"f"),++t),"f"),this.destroy(),Mi(this,Ei,!0,"f"),this.load(!0),console.warn(`Ad warning: ${i.toString()}`)):(n.indexOf(i.getErrorCode())>-1?(Ci(this,mi,"f")&&Ci(this,mi,"f").destroy(),console.error(`Ad error: ${i.toString()}`)):console.warn(`Ad warning: ${i.toString()}`),Mi(this,ki,null,"f"),!0!==Ci(this,Zt,"f")&&!0!==Ci(this,ei,"f")&&!0!==Ci(this,Ei,"f")||this._onPlay())}))}_onAdsManagerLoaded(e){var t;return Ti(this,void 0,void 0,(function*(){const i=new google.ima.AdsRenderingSettings;i.restoreCustomPlaybackStateOnAdBreakComplete=!0,Mi(this,mi,e.getAdsManager(Ci(this,fi,"f").element,i),"f"),Ci(this,mi,"f").setVolume(Ci(this,Zt,"f")&&Ci(this,ei,"f")?0:1),Ci(this,ui,"f")&&(Ci(this,ui,"f").style.display=Ci(this,mi,"f").isCustomClickTrackingUsed()?"block":"none"),Ci(this,mi,"f").addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this._onError,l),Ci(this,mi,"f").addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this._onPause,l),Ci(this,mi,"f").addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this._onPlay,l),Mi(this,di,[google.ima.AdEvent.Type.ALL_ADS_COMPLETED,google.ima.AdEvent.Type.CLICK,google.ima.AdEvent.Type.VIDEO_CLICKED,google.ima.AdEvent.Type.VIDEO_ICON_CLICKED,google.ima.AdEvent.Type.AD_PROGRESS,google.ima.AdEvent.Type.AD_BUFFERING,google.ima.AdEvent.Type.IMPRESSION,google.ima.AdEvent.Type.DURATION_CHANGE,google.ima.AdEvent.Type.USER_CLOSE,google.ima.AdEvent.Type.LINEAR_CHANGED,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,google.ima.AdEvent.Type.AD_METADATA,google.ima.AdEvent.Type.INTERACTION,google.ima.AdEvent.Type.COMPLETE,google.ima.AdEvent.Type.FIRST_QUARTILE,google.ima.AdEvent.Type.LOADED,google.ima.AdEvent.Type.MIDPOINT,google.ima.AdEvent.Type.PAUSED,google.ima.AdEvent.Type.RESUMED,google.ima.AdEvent.Type.USER_CLOSE,google.ima.AdEvent.Type.STARTED,google.ima.AdEvent.Type.THIRD_QUARTILE,google.ima.AdEvent.Type.SKIPPED,google.ima.AdEvent.Type.VOLUME_CHANGED,google.ima.AdEvent.Type.VOLUME_MUTED,google.ima.AdEvent.Type.LOG],"f"),Ci(this,wi,"f").autoPlayAdBreaks||Ci(this,di,"f").push(google.ima.AdEvent.Type.AD_BREAK_READY),Ci(this,di,"f").forEach((e=>{Ci(this,mi,"f").addEventListener(e,this._onEvent,l)}));try{Ci(this,mi,"f").init(Ci(this,fi,"f").element.offsetWidth,Ci(this,fi,"f").element.offsetHeight,"true"===(null===(t=Ci(this,fi,"f").element.parentElement)||void 0===t?void 0:t.getAttribute("data-fullscreen"))?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL),Ci(this,wi,"f").autoPlayAdBreaks&&Ci(this,mi,"f").start()}catch(e){yield this.play()}}))}_onEvent(e){var t,i,s;return Ti(this,void 0,void 0,(function*(){const a=e.getAd();switch(a&&Mi(this,ki,a,"f"),e.type){case google.ima.AdEvent.Type.LOADED:a.isLinear()?(n()&&d(Ci(this,fi,"f").element)&&(Ci(this,fi,"f").element.controls=!1),Mi(this,ai,a.getDuration(),"f"),Mi(this,oi,a.getDuration(),"f"),this.resizeAds()):this._onPlay();break;case google.ima.AdEvent.Type.STARTED:if(a.isLinear()){Ci(this,fi,"f").element.parentElement&&!Ci(this,fi,"f").element.parentElement.classList.contains("op-ads--active")&&Ci(this,fi,"f").element.parentElement.classList.add("op-ads--active"),Ci(this,fi,"f").paused||Ci(this,fi,"f").pause(),Mi(this,ti,!0,"f");const e=v("play");let t;if(Ci(this,fi,"f").element.dispatchEvent(e),t||(this.resizeAds(),t=!0),Ci(this,fi,"f").ended){Mi(this,ii,!1,"f");const e=v("adsmediaended");Ci(this,fi,"f").element.dispatchEvent(e)}"undefined"!=typeof window&&Mi(this,Ai,window.setInterval((()=>{Mi(this,oi,Math.round(Ci(this,mi,"f").getRemainingTime()),"f");const e=v("timeupdate");Ci(this,fi,"f").element.dispatchEvent(e)}),350),"f")}break;case google.ima.AdEvent.Type.COMPLETE:case google.ima.AdEvent.Type.SKIPPED:if(a.isLinear()){if(Ci(this,Ei,"f")&&Mi(this,Ei,!1,"f"),e.type===google.ima.AdEvent.Type.SKIPPED){const e=v("adsskipped");Ci(this,fi,"f").element.dispatchEvent(e)}Ci(this,fi,"f").element.parentElement&&Ci(this,fi,"f").element.parentElement.classList.remove("op-ads--active"),clearInterval(Ci(this,Ai,"f"))}break;case google.ima.AdEvent.Type.VOLUME_CHANGED:this._setMediaVolume(this.volume);break;case google.ima.AdEvent.Type.VOLUME_MUTED:if(a.isLinear()){const e=v("volumechange");Ci(this,fi,"f").element.dispatchEvent(e)}break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:if(Ci(this,wi,"f").live)Mi(this,yi,!1,"f"),this._requestAds(Ci(this,li,"f")-5),setTimeout(this.play,1e3*Ci(this,li,"f"));else if(a.isLinear()&&("string"==typeof Ci(this,_i,"f")||Ci(this,bi,"f")<Ci(this,_i,"f").length))if(Mi(this,ii,!0,"f"),Mi(this,Ei,!1,"f"),Mi(this,yi,!1,"f"),Mi(this,Ai,0,"f"),Mi(this,oi,0,"f"),Mi(this,ai,0,"f"),Mi(this,hi,!1,"f"),Mi(this,ti,!1,"f"),Mi(this,ki,null,"f"),this.destroy(),Array.isArray(Ci(this,_i,"f"))&&Ci(this,bi,"f")<Ci(this,_i,"f").length)Mi(this,ii,!1,"f"),Mi(this,bi,(s=Ci(this,bi,"f"),++s),"f"),Ci(this,Yt,"f").contentComplete(),this.load(!0);else if(Ci(this,fi,"f").element.parentElement&&Ci(this,fi,"f").element.parentElement.classList.remove("op-ads--active"),Ci(this,fi,"f").element.currentTime>=Ci(this,fi,"f").element.duration){const e=v("ended");Ci(this,fi,"f").element.dispatchEvent(e)}break;case google.ima.AdEvent.Type.AD_BREAK_READY:Ci(this,mi,"f")&&(Mi(this,ti,!0,"f"),Ci(this,mi,"f").start());break;case google.ima.AdEvent.Type.CLICK:Mi(this,ti,!1,"f");const o=v("pause");Ci(this,fi,"f").element.dispatchEvent(o);break;case google.ima.AdEvent.Type.AD_PROGRESS:const r=e.getAdData(),l=Ci(this,ki,"f")?Ci(this,ki,"f").getSkipTimeOffset():-1;if(Ci(this,gi,"f"))if(-1!==l){const e=Ci(this,mi,"f").getAdSkippableState(),s=Math.ceil(l-r.currentTime);Ci(this,gi,"f").classList.remove("hidden"),e?(Ci(this,gi,"f").textContent=(null===(t=Ci(this,wi,"f").audioSkip)||void 0===t?void 0:t.label)||"",Ci(this,gi,"f").classList.remove("disabled")):(Ci(this,gi,"f").textContent=(null===(i=Ci(this,wi,"f").audioSkip)||void 0===i?void 0:i.remainingLabel.replace("[[secs]]",s.toString()))||"",Ci(this,gi,"f").classList.add("disabled"))}else Ci(this,gi,"f").classList.add("hidden")}if(e.type===google.ima.AdEvent.Type.LOG){const t=e.getAdData();if(t.adError){const e=t.adError.getMessage();console.warn(`Ad warning: Non-fatal error occurred: ${e}`);const i=v("playererror",{detail:{data:t.adError,message:e,type:"Ads"}});Ci(this,fi,"f").element.dispatchEvent(i)}}else{const t=v(`ads${e.type}`);Ci(this,fi,"f").element.dispatchEvent(t)}}))}_onPreloadContent(){if(o()||a()){Ci(this,fi,"f").element.addEventListener("loadedmetadata",this._loadAds,l),Ci(this,fi,"f").load();const e=v("loadedmetadata");Ci(this,fi,"f").element.dispatchEvent(e)}else this._loadAds()}_onMetadataLoaded(){Ci(this,fi,"f").element.seekable.length?Ci(this,fi,"f").element.seekable.end(0)>Ci(this,ri,"f")&&this._onPlay():setTimeout(this._onMetadataLoaded,100)}_loadAds(){Ci(this,fi,"f").element.removeEventListener("loadedmetadata",this._loadAds),this._requestAds()}_onPlay(){return Ti(this,void 0,void 0,(function*(){Ci(this,fi,"f").currentTime=Ci(this,ri,"f"),Ci(this,fi,"f").element.addEventListener("ended",this._onEnded,l),Mi(this,Ai,0,"f"),Mi(this,Ei,!1,"f"),Mi(this,hi,!1,"f"),Mi(this,ai,0,"f"),Mi(this,oi,0,"f"),Ci(this,fi,"f").element.parentElement&&Ci(this,fi,"f").element.parentElement.classList.remove("op-ads--active");try{yield Ci(this,fi,"f").play();const e=v("play");Ci(this,fi,"f").element.dispatchEvent(e)}catch(e){console.error(e)}}))}_onPause(){Mi(this,ri,Ci(this,fi,"f").currentTime,"f"),Ci(this,fi,"f").pause(),Ci(this,fi,"f").element.removeEventListener("ended",this._onEnded)}_onEnded(){Mi(this,ii,!0,"f"),Mi(this,Ei,!1,"f"),Ci(this,fi,"f").element.removeEventListener("ended",this._onEnded),Ci(this,Yt,"f")&&Ci(this,Yt,"f").contentComplete()}}Yt=new WeakMap,Zt=new WeakMap,ei=new WeakMap,ti=new WeakMap,ii=new WeakMap,si=new WeakMap,ni=new WeakMap,ai=new WeakMap,oi=new WeakMap,ri=new WeakMap,li=new WeakMap,hi=new WeakMap,di=new WeakMap,fi=new WeakMap,ci=new WeakMap,ui=new WeakMap,pi=new WeakMap,mi=new WeakMap,vi=new WeakMap,gi=new WeakMap,bi=new WeakMap,yi=new WeakMap,Ei=new WeakMap,_i=new WeakMap,wi=new WeakMap,ki=new WeakMap,Ai=new WeakMap,Li=new WeakMap;var Pi,Oi,Wi,xi,$i,Ri,Ni,Ii,ji,Di,Fi,Bi,qi,Hi,Ki,zi,Vi=function(e,t,i,s){return new(i||(i=Promise))((function(n,a){function o(e){try{l(s.next(e))}catch(e){a(e)}}function r(e){try{l(s.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,r)}l((s=s.apply(e,t||[])).next())}))},Ui=function(e,t,i,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(e,i):n?n.value=i:t.set(e,i),i},Gi=function(e,t,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(e):s?s.value:t.get(e)};class Ji{constructor(e,t){var i;if(Pi.set(this,void 0),Oi.set(this,void 0),Wi.set(this,""),xi.set(this,void 0),$i.set(this,void 0),Ri.set(this,void 0),Ni.set(this,{}),Ii.set(this,!1),ji.set(this,void 0),Di.set(this,!1),Fi.set(this,!1),Bi.set(this,!1),qi.set(this,void 0),Hi.set(this,[]),Ki.set(this,void 0),zi.set(this,{controls:{alwaysVisible:!1,layers:{left:["play","time","volume"],middle:["progress"],right:["captions","settings","fullscreen"]}},defaultLevel:void 0,detachMenus:!1,forceNative:!0,height:0,hidePlayBtnTimer:350,labels:{auto:"Auto",captions:"CC/Subtitles",click:"Click to unmute",fullscreen:"Fullscreen",lang:{en:"English"},levels:"Quality Levels",live:"Live Broadcast",mediaLevels:"Change Quality",mute:"Mute",off:"Off",pause:"Pause",play:"Play",progressRail:"Time Rail",progressSlider:"Time Slider",settings:"Player Settings",speed:"Speed",speedNormal:"Normal",tap:"Tap to unmute",toggleCaptions:"Toggle Captions",unmute:"Unmute",volume:"Volume",volumeControl:"Volume Control",volumeSlider:"Volume Slider"},live:{showLabel:!0,showProgress:!1},media:{pauseOnClick:!1},minimalist:!1,mode:"responsive",onError:e=>console.error(e),pauseOthers:!0,progress:{allowRewind:!0,allowSkip:!0,duration:0,showCurrentTimeOnly:!1},showLoaderOnInit:!1,startTime:0,startVolume:1,step:0,useDeviceVolume:!0,width:0}),Ui(this,xi,e instanceof HTMLMediaElement?e:document.getElementById(e),"f"),Gi(this,xi,"f")){if(Ui(this,Ii,Gi(this,xi,"f").autoplay||!1,"f"),"string"!=typeof t&&!Array.isArray(t)){Ui(this,qi,Object.assign(Object.assign({},Gi(this,zi,"f")),t),"f");Object.keys(Gi(this,zi,"f")).filter((e=>"object"==typeof Gi(this,zi,"f")[e])).forEach((e=>{const i=t&&t[e]||{};Object.keys(i).length&&(Gi(this,qi,"f")[e]=Object.assign(Object.assign({},Gi(this,zi,"f")[e]),i))}))}Gi(this,xi,"f").volume=Gi(this,qi,"f").startVolume||1,Gi(this,qi,"f").ads&&Gi(this,qi,"f").ads.src&&Ui(this,$i,Gi(this,qi,"f").ads.src,"f"),((null===(i=Gi(this,qi,"f"))||void 0===i?void 0:i.startTime)||0)>0&&(Gi(this,xi,"f").currentTime=Gi(this,qi,"f").startTime||0),Ui(this,ji,Gi(this,xi,"f").volume,"f")}this._autoplay=this._autoplay.bind(this),this._enableKeyBindings=this._enableKeyBindings.bind(this)}static addMedia(e,t,i,s){Ji.customMedia.media[t]=s,Ji.customMedia.optionsKey[t]=e,Ji.customMedia.rules.push(i)}init(){return Vi(this,void 0,void 0,(function*(){this._isValid()&&(this._wrapInstance(),this._generateID(),yield this.prepareMedia(),Gi(this,qi,"f").minimalist||(this._createPlayButton(),this._createControls(),this._setEvents()),Ji.instances[this.id]=this)}))}load(){return Vi(this,void 0,void 0,(function*(){Gi(this,Ri,"f")||(yield this.prepareMedia(),yield Gi(this,Ri,"f").load())}))}play(){return Vi(this,void 0,void 0,(function*(){return Gi(this,Ri,"f").loaded||(yield Gi(this,Ri,"f").load(),Gi(this,Ri,"f").loaded=!0),Gi(this,Oi,"f")?Gi(this,Oi,"f").play():Gi(this,Ri,"f").play()}))}pause(){Gi(this,Oi,"f")?Gi(this,Oi,"f").pause():Gi(this,Ri,"f").pause()}stop(){this.pause(),Gi(this,Ri,"f")&&(Gi(this,Ri,"f").currentTime=0,this.src=[{src:"",type:"video/mp4"}])}destroy(){var e;Gi(this,Oi,"f")&&(Gi(this,Oi,"f").pause(),Gi(this,Oi,"f").destroy()),Gi(this,Ki,"f")&&Gi(this,Ki,"f").destroy();const t=Gi(this,xi,"f");Gi(this,Ri,"f")&&Gi(this,Ri,"f").destroy(),Object.keys(Gi(this,Ni,"f")).forEach((e=>{t.removeEventListener(e,Gi(this,Ni,"f")[e])})),this.getContainer().removeEventListener("keydown",this._enableKeyBindings),Gi(this,Ii,"f")&&!Gi(this,Bi,"f")&&d(Gi(this,xi,"f"))&&t.removeEventListener("canplay",this._autoplay),Gi(this,Pi,"f")&&Gi(this,Pi,"f").destroy(),d(Gi(this,xi,"f"))&&(this.playBtn&&this.playBtn.remove(),this.loader&&this.loader.remove()),(null===(e=Gi(this,qi,"f"))||void 0===e?void 0:e.onError)&&Gi(this,xi,"f").removeEventListener("playererror",Gi(this,qi,"f").onError),t.controls=!0,t.setAttribute("id",Gi(this,Wi,"f")),t.removeAttribute("op-live__enabled"),t.removeAttribute("data-op-dvr__enabled");const i="fit"!==Gi(this,qi,"f").mode||f(t)?t.parentElement:t.closest(".op-player__fit--wrapper");i&&i.parentNode&&i.parentNode.replaceChild(t,i),delete Ji.instances[Gi(this,Wi,"f")];const s=v("playerdestroyed");t.dispatchEvent(s)}getContainer(){return Gi(this,xi,"f").parentElement||Gi(this,xi,"f")}getControls(){return Gi(this,Pi,"f")}getCustomControls(){return Gi(this,Hi,"f")}getElement(){return Gi(this,xi,"f")}getEvents(){return Gi(this,Ni,"f")}getOptions(){return Gi(this,qi,"f")}activeElement(){return Gi(this,Oi,"f")&&Gi(this,Oi,"f").started()?Gi(this,Oi,"f"):Gi(this,Ri,"f")}isMedia(){return this.activeElement()instanceof Xt}isAd(){return this.activeElement()instanceof Si}getMedia(){return Gi(this,Ri,"f")}getAd(){return Gi(this,Oi,"f")}addCaptions(e){if(e.default){const e=Gi(this,xi,"f").querySelectorAll("track");for(let t=0,i=e.length;t<i;t++)e[t].default=!1}const t=Gi(this,xi,"f");let i=t.querySelector(`track[srclang="${e.srclang}"][kind="${e.kind}"]`);i?(i.src=e.src,i.label=e.label,i.default=e.default||!1):(i=document.createElement("track"),i.srclang=e.srclang,i.src=e.src,i.kind=e.kind,i.label=e.label,i.default=e.default||!1,t.appendChild(i));const s=v("controlschanged");t.dispatchEvent(s)}addControl(e){e.custom=!0,e.type="button",Gi(this,Hi,"f").push(e);const t=v("controlschanged");Gi(this,xi,"f").dispatchEvent(t)}addElement(e){e.custom=!0,Gi(this,Hi,"f").push(e);const t=v("controlschanged");Gi(this,xi,"f").dispatchEvent(t)}removeControl(e){Gi(this,Hi,"f").forEach(((t,i)=>{t.id===e&&Gi(this,Hi,"f").splice(i,1)}));const t=v("controlschanged");Gi(this,xi,"f").dispatchEvent(t)}prepareMedia(){var e;return Vi(this,void 0,void 0,(function*(){try{(null===(e=Gi(this,qi,"f"))||void 0===e?void 0:e.onError)&&Gi(this,xi,"f").addEventListener("playererror",Gi(this,qi,"f").onError,l),Gi(this,Ii,"f")&&d(Gi(this,xi,"f"))&&Gi(this,xi,"f").addEventListener("canplay",this._autoplay,l),Ui(this,Ri,new Xt(Gi(this,xi,"f"),Gi(this,qi,"f"),Gi(this,Ii,"f"),Ji.customMedia),"f");const t=Gi(this,xi,"f").getAttribute("preload");if(!Gi(this,$i,"f")&&t&&"none"===t||(yield Gi(this,Ri,"f").load(),Gi(this,Ri,"f").loaded=!0),!Gi(this,Ii,"f")&&Gi(this,$i,"f")){const e=Gi(this,qi,"f")&&Gi(this,qi,"f").ads?Gi(this,qi,"f").ads:void 0;Ui(this,Oi,new Si(Gi(this,Ri,"f"),Gi(this,$i,"f"),!1,!1,e),"f"),yield Gi(this,Oi,"f").load()}}catch(e){console.error(e)}}))}loadAd(e){return Vi(this,void 0,void 0,(function*(){try{if(this.isAd())this.getAd().destroy(),this.getAd().src=e,yield this.getAd().load();else{const t=Gi(this,qi,"f")&&Gi(this,qi,"f").ads?Gi(this,qi,"f").ads:void 0,i=!this.activeElement().paused||Gi(this,Di,"f");Ui(this,Oi,new Si(Gi(this,Ri,"f"),e,i,Gi(this,Fi,"f"),t),"f"),yield Gi(this,Oi,"f").load()}}catch(e){console.error(e)}}))}set src(e){Gi(this,Ri,"f")instanceof Xt?(Gi(this,Ri,"f").mediaFiles=[],Gi(this,Ri,"f").src=e):"string"==typeof e?Gi(this,xi,"f").src=e:Array.isArray(e)?e.forEach((e=>{const t=document.createElement("source");t.src=e.src,t.type=e.type||J(e.src,Gi(this,xi,"f")),Gi(this,xi,"f").appendChild(t)})):"object"==typeof e&&(Gi(this,xi,"f").src=e.src)}get src(){return Gi(this,Ri,"f").src}get id(){return Gi(this,Wi,"f")}_isValid(){const e=Gi(this,xi,"f");return e instanceof HTMLElement!=!1&&(!(!f(e)&&!d(e))&&!!e.classList.contains("op-player__media"))}_wrapInstance(){const e=document.createElement("div");e.className="op-player op-player__keyboard--inactive",e.className+=f(Gi(this,xi,"f"))?" op-player__audio":" op-player__video",e.tabIndex=0,Gi(this,xi,"f").classList.remove("op-player"),Gi(this,xi,"f").parentElement&&Gi(this,xi,"f").parentElement.insertBefore(e,Gi(this,xi,"f")),e.appendChild(Gi(this,xi,"f"));const t=document.createElement("div");if(t.className="op-status",t.innerHTML="<span></span>",t.tabIndex=-1,t.setAttribute("aria-hidden","true"),d(Gi(this,xi,"f"))&&Gi(this,xi,"f").parentElement&&Gi(this,xi,"f").parentElement.insertBefore(t,Gi(this,xi,"f")),e.addEventListener("keydown",(()=>{e.classList.contains("op-player__keyboard--inactive")&&e.classList.remove("op-player__keyboard--inactive")}),l),e.addEventListener("click",(()=>{e.classList.contains("op-player__keyboard--inactive")||e.classList.add("op-player__keyboard--inactive")}),l),"fill"!==Gi(this,qi,"f").mode||f(Gi(this,xi,"f"))||n())if("fit"!==Gi(this,qi,"f").mode||f(Gi(this,xi,"f"))){let t="";if(Gi(this,qi,"f").width){t+=`width: ${"number"==typeof Gi(this,qi,"f").width?`${Gi(this,qi,"f").width}px`:Gi(this,qi,"f").width} !important;`}if(Gi(this,qi,"f").height){t+=`height: ${"number"==typeof Gi(this,qi,"f").height?`${Gi(this,qi,"f").height}px`:Gi(this,qi,"f").height} !important;`}t&&e.setAttribute("style",t)}else{const e=this.getContainer();if(e.parentElement){const t=document.createElement("div");t.className="op-player__fit--wrapper",t.tabIndex=0,e.parentElement.insertBefore(t,e),t.appendChild(e),e.classList.add("op-player__fit")}}else this.getContainer().classList.add("op-player__full")}_createControls(){var e,t,i,s;if(n()&&d(Gi(this,xi,"f"))&&this.getContainer().classList.add("op-player__ios--iphone"),Ui(this,Pi,new vt(this),"f"),Gi(this,Pi,"f").create(),f(Gi(this,xi,"f"))&&(null===(t=null===(e=Gi(this,qi,"f").ads)||void 0===e?void 0:e.audioSkip)||void 0===t?void 0:t.enabled)&&!(null===(s=null===(i=Gi(this,qi,"f").ads)||void 0===i?void 0:i.audioSkip)||void 0===s?void 0:s.element)){const e=document.createElement("button");e.className="op-ads__skip hidden",Gi(this,Pi,"f").getContainer().appendChild(e)}}_generateID(){if(Gi(this,xi,"f").id)Ui(this,Wi,Gi(this,xi,"f").id,"f"),Gi(this,xi,"f").removeAttribute("id");else{const e=crypto,t="function"==typeof e.getRandomBytes?e.getRandomBytes:e.getRandomValues;Ui(this,Wi,`op_${t(new Uint32Array(1))[0].toString(36).substr(2,9)}`,"f")}Gi(this,xi,"f").parentElement&&(Gi(this,xi,"f").parentElement.id=Gi(this,Wi,"f"))}_createPlayButton(){var e,t;f(Gi(this,xi,"f"))||(this.playBtn=document.createElement("button"),this.playBtn.className="op-player__play",this.playBtn.tabIndex=0,this.playBtn.title=(null===(e=Gi(this,qi,"f").labels)||void 0===e?void 0:e.play)||"",this.playBtn.innerHTML=`<span>${(null===(t=Gi(this,qi,"f").labels)||void 0===t?void 0:t.play)||""}</span>`,this.playBtn.setAttribute("aria-pressed","false"),this.playBtn.setAttribute("aria-hidden","false"),this.loader=document.createElement("span"),this.loader.className="op-player__loader",this.loader.tabIndex=-1,this.loader.setAttribute("aria-hidden","true"),Gi(this,xi,"f").parentElement&&(Gi(this,xi,"f").parentElement.insertBefore(this.loader,Gi(this,xi,"f")),Gi(this,xi,"f").parentElement.insertBefore(this.playBtn,Gi(this,xi,"f"))),this.playBtn.addEventListener("click",(()=>{this.activeElement().paused?this.activeElement().play():this.activeElement().pause()}),l))}_setEvents(){if(d(Gi(this,xi,"f"))){Gi(this,Ni,"f").loadedmetadata=()=>{const e=this.activeElement();!Gi(this,qi,"f").showLoaderOnInit||n()||o()?(this.loader.setAttribute("aria-hidden","true"),this.playBtn.setAttribute("aria-hidden","false")):(this.loader.setAttribute("aria-hidden","false"),this.playBtn.setAttribute("aria-hidden","true")),e.paused&&(this.playBtn.classList.remove("op-player__play--paused"),this.playBtn.setAttribute("aria-pressed","false"))},Gi(this,Ni,"f").waiting=()=>{this.playBtn.setAttribute("aria-hidden","true"),this.loader.setAttribute("aria-hidden","false")},Gi(this,Ni,"f").seeking=()=>{const e=this.activeElement();this.playBtn.setAttribute("aria-hidden","true"),this.loader.setAttribute("aria-hidden",e instanceof Xt?"false":"true")},Gi(this,Ni,"f").seeked=()=>{const e=this.activeElement();0===Math.round(e.currentTime)?(this.playBtn.setAttribute("aria-hidden","true"),this.loader.setAttribute("aria-hidden","false")):(this.playBtn.setAttribute("aria-hidden",e instanceof Xt?"false":"true"),this.loader.setAttribute("aria-hidden","true"))},Gi(this,Ni,"f").play=()=>{var e;this.playBtn.classList.add("op-player__play--paused"),this.playBtn.title=(null===(e=Gi(this,qi,"f").labels)||void 0===e?void 0:e.pause)||"",this.loader.setAttribute("aria-hidden","true"),Gi(this,qi,"f").showLoaderOnInit?this.playBtn.setAttribute("aria-hidden","true"):setTimeout((()=>{this.playBtn.setAttribute("aria-hidden","true")}),Gi(this,qi,"f").hidePlayBtnTimer)},Gi(this,Ni,"f").playing=()=>{this.loader.setAttribute("aria-hidden","true"),this.playBtn.setAttribute("aria-hidden","true")},Gi(this,Ni,"f").pause=()=>{var e;const t=this.activeElement();this.playBtn.classList.remove("op-player__play--paused"),this.playBtn.title=(null===(e=Gi(this,qi,"f").labels)||void 0===e?void 0:e.play)||"",Gi(this,qi,"f").showLoaderOnInit&&0===Math.round(t.currentTime)?(this.playBtn.setAttribute("aria-hidden","true"),this.loader.setAttribute("aria-hidden","false")):(this.playBtn.setAttribute("aria-hidden","false"),this.loader.setAttribute("aria-hidden","true"))},Gi(this,Ni,"f").ended=()=>{this.loader.setAttribute("aria-hidden","true"),this.playBtn.setAttribute("aria-hidden","true")};let e=!1;Gi(this,Ni,"f").timeupdate=()=>{if(Gi(this,xi,"f").loop&&this.isMedia()&&Gi(this,Oi,"f")){const t=this.getMedia(),i=t.duration-t.currentTime;if(i>0&&i<=.25&&!e){e=!0;const t=v("ended");Gi(this,xi,"f").dispatchEvent(t)}else 0===i&&(e=!1)}}}Object.keys(Gi(this,Ni,"f")).forEach((e=>{Gi(this,xi,"f").addEventListener(e,Gi(this,Ni,"f")[e],l)})),this.getContainer().addEventListener("keydown",this._enableKeyBindings,l)}_autoplay(){return Vi(this,void 0,void 0,(function*(){var e,t,i,s,n;Gi(this,Bi,"f")||(Ui(this,Bi,!0,"f"),Gi(this,xi,"f").removeEventListener("canplay",this._autoplay),yield(e=Gi(this,xi,"f"),t=Gi(this,ji,"f"),i=e=>{Ui(this,Di,e,"f")},s=e=>{Ui(this,Fi,e,"f")},n=()=>Vi(this,void 0,void 0,(function*(){var e,t;if(Gi(this,Fi,"f")){this.activeElement().muted=!0,this.activeElement().volume=0;const i=v("volumechange");Gi(this,xi,"f").dispatchEvent(i);const s=document.createElement("div"),n=a()||o()?null===(e=Gi(this,qi,"f").labels)||void 0===e?void 0:e.tap:null===(t=Gi(this,qi,"f").labels)||void 0===t?void 0:t.click;s.className="op-player__unmute",s.innerHTML=`<span>${n}</span>`,s.tabIndex=0,s.addEventListener("click",(()=>{this.activeElement().muted=!1,this.activeElement().volume=Gi(this,ji,"f");const e=v("volumechange");Gi(this,xi,"f").dispatchEvent(e),s.remove()}),l);const r=this.getContainer();r.insertBefore(s,r.firstChild)}else this.activeElement().muted=Gi(this,xi,"f").muted,this.activeElement().volume=Gi(this,ji,"f");if(Gi(this,$i,"f")){const e=Gi(this,qi,"f")&&Gi(this,qi,"f").ads?Gi(this,qi,"f").ads:void 0;Ui(this,Oi,new Si(Gi(this,Ri,"f"),Gi(this,$i,"f"),Gi(this,Di,"f"),Gi(this,Fi,"f"),e),"f"),yield Gi(this,Oi,"f").load()}else(Gi(this,Di,"f")||Gi(this,Fi,"f"))&&(yield this.play())})),U(void 0,void 0,void 0,(function*(){try{void 0!==(yield e.play())?(e.pause(),i(!0),s(!1),n()):(i(!e.paused),e.pause(),s(!1),n())}catch(a){e.volume=0,e.muted=!0;try{yield e.play(),e.pause(),i(!0),s(!0),n()}catch(a){e.volume=t,e.muted=!1,i(!1),s(!1),n()}}}))))}))}_enableKeyBindings(e){var t,i;const s=e.key||"",n=this.activeElement(),a=this.isAd(),o=null===(t=null===document||void 0===document?void 0:document.activeElement)||void 0===t?void 0:t.classList.contains("op-player");switch(s){case"Enter":case"K":case" ":!o||" "!==s&&"Enter"!==s?"K"===s&&(n.paused?n.play():n.pause()):n.paused?n.play():n.pause(),e.preventDefault(),e.stopPropagation();break;case"End":a||n.duration===1/0||(n.currentTime=n.duration,e.preventDefault(),e.stopPropagation());break;case"Home":a||(n.currentTime=0,e.preventDefault(),e.stopPropagation());break;case"ArrowLeft":case"ArrowRight":case"J":case"L":if(!a&&n.duration!==1/0){let t=5;const a=this.getOptions().step;a?t="J"===s||"L"===s?2*a:a:"J"!==s&&"L"!==s||(t=10);const o=n.duration!==1/0?t:(null===(i=this.getOptions().progress)||void 0===i?void 0:i.duration)||0;n.currentTime+="ArrowRight"===s||"J"===s?-1*o:o,n.currentTime<0?n.currentTime=0:n.currentTime>=n.duration&&(n.currentTime=n.duration),e.preventDefault(),e.stopPropagation()}break;case"ArrowUp":case"ArrowDown":const t="ArrowUp"===s?Math.min(n.volume+.1,1):Math.max(n.volume-.1,0);n.volume=t,n.muted=!(t>0),e.preventDefault(),e.stopPropagation();break;case"F":d(Gi(this,xi,"f"))&&!e.ctrlKey&&(Ui(this,Ki,new V(this,"",""),"f"),void 0!==Gi(this,Ki,"f").fullScreenEnabled&&(Gi(this,Ki,"f").toggleFullscreen(),e.preventDefault(),e.stopPropagation()));break;case"M":n.muted=!n.muted,n.muted?n.volume=0:n.volume=Gi(this,ji,"f"),e.preventDefault(),e.stopPropagation();break;case"<":case">":if(!a&&e.shiftKey){const t=n;t.playbackRate="<"===s?Math.max(t.playbackRate-.25,.25):Math.min(t.playbackRate+.25,2);const i=this.getContainer().querySelector(".op-status>span");i&&(i.textContent=`${t.playbackRate}x`,i.parentElement&&i.parentElement.setAttribute("aria-hidden","false"),setTimeout((()=>{i.parentElement&&i.parentElement.setAttribute("aria-hidden","true")}),500));const a=v("controlschanged");dispatchEvent(a),e.preventDefault(),e.stopPropagation()}else!a&&n.paused&&(n.currentTime+=.04*("<"===s?-1:1),e.preventDefault(),e.stopPropagation())}}}return Pi=new WeakMap,Oi=new WeakMap,Wi=new WeakMap,xi=new WeakMap,$i=new WeakMap,Ri=new WeakMap,Ni=new WeakMap,Ii=new WeakMap,ji=new WeakMap,Di=new WeakMap,Fi=new WeakMap,Bi=new WeakMap,qi=new WeakMap,Hi=new WeakMap,Ki=new WeakMap,zi=new WeakMap,Ji.instances={},Ji.customMedia={media:{},optionsKey:{},rules:[]},"undefined"!=typeof window&&(window.OpenPlayer=Ji,window.OpenPlayerJS=Ji),t}()}));
//# sourceMappingURL=openplayer.min.js.map