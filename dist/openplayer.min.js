<<<<<<< HEAD
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.OpenPlayer=t():e.OpenPlayer=t()}(this,(()=>(()=>{var e={669:e=>{e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n},e.exports.__esModule=!0,e.exports.default=e.exports},858:e=>{e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},506:e=>{e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports},926:e=>{function t(e,t,i,n,s,a,r){try{var o=e[a](r),l=o.value}catch(e){return void i(e)}o.done?t(l):Promise.resolve(l).then(n,s)}e.exports=function(e){return function(){var i=this,n=arguments;return new Promise((function(s,a){var r=e.apply(i,n);function o(e){t(r,s,a,o,l,"next",e)}function l(e){t(r,s,a,o,l,"throw",e)}o(void 0)}))}},e.exports.__esModule=!0,e.exports.default=e.exports},358:e=>{e.exports=function(e,t){return t.get?t.get.call(e):t.value},e.exports.__esModule=!0,e.exports.default=e.exports},625:e=>{e.exports=function(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}},e.exports.__esModule=!0,e.exports.default=e.exports},575:e=>{e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},486:e=>{e.exports=function(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)},e.exports.__esModule=!0,e.exports.default=e.exports},226:(e,t,i)=>{var n=i(358),s=i(486);e.exports=function(e,t){var i=s(e,t,"get");return n(e,i)},e.exports.__esModule=!0,e.exports.default=e.exports},962:(e,t,i)=>{var n=i(625),s=i(486);e.exports=function(e,t,i){var a=s(e,t,"set");return n(e,a,i),i},e.exports.__esModule=!0,e.exports.default=e.exports},913:e=>{function t(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},713:e=>{e.exports=function(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e},e.exports.__esModule=!0,e.exports.default=e.exports},754:e=>{function t(i){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,t(i)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},205:(e,t,i)=>{var n=i(489);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&n(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},884:e=>{e.exports=function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,s,a=[],r=!0,o=!1;try{for(i=i.call(e);!(r=(n=i.next()).done)&&(a.push(n.value),!t||a.length!==t);r=!0);}catch(e){o=!0,s=e}finally{try{r||null==i.return||i.return()}finally{if(o)throw s}}return a}},e.exports.__esModule=!0,e.exports.default=e.exports},521:e=>{e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},479:(e,t,i)=>{var n=i(316);e.exports=function(e,t){if(null==e)return{};var i,s,a=n(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(s=0;s<r.length;s++)i=r[s],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(a[i]=e[i])}return a},e.exports.__esModule=!0,e.exports.default=e.exports},316:e=>{e.exports=function(e,t){if(null==e)return{};var i,n,s={},a=Object.keys(e);for(n=0;n<a.length;n++)i=a[n],t.indexOf(i)>=0||(s[i]=e[i]);return s},e.exports.__esModule=!0,e.exports.default=e.exports},585:(e,t,i)=>{var n=i(8).default,s=i(506);e.exports=function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return s(e)},e.exports.__esModule=!0,e.exports.default=e.exports},591:(e,t,i)=>{var n=i(8).default;function s(){"use strict";e.exports=s=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},i=Object.prototype,a=i.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",l=r.asyncIterator||"@@asyncIterator",u=r.toStringTag||"@@toStringTag";function c(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,i){return e[t]=i}}function d(e,t,i,n){var s=t&&t.prototype instanceof p?t:p,a=Object.create(s.prototype),r=new M(n||[]);return a._invoke=function(e,t,i){var n="suspendedStart";return function(s,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===s)throw a;return x()}for(i.method=s,i.arg=a;;){var r=i.delegate;if(r){var o=k(r,i);if(o){if(o===v)continue;return o}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===n)throw n="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n="executing";var l=h(e,t,i);if("normal"===l.type){if(n=i.done?"completed":"suspendedYield",l.arg===v)continue;return{value:l.arg,done:i.done}}"throw"===l.type&&(n="completed",i.method="throw",i.arg=l.arg)}}}(e,i,r),a}function h(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var v={};function p(){}function m(){}function f(){}var g={};c(g,o,(function(){return this}));var y=Object.getPrototypeOf,b=y&&y(y(C([])));b&&b!==i&&a.call(b,o)&&(g=b);var E=f.prototype=p.prototype=Object.create(g);function _(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function i(s,r,o,l){var u=h(e[s],e,r);if("throw"!==u.type){var c=u.arg,d=c.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){i("next",e,o,l)}),(function(e){i("throw",e,o,l)})):t.resolve(d).then((function(e){c.value=e,o(c)}),(function(e){return i("throw",e,o,l)}))}l(u.arg)}var s;this._invoke=function(e,n){function a(){return new t((function(t,s){i(e,n,t,s)}))}return s=s?s.then(a,a):a()}}function k(e,t){var i=e.iterator[t.method];if(void 0===i){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,k(e,t),"throw"===t.method))return v;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var n=h(i,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,v;var s=n.arg;return s?s.done?(t[e.resultName]=s.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,v):s:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,v)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function M(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function C(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,n=function t(){for(;++i<e.length;)if(a.call(e,i))return t.value=e[i],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:x}}function x(){return{value:void 0,done:!0}}return m.prototype=f,c(E,"constructor",f),c(f,"constructor",m),m.displayName=c(f,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,c(e,u,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},_(w.prototype),c(w.prototype,l,(function(){return this})),t.AsyncIterator=w,t.async=function(e,i,n,s,a){void 0===a&&(a=Promise);var r=new w(d(e,i,n,s),a);return t.isGeneratorFunction(i)?r:r.next().then((function(e){return e.done?e.value:r.next()}))},_(E),c(E,u,"Generator"),c(E,o,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=[];for(var i in e)t.push(i);return t.reverse(),function i(){for(;t.length;){var n=t.pop();if(n in e)return i.value=n,i.done=!1,i}return i.done=!0,i}},t.values=C,M.prototype={constructor:M,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(L),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function i(i,n){return r.type="throw",r.arg=e,t.next=i,n&&(t.method="next",t.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var s=this.tryEntries[n],r=s.completion;if("root"===s.tryLoc)return i("end");if(s.tryLoc<=this.prev){var o=a.call(s,"catchLoc"),l=a.call(s,"finallyLoc");if(o&&l){if(this.prev<s.catchLoc)return i(s.catchLoc,!0);if(this.prev<s.finallyLoc)return i(s.finallyLoc)}else if(o){if(this.prev<s.catchLoc)return i(s.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return i(s.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var s=n;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var r=s?s.completion:{};return r.type=e,r.arg=t,s?(this.method="next",this.next=s.finallyLoc,v):this.complete(r)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),L(i),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.tryLoc===e){var n=i.completion;if("throw"===n.type){var s=n.arg;L(i)}return s}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,i){return this.delegate={iterator:C(e),resultName:t,nextLoc:i},"next"===this.method&&(this.arg=void 0),v}},t}e.exports=s,e.exports.__esModule=!0,e.exports.default=e.exports},489:e=>{function t(i,n){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(i,n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},38:(e,t,i)=>{var n=i(858),s=i(884),a=i(379),r=i(521);e.exports=function(e,t){return n(e)||s(e,t)||a(e,t)||r()},e.exports.__esModule=!0,e.exports.default=e.exports},8:e=>{function t(i){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(i)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},379:(e,t,i)=>{var n=i(669);e.exports=function(e,t){if(e){if("string"==typeof e)return n(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},757:(e,t,i)=>{var n=i(591)();e.exports=n;try{regeneratorRuntime=n}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}}},t={};function i(n){var s=t[n];if(void 0!==s)return s.exports;var a=t[n]={exports:{}};return e[n](a,a.exports,i),a.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var n={};return(()=>{"use strict";i.d({},{Z:()=>Zn});var e=i(8),t=i.n(e),n=i(926),s=i.n(n),a=i(575),r=i.n(a),o=i(913),l=i.n(o),u=i(713),c=i.n(u),d=i(226),h=i.n(d),v=i(962),p=i.n(v),m=i(757),f=i.n(m),g=i(38),y=i.n(g),b="undefined"!=typeof window?window.navigator:null,E=b?b.userAgent.toLowerCase():null,_=(!!E&&(/ipad/i.test(E)&&window.MSStream),!!E&&(/iphone/i.test(E)&&!window.MSStream)),w=(!!E&&(/ipod/i.test(E)&&window.MSStream),!!E&&(/ipad|iphone|ipod/i.test(E)&&!window.MSStream)),k=!!E&&/android/i.test(E),A=(!!b&&("msLaunchUri"in b&&document),!!E&&/chrome/i.test(E)),L=(!!E&&/firefox/i.test(E),!!E&&(/safari/i.test(E)&&!A)),M=(!!E&&/^mozilla\/\d+\.\d+\s\(linux;\su;/i.test(E),"undefined"!=typeof window&&"MediaSource"in window),C={passive:!1};function x(e){return"video"===e.tagName.toLowerCase()}function O(e){return"audio"===e.tagName.toLowerCase()}function T(e){return new Promise((function(t,i){var n=document.createElement("script");n.src=e,n.async=!0,n.onload=function(){n.remove(),t()},n.onerror=function(){n.remove(),i(new Error("".concat(e," could not be loaded")))},document.head&&document.head.appendChild(n)}))}function S(e){var t=e.getBoundingClientRect();return{left:t.left+(window.pageXOffset||document.documentElement.scrollLeft),top:t.top+(window.pageYOffset||document.documentElement.scrollTop)}}function P(e){for(var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=new DOMParser,n=i.parseFromString(e,"text/html"),s=n.body||document.createElement("body"),a=s.querySelectorAll("script"),r=0,o=a.length;r<o;r++)a[r].remove();var l=function e(t){for(var i=t.children,n=0,s=i.length;n<s;n++){for(var a=i[n],r=a.attributes,o=0,l=r.length;o<l;o++){var u=r[o],c=u.name,d=u.value.replace(/\s+/g,"").toLowerCase();["src","href","xlink:href"].includes(c)&&(d.includes("javascript:")||d.includes("data:"))&&a.removeAttribute(c),c.startsWith("on")&&a.removeAttribute(c)}e(a)}};return l(s),t?(s.textContent||"").replace(/\s{2,}/g,""):s.innerHTML}function j(e){e="string"!=typeof e?JSON.stringify(e):e;try{e=JSON.parse(e)}catch(e){return!1}return"object"===t()(e)&&null!==e}function W(e,t){var i={};return t&&t.detail&&(i={detail:t.detail}),new CustomEvent(e,i)}function R(e,t){var i=Math.floor(e%1*(t||0)),n=Math.floor(e),s=Math.floor(n/60),a=Math.floor(s/60),r=function(e){var t=e.toString();return e<10?e<=0?"00":"0".concat(t):t};return s%=60,n%=60,"".concat(a>0?"".concat(r(a),":"):"").concat(r(s),":").concat(r(n)).concat(i?":".concat(r(i)):"")}function N(e){var t=e.replace(/;/g,":").split(":"),i=0;return 3===t.length?(i+=60*parseFloat(t[0])*60,i+=60*parseFloat(t[1]),i+=parseFloat(t[2])):(i+=60*parseFloat(t[0]),i+=parseFloat(t[1])),i}function D(e,t,i){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,i)}var I=new WeakMap,F=new WeakMap,B=new WeakMap,q=new WeakMap,H=new WeakMap,z=new WeakMap,K=new WeakMap,V=new WeakMap,U=new WeakMap,G=new WeakMap,Q=new WeakMap,$=new WeakMap,J=new WeakMap,Y=function(){function e(t,i,n){r()(this,e),D(this,I,{writable:!0,value:void 0}),D(this,F,{writable:!0,value:void 0}),D(this,B,{writable:!0,value:void 0}),D(this,q,{writable:!0,value:void 0}),D(this,H,{writable:!0,value:{button:{},global:{},media:{}}}),D(this,z,{writable:!0,value:{}}),D(this,K,{writable:!0,value:void 0}),D(this,V,{writable:!0,value:{}}),D(this,U,{writable:!0,value:void 0}),D(this,G,{writable:!0,value:void 0}),D(this,Q,{writable:!0,value:"off"}),D(this,$,{writable:!0,value:void 0}),D(this,J,{writable:!0,value:void 0}),p()(this,I,t),p()(this,$,i),p()(this,J,n),this._getCuesFromText=this._getCuesFromText.bind(this),this._getNativeCues=this._getNativeCues.bind(this),this._displayCaptions=this._displayCaptions.bind(this),this._hideCaptions=this._hideCaptions.bind(this),this._search=this._search.bind(this),this._prepareTrack=this._prepareTrack.bind(this),this._formatMenuItems=this._formatMenuItems.bind(this)}return l()(e,[{key:"create",value:function(){for(var e=this,t=h()(this,I).getElement().textTracks,i=[],n=0,s=t.length;n<s;n++){var a=['track[kind="subtitles"][srclang="'.concat(t[n].language,'"][label="').concat(t[n].label,'"]'),'track[kind="captions"][srclang="'.concat(t[n].language,'"][label="').concat(t[n].label,'"]')];h()(this,I).getElement().querySelector(a.join(", "))&&i.push(t[n])}if(!i.length)for(var r=0,o=t.length;r<o;r++)i.push(t[r]);if(p()(this,K,i),p()(this,U,!!h()(this,K).length),h()(this,U)){var l=h()(this,I).getOptions(),u=l.labels,c=l.detachMenus;p()(this,F,document.createElement("button")),h()(this,F).className="op-controls__captions op-control__".concat(h()(this,$)),h()(this,F).tabIndex=0,h()(this,F).title=(null==u?void 0:u.toggleCaptions)||"",h()(this,F).setAttribute("aria-controls",h()(this,I).id),h()(this,F).setAttribute("aria-pressed","false"),h()(this,F).setAttribute("aria-label",(null==u?void 0:u.toggleCaptions)||""),h()(this,F).setAttribute("data-active-captions","off"),c&&(h()(this,F).classList.add("op-control--no-hover"),p()(this,q,document.createElement("div")),h()(this,q).className="op-settings op-captions__menu",h()(this,q).setAttribute("aria-hidden","true"),h()(this,q).innerHTML='<div class="op-settings__menu" role="menu" id="menu-item-captions">\n                <div class="op-settings__submenu-item" tabindex="0" role="menuitemradio" aria-checked="'.concat("off"===h()(this,Q)?"true":"false",'">\n                    <div class="op-settings__submenu-label op-subtitles__option" data-value="captions-off">').concat(null==u?void 0:u.off,"</div>\n                </div>\n            </div>"));var d=function(t,i,n){var s,a,r=i[t];if("subtitles"===r.kind||"captions"===r.kind){r.default&&(p()(e,Q,r.srclang),h()(e,F).setAttribute("data-active-captions",r.srclang));var o=(s=r.src,(a=document.createElement("a")).href=s,a.href),l=h()(e,K)[t];l&&l.language===r.srclang&&(l.cues&&l.cues.length>0?(h()(e,z)[r.srclang]=e._getNativeCues(h()(e,K)[t]),e._prepareTrack(t,r.srclang,o,r.default||!1)):fetch(o).then((function(e){if(!e.ok)throw new Error("Network response was not ok");return e.text()})).then((function(i){h()(e,z)[r.srclang]=e._getCuesFromText(i),e._prepareTrack(t,r.srclang,o,r.default||!1);var n='.op-subtitles__option[data-value="captions-'.concat(h()(e,K)[t].language,'"]');if(h()(e,q)&&!h()(e,q).querySelector(n)){var s=document.createElement("div"),a=null!=u&&u.lang?u.lang[h()(e,K)[t].language]:null;s.className="op-settings__submenu-item",s.tabIndex=0,s.setAttribute("role","menuitemradio"),s.setAttribute("aria-checked",h()(e,Q)===h()(e,K)[t].language?"true":"false"),s.innerHTML='<div class="op-settings__submenu-label op-subtitles__option"\n                                        data-value="captions-'.concat(h()(e,K)[t].language,'">\n                                        ').concat(a||h()(e,K)[t].label,"\n                                    </div>"),h()(e,q).appendChild(s)}})))}},v=(n=0,h()(this,I).getElement().querySelectorAll("track"));for(s=v.length;n<s;n++)d(n,v);p()(this,B,document.createElement("div")),h()(this,B).className="op-captions",h()(this,B).innerHTML="<span></span>";var m=h()(this,B).querySelector("span");if(h()(this,H).media.timeupdate=function(){if(h()(e,I).isMedia())if(h()(e,G)){var t=h()(e,z)[h()(e,G).language];if(m&&void 0!==t){var i=e._search(t,h()(e,I).getMedia().currentTime);m.innerHTML="",i>-1&&h()(e,F).classList.contains("op-controls__captions--on")?(h()(e,B).classList.add("op-captions--on"),m.innerHTML=P(t[i].text,!1)):e._hideCaptions()}}else e._hideCaptions();else e._hideCaptions()},h()(this,H).button.click=function(t){var i=t.target;if(c){for(var n=h()(e,I).getContainer().querySelectorAll(".op-settings"),s=0,a=n.length;s<a;++s)n[s]!==h()(e,q)&&n[s].setAttribute("aria-hidden","true");"true"===h()(e,q).getAttribute("aria-hidden")?h()(e,q).setAttribute("aria-hidden","false"):h()(e,q).setAttribute("aria-hidden","true")}else if(i.setAttribute("aria-pressed","true"),i.classList.contains("op-controls__captions--on"))e._hideCaptions(),i.classList.remove("op-controls__captions--on"),i.setAttribute("data-active-captions","off");else{if(!h()(e,G)){var r=h()(e,K),o=y()(r,1)[0];p()(e,G,o)}e._displayCaptions(),i.classList.add("op-controls__captions--on"),i.setAttribute("data-active-captions",h()(e,G).language)}},h()(this,H).button.mouseover=function(){if(!w&&!k&&c){for(var t=h()(e,I).getContainer().querySelectorAll(".op-settings"),i=0,n=t.length;i<n;++i)t[i]!==h()(e,q)&&t[i].setAttribute("aria-hidden","true");"true"===h()(e,q).getAttribute("aria-hidden")&&h()(e,q).setAttribute("aria-hidden","false")}},h()(this,H).button.mouseout=function(){if(!w&&!k&&c){for(var t=h()(e,I).getContainer().querySelectorAll(".op-settings"),i=0,n=t.length;i<n;++i)t[i].setAttribute("aria-hidden","true");"false"===h()(e,q).getAttribute("aria-hidden")&&h()(e,q).setAttribute("aria-hidden","true")}},h()(this,U)){var f=h()(this,I).getContainer();if(f.insertBefore(h()(this,B),f.firstChild),c){var g=document.createElement("div");g.className="op-controls__container op-control__".concat(h()(this,$)),g.appendChild(h()(this,F)),g.appendChild(h()(this,q)),h()(this,I).getControls().getLayer(h()(this,J)).appendChild(g)}else h()(this,I).getControls().getLayer(h()(this,J)).appendChild(h()(this,F));h()(this,F).addEventListener("click",h()(this,H).button.click,C)}h()(this,K).length<=1&&!c||!h()(this,K).length&&c||(h()(this,H).global.click=function(t){var i=t.target;if(i.closest("#".concat(h()(e,I).id))&&i.classList.contains("op-subtitles__option")){var n=i.getAttribute("data-value"),s=n?n.replace("captions-",""):"",a=Array.from(h()(e,K)).filter((function(e){return e.language===s}));if(p()(e,G,a?a.pop():void 0),c){if(h()(e,F).classList.contains("op-controls__captions--on")?(e._hideCaptions(),h()(e,F).classList.remove("op-controls__captions--on"),h()(e,F).setAttribute("data-active-captions","off")):(e._displayCaptions(),h()(e,F).classList.add("op-controls__captions--on"),h()(e,F).setAttribute("data-active-captions",s)),i.parentElement&&i.parentElement.parentElement)for(var r=i.parentElement.parentElement.querySelectorAll(".op-settings__submenu-item"),o=0,l=r.length;o<l;++o)r[o].setAttribute("aria-checked","false");i.parentElement&&i.parentElement.setAttribute("aria-checked","true"),h()(e,q).setAttribute("aria-hidden","false")}else e._displayCaptions(),h()(e,F).setAttribute("data-active-captions",s);var u=W("captionschanged");h()(e,I).getElement().dispatchEvent(u)}},c&&(h()(this,F).addEventListener("mouseover",h()(this,H).button.mouseover,C),h()(this,q).addEventListener("mouseover",h()(this,H).button.mouseover,C),h()(this,q).addEventListener("mouseout",h()(this,H).button.mouseout,C),h()(this,I).getElement().addEventListener("controlshidden",h()(this,H).button.mouseout,C)),void 0!==h()(this,H).global.click&&document.addEventListener("click",h()(this,H).global.click,C))}}},{key:"destroy",value:function(){var e=h()(this,I).getOptions().detachMenus;void 0!==h()(this,H).global.click&&document.removeEventListener("click",h()(this,H).global.click),h()(this,U)&&(h()(this,F).removeEventListener("click",h()(this,H).button.click),e&&(h()(this,F).removeEventListener("mouseover",h()(this,H).button.mouseover),h()(this,q).removeEventListener("mouseover",h()(this,H).button.mouseover),h()(this,q).removeEventListener("mouseout",h()(this,H).button.mouseout),h()(this,I).getElement().removeEventListener("controlshidden",h()(this,H).button.mouseout),h()(this,q).remove()),h()(this,I).getElement().removeEventListener("timeupdate",h()(this,H).media.timeupdate),h()(this,F).remove(),h()(this,B).remove())}},{key:"addSettings",value:function(){var e=h()(this,I).getOptions(),t=e.detachMenus,i=e.labels;if(t||h()(this,K).length<=1)return{};var n=this._formatMenuItems();return n.length>2?{className:"op-subtitles__option",default:h()(this,Q)||"off",key:"captions",name:(null==i?void 0:i.captions)||"",subitems:n}:{}}},{key:"_getCuesFromText",value:function(e){var t=e.split(/\r?\n/),i=[],n=/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#/%?=~_|!:,.;]*[-A-Z0-9+&@#/%=~_|])/gi;for(var s,a=new RegExp("^((?:[0-9]{1,2}:)?[0-9]{2}:[0-9]{2}([,.][0-9]{1,3})?) --\x3e ((?:[0-9]{1,2}:)?[0-9]{2}:[0-9]{2}([,.][0-9]{3})?)(.*?)$"),r=0,o=t.length;r<o;r++){var l=a.exec(t[r]);if(l&&r<t.length){r-1>=0&&""!==t[r-1]&&(s=t[r-1]);var u=t[++r];for(r++;""!==t[r]&&r<t.length;)u="".concat(u,"\n").concat(t[r]),r++;u=u.trim().replace(n,"<a href='$1' target='_blank'>$1</a>");var c=N(l[1]);i.push({endTime:N(l[3]),identifier:s||"",settings:j(l[5])?JSON.parse(l[5]):{},startTime:0===c?.2:c,text:u})}s=""}return i}},{key:"_getNativeCues",value:function(e){var t=[],i=e.cues;return Object.keys(i).forEach((function(e){var n=parseInt(e,10),s=i[n];t.push({endTime:s.endTime,identifier:s.id,settings:{},startTime:s.startTime,text:s.text})})),t}},{key:"_displayCaptions",value:function(){if(h()(this,B)&&h()(this,G)&&void 0!==h()(this,G).cues){var e=h()(this,B).querySelector("span");e&&(e.innerHTML=""),h()(this,I).getElement().addEventListener("timeupdate",h()(this,H).media.timeupdate,C)}}},{key:"_hideCaptions",value:function(){h()(this,B).classList.remove("op-captions--on"),h()(this,G)||(h()(this,F).classList.remove("op-controls__captions--on"),h()(this,F).setAttribute("data-active-captions","off"))}},{key:"_search",value:function(e,t){for(var i=0,n=e.length-1;i<=n;){var s=i+n>>1,a=e[s].startTime,r=e[s].endTime;if(t>=a&&t<r)return s;a<t?i=s+1:a>t&&(n=s-1)}return-1}},{key:"_prepareTrack",value:function(e,t,i){var n=this,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];h()(this,V)[t]=i,h()(this,K)[e].mode="disabled",s&&(p()(this,Q,t),h()(this,F).classList.add("op-controls__captions--on"),h()(this,F).setAttribute("data-active-captions",t),p()(this,G,Array.from(h()(this,K)).filter((function(e){return e.language===h()(n,Q)})).pop()),this._displayCaptions(),h()(this,I).getContainer().classList.contains("op-captions--detected")||h()(this,I).getContainer().classList.add("op-captions--detected"))}},{key:"_formatMenuItems",value:function(){for(var e=this,t=h()(this,I).getOptions().labels,i=[{key:"off",label:(null==t?void 0:t.off)||""}],n=function(n,s){var a=h()(e,K)[n],r=null!=t&&t.lang?t.lang[a.language]:null;(i=i.filter((function(e){return e.key!==a.language}))).push({key:a.language,label:r||h()(e,K)[n].label})},s=0,a=h()(this,K).length;s<a;s++)n(s);return i}}]),e}();const X=Y;function Z(e,t,i){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,i)}var ee=new WeakMap,te=new WeakMap,ie=new WeakMap,ne=new WeakMap,se=new WeakMap,ae=new WeakMap,re=new WeakMap,oe=new WeakMap,le=new WeakMap,ue=function(){function e(t,i,n){var s=this;r()(this,e),c()(this,"fullScreenEnabled",void 0),Z(this,ee,{writable:!0,value:void 0}),Z(this,te,{writable:!0,value:void 0}),Z(this,ie,{writable:!0,value:void 0}),Z(this,ne,{writable:!0,value:[]}),Z(this,se,{writable:!0,value:0}),Z(this,ae,{writable:!0,value:0}),Z(this,re,{writable:!0,value:void 0}),Z(this,oe,{writable:!0,value:void 0}),Z(this,le,{writable:!0,value:void 0}),p()(this,ee,t),p()(this,oe,i),p()(this,le,n),p()(this,te,document.body.classList.contains("op-fullscreen__on"));var a=document;this.fullScreenEnabled=!!(a.fullscreenEnabled||a.mozFullScreenEnabled||a.msFullscreenEnabled||a.webkitSupportsFullscreen||a.webkitFullscreenEnabled||document.createElement("video").webkitRequestFullScreen),this._enterSpaceKeyEvent=this._enterSpaceKeyEvent.bind(this),this._resize=this._resize.bind(this),this._fullscreenChange=this._fullscreenChange.bind(this),this._setFullscreen=this._setFullscreen.bind(this),this._unsetFullscreen=this._unsetFullscreen.bind(this),p()(this,ne,["fullscreenchange","mozfullscreenchange","webkitfullscreenchange","msfullscreenchange"]),h()(this,ne).forEach((function(e){document.addEventListener(e,s._fullscreenChange,C)})),this._setFullscreenData(!1),h()(this,ee).getContainer().addEventListener("keydown",this._enterSpaceKeyEvent,C),_&&(h()(this,ee).getElement().addEventListener("webkitbeginfullscreen",this._setFullscreen,C),h()(this,ee).getElement().addEventListener("webkitendfullscreen",this._unsetFullscreen,C))}return l()(e,[{key:"create",value:function(){var e=this,t=h()(this,ee).getOptions().labels;p()(this,ie,document.createElement("button")),h()(this,ie).type="button",h()(this,ie).className="op-controls__fullscreen op-control__".concat(h()(this,oe)),h()(this,ie).tabIndex=0,h()(this,ie).title=(null==t?void 0:t.fullscreen)||"",h()(this,ie).setAttribute("aria-controls",h()(this,ee).id),h()(this,ie).setAttribute("aria-pressed","false"),h()(this,ie).setAttribute("aria-label",(null==t?void 0:t.fullscreen)||""),p()(this,re,(function(){h()(e,ie).setAttribute("aria-pressed","true"),e.toggleFullscreen()})),p()(this,re,h()(this,re).bind(this)),h()(this,ie).addEventListener("click",h()(this,re),C),h()(this,ee).getControls().getLayer(h()(this,le)).appendChild(h()(this,ie))}},{key:"destroy",value:function(){var e=this;h()(this,ee).getContainer().removeEventListener("keydown",this._enterSpaceKeyEvent),h()(this,ne).forEach((function(t){document.removeEventListener(t,e._fullscreenChange)})),_&&(h()(this,ee).getElement().removeEventListener("webkitbeginfullscreen",this._setFullscreen),h()(this,ee).getElement().removeEventListener("webkitendfullscreen",this._unsetFullscreen)),h()(this,ie).removeEventListener("click",h()(this,re)),h()(this,ie).remove()}},{key:"toggleFullscreen",value:function(){if(h()(this,te)){var e=document;e.exitFullscreen?e.exitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.webkitCancelFullScreen?e.webkitCancelFullScreen():e.msExitFullscreen?e.msExitFullscreen():this._fullscreenChange(),document.body.classList.remove("op-fullscreen__on")}else{var t=h()(this,ee).getElement();p()(this,se,window.screen.width),p()(this,ae,window.screen.height),t.requestFullscreen?t.parentElement.requestFullscreen():t.mozRequestFullScreen?t.parentElement.mozRequestFullScreen():t.webkitRequestFullScreen?t.parentElement.webkitRequestFullScreen():t.msRequestFullscreen?t.parentElement.msRequestFullscreen():t.webkitEnterFullscreen?t.webkitEnterFullscreen():this._fullscreenChange(),document.body.classList.add("op-fullscreen__on")}if("undefined"!=typeof window&&(k||_)){var i=window.screen;i.orientation&&!h()(this,te)&&i.orientation.lock("landscape")}}},{key:"_fullscreenChange",value:function(){var e=h()(this,te)?void 0:h()(this,se),t=h()(this,te)?void 0:h()(this,ae);this._setFullscreenData(!h()(this,te)),h()(this,ee).isAd()&&h()(this,ee).getAd().resizeAds(e,t),p()(this,te,!h()(this,te)),h()(this,te)?document.body.classList.add("op-fullscreen__on"):document.body.classList.remove("op-fullscreen__on"),this._resize(e,t)}},{key:"_setFullscreenData",value:function(e){h()(this,ee).getContainer().setAttribute("data-fullscreen",(!!e).toString()),h()(this,ie)&&(e?h()(this,ie).classList.add("op-controls__fullscreen--out"):h()(this,ie).classList.remove("op-controls__fullscreen--out"))}},{key:"_resize",value:function(e,t){var i=h()(this,ee).getContainer(),n=h()(this,ee).getElement(),s=h()(this,ee).getOptions(),a="";if(e)i.style.width="100%",n.style.width="100%";else if(s.width){var r="number"==typeof s.width?"".concat(s.width,"px"):s.width;a+="width: ".concat(r," !important;"),n.style.removeProperty("width")}else n.style.removeProperty("width"),i.style.removeProperty("width");if(t)n.style.height="100%",i.style.height="100%";else if(s.height){var o="number"==typeof s.height?"".concat(s.height,"px"):s.height;a+="height: ".concat(o," !important;"),n.style.removeProperty("height")}else n.style.removeProperty("height"),i.style.removeProperty("height");a&&i.setAttribute("style",a)}},{key:"_enterSpaceKeyEvent",value:function(e){var t,i,n=e.which||e.keyCode||0;!(null===(t=document)||void 0===t||null===(i=t.activeElement)||void 0===i?void 0:i.classList.contains("op-controls__fullscreen"))||13!==n&&32!==n||(this.toggleFullscreen(),e.preventDefault(),e.stopPropagation())}},{key:"_setFullscreen",value:function(){p()(this,te,!0),this._setFullscreenData(!0),document.body.classList.add("op-fullscreen__on")}},{key:"_unsetFullscreen",value:function(){p()(this,te,!1),this._setFullscreenData(!1),document.body.classList.remove("op-fullscreen__on")}}]),e}();const ce=ue;function de(e){return/\.m3u8$/i.test(e.src)||["application/x-mpegURL","application/vnd.apple.mpegurl"].includes(e.type)}function he(e){return/\.mpd/i.test(e.src)||"application/dash+xml"===e.type}function ve(e){return/(^rtmp:\/\/|\.flv$)/i.test(e.src)||["video/x-flv","video/flv"].includes(e.type)}function pe(e,t){var i=function(e){var t=((((e.split("?")[0]||"").split("\\")||[]).pop()||"").split("/")||[]).pop()||"";return t.includes(".")?t.substring(t.lastIndexOf(".")+1):""}(e);if(!i)return O(t)?"audio/mp3":"video/mp4";switch(i){case"m3u8":case"m3u":return"application/x-mpegURL";case"mpd":return"application/dash+xml";case"mp4":return O(t)?"audio/mp4":"video/mp4";case"mp3":return"audio/mp3";case"webm":return O(t)?"audio/webm":"video/webm";case"ogg":return O(t)?"audio/ogg":"video/ogg";case"ogv":return"video/ogg";case"oga":return"audio/ogg";case"3gp":return"audio/3gpp";case"wav":return"audio/wav";case"aac":return"audio/aac";case"flac":return"audio/flac";default:return O(t)?"audio/mp3":"video/mp4"}}function me(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function fe(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?me(Object(i),!0).forEach((function(t){c()(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):me(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function ge(e,t,i){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,i)}var ye=new WeakMap,be=new WeakMap,Ee=new WeakMap,_e=new WeakMap,we=new WeakMap,ke=new WeakMap,Ae=new WeakMap,Le=new WeakMap,Me=function(){function e(t,i,n){r()(this,e),ge(this,ye,{writable:!0,value:void 0}),ge(this,be,{writable:!0,value:void 0}),ge(this,Ee,{writable:!0,value:void 0}),ge(this,_e,{writable:!0,value:{button:{},global:{},media:{}}}),ge(this,we,{writable:!0,value:[]}),ge(this,ke,{writable:!0,value:""}),ge(this,Ae,{writable:!0,value:void 0}),ge(this,Le,{writable:!0,value:void 0}),p()(this,ye,t),p()(this,Ae,i),p()(this,Le,n)}return l()(e,[{key:"create",value:function(){var e=this,t=h()(this,ye).getOptions(),i=t.labels,n=t.defaultLevel,s=t.detachMenus,a=null!==n?parseInt(n||"0",10):h()(this,ye).getMedia().level;p()(this,ke,"".concat(a));var r=this._formatMenuItems(),o=r.length?r.find((function(t){return t.key===h()(e,ke)})):null,l=o?o.label:(null==i?void 0:i.auto)||"",u=!1;p()(this,be,document.createElement("button")),h()(this,be).className="op-controls__levels op-control__".concat(h()(this,Ae)),h()(this,be).tabIndex=0,h()(this,be).title=(null==i?void 0:i.mediaLevels)||"",h()(this,be).setAttribute("aria-controls",h()(this,ye).id),h()(this,be).setAttribute("aria-label",(null==i?void 0:i.mediaLevels)||""),h()(this,be).setAttribute("data-active-level",h()(this,ke)),h()(this,be).innerHTML="<span>".concat(l,"</span>");var c=function(){h()(e,we).length?u||(h()(e,ye).getMedia().level=a,u=!0):(e._gatherLevels(),setTimeout((function(){h()(e,ye).getMedia().level=a;var t=W("controlschanged");h()(e,ye).getElement().dispatchEvent(t)}),0))};h()(this,_e).media.loadedmetadata=c.bind(this),h()(this,_e).media.manifestLoaded=c.bind(this),h()(this,_e).media.hlsManifestParsed=c.bind(this),s&&(this._buildMenu(),h()(this,_e).button.click=function(){if(s){for(var t=h()(e,ye).getContainer().querySelectorAll(".op-settings"),i=0,n=t.length;i<n;++i)t[i]!==h()(e,Ee)&&t[i].setAttribute("aria-hidden","true");"true"===h()(e,Ee).getAttribute("aria-hidden")?h()(e,Ee).setAttribute("aria-hidden","false"):h()(e,Ee).setAttribute("aria-hidden","true")}},h()(this,_e).button.mouseover=function(){if(!w&&!k){for(var t=h()(e,ye).getContainer().querySelectorAll(".op-settings"),i=0,n=t.length;i<n;++i)t[i]!==h()(e,Ee)&&t[i].setAttribute("aria-hidden","true");"true"===h()(e,Ee).getAttribute("aria-hidden")&&h()(e,Ee).setAttribute("aria-hidden","false")}},h()(this,_e).button.mouseout=function(){if(!w&&!k){for(var t=h()(e,ye).getContainer().querySelectorAll(".op-settings"),i=0,n=t.length;i<n;++i)t[i].setAttribute("aria-hidden","true");"false"===h()(e,Ee).getAttribute("aria-hidden")&&h()(e,Ee).setAttribute("aria-hidden","true")}},h()(this,be).addEventListener("click",h()(this,_e).button.click,C),h()(this,be).addEventListener("mouseover",h()(this,_e).button.mouseover,C),h()(this,Ee).addEventListener("mouseover",h()(this,_e).button.mouseover,C),h()(this,Ee).addEventListener("mouseout",h()(this,_e).button.mouseout,C),h()(this,ye).getElement().addEventListener("controlshidden",h()(this,_e).button.mouseout,C)),h()(this,_e).global.click=function(t){var i=t.target,n=h()(e,ye).getMedia().currentTime,a=h()(e,ye).getMedia().paused;if(i.closest("#".concat(h()(e,ye).id))&&i.classList.contains("op-levels__option")){var r=i.getAttribute("data-value"),o=parseInt(r?r.replace("levels-",""):"-1",10);if(p()(e,ke,"".concat(o)),s){h()(e,be).setAttribute("data-active-level","".concat(o)),h()(e,be).innerHTML="<span>".concat(P(i.innerText,!0),"</span>");for(var l=i.parentElement&&i.parentElement.parentElement?i.parentElement.parentElement.querySelectorAll(".op-settings__submenu-item"):[],u=0,c=l.length;u<c;++u)l[u].setAttribute("aria-checked","false");i.parentElement&&i.parentElement.setAttribute("aria-checked","true"),h()(e,Ee).setAttribute("aria-hidden","false")}h()(e,ye).getMedia().level=o,h()(e,ye).getMedia().currentTime=n,a||h()(e,ye).play();var d=W("levelchanged",{detail:{label:i.innerText.trim(),level:o}});h()(e,ye).getElement().dispatchEvent(d),t.preventDefault(),t.stopPropagation()}};var d=(null==b?void 0:b.connection)||(null==b?void 0:b.mozConnection)||(null==b?void 0:b.webkitConnection);h()(this,_e).global.connection=function(){var t=h()(e,ye).getMedia().current;if(!he(t)&&!de(t)){var i=(null==d?void 0:d.effectiveType)||"",n=h()(e,we).map((function(e){return fe(fe({},e),{},{resolution:parseInt(e.label.replace("p",""),10)})})),s=n.find((function(e){return e.resolution<360}));"4g"===i?s=n.find((function(e){return e.resolution>=720})):"3g"===i&&(s=n.find((function(e){return e.resolution>=360&&e.resolution<720}))),s&&(h()(e,ye).pause(),h()(e,ye).getMedia().level=s.id,h()(e,ye).play())}},Object.keys(h()(this,_e).media).forEach((function(t){h()(e,ye).getElement().addEventListener(t,h()(e,_e).media[t],C)})),document.addEventListener("click",h()(this,_e).global.click,C),d&&d.addEventListener("change",h()(this,_e).global.connection,C)}},{key:"destroy",value:function(){var e=this,t=h()(this,ye).getOptions().detachMenus,i=(null==b?void 0:b.connection)||(null==b?void 0:b.mozConnection)||(null==b?void 0:b.webkitConnection);Object.keys(h()(this,_e).media).forEach((function(t){h()(e,ye).getElement().removeEventListener(t,h()(e,_e).media[t])})),document.removeEventListener("click",h()(this,_e).global.click),i&&i.removeEventListener("change",h()(this,_e).global.connection),t&&(h()(this,be).removeEventListener("click",h()(this,_e).button.click),h()(this,be).remove(),h()(this,be).removeEventListener("mouseover",h()(this,_e).button.mouseover),h()(this,Ee).removeEventListener("mouseover",h()(this,_e).button.mouseover),h()(this,Ee).removeEventListener("mouseout",h()(this,_e).button.mouseout),h()(this,ye).getElement().removeEventListener("controlshidden",h()(this,_e).button.mouseout),h()(this,Ee).remove())}},{key:"addSettings",value:function(){var e=h()(this,ye).getOptions(),t=e.labels;if(e.detachMenus)return{};var i=this._formatMenuItems();return i.length>2?{className:"op-levels__option",default:h()(this,ke)||"-1",key:"levels",name:null==t?void 0:t.levels,subitems:i}:{}}},{key:"_formatMenuItems",value:function(){for(var e=h()(this,ye).getOptions().labels,t=this._gatherLevels(),i=t.length,n=i?[{key:"-1",label:null==e?void 0:e.auto}]:[],s=function(e){var i=t[e];(n=n.filter((function(e){return e.key!==i.id}))).push({key:i.id,label:i.label})},a=0;a<i;a++)s(a);return n.reduce((function(e,t){return e.find((function(e){return e.label===t.label}))?e:e.concat([t])}),[]).sort((function(e,t){return parseInt((null==e?void 0:e.label)||"",10)>parseInt((null==t?void 0:t.label)||"",10)?1:-1}))}},{key:"_getResolutionsLabel",value:function(e){var t=h()(this,ye).getOptions().labels;return e>=4320?"8K":e>=2160?"4K":e>=1440?"1440p":e>=1080?"1080p":e>=720?"720p":e>=480?"480p":e>=360?"360p":e>=240?"240p":e>=144?"144p":(null==t?void 0:t.auto)||""}},{key:"_gatherLevels",value:function(){var e=this;return h()(this,we).length||h()(this,ye).getMedia().levels.forEach((function(t){h()(e,we).push(fe(fe({},t),{},{label:t.label||e._getResolutionsLabel(t.height)}))})),h()(this,we)}},{key:"_buildMenu",value:function(){var e=this;if(h()(this,ye).getOptions().detachMenus){h()(this,be).classList.add("op-control--no-hover"),p()(this,Ee,document.createElement("div")),h()(this,Ee).className="op-settings op-levels__menu",h()(this,Ee).setAttribute("aria-hidden","true");var t=this._formatMenuItems(),i='<div class="op-settings__menu" role="menu" id="menu-item-levels">\n                '.concat(t.map((function(t){return'\n                <div class="op-settings__submenu-item" tabindex="0" role="menuitemradio"\n                    aria-checked="'.concat(h()(e,ke)===t.key?"true":"false",'">\n                    <div class="op-settings__submenu-label ').concat("op-levels__option",'" data-value="levels-').concat(t.key,'">').concat(t.label,"</div>\n                </div>")})).join(""),"\n            </div>");h()(this,Ee).innerHTML=i;var n=document.createElement("div");n.className="op-controls__container op-control__".concat(h()(this,Ae)),n.appendChild(h()(this,be)),n.appendChild(h()(this,Ee)),h()(this,ye).getControls().getLayer(h()(this,Le)).appendChild(n)}}}]),e}();const Ce=Me;function xe(e,t,i){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,i)}var Oe=new WeakMap,Te=new WeakMap,Se=new WeakMap,Pe=new WeakMap,je=new WeakMap;const We=function(){function e(t,i,n){r()(this,e),xe(this,Oe,{writable:!0,value:void 0}),xe(this,Te,{writable:!0,value:void 0}),xe(this,Se,{writable:!0,value:{controls:{},media:{}}}),xe(this,Pe,{writable:!0,value:void 0}),xe(this,je,{writable:!0,value:void 0}),p()(this,Oe,t),p()(this,Pe,i),p()(this,je,n),this._enterSpaceKeyEvent=this._enterSpaceKeyEvent.bind(this)}return l()(e,[{key:"create",value:function(){var e,t=this,i=h()(this,Oe).getOptions().labels;p()(this,Te,document.createElement("button")),h()(this,Te).type="button",h()(this,Te).className="op-controls__playpause op-control__".concat(h()(this,Pe)),h()(this,Te).tabIndex=0,h()(this,Te).title=(null==i?void 0:i.play)||"",h()(this,Te).setAttribute("aria-controls",h()(this,Oe).id),h()(this,Te).setAttribute("aria-pressed","false"),h()(this,Te).setAttribute("aria-label",(null==i?void 0:i.play)||""),h()(this,Oe).getControls().getLayer(h()(this,je)).appendChild(h()(this,Te)),h()(this,Se).button=function(e){h()(t,Te).setAttribute("aria-pressed","true");var i=h()(t,Oe).activeElement();i.paused||i.ended?(h()(t,Oe).getAd()&&(h()(t,Oe).getAd().playRequested=!0),i.play(),h()(t,Se).media.play()):(i.pause(),h()(t,Se).media.pause()),e.preventDefault(),e.stopPropagation()};var n=O(h()(this,Oe).getElement());h()(this,Se).media.play=function(){var e;h()(t,Oe).activeElement().ended?(h()(t,Oe).isMedia()?h()(t,Te).classList.add("op-controls__playpause--replay"):h()(t,Te).classList.add("op-controls__playpause--pause"),h()(t,Te).title=(null==i?void 0:i.play)||"",h()(t,Te).setAttribute("aria-label",(null==i?void 0:i.play)||"")):(h()(t,Te).classList.remove("op-controls__playpause--replay"),h()(t,Te).classList.add("op-controls__playpause--pause"),h()(t,Te).title=(null==i?void 0:i.pause)||"",h()(t,Te).setAttribute("aria-label",(null==i?void 0:i.pause)||""),null!==(e=h()(t,Oe).getOptions())&&void 0!==e&&e.pauseOthers&&Object.keys(Zn.instances).forEach((function(e){e!==h()(t,Oe).id&&Zn.instances[e].activeElement().pause()})))},h()(this,Se).media.loadedmetadata=function(){h()(t,Te).classList.contains("op-controls__playpause--pause")&&(h()(t,Te).classList.remove("op-controls__playpause--replay"),h()(t,Te).classList.remove("op-controls__playpause--pause"),h()(t,Te).title=(null==i?void 0:i.play)||"",h()(t,Te).setAttribute("aria-label",(null==i?void 0:i.play)||""))},h()(this,Se).media.playing=function(){h()(t,Te).classList.contains("op-controls__playpause--pause")||(h()(t,Te).classList.remove("op-controls__playpause--replay"),h()(t,Te).classList.add("op-controls__playpause--pause"),h()(t,Te).title=(null==i?void 0:i.pause)||"",h()(t,Te).setAttribute("aria-label",(null==i?void 0:i.pause)||""))},h()(this,Se).media.pause=function(){h()(t,Te).classList.remove("op-controls__playpause--pause"),h()(t,Te).title=(null==i?void 0:i.play)||"",h()(t,Te).setAttribute("aria-label",(null==i?void 0:i.play)||"")},h()(this,Se).media.ended=function(){h()(t,Oe).activeElement().ended&&h()(t,Oe).isMedia()||h()(t,Oe).getElement().currentTime>=h()(t,Oe).getElement().duration||h()(t,Oe).getElement().currentTime<=0?(h()(t,Te).classList.add("op-controls__playpause--replay"),h()(t,Te).classList.remove("op-controls__playpause--pause")):(h()(t,Te).classList.remove("op-controls__playpause--replay"),h()(t,Te).classList.add("op-controls__playpause--pause")),h()(t,Te).title=(null==i?void 0:i.play)||"",h()(t,Te).setAttribute("aria-label",(null==i?void 0:i.play)||"")},h()(this,Se).media.adsmediaended=function(){h()(t,Te).classList.remove("op-controls__playpause--replay"),h()(t,Te).classList.add("op-controls__playpause--pause"),h()(t,Te).title=(null==i?void 0:i.pause)||"",h()(t,Te).setAttribute("aria-label",(null==i?void 0:i.pause)||"")},h()(this,Se).media.playererror=function(){n&&h()(t,Oe).activeElement().pause()};var s=h()(this,Oe).getElement();h()(this,Se).controls.controlschanged=function(){if(!h()(t,Oe).activeElement().paused){var e=W("playing");s.dispatchEvent(e)}},Object.keys(h()(this,Se).media).forEach((function(e){s.addEventListener(e,h()(t,Se).media[e],C)})),null!==(e=h()(this,Oe).getOptions().media)&&void 0!==e&&e.pauseOnClick&&s.addEventListener("click",h()(this,Se).button,C),h()(this,Oe).getControls().getContainer().addEventListener("controlschanged",h()(this,Se).controls.controlschanged,C),h()(this,Oe).getContainer().addEventListener("keydown",this._enterSpaceKeyEvent,C),h()(this,Te).addEventListener("click",h()(this,Se).button,C)}},{key:"destroy",value:function(){var e,t=this;Object.keys(h()(this,Se).media).forEach((function(e){h()(t,Oe).getElement().removeEventListener(e,h()(t,Se).media[e])})),null!==(e=h()(this,Oe).getOptions().media)&&void 0!==e&&e.pauseOnClick&&h()(this,Oe).getElement().removeEventListener("click",h()(this,Se).button),h()(this,Oe).getControls().getContainer().removeEventListener("controlschanged",h()(this,Se).controls.controlschanged),h()(this,Oe).getContainer().removeEventListener("keydown",this._enterSpaceKeyEvent),h()(this,Te).removeEventListener("click",h()(this,Se).button),h()(this,Te).remove()}},{key:"_enterSpaceKeyEvent",value:function(e){var t,i,n=e.which||e.keyCode||0;!(null===(t=document)||void 0===t||null===(i=t.activeElement)||void 0===i?void 0:i.classList.contains("op-controls__playpause"))||13!==n&&32!==n||h()(this,Se).button(e)}}]),e}();function Re(e,t,i){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,i)}var Ne=new WeakMap,De=new WeakMap,Ie=new WeakMap,Fe=new WeakMap,Be=new WeakMap,qe=new WeakMap,He=new WeakMap,ze=new WeakMap,Ke=new WeakMap,Ve=new WeakMap,Ue=function(){function e(t,i,n){r()(this,e),Re(this,Ne,{writable:!0,value:void 0}),Re(this,De,{writable:!0,value:void 0}),Re(this,Ie,{writable:!0,value:void 0}),Re(this,Fe,{writable:!0,value:void 0}),Re(this,Be,{writable:!0,value:void 0}),Re(this,qe,{writable:!0,value:void 0}),Re(this,He,{writable:!0,value:{container:{},controls:{},global:{},media:{},slider:{}}}),Re(this,ze,{writable:!0,value:!1}),Re(this,Ke,{writable:!0,value:void 0}),Re(this,Ve,{writable:!0,value:void 0}),p()(this,Ne,t),p()(this,Ke,i),p()(this,Ve,n),this._enterSpaceKeyEvent=this._enterSpaceKeyEvent.bind(this)}return l()(e,[{key:"create",value:function(){var e,t=this,i=h()(this,Ne).getOptions(),n=i.labels,s=i.progress;p()(this,De,document.createElement("div")),h()(this,De).className="op-controls__progress op-control__".concat(h()(this,Ke)),h()(this,De).tabIndex=0,h()(this,De).setAttribute("aria-label",(null==n?void 0:n.progressSlider)||""),h()(this,De).setAttribute("aria-valuemin","0"),p()(this,Ie,document.createElement("input")),h()(this,Ie).type="range",h()(this,Ie).className="op-controls__progress--seek",h()(this,Ie).tabIndex=-1,h()(this,Ie).setAttribute("min","0"),h()(this,Ie).setAttribute("max","0"),h()(this,Ie).setAttribute("step","0.1"),h()(this,Ie).value="0",h()(this,Ie).setAttribute("aria-label",(null==n?void 0:n.progressRail)||""),h()(this,Ie).setAttribute("role","slider"),p()(this,Fe,document.createElement("progress")),h()(this,Fe).className="op-controls__progress--buffer",h()(this,Fe).setAttribute("max","100"),h()(this,Fe).value=0,p()(this,Be,document.createElement("progress")),h()(this,Be).className="op-controls__progress--played",h()(this,Be).setAttribute("max","100"),h()(this,Be).setAttribute("role","presentation"),h()(this,Be).value=0,h()(this,De).appendChild(h()(this,Ie)),h()(this,De).appendChild(h()(this,Be)),h()(this,De).appendChild(h()(this,Fe)),w||k||(p()(this,qe,document.createElement("span")),h()(this,qe).className="op-controls__tooltip",h()(this,qe).tabIndex=-1,h()(this,qe).innerHTML="00:00",h()(this,De).appendChild(h()(this,qe)));var a=function(){var e;h()(t,Ie).classList.contains("error")&&h()(t,Ie).classList.remove("error");var i=h()(t,Ne).activeElement();if(i.duration===1/0||h()(t,Ne).getElement().getAttribute("op-live__enabled")||h()(t,Ne).getElement().getAttribute("op-dvr__enabled"))h()(t,Ne).getElement().getAttribute("op-dvr__enabled")?(h()(t,Ie).setAttribute("max","1"),h()(t,Ie).value="1",h()(t,Ie).style.backgroundSize="100% 100%",h()(t,Be).value=1,h()(t,De).setAttribute("aria-valuemax","1"),h()(t,De).setAttribute("aria-hidden","false")):null!==(e=h()(t,Ne).getOptions().live)&&void 0!==e&&e.showProgress||h()(t,De).setAttribute("aria-hidden","true");else{h()(t,Ie).setAttribute("max","".concat(i.duration));var n=h()(t,Ne).isMedia()?i.currentTime:i.duration-i.currentTime;h()(t,Ie).value=n.toString(),h()(t,De).setAttribute("aria-valuemax",i.duration.toString())}},r=0,o=(null===(e=h()(this,Ne).getOptions().progress)||void 0===e?void 0:e.duration)||0,l=O(h()(this,Ne).getElement());h()(this,He).media.loadedmetadata=a.bind(this),h()(this,He).controls.controlschanged=a.bind(this),h()(this,He).media.progress=function(e){var i,n=e.target;if(n.duration===1/0||h()(t,Ne).getElement().getAttribute("op-live__enabled"))h()(t,Ne).getElement().getAttribute("op-dvr__enabled")||"false"!==h()(t,De).getAttribute("aria-hidden")||null!==(i=h()(t,Ne).getOptions().live)&&void 0!==i&&i.showProgress||h()(t,De).setAttribute("aria-hidden","true");else if(n.duration>0)for(var s=0,a=n.buffered.length;s<a;s++)if(n.buffered.start(n.buffered.length-1-s)<n.currentTime){h()(t,Fe).value=n.buffered.end(n.buffered.length-1-s)/n.duration*100;break}},h()(this,He).media.waiting=function(){l&&!h()(t,Ie).classList.contains("loading")&&h()(t,Ie).classList.add("loading"),l&&h()(t,Ie).classList.contains("error")&&h()(t,Ie).classList.remove("error")},h()(this,He).media.playererror=function(){l&&!h()(t,Ie).classList.contains("error")&&h()(t,Ie).classList.add("error"),l&&h()(t,Ie).classList.contains("loading")&&h()(t,Ie).classList.remove("loading")},h()(this,He).media.pause=function(){var e=h()(t,Ne).activeElement();if(e.duration!==1/0&&!h()(t,Ne).getElement().getAttribute("op-live__enabled")){var i=e.currentTime;h()(t,De).setAttribute("aria-valuenow",i.toString()),h()(t,De).setAttribute("aria-valuetext",R(i))}},h()(this,He).media.play=function(){l&&h()(t,Ie).classList.contains("loading")&&h()(t,Ie).classList.remove("loading"),l&&h()(t,Ie).classList.contains("error")&&h()(t,Ie).classList.remove("error"),h()(t,Ne).activeElement().duration===1/0||h()(t,Ne).getElement().getAttribute("op-live__enabled")||(h()(t,De).removeAttribute("aria-valuenow"),h()(t,De).removeAttribute("aria-valuetext"))},h()(this,He).media.playing=function(){l&&h()(t,Ie).classList.contains("loading")&&h()(t,Ie).classList.remove("loading"),l&&h()(t,Ie).classList.contains("error")&&h()(t,Ie).classList.remove("error")},h()(this,He).media.timeupdate=function(){var e,i=h()(t,Ne).activeElement();if(i.duration===1/0||h()(t,Ne).getElement().getAttribute("op-live__enabled")&&!h()(t,Ne).getElement().getAttribute("op-dvr__enabled"))h()(t,Ne).getElement().getAttribute("op-dvr__enabled")||"false"!==h()(t,De).getAttribute("aria-hidden")||null!==(e=h()(t,Ne).getOptions().live)&&void 0!==e&&e.showProgress||h()(t,De).setAttribute("aria-hidden","true");else{h()(t,Ie).getAttribute("max")&&"0"!==h()(t,Ie).getAttribute("max")&&parseFloat(h()(t,Ie).getAttribute("max")||"-1")===i.duration||(h()(t,Ie).setAttribute("max","".concat(i.duration)),h()(t,De).setAttribute("aria-hidden","false"));var n=i.duration-i.currentTime+1>=100?100:i.duration-i.currentTime+1,s=h()(t,Ne).isMedia()?i.currentTime:n,a=parseFloat(h()(t,Ie).min),l=parseFloat(h()(t,Ie).max);h()(t,Ie).value=s.toString(),h()(t,Ie).style.backgroundSize="".concat(100*(s-a)/(l-a),"% 100%"),h()(t,Be).value=i.duration<=0||Number.isNaN(i.duration)||!Number.isFinite(i.duration)?o:s/i.duration*100,h()(t,Ne).getElement().getAttribute("op-dvr__enabled")&&Math.floor(h()(t,Be).value)>=99&&(r=i.currentTime,h()(t,De).setAttribute("aria-hidden","false"))}},h()(this,He).media.durationchange=function(){var e=h()(t,Ne).activeElement(),i=h()(t,Ne).isMedia()?e.currentTime:e.duration-e.currentTime;h()(t,Ie).setAttribute("max","".concat(e.duration)),h()(t,De).setAttribute("aria-valuemax",e.duration.toString()),h()(t,Be).value=e.duration<=0||Number.isNaN(e.duration)||!Number.isFinite(e.duration)?o:i/e.duration*100},h()(this,He).media.ended=function(){h()(t,Ie).style.backgroundSize="0% 100%",h()(t,Ie).setAttribute("max","0"),h()(t,Fe).value=0,h()(t,Be).value=0};var u=function(e){var i=h()(t,Ne).activeElement(),n=e.target,a=parseFloat(n.value);if(h()(t,Ie).classList.contains("op-progress--pressed")||a<i.currentTime&&(null==s||!s.allowRewind)||a>i.currentTime&&(null==s||!s.allowSkip))h()(t,Ie).value=i.currentTime.toString();else{h()(t,Ie).classList.add(".op-progress--pressed");var l=parseFloat(n.min),u=parseFloat(n.max),c=parseFloat(n.value);h()(t,Ie).style.backgroundSize="".concat(100*(c-l)/(u-l),"% 100%"),h()(t,Be).value=i.duration<=0||Number.isNaN(i.duration)||!Number.isFinite(i.duration)?o:c/i.duration*100,h()(t,Ne).getElement().getAttribute("op-dvr__enabled")?i.currentTime=Math.round(h()(t,Be).value)>=99?r:c:i.currentTime=c,h()(t,Ie).classList.remove(".op-progress--pressed")}},c=function(){var e=h()(t,Ne).activeElement();!0===h()(t,ze)&&h()(t,Ne).isMedia()&&e.paused&&(e.play(),p()(t,ze,!1))};h()(this,He).slider.input=u.bind(this),h()(this,He).slider.change=u.bind(this),h()(this,He).slider.mousedown=function(e){var i=h()(t,Ne).activeElement(),n=e.which||e.keyCode||0,a=h()(t,Ie),r=Math.round(Number(a.value)),o=Math.round(i.currentTime);!(r<o&&(null==s?void 0:s.allowRewind)||r>=o&&(null==s?void 0:s.allowSkip))||1!==n&&0!==n||!h()(t,Ne).isMedia()||i.paused||(i.pause(),p()(t,ze,!0))}.bind(this),h()(this,He).slider.mouseup=c.bind(this),h()(this,He).slider.touchstart=function(e){var i=h()(t,Ne).activeElement();if(i.duration!==1/0){var n,a=(((null===(n=e.changedTouches[0])||void 0===n?void 0:n.pageX)||0)-S(h()(t,De)).left)/h()(t,De).offsetWidth*i.duration;(a<i.currentTime&&null!=s&&s.allowRewind||a>i.currentTime&&null!=s&&s.allowSkip)&&(h()(t,Ie).value=a.toString(),u(e),i.paused||(i.pause(),p()(t,ze,!0)))}}.bind(this),h()(this,He).slider.touchend=c.bind(this),w||k||(h()(this,He).container.mousemove=function(e){var i=h()(t,Ne).activeElement();if(i.duration!==1/0&&!h()(t,Ne).isAd()){var n=e.pageX,s=n-S(h()(t,De)).left,a=h()(t,qe).offsetWidth/2,r=s/h()(t,De).offsetWidth,o=r*i.duration,l=h()(t,Ne).getContainer(),u=l.offsetWidth-h()(t,qe).offsetWidth;s<=0||n-S(l).left<=a?s=0:n-S(l).left>=u?s=u-S(h()(t,Ie)).left-10:s-=a,r>=0&&r<=1?h()(t,qe).classList.add("op-controls__tooltip--visible"):h()(t,qe).classList.remove("op-controls__tooltip--visible"),h()(t,qe).style.left="".concat(s,"px"),h()(t,qe).innerHTML=Number.isNaN(o)?"00:00":R(o)}},h()(this,He).global.mousemove=function(e){e.target.closest(".op-controls__progress")&&!h()(t,Ne).isAd()||h()(t,qe).classList.remove("op-controls__tooltip--visible")}),Object.keys(h()(this,He).media).forEach((function(e){h()(t,Ne).getElement().addEventListener(e,h()(t,He).media[e],C)})),Object.keys(h()(this,He).slider).forEach((function(e){h()(t,Ie).addEventListener(e,h()(t,He).slider[e],C)})),h()(this,De).addEventListener("keydown",h()(this,Ne).getEvents().keydown,C),h()(this,De).addEventListener("mousemove",h()(this,He).container.mousemove,C),document.addEventListener("mousemove",h()(this,He).global.mousemove,C),h()(this,Ne).getContainer().addEventListener("keydown",this._enterSpaceKeyEvent,C),h()(this,Ne).getControls().getContainer().addEventListener("controlschanged",h()(this,He).controls.controlschanged,C),h()(this,Ne).getControls().getLayer(h()(this,Ve)).appendChild(h()(this,De))}},{key:"destroy",value:function(){var e=this;Object.keys(h()(this,He)).forEach((function(t){h()(e,Ne).getElement().removeEventListener(t,h()(e,He)[t])})),Object.keys(h()(this,He).slider).forEach((function(t){h()(e,Ie).removeEventListener(t,h()(e,He).slider[t])})),h()(this,De).removeEventListener("keydown",h()(this,Ne).getEvents().keydown),h()(this,De).removeEventListener("mousemove",h()(this,He).container.mousemove),document.removeEventListener("mousemove",h()(this,He).global.mousemove),h()(this,Ne).getContainer().removeEventListener("keydown",this._enterSpaceKeyEvent),h()(this,Ne).getControls().getContainer().removeEventListener("controlschanged",h()(this,He).controls.controlschanged),h()(this,Fe).remove(),h()(this,Be).remove(),h()(this,Ie).remove(),w||k||h()(this,qe).remove(),h()(this,De).remove()}},{key:"_enterSpaceKeyEvent",value:function(e){var t=h()(this,Ne).activeElement(),i=h()(this,Ne).isAd(),n=e.which||e.keyCode||0;if(!i&&n>=48&&n<=57&&t.duration!==1/0){for(var s=0,a=48;a<=57;a++)a<n&&s++;t.currentTime=t.duration*(.1*s),e.preventDefault(),e.stopPropagation()}}}]),e}();const Ge=Ue;function Qe(e,t,i){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,i)}var $e=new WeakMap,Je=new WeakMap,Ye=new WeakMap,Xe=new WeakMap,Ze=new WeakMap,et=new WeakMap,tt=new WeakMap,it=new WeakMap,nt=function(){function e(t,i,n){r()(this,e),Qe(this,$e,{writable:!0,value:void 0}),Qe(this,Je,{writable:!0,value:{}}),Qe(this,Ye,{writable:!0,value:void 0}),Qe(this,Xe,{writable:!0,value:void 0}),Qe(this,Ze,{writable:!0,value:{global:{},media:{}}}),Qe(this,et,{writable:!0,value:""}),Qe(this,tt,{writable:!0,value:void 0}),Qe(this,it,{writable:!0,value:void 0}),c()(this,"clickEvent",void 0),c()(this,"hideEvent",void 0),c()(this,"removeEvent",void 0),p()(this,$e,t),p()(this,tt,i),p()(this,it,n),this._enterSpaceKeyEvent=this._enterSpaceKeyEvent.bind(this)}return l()(e,[{key:"create",value:function(){var e=this,t=h()(this,$e).getOptions().labels;p()(this,Ye,document.createElement("button")),h()(this,Ye).className="op-controls__settings op-control__".concat(h()(this,tt)),h()(this,Ye).tabIndex=0,h()(this,Ye).title=(null==t?void 0:t.settings)||"",h()(this,Ye).setAttribute("aria-controls",h()(this,$e).id),h()(this,Ye).setAttribute("aria-pressed","false"),h()(this,Ye).setAttribute("aria-label",(null==t?void 0:t.settings)||""),p()(this,Xe,document.createElement("div")),h()(this,Xe).className="op-settings",h()(this,Xe).setAttribute("aria-hidden","true"),h()(this,Xe).innerHTML='<div class="op-settings__menu" role="menu"></div>',this.clickEvent=function(){h()(e,Ye).setAttribute("aria-pressed","true");for(var t=h()(e,$e).getContainer().querySelectorAll(".op-settings"),i=0,n=t.length;i<n;++i)t[i]!==h()(e,Xe)&&t[i].setAttribute("aria-hidden","true");h()(e,Xe).setAttribute("aria-hidden","false"===h()(e,Xe).getAttribute("aria-hidden")?"true":"false")},this.hideEvent=function(){var t;t&&"undefined"!=typeof window&&window.cancelAnimationFrame(t),"undefined"!=typeof window&&(t=window.requestAnimationFrame((function(){h()(e,Xe).innerHTML=h()(e,et),h()(e,Xe).setAttribute("aria-hidden","true")})))},this.removeEvent=function(t){var i=t.detail,n=i.id,s=i.type;e.removeItem(n,s)},this.clickEvent=this.clickEvent.bind(this),this.hideEvent=this.hideEvent.bind(this),this.removeEvent=this.removeEvent.bind(this),h()(this,Ze).media.controlshidden=this.hideEvent.bind(this),h()(this,Ze).media.settingremoved=this.removeEvent.bind(this),h()(this,Ze).media.play=this.hideEvent.bind(this),h()(this,Ze).media.pause=this.hideEvent.bind(this),h()(this,$e).getContainer().addEventListener("keydown",this._enterSpaceKeyEvent,C),h()(this,Ze).global.click=function(t){var i=t.target;if(null!=i&&i.closest("#".concat(h()(e,$e).id))&&null!=i&&i.classList.contains("op-speed__option")){var n=(null==i?void 0:i.getAttribute("data-value"))||"";h()(e,$e).getMedia().playbackRate=parseFloat(n.replace("speed-",""))}},h()(this,Ze).global.resize=this.hideEvent.bind(this),h()(this,Ye).addEventListener("click",this.clickEvent,C),Object.keys(h()(this,Ze)).forEach((function(t){h()(e,$e).getElement().addEventListener(t,h()(e,Ze).media[t],C)})),document.addEventListener("click",h()(this,Ze).global.click,C),document.addEventListener("keydown",h()(this,Ze).global.click,C),"undefined"!=typeof window&&window.addEventListener("resize",h()(this,Ze).global.resize,C),h()(this,$e).getControls().getLayer(h()(this,it)).appendChild(h()(this,Ye)),h()(this,$e).getContainer().appendChild(h()(this,Xe))}},{key:"destroy",value:function(){var e=this;h()(this,Ye).removeEventListener("click",this.clickEvent),Object.keys(h()(this,Ze)).forEach((function(t){h()(e,$e).getElement().removeEventListener(t,h()(e,Ze).media[t])})),document.removeEventListener("click",h()(this,Ze).global.click),document.removeEventListener("keydown",h()(this,Ze).global.click),"undefined"!=typeof window&&window.removeEventListener("resize",h()(this,Ze).global.resize),void 0!==h()(this,Ze).global["settings.submenu"]&&(document.removeEventListener("click",h()(this,Ze).global["settings.submenu"]),h()(this,$e).getElement().removeEventListener("controlshidden",this.hideEvent)),h()(this,$e).getContainer().removeEventListener("keydown",this._enterSpaceKeyEvent),h()(this,Xe).remove(),h()(this,Ye).remove()}},{key:"addSettings",value:function(){var e=h()(this,$e).getMedia(),t=h()(this,$e).getOptions().labels,i=1;return h()(this,$e)&&e&&(i=e.defaultPlaybackRate!==e.playbackRate?e.playbackRate:e.defaultPlaybackRate),{className:"op-speed__option",default:i.toString(),key:"speed",name:(null==t?void 0:t.speed)||"",subitems:[{key:"0.25",label:"0.25"},{key:"0.5",label:"0.5"},{key:"0.75",label:"0.75"},{key:"1",label:(null==t?void 0:t.speedNormal)||""},{key:"1.25",label:"1.25"},{key:"1.5",label:"1.5"},{key:"2",label:"2"}]}}},{key:"addItem",value:function(e,t,i,n,s){var a=this,r="".concat(t,"-").concat(P(i,!0)),o=document.createElement("div");o.className="op-settings__menu-item",o.tabIndex=0,o.setAttribute("role","menuitemradio"),o.innerHTML='<div class="op-settings__menu-label" data-value="'.concat(r,'">').concat(e,"</div>");var l=n?n.find((function(e){return e.key===i})):null;l&&(o.innerHTML+='<div class="op-settings__menu-content" tabindex="0">'.concat(l.label,"</div>"));var u=h()(this,Xe).querySelector(".op-settings__menu");if(u&&u.appendChild(o),p()(this,et,h()(this,Xe).innerHTML),n){var c='\n                <div class="op-settings__header">\n                    <button type="button" class="op-settings__back" tabindex="0">'.concat(e,'</button>\n                </div>\n                <div class="op-settings__menu" role="menu" id="menu-item-').concat(t,'">\n                    ').concat(n.map((function(e){return'\n                    <div class="op-settings__submenu-item" role="menuitemradio" aria-checked="'.concat(i===e.key?"true":"false",'">\n                        <div class="op-settings__submenu-label ').concat(s||"",'" tabindex="0" data-value="').concat(t,"-").concat(e.key,'">\n                            ').concat(e.label,"\n                        </div>\n                    </div>")})).join(""),"\n                </div>");h()(this,Je)[t]=c}h()(this,Ze).global["settings.submenu"]=function(e){var n=e.target;if(n.closest("#".concat(h()(a,$e).id))){if(n.classList.contains("op-settings__back"))h()(a,Xe).classList.add("op-settings--sliding"),setTimeout((function(){h()(a,Xe).innerHTML=h()(a,et),h()(a,Xe).classList.remove("op-settings--sliding")}),100);else if(n.classList.contains("op-settings__menu-content")){var s=n.parentElement?n.parentElement.querySelector(".op-settings__menu-label"):null,r=s?s.getAttribute("data-value"):null,o=r?r.split("-"):[];if(o.length>0){o.pop();var l=o.join("-").replace(/^\-|\-$/,"");void 0!==h()(a,Je)[l]&&(h()(a,Xe).classList.add("op-settings--sliding"),setTimeout((function(){h()(a,Xe).innerHTML=h()(a,Je)[l],h()(a,Xe).classList.remove("op-settings--sliding")}),100))}}else if(n.classList.contains("op-settings__submenu-label")){var u=n.getAttribute("data-value"),c=u?u.replace("".concat(t,"-"),""):"",d=n.innerText,v=h()(a,Xe).querySelector("#menu-item-".concat(t," .op-settings__submenu-item[aria-checked=true]"));v&&(v.setAttribute("aria-checked","false"),n.parentElement&&n.parentElement.setAttribute("aria-checked","true"),h()(a,Je)[t]=h()(a,Xe).innerHTML,h()(a,Xe).classList.add("op-settings--sliding"),setTimeout((function(){h()(a,Xe).innerHTML=h()(a,et);var e=h()(a,Xe).querySelector('.op-settings__menu-label[data-value="'.concat(t,"-").concat(i,'"]'));e&&(e.setAttribute("data-value","".concat(u)),e.nextElementSibling&&(e.nextElementSibling.textContent=d)),i=c,p()(a,et,h()(a,Xe).innerHTML),h()(a,Xe).classList.remove("op-settings--sliding")}),100))}}else a.hideEvent()},document.addEventListener("click",h()(this,Ze).global["settings.submenu"],C),h()(this,$e).getElement().addEventListener("controlshidden",this.hideEvent,C)}},{key:"removeItem",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,n=h()(this,$e).getElement().querySelector(".op-settings__submenu-label[data-value=".concat(t,"-").concat(e,"]"));if(n&&n.remove(),h()(this,$e).getElement().querySelectorAll(".op-settings__submenu-label[data-value^=".concat(t,"]")).length<i){delete h()(this,Je)[t];var s=h()(this,$e).getElement().querySelector(".op-settings__menu-label[data-value^=".concat(t,"]")),a=s?s.closest(".op-settings__menu-item"):null;a&&a.remove()}}},{key:"_enterSpaceKeyEvent",value:function(e){var t,i,n,s,a,r,o,l,u=e.which||e.keyCode||0,c=h()(this,$e).isAd(),d=null===(t=document)||void 0===t||null===(i=t.activeElement)||void 0===i?void 0:i.classList.contains("op-controls__settings"),v=(null===(n=document)||void 0===n||null===(s=n.activeElement)||void 0===s?void 0:s.classList.contains("op-settings__menu-content"))||(null===(a=document)||void 0===a||null===(r=a.activeElement)||void 0===r?void 0:r.classList.contains("op-settings__back"))||(null===(o=document)||void 0===o||null===(l=o.activeElement)||void 0===l?void 0:l.classList.contains("op-settings__submenu-label"));c||(!d||13!==u&&32!==u?!v||13!==u&&32!==u||(h()(this,Ze).global["settings.submenu"](e),e.preventDefault(),e.stopPropagation()):(this.clickEvent(),e.preventDefault(),e.stopPropagation()))}}]),e}();const st=nt;function at(e,t,i){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,i)}var rt=new WeakMap,ot=new WeakMap,lt=new WeakMap,ut=new WeakMap,ct=new WeakMap,dt=new WeakMap,ht=new WeakMap,vt=new WeakMap,pt=function(){function e(t,i,n){r()(this,e),at(this,rt,{writable:!0,value:void 0}),at(this,ot,{writable:!0,value:void 0}),at(this,lt,{writable:!0,value:void 0}),at(this,ut,{writable:!0,value:void 0}),at(this,ct,{writable:!0,value:void 0}),at(this,dt,{writable:!0,value:{controls:{},media:{}}}),at(this,ht,{writable:!0,value:void 0}),at(this,vt,{writable:!0,value:void 0}),p()(this,rt,t),p()(this,ht,i),p()(this,vt,n)}return l()(e,[{key:"create",value:function(){var e=this,t=h()(this,rt).getOptions(),i=t.labels,n=t.progress;p()(this,ot,document.createElement("time")),h()(this,ot).className="op-controls__current",h()(this,ot).setAttribute("role","timer"),h()(this,ot).setAttribute("aria-live","off"),h()(this,ot).setAttribute("aria-hidden","false"),h()(this,ot).innerText="0:00";var s=(null==n?void 0:n.showCurrentTimeOnly)||!1;s||(p()(this,lt,document.createElement("span")),h()(this,lt).className="op-controls__time-delimiter",h()(this,lt).setAttribute("aria-hidden","false"),h()(this,lt).innerText="/",p()(this,ut,document.createElement("time")),h()(this,ut).className="op-controls__duration",h()(this,ut).setAttribute("aria-hidden","false"),h()(this,ut).innerText=R((null==n?void 0:n.duration)||0));var a=h()(this,rt).getControls().getLayer(h()(this,vt));p()(this,ct,document.createElement("span")),h()(this,ct).className="op-controls-time op-control__".concat(h()(this,ht)),h()(this,ct).appendChild(h()(this,ot)),s||(h()(this,ct).appendChild(h()(this,lt)),h()(this,ct).appendChild(h()(this,ut))),a.appendChild(h()(this,ct));var r=function(){var t=h()(e,rt).activeElement();if(t.duration===1/0||h()(e,rt).getElement().getAttribute("op-live__enabled"))s||(h()(e,ut).setAttribute("aria-hidden","true"),h()(e,lt).setAttribute("aria-hidden","true"));else{if(!s){var i,n=Number.isNaN(t.duration)?(null===(i=h()(e,rt).getOptions().progress)||void 0===i?void 0:i.duration)||0:t.duration;h()(e,ut).innerText=R(n)}h()(e,ot).innerText=R(t.currentTime)}};h()(this,dt).media.loadedmetadata=r.bind(this),h()(this,dt).controls.controlschanged=r.bind(this);var o=(h()(this,rt).getOptions().live||{}).showLabel;h()(this,dt).media.timeupdate=function(){var t=h()(e,rt).activeElement();if(t.duration===1/0||h()(e,rt).getElement().getAttribute("op-live__enabled")||h()(e,rt).getElement().getAttribute("op-dvr__enabled"))h()(e,rt).getElement().getAttribute("op-dvr__enabled")?(s||(h()(e,ut).setAttribute("aria-hidden","true"),h()(e,lt).setAttribute("aria-hidden","true")),h()(e,ot).innerText=R(t.currentTime)):s||!h()(e,rt).getElement().getAttribute("op-dvr__enabled")&&"false"===h()(e,ut).getAttribute("aria-hidden")?(s||(h()(e,ut).setAttribute("aria-hidden","true"),h()(e,lt).setAttribute("aria-hidden","true")),h()(e,ot).innerText=o?(null==i?void 0:i.live)||"":R(t.currentTime)):h()(e,ot).innerText=o?(null==i?void 0:i.live)||"":R(t.currentTime);else{var n=R(t.duration);s||Number.isNaN(t.duration)||n===h()(e,ut).innerText?(s||n!==h()(e,ut).innerText)&&(h()(e,ot).innerText=o?(null==i?void 0:i.live)||"":R(t.currentTime)):(h()(e,ut).innerText=n,h()(e,ut).setAttribute("aria-hidden","false"),h()(e,lt).setAttribute("aria-hidden","false")),h()(e,ot).innerText=R(t.currentTime)}},h()(this,dt).media.ended=function(){var t,i=h()(e,rt).activeElement(),n=Number.isNaN(i.duration)?(null===(t=h()(e,rt).getOptions().progress)||void 0===t?void 0:t.duration)||0:i.duration;!s&&h()(e,rt).isMedia()&&(h()(e,ut).innerText=R(n))},Object.keys(h()(this,dt).media).forEach((function(t){h()(e,rt).getElement().addEventListener(t,h()(e,dt).media[t],C)})),h()(this,rt).getControls().getContainer().addEventListener("controlschanged",h()(this,dt).controls.controlschanged,C)}},{key:"destroy",value:function(){var e=this;Object.keys(h()(this,dt).media).forEach((function(t){h()(e,rt).getElement().removeEventListener(t,h()(e,dt).media[t])})),h()(this,rt).getControls().getContainer().removeEventListener("controlschanged",h()(this,dt).controls.controlschanged),h()(this,ot).remove(),(h()(this,rt).getOptions().progress||{}).showCurrentTimeOnly||(h()(this,lt).remove(),h()(this,ut).remove()),h()(this,ct).remove()}}]),e}();const mt=pt;function ft(e,t,i){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,i)}var gt=new WeakMap,yt=new WeakMap,bt=new WeakMap,Et=new WeakMap,_t=new WeakMap,wt=new WeakMap,kt=new WeakMap,At=new WeakMap,Lt=new WeakMap,Mt=function(){function e(t,i,n){r()(this,e),ft(this,gt,{writable:!0,value:void 0}),ft(this,yt,{writable:!0,value:void 0}),ft(this,bt,{writable:!0,value:void 0}),ft(this,Et,{writable:!0,value:void 0}),ft(this,_t,{writable:!0,value:void 0}),ft(this,wt,{writable:!0,value:{button:{},media:{},slider:{}}}),ft(this,kt,{writable:!0,value:void 0}),ft(this,At,{writable:!0,value:void 0}),ft(this,Lt,{writable:!0,value:void 0}),p()(this,gt,t),p()(this,kt,h()(this,gt).getMedia().volume),p()(this,At,i),p()(this,Lt,n),this._enterSpaceKeyEvent=this._enterSpaceKeyEvent.bind(this)}return l()(e,[{key:"create",value:function(){var e=this,t=h()(this,gt).getOptions().labels;p()(this,bt,document.createElement("div")),h()(this,bt).className="op-controls__volume op-control__".concat(h()(this,At)),h()(this,bt).tabIndex=0,h()(this,bt).setAttribute("aria-valuemin","0"),h()(this,bt).setAttribute("aria-valuemax","100"),h()(this,bt).setAttribute("aria-valuenow","".concat(h()(this,kt))),h()(this,bt).setAttribute("aria-valuetext","".concat((null==t?void 0:t.volume)||"",": ").concat(h()(this,kt))),h()(this,bt).setAttribute("aria-orientation","vertical"),h()(this,bt).setAttribute("aria-label",(null==t?void 0:t.volumeSlider)||""),p()(this,_t,document.createElement("input")),h()(this,_t).type="range",h()(this,_t).className="op-controls__volume--input",h()(this,_t).tabIndex=-1,h()(this,_t).value=h()(this,gt).getMedia().volume.toString(),h()(this,_t).setAttribute("min","0"),h()(this,_t).setAttribute("max","1"),h()(this,_t).setAttribute("step","0.1"),h()(this,_t).setAttribute("aria-label",(null==t?void 0:t.volumeControl)||""),p()(this,Et,document.createElement("progress")),h()(this,Et).className="op-controls__volume--display",h()(this,Et).setAttribute("max","10"),h()(this,Et).setAttribute("role","presentation"),h()(this,Et).value=10*h()(this,gt).getMedia().volume,h()(this,bt).appendChild(h()(this,_t)),h()(this,bt).appendChild(h()(this,Et)),p()(this,yt,document.createElement("button")),h()(this,yt).type="button",h()(this,yt).className="op-controls__mute op-control__".concat(h()(this,At)),h()(this,yt).tabIndex=0,h()(this,yt).title=(null==t?void 0:t.mute)||"",h()(this,yt).setAttribute("aria-controls",h()(this,gt).id),h()(this,yt).setAttribute("aria-pressed","false"),h()(this,yt).setAttribute("aria-label",(null==t?void 0:t.mute)||"");var i=function(t){var i=h()(e,gt).activeElement(),n=parseFloat(t.target.value);i.volume=n,i.muted=0===i.volume,p()(e,kt,n);var s=h()(e,gt).getContainer().querySelector(".op-player__unmute");!i.muted&&s&&s.remove();var a=W("volumechange");h()(e,gt).getElement().dispatchEvent(a)};if(h()(this,wt).media.volumechange=function(){var i,n,s,a=h()(e,gt).activeElement();n=1*(i=a).volume,s=Math.floor(100*n),h()(e,_t).value="".concat(i.volume),h()(e,Et).value=10*n,h()(e,bt).setAttribute("aria-valuenow","".concat(s)),h()(e,bt).setAttribute("aria-valuetext","".concat(null==t?void 0:t.volume,": ").concat(s)),function(t){var i=t.volume;i<=.5&&i>0?(h()(e,yt).classList.remove("op-controls__mute--muted"),h()(e,yt).classList.add("op-controls__mute--half")):0===i?(h()(e,yt).classList.add("op-controls__mute--muted"),h()(e,yt).classList.remove("op-controls__mute--half")):(h()(e,yt).classList.remove("op-controls__mute--muted"),h()(e,yt).classList.remove("op-controls__mute--half"))}(a)},h()(this,wt).media.loadedmetadata=function(){var t=h()(e,gt).activeElement();t.muted&&(t.volume=0);var i=W("volumechange");h()(e,gt).getElement().dispatchEvent(i)},h()(this,wt).slider.input=i.bind(this),h()(this,wt).slider.change=i.bind(this),h()(this,wt).button.click=function(){h()(e,yt).setAttribute("aria-pressed","true");var i=h()(e,gt).activeElement();i.muted=!i.muted,i.muted?(i.volume=0,h()(e,yt).title=(null==t?void 0:t.unmute)||"",h()(e,yt).setAttribute("aria-label",(null==t?void 0:t.unmute)||"")):(i.volume=h()(e,kt),h()(e,yt).title=(null==t?void 0:t.mute)||"",h()(e,yt).setAttribute("aria-label",(null==t?void 0:t.mute)||""));var n=W("volumechange");h()(e,gt).getElement().dispatchEvent(n)},h()(this,yt).addEventListener("click",h()(this,wt).button.click,C),Object.keys(h()(this,wt).media).forEach((function(t){h()(e,gt).getElement().addEventListener(t,h()(e,wt).media[t],C)})),Object.keys(h()(this,wt).slider).forEach((function(t){h()(e,_t).addEventListener(t,h()(e,wt).slider[t],C)})),h()(this,gt).getContainer().addEventListener("keydown",this._enterSpaceKeyEvent,C),!k&&!w||!h()(this,gt).getOptions().useDeviceVolume){var n=h()(this,gt).getControls().getLayer(h()(this,Lt));n.appendChild(h()(this,yt)),n.appendChild(h()(this,bt))}}},{key:"destroy",value:function(){var e=this;h()(this,yt).removeEventListener("click",h()(this,wt).button.click),Object.keys(h()(this,wt).media).forEach((function(t){h()(e,gt).getElement().removeEventListener(t,h()(e,wt).media[t])})),Object.keys(h()(this,wt).slider).forEach((function(t){h()(e,_t).removeEventListener(t,h()(e,wt).slider[t])})),h()(this,gt).getContainer().removeEventListener("keydown",this._enterSpaceKeyEvent),h()(this,_t).remove(),h()(this,Et).remove(),h()(this,bt).remove()}},{key:"_enterSpaceKeyEvent",value:function(e){var t,i,n=e.which||e.keyCode||0,s=h()(this,gt).activeElement();!(null===(t=document)||void 0===t||null===(i=t.activeElement)||void 0===i?void 0:i.classList.contains("op-controls__mute"))||13!==n&&32!==n||(s.muted=!s.muted,s.volume=s.muted?0:h()(this,kt),h()(this,wt).button.click(),e.preventDefault(),e.stopPropagation())}}]),e}();const Ct=Mt;function xt(e,t,i){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,i)}var Ot=new WeakMap,Tt=new WeakMap,St=new WeakMap,Pt=new WeakMap,jt=new WeakMap,Wt=new WeakMap,Rt=function(){function e(t){r()(this,e),c()(this,"events",{media:{},mouse:{}}),xt(this,Ot,{writable:!0,value:void 0}),xt(this,Tt,{writable:!0,value:0}),xt(this,St,{writable:!0,value:void 0}),xt(this,Pt,{writable:!0,value:void 0}),xt(this,jt,{writable:!0,value:void 0}),xt(this,Wt,{writable:!0,value:{Captions:X,Fullscreen:ce,Levels:Ce,Play:We,Progress:Ge,Settings:st,Time:mt,Volume:Ct}}),p()(this,Pt,t),this._setElements()}return l()(e,[{key:"create",value:function(){var e=this;h()(this,Pt).getElement().controls=!1;var t=x(h()(this,Pt).getElement());if(this._createControlsLayer(),this._buildElements(),this.events.controlschanged=function(){e.destroy(),e._setElements(),e.create()},this.events.ended=function(){h()(e,Pt).getContainer().classList.remove("op-controls--hidden")},h()(this,Pt).getElement().addEventListener("controlschanged",this.events.controlschanged,C),h()(this,Pt).getElement().addEventListener("ended",this.events.ended,C),!(h()(this,Pt).getOptions().controls||{}).alwaysVisible){var i=function(){t&&(h()(e,Pt).getContainer().classList.remove("op-controls--hidden"),e._stopControlTimer())};this.events.mouse.mouseenter=function(){t&&!h()(e,Pt).activeElement().paused&&(e._stopControlTimer(),h()(e,Pt).activeElement().currentTime?(h()(e,Pt).playBtn.setAttribute("aria-hidden",h()(e,Pt).isMedia()?"false":"true"),h()(e,Pt).loader.setAttribute("aria-hidden","true")):h()(e,Pt).getOptions().showLoaderOnInit&&(h()(e,Pt).playBtn.setAttribute("aria-hidden","true"),h()(e,Pt).loader.setAttribute("aria-hidden","false")),h()(e,Pt).getContainer().classList.remove("op-controls--hidden"),e._startControlTimer(2500))},this.events.mouse.mousemove=function(){t&&!h()(e,Pt).activeElement().paused&&(h()(e,Pt).activeElement().currentTime?(h()(e,Pt).loader.setAttribute("aria-hidden","true"),h()(e,Pt).playBtn.setAttribute("aria-hidden",h()(e,Pt).isMedia()?"false":"true")):(h()(e,Pt).playBtn.setAttribute("aria-hidden",h()(e,Pt).getOptions().showLoaderOnInit?"true":"false"),h()(e,Pt).loader.setAttribute("aria-hidden",h()(e,Pt).getOptions().showLoaderOnInit?"false":"true")),h()(e,Pt).getContainer().classList.remove("op-controls--hidden"),e._startControlTimer(2500))},this.events.mouse.mouseleave=function(){t&&!h()(e,Pt).activeElement().paused&&e._startControlTimer(1e3)},this.events.media.play=function(){t&&e._startControlTimer(h()(e,Pt).getOptions().hidePlayBtnTimer||350)},this.events.media.loadedmetadata=i.bind(this),this.events.media.pause=i.bind(this),this.events.media.waiting=i.bind(this),this.events.media.stalled=i.bind(this),this.events.media.playererror=i.bind(this),Object.keys(this.events.media).forEach((function(t){h()(e,Pt).getElement().addEventListener(t,e.events.media[t],C)})),k||w?h()(this,Pt).getContainer().addEventListener("click",this.events.mouse.mouseenter,C):Object.keys(this.events.mouse).forEach((function(t){h()(e,Pt).getContainer().addEventListener(t,e.events.mouse[t],C)})),t&&!h()(this,Pt).activeElement().paused&&this._startControlTimer(3e3)}}},{key:"destroy",value:function(){var e=this;k||w||(Object.keys(this.events.mouse).forEach((function(t){h()(e,Pt).getContainer().removeEventListener(t,e.events.mouse[t])})),Object.keys(this.events.media).forEach((function(t){h()(e,Pt).getElement().removeEventListener(t,e.events.media[t])})),this._stopControlTimer()),h()(this,Pt).getElement().removeEventListener("controlschanged",this.events.controlschanged),h()(this,Pt).getElement().removeEventListener("ended",this.events.ended),Object.keys(h()(this,jt)).forEach((function(t){h()(e,jt)[t].forEach((function(t){t.custom?e._destroyCustomControl(t):"function"==typeof t.destroy&&t.destroy()}))})),h()(this,St).remove()}},{key:"getContainer",value:function(){return h()(this,St)}},{key:"getLayer",value:function(e){return h()(this,St).querySelector(".op-controls-layer__".concat(e))||h()(this,St)}},{key:"_createControlsLayer",value:function(){if(!h()(this,St)||!h()(this,Pt).getContainer().querySelector(".op-controls")){p()(this,St,document.createElement("div")),h()(this,St).className="op-controls",h()(this,Pt).getContainer().appendChild(h()(this,St));var e=document.createElement("div");e.className="op-status",e.innerHTML="<span></span>",e.tabIndex=-1,e.setAttribute("aria-hidden","true"),O(h()(this,Pt).getElement())&&h()(this,St).appendChild(e)}}},{key:"_startControlTimer",value:function(e){var t=this,i=h()(this,Pt).activeElement();this._stopControlTimer(),"undefined"!=typeof window&&p()(this,Tt,window.setTimeout((function(){if((!i.paused||!i.ended)&&x(h()(t,Pt).getElement())){h()(t,Pt).getContainer().classList.add("op-controls--hidden"),h()(t,Pt).playBtn.setAttribute("aria-hidden","true"),t._stopControlTimer();var e=W("controlshidden");h()(t,Pt).getElement().dispatchEvent(e)}}),e))}},{key:"_stopControlTimer",value:function(){0!==h()(this,Tt)&&(clearTimeout(h()(this,Tt)),p()(this,Tt,0))}},{key:"_setElements",value:function(){var e,t=this,i=(null===(e=h()(this,Pt).getOptions().controls)||void 0===e?void 0:e.layers)||{};p()(this,jt,{"bottom-left":[],"bottom-middle":[],"bottom-right":[],left:[],main:[],middle:[],right:[],"top-left":[],"top-middle":[],"top-right":[]});var n=x(h()(this,Pt).getElement()),s=O(h()(this,Pt).getElement()),a=Object.keys(i),r=a.find((function(e){return/^(top|bottom)/.test(e)}));this._createControlsLayer(),a.forEach((function(e){var a=e.split("-"),o=y()(a,2),l=o[0],u=o[1];if(u){h()(t,St).classList.contains("op-controls__stacked")||h()(t,St).classList.add("op-controls__stacked");var c="op-controls-layer__".concat(l);if(!h()(t,St).querySelector(".".concat(c))){var d=document.createElement("div");d.className=c,h()(t,St).appendChild(d)}}else if(r){var v="op-controls-layer__center";if(!h()(t,St).querySelector(".".concat(v))){var m=document.createElement("div");m.className=v,h()(t,St).appendChild(m)}}var f=i?i[e]:null;f&&f.filter((function(e,t,i){return i.indexOf(e)===t})).forEach((function(i){var a=r&&!u?"center":l,o="".concat(i.charAt(0).toUpperCase()).concat(i.slice(1)),c=new(h()(t,Wt)[o])(h()(t,Pt),u||l,a);"settings"===i&&p()(t,Ot,c),(n||"fullscreen"!==i&&s)&&h()(t,jt)[e].push(c)}))})),h()(this,Pt).getCustomControls().forEach((function(e){var i=e.position.split("-"),n=y()(i,2),s=n[0],a=n[1],o=r&&!a?"center":s;e.layer=o,e.position=a||s,"right"===e.position?h()(t,jt)[e.position].unshift(e):h()(t,jt)[e.position].push(e)}))}},{key:"_buildElements",value:function(){var e=this;Object.keys(h()(this,jt)).forEach((function(t){h()(e,jt)[t].forEach((function(t){t.custom?e._createCustomControl(t):t.create()}))})),Object.keys(h()(this,jt)).forEach((function(t){h()(e,jt)[t].forEach((function(t){var i=t;if((!h()(e,Pt).getOptions().detachMenus||t instanceof st)&&!i.custom&&"function"==typeof i.addSettings){var n=i.addSettings();h()(e,Ot)&&Object.keys(n).length&&h()(e,Ot).addItem(n.name,n.key,n.default,n.subitems,n.className)}}))}));var t=W("controlschanged");h()(this,St).dispatchEvent(t)}},{key:"_hideCustomMenu",value:function(e){var t;t&&"undefined"!=typeof window&&window.cancelAnimationFrame(t),"undefined"!=typeof window&&(t=window.requestAnimationFrame((function(){e.setAttribute("aria-hidden","true")})))}},{key:"_toggleCustomMenu",value:function(e,t,i){h()(this,Pt).getContainer().querySelectorAll(".op-settings").forEach((function(e){"false"===e.getAttribute("aria-hidden")&&e.id!==t.id&&e.setAttribute("aria-hidden","true")})),t.setAttribute("aria-hidden","true"===t.getAttribute("aria-hidden")?"false":"true"),"function"==typeof i.click&&i.click(e)}},{key:"_createCustomControl",value:function(e){var t=this,i=document.createElement("button"),n=/\.(jpg|png|svg|gif)$/.test(e.icon)?'<img src="'.concat(P(e.icon),'">'):P(e.icon);if(i.className="op-controls__".concat(e.id," op-control__").concat(e.position," ").concat(e.showInAds?"":"op-control__hide-in-ad"),i.tabIndex=0,i.id=e.id,i.title=P(e.title),i.innerHTML=e.content?P(e.content):n,e.subitems&&Array.isArray(e.subitems)&&e.subitems.length>0){var s=document.createElement("div");s.className="op-settings op-settings__custom",s.id="".concat(e.id,"-menu"),s.setAttribute("aria-hidden","true");var a=e.subitems.map((function(t){var i="";return t.icon&&(i=/\.(jpg|png|svg|gif)$/.test(t.icon)?'<img src="'.concat(t.icon,'">'):t.icon),'<div class="op-settings__menu-item" tabindex="0" '.concat(t.title?'title="'.concat(t.title,'"'):"",' role="menuitemradio">\n                    <div class="op-settings__menu-label" id="').concat(t.id,'" data-value="').concat(e.id,"-").concat(t.id,'">').concat(i," ").concat(t.label,"</div>\n                </div>")}));s.innerHTML='<div class="op-settings__menu" role="menu">'.concat(a.join(""),"</div>"),h()(this,Pt).getContainer().appendChild(s),e.subitems.forEach((function(e){var t=s.querySelector("#".concat(e.id));t&&e.click&&"function"==typeof e.click&&t.addEventListener("click",e.click,C)})),i.addEventListener("click",(function(i){return t._toggleCustomMenu(i,s,e)}),C),h()(this,Pt).getElement().addEventListener("controlshidden",(function(){return t._hideCustomMenu(s)}),C)}else e.click&&"function"==typeof e.click&&i.addEventListener("click",e.click,C);e.mouseenter&&"function"==typeof e.mouseenter&&i.addEventListener("mouseenter",e.mouseenter,C),e.mouseleave&&"function"==typeof e.mouseleave&&i.addEventListener("mouseleave",e.mouseleave,C),e.keydown&&"function"==typeof e.keydown&&i.addEventListener("keydown",e.keydown,C),e.blur&&"function"==typeof e.blur&&i.addEventListener("blur",e.blur,C),e.focus&&"function"==typeof e.focus&&i.addEventListener("focus",e.focus,C),e.layer&&("main"===e.layer?h()(this,Pt).getContainer().appendChild(i):this.getLayer(e.layer).appendChild(i)),e.init&&"function"==typeof e.init&&e.init(h()(this,Pt))}},{key:"_destroyCustomControl",value:function(e){var t=this,i=e.title.toLowerCase().replace(" ","-"),n=this.getContainer().querySelector(".op-controls__".concat(i));if(n){if(e.subitems&&Array.isArray(e.subitems)&&e.subitems.length>0){var s=h()(this,Pt).getContainer().querySelector("#".concat(e.id,"-menu"));s&&(e.subitems.forEach((function(e){var t=s.querySelector("#".concat(e.id));t&&e.click&&"function"==typeof e.click&&t.removeEventListener("click",e.click)})),n.removeEventListener("click",(function(i){return t._toggleCustomMenu(i,s,e)})),h()(this,Pt).getElement().removeEventListener("controlshidden",(function(){return t._hideCustomMenu(s)})),s.remove())}e.click&&"function"==typeof e.click&&n.removeEventListener("click",e.click),e.mouseenter&&"function"==typeof e.mouseenter&&n.removeEventListener("mouseenter",e.mouseenter),e.mouseleave&&"function"==typeof e.mouseleave&&n.removeEventListener("mouseleave",e.mouseleave),e.keydown&&"function"==typeof e.keydown&&n.removeEventListener("keydown",e.keydown),e.blur&&"function"==typeof e.blur&&n.removeEventListener("blur",e.blur),e.focus&&"function"==typeof e.focus&&n.removeEventListener("focus",e.focus),n.remove(),e.destroy&&"function"==typeof e.destroy&&e.destroy(h()(this,Pt))}}}]),e}();const Nt=Rt;var Dt=i(506),It=i.n(Dt),Ft=i(205),Bt=i.n(Ft),qt=i(585),Ht=i.n(qt),zt=i(754),Kt=i.n(zt);function Vt(e,t,i){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,i)}var Ut=new WeakMap;const Gt=function(){function e(t,i){r()(this,e),c()(this,"element",void 0),c()(this,"media",void 0),c()(this,"promise",void 0),Vt(this,Ut,{writable:!0,value:void 0}),this.element=t,this.media=i,this.promise=new Promise((function(e){e()}))}return l()(e,[{key:"instance",get:function(){return h()(this,Ut)},set:function(e){p()(this,Ut,e)}},{key:"play",value:function(){return this.element.play()}},{key:"pause",value:function(){this.element.pause()}},{key:"volume",get:function(){return this.element.volume},set:function(e){this.element.volume=e}},{key:"muted",get:function(){return this.element.muted},set:function(e){this.element.muted=e}},{key:"playbackRate",get:function(){return this.element.playbackRate},set:function(e){this.element.playbackRate=e}},{key:"defaultPlaybackRate",get:function(){return this.element.defaultPlaybackRate},set:function(e){this.element.defaultPlaybackRate=e}},{key:"currentTime",get:function(){return this.element.currentTime},set:function(e){this.element.currentTime=e}},{key:"duration",get:function(){return this.element.duration}},{key:"paused",get:function(){return this.element.paused}},{key:"ended",get:function(){return this.element.ended}}]),e}();function Qt(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function $t(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=Kt()(e);if(t){var s=Kt()(this).constructor;i=Reflect.construct(n,arguments,s)}else i=n.apply(this,arguments);return Ht()(this,i)}}function Jt(e,t,i){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,i)}var Yt=new WeakMap,Xt=new WeakMap,Zt=new WeakMap,ei=function(e){Bt()(i,e);var t=$t(i);function i(e,n,s){var a;return r()(this,i),a=t.call(this,e,n),Jt(It()(a),Yt,{writable:!0,value:void 0}),Jt(It()(a),Xt,{writable:!0,value:{}}),Jt(It()(a),Zt,{writable:!0,value:{}}),p()(It()(a),Zt,s),a._assign=a._assign.bind(It()(a)),a._preparePlayer=a._preparePlayer.bind(It()(a)),a.promise="undefined"==typeof dashjs?T("https://cdn.dashjs.org/latest/dash.all.min.js"):new Promise((function(e){e({})})),a.promise.then((function(){p()(It()(a),Yt,dashjs.MediaPlayer().create()),a.instance=h()(It()(a),Yt)})),a}return l()(i,[{key:"canPlayType",value:function(e){return M&&"application/dash+xml"===e}},{key:"load",value:function(){var e=this;this._preparePlayer(),h()(this,Yt).attachSource(this.media.src);var t=W("loadedmetadata");this.element.dispatchEvent(t),h()(this,Xt)||(p()(this,Xt,dashjs.MediaPlayer.events),Object.keys(h()(this,Xt)).forEach((function(t){h()(e,Yt).on(h()(e,Xt)[t],e._assign)})))}},{key:"destroy",value:function(){var e=this;h()(this,Xt)&&(Object.keys(h()(this,Xt)).forEach((function(t){h()(e,Yt).off(h()(e,Xt)[t],e._assign)})),p()(this,Xt,[])),h()(this,Yt).reset()}},{key:"src",set:function(e){var t=this;he(e)&&(this.destroy(),p()(this,Yt,dashjs.MediaPlayer().create()),this._preparePlayer(),h()(this,Yt).attachSource(e.src),p()(this,Xt,dashjs.MediaPlayer.events),Object.keys(h()(this,Xt)).forEach((function(e){h()(t,Yt).on(h()(t,Xt)[e],t._assign)})))}},{key:"levels",get:function(){var e=[];if(h()(this,Yt)){var t=h()(this,Yt).getBitrateInfoListFor("video");t.length&&t.forEach((function(i){if(t[i]){var n=t[i],s=n.height,a=n.name,r={height:s,id:"".concat(i),label:a||null};e.push(r)}}))}return e}},{key:"level",get:function(){return h()(this,Yt)?h()(this,Yt).getQualityFor("video"):-1},set:function(e){0===e?h()(this,Yt).setAutoSwitchQuality(!0):(h()(this,Yt).setAutoSwitchQuality(!1),h()(this,Yt).setQualityFor("video",e))}},{key:"_assign",value:function(e){if("error"===e.type){var t=W("playererror",{detail:{message:e,type:"M(PEG)-DASH"}});this.element.dispatchEvent(t)}else{var i=W(e.type,{detail:e});this.element.dispatchEvent(i)}}},{key:"_preparePlayer",value:function(){h()(this,Yt).updateSettings(function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Qt(Object(i),!0).forEach((function(t){c()(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Qt(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({debug:{logLevel:dashjs.Debug.LOG_LEVEL_NONE},streaming:{fastSwitchEnabled:!0,scheduleWhilePaused:!1}},h()(this,Zt)||{})),h()(this,Yt).initialize(),h()(this,Yt).attachView(this.element),h()(this,Yt).setAutoPlay(!1)}}]),i}(Gt);const ti=ei;var ii=i(479),ni=i.n(ii),si=["configs"];function ai(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function ri(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ai(Object(i),!0).forEach((function(t){c()(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ai(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function oi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=Kt()(e);if(t){var s=Kt()(this).constructor;i=Reflect.construct(n,arguments,s)}else i=n.apply(this,arguments);return Ht()(this,i)}}function li(e,t,i){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,i)}var ui=new WeakMap,ci=new WeakMap,di=new WeakMap,hi=function(e){Bt()(i,e);var t=oi(i);function i(e,n,s){var a;return r()(this,i),a=t.call(this,e,n),li(It()(a),ui,{writable:!0,value:void 0}),li(It()(a),ci,{writable:!0,value:{}}),li(It()(a),di,{writable:!0,value:{}}),p()(It()(a),di,s),a.element=e,a.media=n,a._create=a._create.bind(It()(a)),a._assign=a._assign.bind(It()(a)),a.promise="undefined"==typeof flvjs?T("https://cdn.jsdelivr.net/npm/flv.js@latest/dist/flv.min.js"):new Promise((function(e){e({})})),a.promise.then(a._create),a}return l()(i,[{key:"canPlayType",value:function(e){return M&&("video/x-flv"===e||"video/flv"===e)}},{key:"load",value:function(){var e=this;h()(this,ui).unload(),h()(this,ui).detachMediaElement(),h()(this,ui).attachMediaElement(this.element),h()(this,ui).load();var t=W("loadedmetadata");this.element.dispatchEvent(t),h()(this,ci)||(p()(this,ci,flvjs.Events),Object.keys(h()(this,ci)).forEach((function(t){h()(e,ui).on(h()(e,ci)[t],(function(){for(var i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return e._assign(h()(e,ci)[t],n)}))})))}},{key:"destroy",value:function(){h()(this,ui).destroy(),p()(this,ui,null)}},{key:"src",set:function(e){ve(e)&&(this.destroy(),this._create())}},{key:"levels",get:function(){var e=this,t=[];return h()(this,ui)&&h()(this,ui).levels&&h()(this,ui).levels.length&&Object.keys(h()(this,ui).levels).forEach((function(i){var n=h()(e,ui).levels[i],s={height:n.height,id:i,label:n.name||null};t.push(s)})),t}},{key:"level",get:function(){return h()(this,ui)?h()(this,ui).currentLevel:-1},set:function(e){h()(this,ui).currentLevel=e}},{key:"_create",value:function(){var e=this,t=h()(this,di)||{},i=t.configs,n=ni()(t,si);flvjs.LoggingControl.enableDebug=(null==n?void 0:n.debug)||!1,flvjs.LoggingControl.enableVerbose=(null==n?void 0:n.debug)||!1;var s=ri(ri({},n),{},{type:"flv",url:this.media.src});p()(this,ui,flvjs.createPlayer(s,i||{})),this.instance=h()(this,ui),h()(this,ci)||(p()(this,ci,flvjs.Events),Object.keys(h()(this,ci)).forEach((function(t){h()(e,ui).on(h()(e,ci)[t],(function(){for(var i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return e._assign(h()(e,ci)[t],n)}))})))}},{key:"_assign",value:function(e,t){if("error"===e){var i=W("playererror",{detail:{data:t,message:"".concat(t[0],": ").concat(t[1]," ").concat(t[2].msg),type:"FLV"}});this.element.dispatchEvent(i)}else{var n=W(e,{detail:{data:t}});this.element.dispatchEvent(n)}}}]),i}(Gt);const vi=hi;function pi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=Kt()(e);if(t){var s=Kt()(this).constructor;i=Reflect.construct(n,arguments,s)}else i=n.apply(this,arguments);return Ht()(this,i)}}function mi(e,t,i){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,i)}var fi=new WeakMap,gi=new WeakMap,yi=new WeakMap,bi=new WeakMap,Ei=new WeakMap,_i=new WeakMap,wi=function(e){Bt()(i,e);var t=pi(i);function i(e,n,s,a){var o;return r()(this,i),o=t.call(this,e,n),mi(It()(o),fi,{writable:!0,value:void 0}),mi(It()(o),gi,{writable:!0,value:{}}),mi(It()(o),yi,{writable:!0,value:0}),mi(It()(o),bi,{writable:!0,value:0}),mi(It()(o),Ei,{writable:!0,value:void 0}),mi(It()(o),_i,{writable:!0,value:void 0}),p()(It()(o),Ei,a||{}),o.element=e,o.media=n,p()(It()(o),_i,s),o._create=o._create.bind(It()(o)),o._play=o._play.bind(It()(o)),o._pause=o._pause.bind(It()(o)),o._assign=o._assign.bind(It()(o)),o.promise="undefined"==typeof Hls?T("https://cdn.jsdelivr.net/npm/hls.js@latest/dist/hls.min.js"):new Promise((function(e){e({})})),o.promise.then(o._create),o}return l()(i,[{key:"canPlayType",value:function(e){return function(){if("undefined"==typeof window)return!1;var e=window.MediaSource||window.WebKitMediaSource,t=window.SourceBuffer||window.WebKitSourceBuffer,i=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),n=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return!!i&&!!n&&!L}()&&"application/x-mpegURL"===e}},{key:"load",value:function(){var e=this;h()(this,fi)&&(h()(this,fi).detachMedia(),h()(this,fi).loadSource(this.media.src),h()(this,fi).attachMedia(this.element));var t=W("loadedmetadata");this.element.dispatchEvent(t),h()(this,gi)||(p()(this,gi,Hls.Events),Object.keys(h()(this,gi)).forEach((function(t){h()(e,fi).on(h()(e,gi)[t],(function(){for(var i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return e._assign(h()(e,gi)[t],n)}))})))}},{key:"destroy",value:function(){var e=this;h()(this,fi)&&h()(this,fi).stopLoad(),h()(this,gi)&&Object.keys(h()(this,gi)).forEach((function(t){h()(e,fi).off(h()(e,gi)[t],(function(){for(var i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return e._assign(h()(e,gi)[t],n)}))})),this.element.removeEventListener("play",this._play),this.element.removeEventListener("pause",this._pause),h()(this,fi)&&(h()(this,fi).destroy(),p()(this,fi,null))}},{key:"src",set:function(e){var t=this;de(e)&&(this.destroy(),p()(this,fi,new Hls(h()(this,Ei))),h()(this,fi).loadSource(e.src),h()(this,fi).attachMedia(this.element),p()(this,gi,Hls.Events),Object.keys(h()(this,gi)).forEach((function(e){h()(t,fi).on(h()(t,gi)[e],(function(){for(var i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return t._assign(h()(t,gi)[e],n)}))})))}},{key:"levels",get:function(){var e=this,t=[];return h()(this,fi)&&h()(this,fi).levels&&h()(this,fi).levels.length&&Object.keys(h()(this,fi).levels).forEach((function(i){var n=h()(e,fi).levels[i],s={height:n.height,id:i,label:n.name||null};t.push(s)})),t}},{key:"level",get:function(){return h()(this,fi)?h()(this,fi).currentLevel:-1},set:function(e){h()(this,fi).currentLevel=e}},{key:"_create",value:function(){var e=this,t=!("auto"!==this.element.preload&&!h()(this,_i));h()(this,Ei).autoStartLoad=t,p()(this,fi,new Hls(h()(this,Ei))),this.instance=h()(this,fi),p()(this,gi,Hls.Events),Object.keys(h()(this,gi)).forEach((function(t){h()(e,fi).on(h()(e,gi)[t],(function(){for(var i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return e._assign(h()(e,gi)[t],n)}))})),t||(this.element.addEventListener("play",this._play,C),this.element.addEventListener("pause",this._pause,C))}},{key:"_assign",value:function(e,t){if("hlsError"===e){var i=W("playererror",{detail:{data:t,message:t[1].details,type:"HLS"}});this.element.dispatchEvent(i);var n=t[1].type,s=t[1].fatal,a=t[1];if(s)switch(n){case"mediaError":var r=(new Date).getTime();if(!h()(this,yi)||r-h()(this,yi)>3e3)p()(this,yi,(new Date).getTime()),h()(this,fi).recoverMediaError();else if(!h()(this,bi)||r-h()(this,bi)>3e3)p()(this,bi,(new Date).getTime()),console.warn("Attempting to swap Audio Codec and recover from media error"),h()(this,fi).swapAudioCodec(),h()(this,fi).recoverMediaError();else{console.error("Cannot recover, last media error recovery failed");var o=W(n,{detail:{data:a}});this.element.dispatchEvent(o)}break;case"networkError":console.error("Network error");var l=W(n,{detail:{data:a}});this.element.dispatchEvent(l);break;default:h()(this,fi).destroy();var u=W(n,{detail:{data:a}});this.element.dispatchEvent(u)}else{var c=W(n,{detail:{data:a}});this.element.dispatchEvent(c)}}else{var d=t[1];if("hlsLevelLoaded"===e&&!0===d.live){this.element.setAttribute("op-live__enabled","true");var v=W("timeupdate");this.element.dispatchEvent(v)}else if("hlsLevelUpdated"===e&&!0===d.live&&d.totalduration>120){this.element.setAttribute("op-dvr__enabled","true");var m=W("timeupdate");this.element.dispatchEvent(m)}else if("hlsFragParsingMetadata"===e){var f=W("metadataready",{detail:{data:t[1]}});this.element.dispatchEvent(f)}var g=W(e,{detail:{data:t[1]}});this.element.dispatchEvent(g)}}},{key:"_play",value:function(){h()(this,fi)&&h()(this,fi).startLoad()}},{key:"_pause",value:function(){h()(this,fi)&&h()(this,fi).stopLoad()}}]),i}(Gt);const ki=wi;function Ai(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function Li(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Ai(Object(i),!0).forEach((function(t){c()(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Ai(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function Mi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=Kt()(e);if(t){var s=Kt()(this).constructor;i=Reflect.construct(n,arguments,s)}else i=n.apply(this,arguments);return Ht()(this,i)}}function Ci(e,t,i){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,i)}var xi=new WeakMap,Oi=new WeakMap,Ti=new WeakMap,Si=new WeakMap,Pi=new WeakMap,ji=new WeakMap,Wi=function(e){Bt()(i,e);var t=Mi(i);function i(e,n){var s;if(r()(this,i),s=t.call(this,e,n),Ci(It()(s),xi,{writable:!0,value:void 0}),Ci(It()(s),Oi,{writable:!0,value:[]}),Ci(It()(s),Ti,{writable:!0,value:!1}),Ci(It()(s),Si,{writable:!0,value:0}),Ci(It()(s),Pi,{writable:!0,value:!1}),Ci(It()(s),ji,{writable:!0,value:void 0}),!O(e)&&!x(e))throw new TypeError("Native method only supports video/audio tags");return s._clearTimeout=s._clearTimeout.bind(It()(s)),s._setTimeout=s._setTimeout.bind(It()(s)),s._dispatchError=s._dispatchError.bind(It()(s)),s._isDvrEnabled=s._isDvrEnabled.bind(It()(s)),s._readMediadataInfo=s._readMediadataInfo.bind(It()(s)),p()(It()(s),Ti,de(n)),s.element.addEventListener("playing",s._clearTimeout,C),s.element.addEventListener("stalled",s._setTimeout,C),s.element.addEventListener("error",s._dispatchError,C),s.element.addEventListener("loadeddata",s._isDvrEnabled,C),s.element.textTracks.addEventListener("addtrack",s._readMediadataInfo,C),s}return l()(i,[{key:"canPlayType",value:function(e){return!!this.element.canPlayType(e).replace("no","")}},{key:"load",value:function(){this.element.load()}},{key:"destroy",value:function(){this.element.removeEventListener("playing",this._clearTimeout),this.element.removeEventListener("stalled",this._setTimeout),this.element.removeEventListener("error",this._dispatchError),this.element.removeEventListener("loadeddata",this._isDvrEnabled),this.element.textTracks.removeEventListener("addtrack",this._readMediadataInfo)}},{key:"levels",get:function(){if(!h()(this,Oi).length)for(var e=this.element.querySelectorAll("source[title]"),t=0,i=e.length;t<i;++t){var n={height:0,id:"".concat(t),label:e[t].getAttribute("title")||""};h()(this,Oi).push(n)}return h()(this,Oi)}},{key:"level",get:function(){var e;return(null===(e=h()(this,xi))||void 0===e?void 0:e.id)||"-1"},set:function(e){var t=h()(this,Oi).findIndex((function(t){return t.id===e}));if(t>-1){p()(this,xi,this.levels[t]);for(var i=this.element.querySelectorAll("source[title]"),n=0,s=i.length;n<s;++n){var a=i[n].getAttribute("src");a&&parseInt(h()(this,xi).id,10)===n&&(this.element.src=a)}}}},{key:"src",set:function(e){this.element.src=e.src}},{key:"_isDvrEnabled",value:function(){var e=this.element.seekable.end(this.element.seekable.length-1)-this.element.seekable.start(0);if(h()(this,Ti)&&e>120&&!this.element.getAttribute("op-dvr__enabled")){this.element.setAttribute("op-dvr__enabled","true");var t=W("timeupdate");this.element.dispatchEvent(t)}}},{key:"_readMediadataInfo",value:function(e){var t,i=this,n=e;"metadata"===(null==n||null===(t=n.track)||void 0===t?void 0:t.kind)&&(n.track.mode="hidden",n.track.addEventListener("cuechange",(function(e){var t=e.target,n=t.activeCues?t.activeCues[0]:null;if(n){var s=W("metadataready",{detail:n});i.element.dispatchEvent(s)}}),C))}},{key:"_setTimeout",value:function(){var e=this;h()(this,Pi)||void 0===window||(p()(this,Pi,!0),p()(this,ji,window.setInterval((function(){if(h()(e,Si)>=30){clearInterval(h()(e,ji));var t="Media download failed part-way due to a network error",i=W("playererror",{detail:{data:{message:t,error:2},message:t,type:"HTML5"}});e.element.dispatchEvent(i),p()(e,Si,0),p()(e,Pi,!1)}else{var n;p()(e,Si,(n=h()(e,Si),n++,n))}}),1e3)))}},{key:"_clearTimeout",value:function(){h()(this,ji)&&(clearInterval(h()(this,ji)),p()(this,Si,0),p()(this,Pi,!1))}},{key:"_dispatchError",value:function(e){var t,i=e.target,n=null==i?void 0:i.error;switch(null==n?void 0:n.code){case null==n?void 0:n.MEDIA_ERR_ABORTED:t="Media playback aborted";break;case null==n?void 0:n.MEDIA_ERR_NETWORK:t="Media download failed part-way due to a network error";break;case null==n?void 0:n.MEDIA_ERR_DECODE:t="Media playback aborted due to a corruption problem or because the\n                    media used features your browser did not support.";break;case null==n?void 0:n.MEDIA_ERR_SRC_NOT_SUPPORTED:t="Media could not be loaded, either because the server or network failed\n                    or because the format is not supported.";break;default:t="Unknown error occurred."}var s=W("playererror",{detail:{data:Li(Li({},e),{},{message:t,error:null==n?void 0:n.code}),message:t,type:"HTML5"}});this.element.dispatchEvent(s)}}]),i}(Gt);const Ri=Wi;function Ni(e,t,i){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,i)}var Di=new WeakMap,Ii=new WeakMap,Fi=new WeakMap,Bi=new WeakMap,qi=new WeakMap,Hi=new WeakMap,zi=new WeakMap,Ki=new WeakMap,Vi=new WeakMap;const Ui=function(){function e(t,i,n,s){r()(this,e),Ni(this,Di,{writable:!0,value:void 0}),Ni(this,Ii,{writable:!0,value:void 0}),Ni(this,Fi,{writable:!0,value:void 0}),Ni(this,Bi,{writable:!0,value:void 0}),Ni(this,qi,{writable:!0,value:void 0}),Ni(this,Hi,{writable:!0,value:void 0}),Ni(this,zi,{writable:!0,value:!1}),Ni(this,Ki,{writable:!0,value:{media:{},optionsKey:{},rules:[]}}),Ni(this,Vi,{writable:!0,value:void 0}),p()(this,Di,t),p()(this,qi,i),p()(this,Fi,this._getMediaFiles()),p()(this,Ki,s),p()(this,Hi,n)}var i,n,a;return l()(e,[{key:"canPlayType",value:function(e){return h()(this,Ii).canPlayType(e)}},{key:"load",value:(a=s()(f().mark((function e(){var t=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!h()(this,zi)){e.next=2;break}return e.abrupt("return");case 2:if(p()(this,zi,!0),h()(this,Fi).length){e.next=5;break}throw new TypeError("Media not set");case 5:if(h()(this,Ii)&&"function"==typeof h()(this,Ii).destroy&&(1===h()(this,Fi).length&&h()(this,Fi)[0].src===h()(this,Ii).media.src||h()(this,Ii).destroy()),h()(this,Fi).some((function(e){try{p()(t,Ii,t._invoke(e))}catch(i){p()(t,Ii,new Ri(h()(t,Di),e))}return h()(t,Ii).canPlayType(e.type)})),e.prev=7,null!==h()(this,Ii)){e.next=10;break}throw new TypeError("Media cannot be played with any valid media type");case 10:return e.next=12,h()(this,Ii).promise;case 12:h()(this,Ii).load(),e.next=19;break;case 15:throw e.prev=15,e.t0=e.catch(7),h()(this,Ii)&&h()(this,Ii).destroy(),e.t0;case 19:case"end":return e.stop()}}),e,this,[[7,15]])}))),function(){return a.apply(this,arguments)})},{key:"play",value:(n=s()(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h()(this,zi)){e.next=7;break}return p()(this,zi,!0),e.next=4,this.load();case 4:p()(this,zi,!1),e.next=9;break;case 7:return e.next=9,h()(this,Ii).promise;case 9:return p()(this,Bi,h()(this,Ii).play()),e.abrupt("return",h()(this,Bi));case 11:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"pause",value:(i=s()(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===h()(this,Bi)){e.next=3;break}return e.next=3,h()(this,Bi);case 3:h()(this,Ii).pause();case 4:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"destroy",value:function(){h()(this,Ii)&&h()(this,Ii).destroy()}},{key:"src",get:function(){return h()(this,Fi)},set:function(e){if("string"==typeof e?h()(this,Fi).push({src:e,type:pe(e,h()(this,Di))}):Array.isArray(e)?p()(this,Fi,e):"object"===t()(e)&&h()(this,Fi).push(e),p()(this,Fi,h()(this,Fi).filter((function(e){return e.src}))),h()(this,Fi).length>0){var i=h()(this,Fi),n=y()(i,1)[0];h()(this,Di).src&&h()(this,Di).setAttribute("data-op-file",h()(this,Fi)[0].src),h()(this,Di).src=n.src,p()(this,Vi,n),h()(this,Ii)&&(h()(this,Ii).src=n)}else h()(this,Di).src=""}},{key:"current",get:function(){return h()(this,Vi)}},{key:"mediaFiles",get:function(){return h()(this,Fi)},set:function(e){p()(this,Fi,e)}},{key:"volume",get:function(){return h()(this,Ii)?h()(this,Ii).volume:h()(this,Di).volume},set:function(e){h()(this,Ii)&&(h()(this,Ii).volume=e)}},{key:"muted",get:function(){return h()(this,Ii)?h()(this,Ii).muted:h()(this,Di).muted},set:function(e){h()(this,Ii)&&(h()(this,Ii).muted=e)}},{key:"playbackRate",get:function(){return h()(this,Ii)?h()(this,Ii).playbackRate:h()(this,Di).playbackRate},set:function(e){h()(this,Ii)&&(h()(this,Ii).playbackRate=e)}},{key:"defaultPlaybackRate",get:function(){return h()(this,Ii)?h()(this,Ii).defaultPlaybackRate:h()(this,Di).defaultPlaybackRate},set:function(e){h()(this,Ii)&&(h()(this,Ii).defaultPlaybackRate=e)}},{key:"currentTime",get:function(){return h()(this,Ii)?h()(this,Ii).currentTime:h()(this,Di).currentTime},set:function(e){h()(this,Ii)&&(h()(this,Ii).currentTime=e)}},{key:"duration",get:function(){var e=h()(this,Ii)?h()(this,Ii).duration:h()(this,Di).duration;return e===1/0&&h()(this,Di).seekable&&h()(this,Di).seekable.length?h()(this,Di).seekable.end(0):e}},{key:"paused",get:function(){return h()(this,Ii)?h()(this,Ii).paused:h()(this,Di).paused}},{key:"ended",get:function(){return h()(this,Ii)?h()(this,Ii).ended:h()(this,Di).ended}},{key:"loaded",get:function(){return h()(this,zi)},set:function(e){p()(this,zi,e)}},{key:"level",get:function(){return h()(this,Ii)?h()(this,Ii).level:-1},set:function(e){h()(this,Ii)&&(h()(this,Ii).level=e)}},{key:"levels",get:function(){return h()(this,Ii)?h()(this,Ii).levels:[]}},{key:"instance",get:function(){return h()(this,Ii)?h()(this,Ii).instance:null}},{key:"_getMediaFiles",value:function(){var e=[],t=h()(this,Di).querySelectorAll("source"),i=h()(this,Di).src;i&&e.push({src:i,type:h()(this,Di).getAttribute("type")||pe(i,h()(this,Di))});for(var n=0,s=t.length;n<s;n++){var a=t[n],r=a.src;if(e.push({src:r,type:a.getAttribute("type")||pe(r,h()(this,Di))}),0===n){var o=e[0];p()(this,Vi,o)}}return e.length||e.push({src:"",type:pe("",h()(this,Di))}),e}},{key:"_invoke",value:function(e){var t=this,i=h()(this,Di).canPlayType("application/vnd.apple.mpegurl")||h()(this,Di).canPlayType("application/x-mpegURL");p()(this,Vi,e);var n,s=(h()(this,qi).controls||{}).layers,a=!1;if(s&&Object.keys(s).forEach((function(e){var t=s?s[e]:null;t&&t.indexOf("levels")>-1&&(a=!0)})),Object.keys(h()(this,Ki).media).length)return h()(this,Ki).rules.forEach((function(i){var s=i(e.src);if(s){var a=h()(t,Ki).media[s],r=h()(t,qi)[h()(t,Ki).optionsKey[s]]||void 0;n=a(h()(t,Di),e,h()(t,Hi),r)}})),n?(n.create(),n):new Ri(h()(this,Di),e);if(de(e)){var r;if(i&&h()(this,qi).forceNative&&!a)return new Ri(h()(this,Di),e);var o=(null===(r=h()(this,qi))||void 0===r?void 0:r.hls)||void 0;return new ki(h()(this,Di),e,h()(this,Hi),o)}if(he(e)){var l,u=(null===(l=h()(this,qi))||void 0===l?void 0:l.dash)||void 0;return new ti(h()(this,Di),e,u)}if(ve(e)){var c,d=(null===(c=h()(this,qi))||void 0===c?void 0:c.flv)||{debug:!1,type:"flv",url:e.src};return new vi(h()(this,Di),e,d)}return new Ri(h()(this,Di),e)}}]),e}();function Gi(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function Qi(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Gi(Object(i),!0).forEach((function(t){c()(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Gi(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function $i(e,t,i){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,i)}var Ji=new WeakMap,Yi=new WeakMap,Xi=new WeakMap,Zi=new WeakMap,en=new WeakMap,tn=new WeakMap,nn=new WeakMap,sn=new WeakMap,an=new WeakMap,rn=new WeakMap,on=new WeakMap,ln=new WeakMap,un=new WeakMap,cn=new WeakMap,dn=new WeakMap,hn=new WeakMap,vn=new WeakMap,pn=new WeakMap,mn=new WeakMap,fn=new WeakMap,gn=new WeakMap,yn=new WeakMap,bn=new WeakMap,En=new WeakMap,_n=new WeakMap,wn=new WeakMap,kn=new WeakMap,An=new WeakMap,Ln=new WeakMap,Mn=new WeakMap,Cn=new WeakMap,xn=new WeakMap,On=new WeakMap,Tn=function(){function e(t,i,n,s,a){var o,l,u,d,v=this;r()(this,e),c()(this,"loadPromise",void 0),c()(this,"loadedAd",!1),$i(this,Ji,{writable:!0,value:!1}),$i(this,Yi,{writable:!0,value:!1}),$i(this,Xi,{writable:!0,value:!1}),$i(this,Zi,{writable:!0,value:!1}),$i(this,en,{writable:!0,value:0}),$i(this,tn,{writable:!0,value:void 0}),$i(this,nn,{writable:!0,value:!1}),$i(this,sn,{writable:!0,value:0}),$i(this,an,{writable:!0,value:0}),$i(this,rn,{writable:!0,value:null}),$i(this,on,{writable:!0,value:void 0}),$i(this,ln,{writable:!0,value:void 0}),$i(this,un,{writable:!0,value:void 0}),$i(this,cn,{writable:!0,value:[]}),$i(this,dn,{writable:!0,value:void 0}),$i(this,hn,{writable:!0,value:void 0}),$i(this,vn,{writable:!0,value:void 0}),$i(this,pn,{writable:!0,value:void 0}),$i(this,mn,{writable:!0,value:void 0}),$i(this,fn,{writable:!0,value:void 0}),$i(this,gn,{writable:!0,value:void 0}),$i(this,yn,{writable:!0,value:void 0}),$i(this,bn,{writable:!0,value:!1}),$i(this,En,{writable:!0,value:!1}),$i(this,_n,{writable:!0,value:!1}),$i(this,wn,{writable:!0,value:void 0}),$i(this,kn,{writable:!0,value:0}),$i(this,An,{writable:!0,value:void 0}),$i(this,Ln,{writable:!0,value:void 0}),$i(this,Mn,{writable:!0,value:0}),$i(this,Cn,{writable:!0,value:[]}),$i(this,xn,{writable:!0,value:!1}),$i(this,On,{writable:!0,value:null});var m={autoPlayAdBreaks:!0,customClick:{enabled:!1,label:"Click here for more info"},audioSkip:{enabled:!0,label:"Skip Ad",remainingLabel:"Skip in [[secs]] seconds"},debug:!1,enablePreloading:!1,language:"en",loop:!1,numRedirects:4,publisherId:void 0,sdkPath:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",sessionId:void 0,src:[],vpaidMode:"enabled"};p()(this,on,t),p()(this,dn,i),p()(this,ln,t.getMedia()),p()(this,un,t.getElement()),p()(this,bn,n||!1),p()(this,nn,t.getElement().muted),p()(this,En,s||!1),p()(this,wn,Qi(Qi({},m),a)),null!=a&&a.customClick&&Object.keys(a.customClick).length&&(h()(this,wn).customClick=Qi(Qi({},m.customClick),a.customClick)),p()(this,_n,!1),p()(this,An,h()(this,un).volume),p()(this,tn,h()(this,An));var f=null!==(o=h()(this,wn))&&void 0!==o&&o.debug?null===(l=h()(this,wn))||void 0===l||null===(u=l.sdkPath)||void 0===u?void 0:u.replace(/(\.js$)/,"_debug.js"):null===(d=h()(this,wn))||void 0===d?void 0:d.sdkPath;this.load=this.load.bind(this),this.resizeAds=this.resizeAds.bind(this),this._handleClickInContainer=this._handleClickInContainer.bind(this),this._handleSkipAds=this._handleSkipAds.bind(this),this._loaded=this._loaded.bind(this),this._error=this._error.bind(this),this._assign=this._assign.bind(this),this._contentLoadedAction=this._contentLoadedAction.bind(this),this._loadedMetadataHandler=this._loadedMetadataHandler.bind(this),this._contentEndedListener=this._contentEndedListener.bind(this),this._handleResizeAds=this._handleResizeAds.bind(this),this._onContentPauseRequested=this._onContentPauseRequested.bind(this),this._onContentResumeRequested=this._onContentResumeRequested.bind(this),p()(this,hn,!f||"undefined"!=typeof google&&void 0!==google.ima?new Promise((function(e){e()})):T(f)),h()(this,hn).then((function(){v.load()})).catch((function(e){var t="Ad script could not be loaded; please check if you have an AdBlock ";t+="turned on, or if you provided a valid URL is correct",console.error("Ad error: ".concat(t,"."));var i=W("playererror",{detail:{data:e,message:t,type:"Ads"}});h()(v,un).dispatchEvent(i)}))}var t;return l()(e,[{key:"load",value:function(){var e,t,i=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if("undefined"!=typeof google&&google.ima&&(i||!this.loadedAd||!h()(this,wn).autoPlayAdBreaks)&&(h()(this,wn).autoPlayAdBreaks||i)){this.loadedAd=!0;var n=h()(this,on).getContainer().querySelector(".op-ads");if(n&&n.parentNode&&n.parentNode.removeChild(n),p()(this,Zi,!0),p()(this,pn,document.createElement("div")),h()(this,pn).className="op-ads",h()(this,pn).tabIndex=-1,h()(this,un).parentElement&&h()(this,un).parentElement.insertBefore(h()(this,pn),h()(this,un).nextSibling),h()(this,pn).addEventListener("click",this._handleClickInContainer),null!==(e=h()(this,wn).customClick)&&void 0!==e&&e.enabled&&(p()(this,mn,document.createElement("div")),h()(this,mn).className="op-ads__click-container",h()(this,mn).innerHTML='<div class="op-ads__click-label">'.concat(P(h()(this,wn).customClick.label),"</div>"),h()(this,un).parentElement&&h()(this,un).parentElement.insertBefore(h()(this,mn),h()(this,un).nextSibling)),O(h()(this,un))&&null!==(t=h()(this,wn).audioSkip)&&void 0!==t&&t.enabled){var s;if(null!==(s=h()(this,wn).audioSkip)&&void 0!==s&&s.element){var a=h()(this,wn).audioSkip||{},r=a.element;if("string"==typeof r){var o=document.getElementById(r);o&&p()(this,fn,o)}else r instanceof HTMLElement&&p()(this,fn,r)}else p()(this,fn,document.createElement("button")),h()(this,fn).className="op-ads__skip hidden",h()(this,on).getControls().getContainer().appendChild(h()(this,fn));h()(this,fn)&&h()(this,fn).addEventListener("click",this._handleSkipAds,C)}p()(this,Cn,h()(this,ln).src);var l={disabled:google.ima.ImaSdkSettings.VpaidMode.DISABLED,enabled:google.ima.ImaSdkSettings.VpaidMode.ENABLED,insecure:google.ima.ImaSdkSettings.VpaidMode.INSECURE};google.ima.settings.setVpaidMode(l[h()(this,wn).vpaidMode||"enabled"]),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0),google.ima.settings.setAutoPlayAdBreaks(h()(this,wn).autoPlayAdBreaks),google.ima.settings.setNumRedirects(h()(this,wn).numRedirects),google.ima.settings.setLocale(h()(this,wn).language),h()(this,wn).sessionId&&google.ima.settings.setSessionId(h()(this,wn).sessionId),h()(this,wn).publisherId&&google.ima.settings.setPpid(h()(this,wn).publisherId),google.ima.settings.setPlayerType("openplayerjs"),google.ima.settings.setPlayerVersion("3.0.0"),p()(this,gn,new google.ima.AdDisplayContainer(h()(this,pn),h()(this,un),h()(this,mn))),p()(this,vn,new google.ima.AdsLoader(h()(this,gn))),h()(this,vn).addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this._loaded,C),h()(this,vn).addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this._error,C),"undefined"!=typeof window&&window.addEventListener("resize",this._handleResizeAds,C),h()(this,un).addEventListener("loadedmetadata",this._handleResizeAds,C),!0!==h()(this,bn)&&!0!==h()(this,En)&&!0!==i&&!0!==h()(this,wn).enablePreloading&&!0!==h()(this,_n)||(h()(this,Yi)||(p()(this,Yi,!0),h()(this,gn).initialize()),this._requestAds())}}},{key:"play",value:(t=s()(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h()(this,Yi)){e.next=4;break}return p()(this,_n,!0),this._initNotDoneAds(),e.abrupt("return");case 4:if(h()(this,rn))try{h()(this,en)||!1!==h()(this,Xi)?h()(this,rn).resume():h()(this,rn).start(),p()(this,Xi,!0),t=W("play"),h()(this,un).dispatchEvent(t)}catch(e){this._resumeMedia()}case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"pause",value:function(){if(h()(this,rn)){p()(this,Xi,!1),h()(this,rn).pause();var e=W("pause");h()(this,un).dispatchEvent(e)}}},{key:"destroy",value:function(){var e,t,i=this;h()(this,rn)&&(h()(this,rn).removeEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this._error),h()(this,cn)&&h()(this,cn).forEach((function(e){h()(i,rn).removeEventListener(e,i._assign)}))),p()(this,cn,[]);var n=h()(this,on).getControls(),s=n?n.events.mouse:{};Object.keys(s).forEach((function(e){h()(i,pn)&&h()(i,pn).removeEventListener(e,s[e])})),h()(this,vn)&&(h()(this,vn).removeEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this._error),h()(this,vn).removeEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this._loaded));var a=!Array.isArray(h()(this,dn))||h()(this,kn)>h()(this,dn).length;h()(this,rn)&&a&&h()(this,rn).destroy(),null!==(e=h()(this,wn).customClick)&&void 0!==e&&e.enabled&&h()(this,mn)&&h()(this,mn).remove(),null!==(t=h()(this,wn).audioSkip)&&void 0!==t&&t.enabled&&h()(this,fn)&&(h()(this,fn).removeEventListener("click",this._handleSkipAds),h()(this,fn).remove()),(w||k)&&h()(this,un).removeEventListener("loadedmetadata",this._contentLoadedAction),h()(this,un).removeEventListener("loadedmetadata",this._handleResizeAds),h()(this,un).removeEventListener("loadedmetadata",this._loadedMetadataHandler),h()(this,un).removeEventListener("ended",this._contentEndedListener),"undefined"!=typeof window&&window.removeEventListener("resize",this._handleResizeAds),h()(this,pn)&&(h()(this,pn).removeEventListener("click",this._handleClickInContainer),h()(this,pn).remove()),this.loadPromise=null,this.loadedAd=!1,p()(this,Yi,!1),p()(this,_n,!1),p()(this,sn,0),p()(this,an,0),p()(this,On,null)}},{key:"resizeAds",value:function(e,t){var i=this;if(h()(this,rn)){var n=h()(this,un),s="true"===n.getAttribute("data-fullscreen")?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL,a=e,r=e?e.toString():"";e&&r.indexOf("%")>-1&&h()(this,un).parentElement&&(a=h()(this,un).parentElement.offsetWidth*(parseInt(r,10)/100));var o,l=t,u=t?t.toString():"";t&&u.indexOf("%")>-1&&h()(this,un).parentElement&&(l=h()(this,un).parentElement.offsetHeight*(parseInt(u,10)/100)),o&&"undefined"!=typeof window&&window.cancelAnimationFrame(o),"undefined"!=typeof window&&(o=window.requestAnimationFrame((function(){h()(i,rn).resize(a||n.offsetWidth,l||n.offsetHeight,s)})))}}},{key:"getAdsManager",value:function(){return h()(this,rn)}},{key:"getAdsLoader",value:function(){return h()(this,vn)}},{key:"started",value:function(){return h()(this,Zi)}},{key:"src",set:function(e){p()(this,dn,e)}},{key:"isDone",set:function(e){p()(this,Yi,e)}},{key:"playRequested",set:function(e){p()(this,_n,e)}},{key:"volume",get:function(){return h()(this,rn)?h()(this,rn).getVolume():h()(this,An)},set:function(e){h()(this,rn)&&(p()(this,tn,e),h()(this,rn).setVolume(e),this._setMediaVolume(e),p()(this,nn,0===e))}},{key:"muted",get:function(){return h()(this,nn)},set:function(e){h()(this,rn)&&(e?(h()(this,rn).setVolume(0),p()(this,nn,!0),this._setMediaVolume(0)):(h()(this,rn).setVolume(h()(this,tn)),p()(this,nn,!1),this._setMediaVolume(h()(this,tn))))}},{key:"currentTime",get:function(){return h()(this,an)},set:function(e){p()(this,an,e)}},{key:"duration",get:function(){return h()(this,sn)}},{key:"paused",get:function(){return!h()(this,Xi)}},{key:"ended",get:function(){return h()(this,Ji)}},{key:"_assign",value:function(e){var t=this,i=e.getAd();switch(i&&p()(this,On,i),e.type){case google.ima.AdEvent.Type.LOADED:if(i.isLinear()){if(_&&x(h()(this,un))&&(h()(this,un).controls=!1),p()(this,sn,i.getDuration()),p()(this,an,i.getDuration()),!h()(this,xn)&&!w&&!k){var n=W("waiting");h()(this,un).dispatchEvent(n);var s=W("loadedmetadata");h()(this,un).dispatchEvent(s),this.resizeAds()}}else this._onContentResumeRequested();break;case google.ima.AdEvent.Type.STARTED:if(i.isLinear()){h()(this,un).parentElement&&!h()(this,un).parentElement.classList.contains("op-ads--active")&&h()(this,un).parentElement.classList.add("op-ads--active"),h()(this,ln).paused||h()(this,ln).pause(),p()(this,Xi,!0);var a,r=W("play");if(h()(this,un).dispatchEvent(r),a||(this.resizeAds(),a=!0),h()(this,ln).ended){p()(this,Ji,!1);var o=W("adsmediaended");h()(this,un).dispatchEvent(o)}"undefined"!=typeof window&&p()(this,en,window.setInterval((function(){if(!0===h()(t,Xi)){p()(t,an,Math.round(h()(t,rn).getRemainingTime()));var e=W("timeupdate");h()(t,un).dispatchEvent(e)}}),350))}break;case google.ima.AdEvent.Type.COMPLETE:case google.ima.AdEvent.Type.SKIPPED:if(i.isLinear()){if(e.type===google.ima.AdEvent.Type.SKIPPED){var l=W("adsskipped");h()(this,un).dispatchEvent(l)}h()(this,un).parentElement&&h()(this,un).parentElement.classList.remove("op-ads--active"),p()(this,Xi,!1),clearInterval(h()(this,en))}break;case google.ima.AdEvent.Type.VOLUME_CHANGED:this._setMediaVolume(this.volume);break;case google.ima.AdEvent.Type.VOLUME_MUTED:if(i.isLinear()){var u=W("volumechange");h()(this,un).dispatchEvent(u)}break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:if(i.isLinear()&&(p()(this,Xi,!1),p()(this,Ji,!0),p()(this,en,0),p()(this,nn,!1),p()(this,Zi,!1),p()(this,On,null),h()(this,un).parentElement&&h()(this,un).parentElement.classList.remove("op-ads--active"),this.destroy(),h()(this,un).currentTime>=h()(this,un).duration)){var c=W("ended");h()(this,un).dispatchEvent(c)}break;case google.ima.AdEvent.Type.CLICK:var d=W("pause");h()(this,un).dispatchEvent(d);break;case google.ima.AdEvent.Type.AD_BREAK_READY:h()(this,wn).autoPlayAdBreaks||this.play();break;case google.ima.AdEvent.Type.AD_PROGRESS:var v=e.getAdData(),m=h()(this,On)?h()(this,On).getSkipTimeOffset():-1;if(h()(this,fn))if(-1!==m){var f,g,y=h()(this,rn).getAdSkippableState(),b=Math.ceil(m-v.currentTime);if(h()(this,fn).classList.remove("hidden"),y)h()(this,fn).textContent=(null===(f=h()(this,wn).audioSkip)||void 0===f?void 0:f.label)||"",h()(this,fn).classList.remove("disabled");else h()(this,fn).textContent=(null===(g=h()(this,wn).audioSkip)||void 0===g?void 0:g.remainingLabel.replace("[[secs]]",b.toString()))||"",h()(this,fn).classList.add("disabled")}else h()(this,fn).classList.add("hidden")}if(e.type===google.ima.AdEvent.Type.LOG){var E=e.getAdData();if(E.adError){var A=E.adError.getMessage();console.warn("Ad warning: Non-fatal error occurred: ".concat(A));var L=W("playererror",{detail:{data:E.adError,message:A,type:"Ads"}});h()(this,un).dispatchEvent(L)}}else{var M=W("ads".concat(e.type));h()(this,un).dispatchEvent(M)}}},{key:"_error",value:function(e){var t=e.getError(),i=W("playererror",{detail:{data:t,message:t.toString(),type:"Ads"}});h()(this,un).dispatchEvent(i);var n;Array.isArray(h()(this,dn))&&h()(this,dn).length>1&&h()(this,kn)<h()(this,dn).length-1?(p()(this,kn,(n=h()(this,kn),n++,n)),this.destroy(),p()(this,Zi,!0),p()(this,_n,!0),this.load(!0),console.warn("Ad warning: ".concat(t.toString()))):([100,101,102,300,301,302,303,400,401,402,403,405,406,407,408,409,410,500,501,502,503,900,901,1005].indexOf(t.getErrorCode())>-1?(h()(this,rn)&&h()(this,rn).destroy(),console.error("Ad error: ".concat(t.toString()))):console.warn("Ad warning: ".concat(t.toString())),p()(this,On,null),!0!==h()(this,bn)&&!0!==h()(this,En)&&!0!==h()(this,Zi)||(p()(this,Xi,!1),this._resumeMedia()))}},{key:"_loaded",value:function(e){var t=new google.ima.AdsRenderingSettings;t.restoreCustomPlaybackStateOnAdBreakComplete=!1,t.enablePreloading=h()(this,wn).enablePreloading,p()(this,rn,e.getAdsManager(h()(this,un),t)),this._start(h()(this,rn)),this.loadPromise=new Promise((function(e){e()}))}},{key:"_start",value:function(e){var t=this;h()(this,mn)&&e.isCustomClickTrackingUsed()&&h()(this,mn).classList.add("op-ads__click-container--visible"),e.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this._onContentPauseRequested,C),e.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this._onContentResumeRequested,C),p()(this,cn,[google.ima.AdEvent.Type.ALL_ADS_COMPLETED,google.ima.AdEvent.Type.CLICK,google.ima.AdEvent.Type.VIDEO_CLICKED,google.ima.AdEvent.Type.VIDEO_ICON_CLICKED,google.ima.AdEvent.Type.AD_PROGRESS,google.ima.AdEvent.Type.AD_BUFFERING,google.ima.AdEvent.Type.IMPRESSION,google.ima.AdEvent.Type.DURATION_CHANGE,google.ima.AdEvent.Type.USER_CLOSE,google.ima.AdEvent.Type.LINEAR_CHANGED,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,google.ima.AdEvent.Type.AD_METADATA,google.ima.AdEvent.Type.INTERACTION,google.ima.AdEvent.Type.COMPLETE,google.ima.AdEvent.Type.FIRST_QUARTILE,google.ima.AdEvent.Type.LOADED,google.ima.AdEvent.Type.MIDPOINT,google.ima.AdEvent.Type.PAUSED,google.ima.AdEvent.Type.RESUMED,google.ima.AdEvent.Type.USER_CLOSE,google.ima.AdEvent.Type.STARTED,google.ima.AdEvent.Type.THIRD_QUARTILE,google.ima.AdEvent.Type.SKIPPED,google.ima.AdEvent.Type.VOLUME_CHANGED,google.ima.AdEvent.Type.VOLUME_MUTED,google.ima.AdEvent.Type.LOG]),h()(this,wn).autoPlayAdBreaks||h()(this,cn).push(google.ima.AdEvent.Type.AD_BREAK_READY);var i=h()(this,on).getControls(),n=i?i.events.mouse:{};if(Object.keys(n).forEach((function(e){h()(t,pn)&&h()(t,pn).addEventListener(e,n[e],C)})),h()(this,cn).forEach((function(i){e.addEventListener(i,t._assign,C)})),!0===h()(this,bn)||!0===h()(this,En)||!0===h()(this,_n)){if(p()(this,_n,!1),!h()(this,Yi))return void this._initNotDoneAds();e.init(h()(this,un).offsetWidth,h()(this,un).offsetHeight,h()(this,un).parentElement&&"true"===h()(this,un).parentElement.getAttribute("data-fullscreen")?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL),e.start();var s=W("play");h()(this,un).dispatchEvent(s)}else!0===h()(this,wn).enablePreloading&&e.init(h()(this,un).offsetWidth,h()(this,un).offsetHeight,h()(this,un).parentElement&&"true"===h()(this,un).parentElement.getAttribute("data-fullscreen")?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}},{key:"_initNotDoneAds",value:function(){h()(this,gn)?(p()(this,Yi,!0),h()(this,gn).initialize(),w||k?(p()(this,Ln,this._contentLoadedAction),h()(this,un).addEventListener("loadedmetadata",this._contentLoadedAction,C),h()(this,un).load()):this._contentLoadedAction()):(this.load(),this.loadedAd=!1)}},{key:"_contentEndedListener",value:function(){p()(this,Ji,!0),p()(this,Xi,!1),p()(this,Zi,!1),h()(this,vn).contentComplete()}},{key:"_onContentPauseRequested",value:function(){h()(this,un).removeEventListener("ended",this._contentEndedListener),p()(this,Mn,h()(this,ln).currentTime),h()(this,Zi)?h()(this,ln).pause():p()(this,Zi,!0);var e=W("play");h()(this,un).dispatchEvent(e)}},{key:"_onContentResumeRequested",value:function(){if(h()(this,un).addEventListener("ended",this._contentEndedListener,C),h()(this,un).addEventListener("loadedmetadata",this._loadedMetadataHandler,C),w||k)h()(this,ln).src=h()(this,Cn),h()(this,ln).load(),this._prepareMedia(),h()(this,un).parentElement&&h()(this,un).parentElement.classList.add("op-ads--active");else{var e=W("loadedmetadata");h()(this,un).dispatchEvent(e)}}},{key:"_loadedMetadataHandler",value:function(){var e;Array.isArray(h()(this,dn))?(p()(this,kn,(e=h()(this,kn),e++,e)),h()(this,kn)<=h()(this,dn).length-1?(h()(this,rn)&&h()(this,rn).destroy(),h()(this,vn).contentComplete(),p()(this,_n,!0),p()(this,Zi,!0),p()(this,Yi,!1),this.load(!0)):(h()(this,wn).autoPlayAdBreaks||this._resetAdsAfterManualBreak(),this._prepareMedia())):h()(this,un).seekable.length?h()(this,un).seekable.end(0)>h()(this,Mn)&&(h()(this,wn).autoPlayAdBreaks||this._resetAdsAfterManualBreak(),this._prepareMedia()):setTimeout(this._loadedMetadataHandler,100)}},{key:"_resumeMedia",value:function(){var e=this;if(p()(this,en,0),p()(this,nn,!1),p()(this,Zi,!1),p()(this,sn,0),p()(this,an,0),h()(this,un).parentElement&&h()(this,un).parentElement.classList.remove("op-ads--active"),h()(this,ln).ended){var t=W("ended");h()(this,un).dispatchEvent(t)}else try{h()(this,ln).play(),setTimeout((function(){var t=W("play");h()(e,un).dispatchEvent(t)}),50)}catch(e){console.error(e)}}},{key:"_requestAds",value:function(){p()(this,yn,new google.ima.AdsRequest);var e=Array.isArray(h()(this,dn))?h()(this,dn)[h()(this,kn)]:h()(this,dn);!function(e){var t;if("undefined"==typeof DOMParser)return!1;t=function(e){return(new DOMParser).parseFromString(e,"text/xml")};try{if(t(e).getElementsByTagName("parsererror").length>0)return!1}catch(e){return!1}return!0}(e)?h()(this,yn).adTagUrl=e:h()(this,yn).adsResponse=e;var t=h()(this,un).parentElement?h()(this,un).parentElement.offsetWidth:0,i=h()(this,un).parentElement?h()(this,un).parentElement.offsetHeight:0;h()(this,yn).linearAdSlotWidth=t,h()(this,yn).linearAdSlotHeight=i,h()(this,yn).nonLinearAdSlotWidth=t,h()(this,yn).nonLinearAdSlotHeight=i/3,h()(this,yn).setAdWillAutoPlay(h()(this,bn)),h()(this,yn).setAdWillPlayMuted(h()(this,En)),h()(this,vn).requestAds(h()(this,yn))}},{key:"_contentLoadedAction",value:function(){h()(this,Ln)&&(h()(this,un).removeEventListener("loadedmetadata",h()(this,Ln)),p()(this,Ln,null)),this._requestAds()}},{key:"_resetAdsAfterManualBreak",value:function(){h()(this,rn)&&h()(this,rn).destroy(),h()(this,vn).contentComplete(),p()(this,Yi,!1),p()(this,_n,!0)}},{key:"_prepareMedia",value:function(){h()(this,ln).currentTime=h()(this,Mn),h()(this,un).removeEventListener("loadedmetadata",this._loadedMetadataHandler),this._resumeMedia()}},{key:"_setMediaVolume",value:function(e){h()(this,ln).volume=e,h()(this,ln).muted=0===e}},{key:"_handleClickInContainer",value:function(){if(h()(this,ln).paused){var e=W("paused");h()(this,un).dispatchEvent(e),this.pause()}}},{key:"_handleResizeAds",value:function(){this.resizeAds()}},{key:"_handleSkipAds",value:function(){h()(this,rn).skip()}}]),e}();const Sn=Tn;function Pn(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function jn(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Pn(Object(i),!0).forEach((function(t){c()(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Pn(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function Wn(e,t,i){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,i)}var Rn=new WeakMap,Nn=new WeakMap,Dn=new WeakMap,In=new WeakMap,Fn=new WeakMap,Bn=new WeakMap,qn=new WeakMap,Hn=new WeakMap,zn=new WeakMap,Kn=new WeakMap,Vn=new WeakMap,Un=new WeakMap,Gn=new WeakMap,Qn=new WeakMap,$n=new WeakMap,Jn=new WeakMap,Yn=new WeakMap,Xn=function(){function e(t,i){var n;(r()(this,e),c()(this,"loader",void 0),c()(this,"playBtn",void 0),c()(this,"proxy",null),Wn(this,Rn,{writable:!0,value:!1}),Wn(this,Nn,{writable:!0,value:void 0}),Wn(this,Dn,{writable:!0,value:void 0}),Wn(this,In,{writable:!0,value:""}),Wn(this,Fn,{writable:!0,value:void 0}),Wn(this,Bn,{writable:!0,value:void 0}),Wn(this,qn,{writable:!0,value:void 0}),Wn(this,Hn,{writable:!0,value:{}}),Wn(this,zn,{writable:!0,value:!1}),Wn(this,Kn,{writable:!0,value:void 0}),Wn(this,Vn,{writable:!0,value:!1}),Wn(this,Un,{writable:!0,value:!1}),Wn(this,Gn,{writable:!0,value:!1}),Wn(this,Qn,{writable:!0,value:void 0}),Wn(this,$n,{writable:!0,value:[]}),Wn(this,Jn,{writable:!0,value:void 0}),Wn(this,Yn,{writable:!0,value:{controls:{alwaysVisible:!1,layers:{left:["play","time","volume"],middle:["progress"],right:["captions","settings","fullscreen"]}},defaultLevel:void 0,detachMenus:!1,forceNative:!0,height:0,hidePlayBtnTimer:350,labels:{auto:"Auto",captions:"CC/Subtitles",click:"Click to unmute",fullscreen:"Fullscreen",lang:{en:"English"},levels:"Quality Levels",live:"Live Broadcast",mediaLevels:"Change Quality",mute:"Mute",off:"Off",pause:"Pause",play:"Play",progressRail:"Time Rail",progressSlider:"Time Slider",settings:"Player Settings",speed:"Speed",speedNormal:"Normal",tap:"Tap to unmute",toggleCaptions:"Toggle Captions",unmute:"Unmute",volume:"Volume",volumeControl:"Volume Control",volumeSlider:"Volume Slider"},live:{showLabel:!0,showProgress:!1},media:{pauseOnClick:!1},mode:"responsive",onError:function(e){return console.error(e)},pauseOthers:!0,progress:{allowRewind:!0,allowSkip:!0,duration:0,showCurrentTimeOnly:!1},showLoaderOnInit:!1,startTime:0,startVolume:1,step:0,useDeviceVolume:!0,width:0}}),p()(this,Fn,t instanceof HTMLMediaElement?t:document.getElementById(t)),h()(this,Fn))&&(p()(this,zn,h()(this,Fn).autoplay||!1),"string"==typeof i||Array.isArray(i)||this._mergeOptions(i),h()(this,Fn).volume=h()(this,Qn).startVolume||1,h()(this,Qn).ads&&h()(this,Qn).ads.src&&p()(this,Bn,h()(this,Qn).ads.src),((null===(n=h()(this,Qn))||void 0===n?void 0:n.startTime)||0)>0&&(h()(this,Fn).currentTime=h()(this,Qn).startTime||0),p()(this,Kn,h()(this,Fn).volume));this._autoplay=this._autoplay.bind(this),this._enableKeyBindings=this._enableKeyBindings.bind(this)}var i,n,a,o;return l()(e,[{key:"init",value:(o=s()(f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._isValid()){t.next=10;break}return this._wrapInstance(),t.next=4,this.prepareMedia();case 4:this._createPlayButton(),this._createUID(),this._createControls(),this._setEvents(),p()(this,Rn,!0),e.instances[this.id]=this;case 10:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"load",value:function(){return h()(this,qn).loaded=!1,this.isMedia()?h()(this,qn).load():void 0}},{key:"play",value:(a=s()(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!h()(this,qn)||h()(this,qn).loaded){e.next=4;break}return e.next=3,h()(this,qn).load();case 3:h()(this,qn).loaded=!0;case 4:if(!h()(this,Dn)){e.next=9;break}return h()(this,Dn).playRequested=!0,e.next=8,h()(this,Dn).loadPromise;case 8:return e.abrupt("return",h()(this,Dn).play());case 9:return e.abrupt("return",h()(this,qn).play());case 10:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"pause",value:function(){h()(this,Dn)?h()(this,Dn).pause():h()(this,qn).pause()}},{key:"destroy",value:function(){var t,i=this;h()(this,Dn)&&(h()(this,Dn).pause(),h()(this,Dn).destroy()),h()(this,Jn)&&h()(this,Jn).destroy();var n=h()(this,Fn);h()(this,qn)&&h()(this,qn).destroy(),Object.keys(h()(this,Hn)).forEach((function(e){n.removeEventListener(e,h()(i,Hn)[e])})),this.getContainer().removeEventListener("keydown",this._enableKeyBindings),h()(this,zn)&&!h()(this,Gn)&&x(h()(this,Fn))&&n.removeEventListener("canplay",this._autoplay),h()(this,Nn)&&h()(this,Nn).destroy(),x(h()(this,Fn))&&(this.playBtn&&this.playBtn.remove(),this.loader&&this.loader.remove()),null!==(t=h()(this,Qn))&&void 0!==t&&t.onError&&h()(this,Fn).removeEventListener("playererror",h()(this,Qn).onError),n.controls=!0,n.setAttribute("id",h()(this,In)),n.removeAttribute("op-live__enabled"),n.removeAttribute("op-dvr__enabled");var s="fit"!==h()(this,Qn).mode||O(n)?n.parentElement:n.closest(".op-player__fit--wrapper");s&&s.parentNode&&s.parentNode.replaceChild(n,s),p()(this,Rn,!1),delete e.instances[h()(this,In)];var a=W("playerdestroyed");n.dispatchEvent(a)}},{key:"getContainer",value:function(){return h()(this,Fn).parentElement||h()(this,Fn)}},{key:"getControls",value:function(){return h()(this,Nn)}},{key:"getCustomControls",value:function(){return h()(this,$n)}},{key:"getElement",value:function(){return h()(this,Fn)}},{key:"getEvents",value:function(){return h()(this,Hn)}},{key:"getOptions",value:function(){return h()(this,Qn)}},{key:"activeElement",value:function(){return h()(this,Dn)&&h()(this,Dn).started()?h()(this,Dn):h()(this,qn)}},{key:"isMedia",value:function(){return this.activeElement()instanceof Ui}},{key:"isAd",value:function(){return this.activeElement()instanceof Sn}},{key:"getMedia",value:function(){return h()(this,qn)}},{key:"getAd",value:function(){return h()(this,Dn)}},{key:"addCaptions",value:function(e){if(e.default)for(var t=h()(this,Fn).querySelectorAll("track"),i=0,n=t.length;i<n;i++)t[i].default=!1;var s=h()(this,Fn),a=s.querySelector('track[srclang="'.concat(e.srclang,'"][kind="').concat(e.kind,'"]'));a?(a.src=e.src,a.label=e.label,a.default=e.default||!1):((a=document.createElement("track")).srclang=e.srclang,a.src=e.src,a.kind=e.kind,a.label=e.label,a.default=e.default||!1,s.appendChild(a));var r=W("controlschanged");s.dispatchEvent(r)}},{key:"addControl",value:function(e){e.custom=!0,h()(this,$n).push(e);var t=W("controlschanged");h()(this,Fn).dispatchEvent(t)}},{key:"removeControl",value:function(e){var t=this;h()(this,$n).forEach((function(i,n){i.id===e&&h()(t,$n).splice(n,1)}));var i=W("controlschanged");h()(this,Fn).dispatchEvent(i)}},{key:"prepareMedia",value:(n=s()(f().mark((function t(){var i,n,s;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,null!==(i=h()(this,Qn))&&void 0!==i&&i.onError&&h()(this,Fn).addEventListener("playererror",h()(this,Qn).onError,C),h()(this,zn)&&x(h()(this,Fn))&&h()(this,Fn).addEventListener("canplay",this._autoplay,C),p()(this,qn,new Ui(h()(this,Fn),h()(this,Qn),h()(this,zn),e.customMedia)),n=h()(this,Fn).getAttribute("preload"),!h()(this,Bn)&&n&&"none"===n){t.next=9;break}return t.next=8,h()(this,qn).load();case 8:h()(this,qn).loaded=!0;case 9:!h()(this,zn)&&h()(this,Bn)&&(s=h()(this,Qn)&&h()(this,Qn).ads?h()(this,Qn).ads:void 0,p()(this,Dn,new Sn(this,h()(this,Bn),!1,!1,s))),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),console.error(t.t0);case 15:case"end":return t.stop()}}),t,this,[[0,12]])}))),function(){return n.apply(this,arguments)})},{key:"initialized",value:function(){return h()(this,Rn)}},{key:"enableDefaultPlayer",value:function(){var e=this,t=!0,i=0;this.proxy&&!this.proxy.paused&&(t=!1,i=this.proxy.currentTime,this.proxy.pause()),this.proxy=this,this.getElement().addEventListener("loadedmetadata",(function(){e.getMedia().currentTime=i,t||e.play()}))}},{key:"loadAd",value:(i=s()(f().mark((function e(t){var i,n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{this.isAd()?(this.getAd().destroy(),this.getAd().src=t,this.getAd().loadedAd=!1,this.getAd().load()):(i=h()(this,Qn)&&h()(this,Qn).ads?h()(this,Qn).ads:void 0,n=!this.activeElement().paused||h()(this,Vn),p()(this,Dn,new Sn(this,t,n,h()(this,Un),i)))}catch(e){console.error(e)}case 1:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"src",get:function(){return h()(this,qn).src},set:function(e){var i=this;h()(this,qn)instanceof Ui?(h()(this,qn).mediaFiles=[],h()(this,qn).src=e):"string"==typeof e?h()(this,Fn).src=e:Array.isArray(e)?e.forEach((function(e){var t=document.createElement("source");t.src=e.src,t.type=e.type||pe(e.src,h()(i,Fn)),h()(i,Fn).appendChild(t)})):"object"===t()(e)&&(h()(this,Fn).src=e.src)}},{key:"id",get:function(){return h()(this,In)}},{key:"_isValid",value:function(){var e=h()(this,Fn);return e instanceof HTMLElement!=!1&&(!(!O(e)&&!x(e))&&!!e.classList.contains("op-player__media"))}},{key:"_wrapInstance",value:function(){var e=document.createElement("div");e.className="op-player op-player__keyboard--inactive",e.className+=O(h()(this,Fn))?" op-player__audio":" op-player__video",e.tabIndex=0,h()(this,Fn).classList.remove("op-player"),h()(this,Fn).parentElement&&h()(this,Fn).parentElement.insertBefore(e,h()(this,Fn)),e.appendChild(h()(this,Fn));var t=document.createElement("div");if(t.className="op-status",t.innerHTML="<span></span>",t.tabIndex=-1,t.setAttribute("aria-hidden","true"),x(h()(this,Fn))&&h()(this,Fn).parentElement&&h()(this,Fn).parentElement.insertBefore(t,h()(this,Fn)),e.addEventListener("keydown",(function(){e.classList.contains("op-player__keyboard--inactive")&&e.classList.remove("op-player__keyboard--inactive")}),C),e.addEventListener("click",(function(){e.classList.contains("op-player__keyboard--inactive")||e.classList.add("op-player__keyboard--inactive")}),C),"fill"!==h()(this,Qn).mode||O(h()(this,Fn))||_)if("fit"!==h()(this,Qn).mode||O(h()(this,Fn))){var i="";if(h()(this,Qn).width){var n="number"==typeof h()(this,Qn).width?"".concat(h()(this,Qn).width,"px"):h()(this,Qn).width;i+="width: ".concat(n," !important;")}if(h()(this,Qn).height){var s="number"==typeof h()(this,Qn).height?"".concat(h()(this,Qn).height,"px"):h()(this,Qn).height;i+="height: ".concat(s," !important;")}i&&e.setAttribute("style",i)}else{var a=this.getContainer();if(a.parentElement){var r=document.createElement("div");r.className="op-player__fit--wrapper",r.tabIndex=0,a.parentElement.insertBefore(r,a),r.appendChild(a),a.classList.add("op-player__fit")}}else this.getContainer().classList.add("op-player__full")}},{key:"_createControls",value:function(){_&&x(h()(this,Fn))&&this.getContainer().classList.add("op-player__ios--iphone"),p()(this,Nn,new Nt(this)),h()(this,Nn).create()}},{key:"_createUID",value:function(){if(h()(this,Fn).id)p()(this,In,h()(this,Fn).id),h()(this,Fn).removeAttribute("id");else{var e=crypto,t="function"==typeof e.getRandomBytes?e.getRandomBytes:e.getRandomValues;p()(this,In,"op_".concat(t(new Uint32Array(1))[0].toString(36).substr(2,9)))}h()(this,Fn).parentElement&&(h()(this,Fn).parentElement.id=h()(this,In))}},{key:"_createPlayButton",value:function(){var e,t,i=this;O(h()(this,Fn))||(this.playBtn=document.createElement("button"),this.playBtn.className="op-player__play",this.playBtn.tabIndex=0,this.playBtn.title=(null===(e=h()(this,Qn).labels)||void 0===e?void 0:e.play)||"",this.playBtn.innerHTML="<span>".concat((null===(t=h()(this,Qn).labels)||void 0===t?void 0:t.play)||"","</span>"),this.playBtn.setAttribute("aria-pressed","false"),this.playBtn.setAttribute("aria-hidden","false"),this.loader=document.createElement("span"),this.loader.className="op-player__loader",this.loader.tabIndex=-1,this.loader.setAttribute("aria-hidden","true"),h()(this,Fn).parentElement&&(h()(this,Fn).parentElement.insertBefore(this.loader,h()(this,Fn)),h()(this,Fn).parentElement.insertBefore(this.playBtn,h()(this,Fn))),this.playBtn.addEventListener("click",(function(){h()(i,Dn)&&(h()(i,Dn).playRequested=i.activeElement().paused),i.activeElement().paused?i.activeElement().play():i.activeElement().pause()}),C))}},{key:"_setEvents",value:function(){var e=this;if(x(h()(this,Fn))){h()(this,Hn).loadedmetadata=function(){var t=e.activeElement();!h()(e,Qn).showLoaderOnInit||w||k?(e.loader.setAttribute("aria-hidden","true"),e.playBtn.setAttribute("aria-hidden","false")):(e.loader.setAttribute("aria-hidden","false"),e.playBtn.setAttribute("aria-hidden","true")),t.paused&&(e.playBtn.classList.remove("op-player__play--paused"),e.playBtn.setAttribute("aria-pressed","false"))},h()(this,Hn).waiting=function(){e.playBtn.setAttribute("aria-hidden","true"),e.loader.setAttribute("aria-hidden","false")},h()(this,Hn).seeking=function(){var t=e.activeElement();e.playBtn.setAttribute("aria-hidden","true"),e.loader.setAttribute("aria-hidden",t instanceof Ui?"false":"true")},h()(this,Hn).seeked=function(){var t=e.activeElement();0===Math.round(t.currentTime)?(e.playBtn.setAttribute("aria-hidden","true"),e.loader.setAttribute("aria-hidden","false")):(e.playBtn.setAttribute("aria-hidden",t instanceof Ui?"false":"true"),e.loader.setAttribute("aria-hidden","true"))},h()(this,Hn).play=function(){var t;e.playBtn.classList.add("op-player__play--paused"),e.playBtn.title=(null===(t=h()(e,Qn).labels)||void 0===t?void 0:t.pause)||"",e.loader.setAttribute("aria-hidden","true"),h()(e,Qn).showLoaderOnInit?e.playBtn.setAttribute("aria-hidden","true"):setTimeout((function(){e.playBtn.setAttribute("aria-hidden","true")}),h()(e,Qn).hidePlayBtnTimer)},h()(this,Hn).playing=function(){e.loader.setAttribute("aria-hidden","true"),e.playBtn.setAttribute("aria-hidden","true")},h()(this,Hn).pause=function(){var t,i=e.activeElement();e.playBtn.classList.remove("op-player__play--paused"),e.playBtn.title=(null===(t=h()(e,Qn).labels)||void 0===t?void 0:t.play)||"",h()(e,Qn).showLoaderOnInit&&0===Math.round(i.currentTime)?(e.playBtn.setAttribute("aria-hidden","true"),e.loader.setAttribute("aria-hidden","false")):(e.playBtn.setAttribute("aria-hidden","false"),e.loader.setAttribute("aria-hidden","true"))},h()(this,Hn).ended=function(){e.loader.setAttribute("aria-hidden","true"),e.playBtn.setAttribute("aria-hidden","true")};var t=!1;h()(this,Hn).timeupdate=function(){if(h()(e,Fn).loop&&e.isMedia()&&h()(e,Dn)){var i=e.getMedia(),n=i.duration-i.currentTime;if(n>0&&n<=.25&&!t){t=!0;var s=W("ended");h()(e,Fn).dispatchEvent(s)}else 0===n&&(t=!1)}}}Object.keys(h()(this,Hn)).forEach((function(t){h()(e,Fn).addEventListener(t,h()(e,Hn)[t],C)})),this.getContainer().addEventListener("keydown",this._enableKeyBindings,C)}},{key:"_autoplay",value:function(){var e,t,i,n,s,a,r=this;h()(this,Gn)||(p()(this,Gn,!0),h()(this,Fn).removeEventListener("canplay",this._autoplay),e=h()(this,Fn),t=h()(this,Kn),i=function(e){p()(r,Vn,e)},n=function(e){p()(r,Un,e)},s=function(){if(h()(r,Un)){var e,t;r.activeElement().muted=!0,r.activeElement().volume=0;var i=W("volumechange");h()(r,Fn).dispatchEvent(i);var n=document.createElement("div"),s=w||k?null===(e=h()(r,Qn).labels)||void 0===e?void 0:e.tap:null===(t=h()(r,Qn).labels)||void 0===t?void 0:t.click;n.className="op-player__unmute",n.innerHTML="<span>".concat(s,"</span>"),n.tabIndex=0,n.addEventListener("click",(function(){r.activeElement().muted=!1,r.activeElement().volume=h()(r,Kn);var e=W("volumechange");h()(r,Fn).dispatchEvent(e),n.remove()}),C);var a=r.getContainer();a.insertBefore(n,a.firstChild)}else r.activeElement().muted=h()(r,Fn).muted,r.activeElement().volume=h()(r,Kn);if(h()(r,Bn)){var o=h()(r,Qn)&&h()(r,Qn).ads?h()(r,Qn).ads:void 0;p()(r,Dn,new Sn(r,h()(r,Bn),h()(r,Vn),h()(r,Un),o))}else(h()(r,Vn)||h()(r,Un))&&r.play()},void 0!==(a=e.play())?a.then((function(){e.pause(),i(!0),n(!1),s()})).catch((function(){e.volume=0,e.muted=!0,e.play().then((function(){e.pause(),i(!0),n(!0),s()})).catch((function(){e.volume=t,e.muted=!1,i(!1),n(!1),s()}))})):(i(!e.paused||"Promise"in window&&a instanceof Promise),e.pause(),n(!1),s()))}},{key:"_mergeOptions",value:function(e){var i=this,n=jn({},e||{});if(p()(this,Qn,jn(jn({},h()(this,Yn)),n)),Object.keys(h()(this,Yn)).filter((function(e){return"labels"!==e&&"object"===t()(h()(i,Yn)[e])})).forEach((function(e){var t=n[e]||{};t&&Object.keys(t).length&&(h()(i,Qn)[e]=jn(jn({},h()(i,Yn)[e]),t))})),n.labels){var s=n.labels?Object.keys(n.labels):[],a={};s.forEach((function(e){var i=n.labels?n.labels[e]:null;i&&"object"===t()(i)&&"lang"===e?Object.keys(i).forEach((function(e){var t=i?i[e]:null;t&&(a=jn(jn({},a),{},{lang:jn(jn({},a.lang),{},c()({},e,P(t)))}))})):i&&(a=jn(jn({},a),{},c()({},e,P(i))))})),h()(this,Qn).labels=jn(jn({},h()(this,Yn).labels),a)}}},{key:"_enableKeyBindings",value:function(e){var t,i,n=e.which||e.keyCode||0,s=this.activeElement(),a=this.isAd(),r=null===(t=document)||void 0===t||null===(i=t.activeElement)||void 0===i?void 0:i.classList.contains("op-player");switch(n){case 13:case 32:case 75:!r||13!==n&&32!==n?75===n&&(s.paused?s.play():s.pause()):s.paused?s.play():s.pause(),e.preventDefault(),e.stopPropagation();break;case 35:a||s.duration===1/0||(s.currentTime=s.duration,e.preventDefault(),e.stopPropagation());break;case 36:a||(s.currentTime=0,e.preventDefault(),e.stopPropagation());break;case 37:case 39:case 74:case 76:if(!a&&s.duration!==1/0){var o,l=5,u=this.getOptions().step;u?l=74===n||76===n?2*u:u:74!==n&&76!==n||(l=10);var c=s.duration!==1/0?l:(null===(o=this.getOptions().progress)||void 0===o?void 0:o.duration)||0;s.currentTime+=37===n||74===n?-1*c:c,s.currentTime<0?s.currentTime=0:s.currentTime>=s.duration&&(s.currentTime=s.duration),e.preventDefault(),e.stopPropagation()}break;case 38:case 40:var d=38===n?Math.min(s.volume+.1,1):Math.max(s.volume-.1,0);s.volume=d,s.muted=!(d>0),e.preventDefault(),e.stopPropagation();break;case 70:x(h()(this,Fn))&&!e.ctrlKey&&(p()(this,Jn,new ce(this,"","")),void 0!==h()(this,Jn).fullScreenEnabled&&(h()(this,Jn).toggleFullscreen(),e.preventDefault(),e.stopPropagation()));break;case 77:s.muted=!s.muted,s.muted?s.volume=0:s.volume=h()(this,Kn),e.preventDefault(),e.stopPropagation();break;case 188:case 190:if(!a&&e.shiftKey){var v=s;v.playbackRate=188===n?Math.max(v.playbackRate-.25,.25):Math.min(v.playbackRate+.25,2);var m=this.getContainer().querySelector(".op-status>span");m&&(m.textContent="".concat(v.playbackRate,"x"),m.parentElement&&m.parentElement.setAttribute("aria-hidden","false"),setTimeout((function(){m.parentElement&&m.parentElement.setAttribute("aria-hidden","true")}),500));var f=W("controlschanged");dispatchEvent(f),e.preventDefault(),e.stopPropagation()}else!a&&s.paused&&(s.currentTime+=.04*(188===n?-1:1),e.preventDefault(),e.stopPropagation())}}}],[{key:"init",value:function(){e.instances={};for(var t=document.querySelectorAll("video.op-player, audio.op-player"),i=0,n=t.length;i<n;i++){var s=t[i],a=s.getAttribute("data-op-settings");new e(s,a?JSON.parse(a):{}).init()}}},{key:"addMedia",value:function(t,i,n,s){e.customMedia.media[i]=s,e.customMedia.optionsKey[i]=t,e.customMedia.rules.push(n)}}]),e}();c()(Xn,"instances",{}),c()(Xn,"customMedia",{media:{},optionsKey:{},rules:[]});const Zn=Xn;"undefined"!=typeof window&&(window.OpenPlayer=Xn,window.OpenPlayerJS=Xn,Xn.init())})(),n=n.default})()));
=======
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.OpenPlayer=t():e.OpenPlayer=t()}(this,(()=>(()=>{var e={228:e=>{e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n},e.exports.__esModule=!0,e.exports.default=e.exports},858:e=>{e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},506:e=>{e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports},575:e=>{e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},913:e=>{function t(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},713:e=>{e.exports=function(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e},e.exports.__esModule=!0,e.exports.default=e.exports},754:e=>{function t(i){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,t(i)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},205:(e,t,i)=>{var n=i(489);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&n(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},884:e=>{e.exports=function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,s,a=[],r=!0,o=!1;try{for(i=i.call(e);!(r=(n=i.next()).done)&&(a.push(n.value),!t||a.length!==t);r=!0);}catch(e){o=!0,s=e}finally{try{r||null==i.return||i.return()}finally{if(o)throw s}}return a}},e.exports.__esModule=!0,e.exports.default=e.exports},521:e=>{e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},585:(e,t,i)=>{var n=i(8).default,s=i(506);e.exports=function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return s(e)},e.exports.__esModule=!0,e.exports.default=e.exports},591:(e,t,i)=>{var n=i(8).default;function s(){"use strict";e.exports=s=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},i=Object.prototype,a=i.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",l=r.asyncIterator||"@@asyncIterator",f=r.toStringTag||"@@toStringTag";function c(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,i){return e[t]=i}}function u(e,t,i,n){var s=t&&t.prototype instanceof v?t:v,a=Object.create(s.prototype),r=new M(n||[]);return a._invoke=function(e,t,i){var n="suspendedStart";return function(s,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===s)throw a;return C()}for(i.method=s,i.arg=a;;){var r=i.delegate;if(r){var o=k(r,i);if(o){if(o===h)continue;return o}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===n)throw n="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n="executing";var l=d(e,t,i);if("normal"===l.type){if(n=i.done?"completed":"suspendedYield",l.arg===h)continue;return{value:l.arg,done:i.done}}"throw"===l.type&&(n="completed",i.method="throw",i.arg=l.arg)}}}(e,i,r),a}function d(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var h={};function v(){}function p(){}function m(){}var y={};c(y,o,(function(){return this}));var g=Object.getPrototypeOf,b=g&&g(g(T([])));b&&b!==i&&a.call(b,o)&&(y=b);var E=m.prototype=v.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function i(s,r,o,l){var f=d(e[s],e,r);if("throw"!==f.type){var c=f.arg,u=c.value;return u&&"object"==n(u)&&a.call(u,"__await")?t.resolve(u.__await).then((function(e){i("next",e,o,l)}),(function(e){i("throw",e,o,l)})):t.resolve(u).then((function(e){c.value=e,o(c)}),(function(e){return i("throw",e,o,l)}))}l(f.arg)}var s;this._invoke=function(e,n){function a(){return new t((function(t,s){i(e,n,t,s)}))}return s=s?s.then(a,a):a()}}function k(e,t){var i=e.iterator[t.method];if(void 0===i){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,k(e,t),"throw"===t.method))return h;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=d(i,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,h;var s=n.arg;return s?s.done?(t[e.resultName]=s.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):s:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function M(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function T(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,n=function t(){for(;++i<e.length;)if(a.call(e,i))return t.value=e[i],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:C}}function C(){return{value:void 0,done:!0}}return p.prototype=m,c(E,"constructor",m),c(m,"constructor",p),p.displayName=c(m,f,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,f,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},w(_.prototype),c(_.prototype,l,(function(){return this})),t.AsyncIterator=_,t.async=function(e,i,n,s,a){void 0===a&&(a=Promise);var r=new _(u(e,i,n,s),a);return t.isGeneratorFunction(i)?r:r.next().then((function(e){return e.done?e.value:r.next()}))},w(E),c(E,f,"Generator"),c(E,o,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=[];for(var i in e)t.push(i);return t.reverse(),function i(){for(;t.length;){var n=t.pop();if(n in e)return i.value=n,i.done=!1,i}return i.done=!0,i}},t.values=T,M.prototype={constructor:M,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(L),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function i(i,n){return r.type="throw",r.arg=e,t.next=i,n&&(t.method="next",t.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var s=this.tryEntries[n],r=s.completion;if("root"===s.tryLoc)return i("end");if(s.tryLoc<=this.prev){var o=a.call(s,"catchLoc"),l=a.call(s,"finallyLoc");if(o&&l){if(this.prev<s.catchLoc)return i(s.catchLoc,!0);if(this.prev<s.finallyLoc)return i(s.finallyLoc)}else if(o){if(this.prev<s.catchLoc)return i(s.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return i(s.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var s=n;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var r=s?s.completion:{};return r.type=e,r.arg=t,s?(this.method="next",this.next=s.finallyLoc,h):this.complete(r)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),L(i),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.tryLoc===e){var n=i.completion;if("throw"===n.type){var s=n.arg;L(i)}return s}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,i){return this.delegate={iterator:T(e),resultName:t,nextLoc:i},"next"===this.method&&(this.arg=void 0),h}},t}e.exports=s,e.exports.__esModule=!0,e.exports.default=e.exports},489:e=>{function t(i,n){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(i,n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},38:(e,t,i)=>{var n=i(858),s=i(884),a=i(379),r=i(521);e.exports=function(e,t){return n(e)||s(e,t)||a(e,t)||r()},e.exports.__esModule=!0,e.exports.default=e.exports},8:e=>{function t(i){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(i)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},379:(e,t,i)=>{var n=i(228);e.exports=function(e,t){if(e){if("string"==typeof e)return n(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},757:(e,t,i)=>{var n=i(591)();e.exports=n;try{regeneratorRuntime=n}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}}},t={};function i(n){var s=t[n];if(void 0!==s)return s.exports;var a=t[n]={exports:{}};return e[n](a,a.exports,i),a.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var n={};return(()=>{"use strict";i.d({},{Z:()=>is});var e=i(713),t=i.n(e),n=i(8),s=i.n(n),a=i(575),r=i.n(a),o=i(913),l=i.n(o),f=i(757),c=i.n(f),u=i(38),d=i.n(u),h="undefined"!=typeof window?window.navigator:null,v=h?h.userAgent.toLowerCase():null,p=(!!v&&(/ipad/i.test(v)&&window.MSStream),!!v&&(/iphone/i.test(v)&&!window.MSStream)),m=(!!v&&(/ipod/i.test(v)&&window.MSStream),!!v&&(/ipad|iphone|ipod/i.test(v)&&!window.MSStream)),y=!!v&&/android/i.test(v),g=(!!h&&("msLaunchUri"in h&&document),!!v&&/chrome/i.test(v)),b=(!!v&&/firefox/i.test(v),!!v&&(/safari/i.test(v)&&!g)),E=(!!v&&/^mozilla\/\d+\.\d+\s\(linux;\su;/i.test(v),"undefined"!=typeof window&&"MediaSource"in window),w={passive:!1};function _(e){return"video"===e.tagName.toLowerCase()}function k(e){return"audio"===e.tagName.toLowerCase()}function A(e){return new Promise((function(t,i){var n=document.createElement("script");n.src=e,n.async=!0,n.onload=function(){n.remove(),t()},n.onerror=function(){n.remove(),i(new Error("".concat(e," could not be loaded")))},document.head&&document.head.appendChild(n)}))}function L(e){var t=e.getBoundingClientRect();return{left:t.left+(window.pageXOffset||document.documentElement.scrollLeft),top:t.top+(window.pageYOffset||document.documentElement.scrollTop)}}function M(e){for(var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=new DOMParser,n=i.parseFromString(e,"text/html"),s=n.body||document.createElement("body"),a=s.querySelectorAll("script"),r=0,o=a.length;r<o;r++)a[r].remove();var l=function e(t){for(var i=t.children,n=0,s=i.length;n<s;n++){for(var a=i[n],r=a.attributes,o=0,l=r.length;o<l;o++){var f=r[o],c=f.name,u=f.value.replace(/\s+/g,"").toLowerCase();["src","href","xlink:href"].includes(c)&&(u.includes("javascript:")||u.includes("data:"))&&a.removeAttribute(c),c.startsWith("on")&&a.removeAttribute(c)}e(a)}};return l(s),t?(s.textContent||"").replace(/\s{2,}/g,""):s.innerHTML}function T(e){e="string"!=typeof e?JSON.stringify(e):e;try{e=JSON.parse(e)}catch(e){return!1}return"object"===s()(e)&&null!==e}function C(e,t){var i={};return t&&t.detail&&(i={detail:t.detail}),new CustomEvent(e,i)}function x(e,t){var i=Math.floor(e%1*(t||0)),n=Math.floor(e),s=Math.floor(n/60),a=Math.floor(s/60),r=function(e){var t=e.toString();return e<10?e<=0?"00":"0".concat(t):t};return s%=60,n%=60,"".concat(a>0?"".concat(r(a),":"):"").concat(r(s),":").concat(r(n)).concat(i?":".concat(r(i)):"")}function S(e){var t=e.replace(/;/g,":").split(":"),i=0;return 3===t.length?(i+=60*parseFloat(t[0])*60,i+=60*parseFloat(t[1]),i+=parseFloat(t[2])):(i+=60*parseFloat(t[0]),i+=parseFloat(t[1])),i}var O,P,j,W,R,N,I,D,F,B,q,H,K,V=function(e,t,i,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,i):s?s.value=i:t.set(e,i),i},z=function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},U=function(){function e(t,i,n){r()(this,e),O.set(this,void 0),P.set(this,void 0),j.set(this,void 0),W.set(this,void 0),R.set(this,{button:{},global:{},media:{}}),N.set(this,{}),I.set(this,void 0),D.set(this,{}),F.set(this,void 0),B.set(this,void 0),q.set(this,"off"),H.set(this,void 0),K.set(this,void 0),V(this,O,t,"f"),V(this,H,i,"f"),V(this,K,n,"f"),this._getCuesFromText=this._getCuesFromText.bind(this),this._getNativeCues=this._getNativeCues.bind(this),this._displayCaptions=this._displayCaptions.bind(this),this._hideCaptions=this._hideCaptions.bind(this),this._search=this._search.bind(this),this._prepareTrack=this._prepareTrack.bind(this),this._formatMenuItems=this._formatMenuItems.bind(this)}return l()(e,[{key:"create",value:function(){for(var e=this,t=z(this,O,"f").getElement().textTracks,i=[],n=0,s=t.length;n<s;n++){var a=['track[kind="subtitles"][srclang="'.concat(t[n].language,'"][label="').concat(t[n].label,'"]'),'track[kind="captions"][srclang="'.concat(t[n].language,'"][label="').concat(t[n].label,'"]')];z(this,O,"f").getElement().querySelector(a.join(", "))&&i.push(t[n])}if(!i.length)for(var r=0,o=t.length;r<o;r++)i.push(t[r]);if(V(this,I,i,"f"),V(this,F,!!z(this,I,"f").length,"f"),z(this,F,"f")){var l=z(this,O,"f").getOptions(),f=l.labels,c=l.detachMenus;V(this,P,document.createElement("button"),"f"),z(this,P,"f").className="op-controls__captions op-control__".concat(z(this,H,"f")),z(this,P,"f").tabIndex=0,z(this,P,"f").title=(null==f?void 0:f.toggleCaptions)||"",z(this,P,"f").setAttribute("aria-controls",z(this,O,"f").id),z(this,P,"f").setAttribute("aria-pressed","false"),z(this,P,"f").setAttribute("aria-label",(null==f?void 0:f.toggleCaptions)||""),z(this,P,"f").setAttribute("data-active-captions","off"),c&&(z(this,P,"f").classList.add("op-control--no-hover"),V(this,W,document.createElement("div"),"f"),z(this,W,"f").className="op-settings op-captions__menu",z(this,W,"f").setAttribute("aria-hidden","true"),z(this,W,"f").innerHTML='<div class="op-settings__menu" role="menu" id="menu-item-captions">\n                <div class="op-settings__submenu-item" tabindex="0" role="menuitemradio" aria-checked="'.concat("off"===z(this,q,"f")?"true":"false",'">\n                    <div class="op-settings__submenu-label op-subtitles__option" data-value="captions-off">').concat(null==f?void 0:f.off,"</div>\n                </div>\n            </div>"));var u=function(t,i,n){var s,a,r=i[t];if("subtitles"===r.kind||"captions"===r.kind){r.default&&(V(e,q,r.srclang,"f"),z(e,P,"f").setAttribute("data-active-captions",r.srclang));var o=(s=r.src,(a=document.createElement("a")).href=s,a.href),l=z(e,I,"f")[t];l&&l.language===r.srclang&&(l.cues&&l.cues.length>0?(z(e,N,"f")[r.srclang]=e._getNativeCues(z(e,I,"f")[t]),e._prepareTrack(t,r.srclang,o,r.default||!1)):fetch(o).then((function(e){if(!e.ok)throw new Error("Network response was not ok");return e.text()})).then((function(i){z(e,N,"f")[r.srclang]=e._getCuesFromText(i),e._prepareTrack(t,r.srclang,o,r.default||!1);var n='.op-subtitles__option[data-value="captions-'.concat(z(e,I,"f")[t].language,'"]');if(z(e,W,"f")&&!z(e,W,"f").querySelector(n)){var s=document.createElement("div"),a=(null==f?void 0:f.lang)?f.lang[z(e,I,"f")[t].language]:null;s.className="op-settings__submenu-item",s.tabIndex=0,s.setAttribute("role","menuitemradio"),s.setAttribute("aria-checked",z(e,q,"f")===z(e,I,"f")[t].language?"true":"false"),s.innerHTML='<div class="op-settings__submenu-label op-subtitles__option"\n                                        data-value="captions-'.concat(z(e,I,"f")[t].language,'">\n                                        ').concat(a||z(e,I,"f")[t].label,"\n                                    </div>"),z(e,W,"f").appendChild(s)}})))}},h=(n=0,z(this,O,"f").getElement().querySelectorAll("track"));for(s=h.length;n<s;n++)u(n,h);V(this,j,document.createElement("div"),"f"),z(this,j,"f").className="op-captions",z(this,j,"f").innerHTML="<span></span>";var v=z(this,j,"f").querySelector("span");if(z(this,R,"f").media.timeupdate=function(){if(z(e,O,"f").isMedia())if(z(e,B,"f")){var t=z(e,N,"f")[z(e,B,"f").language];if(v&&void 0!==t){var i=e._search(t,z(e,O,"f").getMedia().currentTime);v.innerHTML="",i>-1&&z(e,P,"f").classList.contains("op-controls__captions--on")?(z(e,j,"f").classList.add("op-captions--on"),v.innerHTML=M(t[i].text,!1)):e._hideCaptions()}}else e._hideCaptions();else e._hideCaptions()},z(this,R,"f").button.click=function(t){var i=t.target;if(c){for(var n=z(e,O,"f").getContainer().querySelectorAll(".op-settings"),s=0,a=n.length;s<a;++s)n[s]!==z(e,W,"f")&&n[s].setAttribute("aria-hidden","true");"true"===z(e,W,"f").getAttribute("aria-hidden")?z(e,W,"f").setAttribute("aria-hidden","false"):z(e,W,"f").setAttribute("aria-hidden","true")}else if(i.setAttribute("aria-pressed","true"),i.classList.contains("op-controls__captions--on"))e._hideCaptions(),i.classList.remove("op-controls__captions--on"),i.setAttribute("data-active-captions","off");else{if(!z(e,B,"f")){var r=z(e,I,"f"),o=d()(r,1)[0];V(e,B,o,"f")}e._displayCaptions(),i.classList.add("op-controls__captions--on"),i.setAttribute("data-active-captions",z(e,B,"f").language)}},z(this,R,"f").button.mouseover=function(){if(!m&&!y&&c){for(var t=z(e,O,"f").getContainer().querySelectorAll(".op-settings"),i=0,n=t.length;i<n;++i)t[i]!==z(e,W,"f")&&t[i].setAttribute("aria-hidden","true");"true"===z(e,W,"f").getAttribute("aria-hidden")&&z(e,W,"f").setAttribute("aria-hidden","false")}},z(this,R,"f").button.mouseout=function(){if(!m&&!y&&c){for(var t=z(e,O,"f").getContainer().querySelectorAll(".op-settings"),i=0,n=t.length;i<n;++i)t[i].setAttribute("aria-hidden","true");"false"===z(e,W,"f").getAttribute("aria-hidden")&&z(e,W,"f").setAttribute("aria-hidden","true")}},z(this,F,"f")){var p=z(this,O,"f").getContainer();if(p.insertBefore(z(this,j,"f"),p.firstChild),c){var g=document.createElement("div");g.className="op-controls__container op-control__".concat(z(this,H,"f")),g.appendChild(z(this,P,"f")),g.appendChild(z(this,W,"f")),z(this,O,"f").getControls().getLayer(z(this,K,"f")).appendChild(g)}else z(this,O,"f").getControls().getLayer(z(this,K,"f")).appendChild(z(this,P,"f"));z(this,P,"f").addEventListener("click",z(this,R,"f").button.click,w)}z(this,I,"f").length<=1&&!c||!z(this,I,"f").length&&c||(z(this,R,"f").global.click=function(t){var i=t.target;if(i.closest("#".concat(z(e,O,"f").id))&&i.classList.contains("op-subtitles__option")){var n=i.getAttribute("data-value"),s=n?n.replace("captions-",""):"",a=Array.from(z(e,I,"f")).filter((function(e){return e.language===s}));if(V(e,B,a?a.pop():void 0,"f"),c){if(z(e,P,"f").classList.contains("op-controls__captions--on")?(e._hideCaptions(),z(e,P,"f").classList.remove("op-controls__captions--on"),z(e,P,"f").setAttribute("data-active-captions","off")):(e._displayCaptions(),z(e,P,"f").classList.add("op-controls__captions--on"),z(e,P,"f").setAttribute("data-active-captions",s)),i.parentElement&&i.parentElement.parentElement)for(var r=i.parentElement.parentElement.querySelectorAll(".op-settings__submenu-item"),o=0,l=r.length;o<l;++o)r[o].setAttribute("aria-checked","false");i.parentElement&&i.parentElement.setAttribute("aria-checked","true"),z(e,W,"f").setAttribute("aria-hidden","false")}else e._displayCaptions(),z(e,P,"f").setAttribute("data-active-captions",s);var f=C("captionschanged");z(e,O,"f").getElement().dispatchEvent(f)}},c&&(z(this,P,"f").addEventListener("mouseover",z(this,R,"f").button.mouseover,w),z(this,W,"f").addEventListener("mouseover",z(this,R,"f").button.mouseover,w),z(this,W,"f").addEventListener("mouseout",z(this,R,"f").button.mouseout,w),z(this,O,"f").getElement().addEventListener("controlshidden",z(this,R,"f").button.mouseout,w)),void 0!==z(this,R,"f").global.click&&document.addEventListener("click",z(this,R,"f").global.click,w))}}},{key:"destroy",value:function(){var e=z(this,O,"f").getOptions().detachMenus;void 0!==z(this,R,"f").global.click&&document.removeEventListener("click",z(this,R,"f").global.click),z(this,F,"f")&&(z(this,P,"f").removeEventListener("click",z(this,R,"f").button.click),e&&(z(this,P,"f").removeEventListener("mouseover",z(this,R,"f").button.mouseover),z(this,W,"f").removeEventListener("mouseover",z(this,R,"f").button.mouseover),z(this,W,"f").removeEventListener("mouseout",z(this,R,"f").button.mouseout),z(this,O,"f").getElement().removeEventListener("controlshidden",z(this,R,"f").button.mouseout),z(this,W,"f").remove()),z(this,O,"f").getElement().removeEventListener("timeupdate",z(this,R,"f").media.timeupdate),z(this,P,"f").remove(),z(this,j,"f").remove())}},{key:"addSettings",value:function(){var e=z(this,O,"f").getOptions(),t=e.detachMenus,i=e.labels;if(t||z(this,I,"f").length<=1)return{};var n=this._formatMenuItems();return n.length>2?{className:"op-subtitles__option",default:z(this,q,"f")||"off",key:"captions",name:(null==i?void 0:i.captions)||"",subitems:n}:{}}},{key:"_getCuesFromText",value:function(e){var t=e.split(/\r?\n/),i=[],n=/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#/%?=~_|!:,.;]*[-A-Z0-9+&@#/%=~_|])/gi;for(var s,a=new RegExp("^((?:[0-9]{1,2}:)?[0-9]{2}:[0-9]{2}([,.][0-9]{1,3})?) --\x3e ((?:[0-9]{1,2}:)?[0-9]{2}:[0-9]{2}([,.][0-9]{3})?)(.*?)$"),r=0,o=t.length;r<o;r++){var l=a.exec(t[r]);if(l&&r<t.length){r-1>=0&&""!==t[r-1]&&(s=t[r-1]);var f=t[++r];for(r++;""!==t[r]&&r<t.length;)f="".concat(f,"\n").concat(t[r]),r++;f=f.trim().replace(n,"<a href='$1' target='_blank'>$1</a>");var c=S(l[1]);i.push({endTime:S(l[3]),identifier:s||"",settings:T(l[5])?JSON.parse(l[5]):{},startTime:0===c?.2:c,text:f})}s=""}return i}},{key:"_getNativeCues",value:function(e){var t=[],i=e.cues;return Object.keys(i).forEach((function(e){var n=parseInt(e,10),s=i[n];t.push({endTime:s.endTime,identifier:s.id,settings:{},startTime:s.startTime,text:s.text})})),t}},{key:"_displayCaptions",value:function(){if(z(this,j,"f")&&z(this,B,"f")&&void 0!==z(this,B,"f").cues){var e=z(this,j,"f").querySelector("span");e&&(e.innerHTML=""),z(this,O,"f").getElement().addEventListener("timeupdate",z(this,R,"f").media.timeupdate,w)}}},{key:"_hideCaptions",value:function(){z(this,j,"f").classList.remove("op-captions--on"),z(this,B,"f")||(z(this,P,"f").classList.remove("op-controls__captions--on"),z(this,P,"f").setAttribute("data-active-captions","off"))}},{key:"_search",value:function(e,t){for(var i=0,n=e.length-1;i<=n;){var s=i+n>>1,a=e[s].startTime,r=e[s].endTime;if(t>=a&&t<r)return s;a<t?i=s+1:a>t&&(n=s-1)}return-1}},{key:"_prepareTrack",value:function(e,t,i){var n=this,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];z(this,D,"f")[t]=i,z(this,I,"f")[e].mode="disabled",s&&(V(this,q,t,"f"),z(this,P,"f").classList.add("op-controls__captions--on"),z(this,P,"f").setAttribute("data-active-captions",t),V(this,B,Array.from(z(this,I,"f")).filter((function(e){return e.language===z(n,q,"f")})).pop(),"f"),this._displayCaptions(),z(this,O,"f").getContainer().classList.contains("op-captions--detected")||z(this,O,"f").getContainer().classList.add("op-captions--detected"))}},{key:"_formatMenuItems",value:function(){for(var e=this,t=z(this,O,"f").getOptions().labels,i=[{key:"off",label:(null==t?void 0:t.off)||""}],n=function(n,s){var a=z(e,I,"f")[n],r=(null==t?void 0:t.lang)?t.lang[a.language]:null;(i=i.filter((function(e){return e.key!==a.language}))).push({key:a.language,label:r||z(e,I,"f")[n].label})},s=0,a=z(this,I,"f").length;s<a;s++)n(s);return i}}]),e}();O=new WeakMap,P=new WeakMap,j=new WeakMap,W=new WeakMap,R=new WeakMap,N=new WeakMap,I=new WeakMap,D=new WeakMap,F=new WeakMap,B=new WeakMap,q=new WeakMap,H=new WeakMap,K=new WeakMap;const G=U;var Q,$,J,Y,X,Z,ee,te,ie,ne=function(e,t,i,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,i):s?s.value=i:t.set(e,i),i},se=function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},ae=function(){function e(t,i,n){var s=this;r()(this,e),Q.set(this,void 0),$.set(this,void 0),J.set(this,void 0),Y.set(this,[]),X.set(this,0),Z.set(this,0),ee.set(this,void 0),te.set(this,void 0),ie.set(this,void 0),ne(this,Q,t,"f"),ne(this,te,i,"f"),ne(this,ie,n,"f"),ne(this,$,document.body.classList.contains("op-fullscreen__on"),"f");var a=document;this.fullScreenEnabled=!!(a.fullscreenEnabled||a.mozFullScreenEnabled||a.msFullscreenEnabled||a.webkitSupportsFullscreen||a.webkitFullscreenEnabled||document.createElement("video").webkitRequestFullScreen),this._enterSpaceKeyEvent=this._enterSpaceKeyEvent.bind(this),this._resize=this._resize.bind(this),this._fullscreenChange=this._fullscreenChange.bind(this),this._setFullscreen=this._setFullscreen.bind(this),this._unsetFullscreen=this._unsetFullscreen.bind(this),ne(this,Y,["fullscreenchange","mozfullscreenchange","webkitfullscreenchange","msfullscreenchange"],"f"),se(this,Y,"f").forEach((function(e){document.addEventListener(e,s._fullscreenChange,w)})),this._setFullscreenData(!1),se(this,Q,"f").getContainer().addEventListener("keydown",this._enterSpaceKeyEvent,w),p&&(se(this,Q,"f").getElement().addEventListener("webkitbeginfullscreen",this._setFullscreen,w),se(this,Q,"f").getElement().addEventListener("webkitendfullscreen",this._unsetFullscreen,w))}return l()(e,[{key:"create",value:function(){var e=this,t=se(this,Q,"f").getOptions().labels;ne(this,J,document.createElement("button"),"f"),se(this,J,"f").type="button",se(this,J,"f").className="op-controls__fullscreen op-control__".concat(se(this,te,"f")),se(this,J,"f").tabIndex=0,se(this,J,"f").title=(null==t?void 0:t.fullscreen)||"",se(this,J,"f").setAttribute("aria-controls",se(this,Q,"f").id),se(this,J,"f").setAttribute("aria-pressed","false"),se(this,J,"f").setAttribute("aria-label",(null==t?void 0:t.fullscreen)||""),ne(this,ee,(function(){se(e,J,"f").setAttribute("aria-pressed","true"),e.toggleFullscreen()}),"f"),ne(this,ee,se(this,ee,"f").bind(this),"f"),se(this,J,"f").addEventListener("click",se(this,ee,"f"),w),se(this,Q,"f").getControls().getLayer(se(this,ie,"f")).appendChild(se(this,J,"f"))}},{key:"destroy",value:function(){var e=this;se(this,Q,"f").getContainer().removeEventListener("keydown",this._enterSpaceKeyEvent),se(this,Y,"f").forEach((function(t){document.removeEventListener(t,e._fullscreenChange)})),p&&(se(this,Q,"f").getElement().removeEventListener("webkitbeginfullscreen",this._setFullscreen),se(this,Q,"f").getElement().removeEventListener("webkitendfullscreen",this._unsetFullscreen)),se(this,J,"f").removeEventListener("click",se(this,ee,"f")),se(this,J,"f").remove()}},{key:"toggleFullscreen",value:function(){if(se(this,$,"f")){var e=document;e.exitFullscreen?e.exitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.webkitCancelFullScreen?e.webkitCancelFullScreen():e.msExitFullscreen?e.msExitFullscreen():this._fullscreenChange(),document.body.classList.remove("op-fullscreen__on")}else{var t=se(this,Q,"f").getElement();ne(this,X,window.screen.width,"f"),ne(this,Z,window.screen.height,"f"),t.requestFullscreen?t.parentElement.requestFullscreen():t.mozRequestFullScreen?t.parentElement.mozRequestFullScreen():t.webkitRequestFullScreen?t.parentElement.webkitRequestFullScreen():t.msRequestFullscreen?t.parentElement.msRequestFullscreen():t.webkitEnterFullscreen?t.webkitEnterFullscreen():this._fullscreenChange(),document.body.classList.add("op-fullscreen__on")}if("undefined"!=typeof window&&(y||p)){var i=window.screen;i.orientation&&!se(this,$,"f")&&i.orientation.lock("landscape")}}},{key:"_fullscreenChange",value:function(){var e=se(this,$,"f")?void 0:se(this,X,"f"),t=se(this,$,"f")?void 0:se(this,Z,"f");this._setFullscreenData(!se(this,$,"f")),se(this,Q,"f").isAd()&&se(this,Q,"f").getAd().resizeAds(e,t),ne(this,$,!se(this,$,"f"),"f"),se(this,$,"f")?document.body.classList.add("op-fullscreen__on"):document.body.classList.remove("op-fullscreen__on"),this._resize(e,t)}},{key:"_setFullscreenData",value:function(e){se(this,Q,"f").getContainer().setAttribute("data-fullscreen",(!!e).toString()),se(this,J,"f")&&(e?se(this,J,"f").classList.add("op-controls__fullscreen--out"):se(this,J,"f").classList.remove("op-controls__fullscreen--out"))}},{key:"_resize",value:function(e,t){var i=se(this,Q,"f").getContainer(),n=se(this,Q,"f").getElement(),s=se(this,Q,"f").getOptions(),a="";if(e)i.style.width="100%",n.style.width="100%";else if(s.width){var r="number"==typeof s.width?"".concat(s.width,"px"):s.width;a+="width: ".concat(r," !important;"),n.style.removeProperty("width")}else n.style.removeProperty("width"),i.style.removeProperty("width");if(t)n.style.height="100%",i.style.height="100%";else if(s.height){var o="number"==typeof s.height?"".concat(s.height,"px"):s.height;a+="height: ".concat(o," !important;"),n.style.removeProperty("height")}else n.style.removeProperty("height"),i.style.removeProperty("height");a&&i.setAttribute("style",a)}},{key:"_enterSpaceKeyEvent",value:function(e){var t,i=e.which||e.keyCode||0;!(null===(t=null===document||void 0===document?void 0:document.activeElement)||void 0===t?void 0:t.classList.contains("op-controls__fullscreen"))||13!==i&&32!==i||(this.toggleFullscreen(),e.preventDefault(),e.stopPropagation())}},{key:"_setFullscreen",value:function(){ne(this,$,!0,"f"),this._setFullscreenData(!0),document.body.classList.add("op-fullscreen__on")}},{key:"_unsetFullscreen",value:function(){ne(this,$,!1,"f"),this._setFullscreenData(!1),document.body.classList.remove("op-fullscreen__on")}}]),e}();Q=new WeakMap,$=new WeakMap,J=new WeakMap,Y=new WeakMap,X=new WeakMap,Z=new WeakMap,ee=new WeakMap,te=new WeakMap,ie=new WeakMap;const re=ae;function oe(e){return/\.m3u8$/i.test(e.src)||["application/x-mpegURL","application/vnd.apple.mpegurl"].includes(e.type)}function le(e){return/\.mpd/i.test(e.src)||"application/dash+xml"===e.type}function fe(e){return/(^rtmp:\/\/|\.flv$)/i.test(e.src)||["video/x-flv","video/flv"].includes(e.type)}function ce(e,t){var i=function(e){var t=((((e.split("?")[0]||"").split("\\")||[]).pop()||"").split("/")||[]).pop()||"";return t.includes(".")?t.substring(t.lastIndexOf(".")+1):""}(e);if(!i)return k(t)?"audio/mp3":"video/mp4";switch(i){case"m3u8":case"m3u":return"application/x-mpegURL";case"mpd":return"application/dash+xml";case"mp4":return k(t)?"audio/mp4":"video/mp4";case"mp3":return"audio/mp3";case"webm":return k(t)?"audio/webm":"video/webm";case"ogg":return k(t)?"audio/ogg":"video/ogg";case"ogv":return"video/ogg";case"oga":return"audio/ogg";case"3gp":return"audio/3gpp";case"wav":return"audio/wav";case"aac":return"audio/aac";case"flac":return"audio/flac";default:return k(t)?"audio/mp3":"video/mp4"}}var ue,de,he,ve,pe,me,ye,ge,be=function(e,t,i,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,i):s?s.value=i:t.set(e,i),i},Ee=function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},we=function(){function e(t,i,n){r()(this,e),ue.set(this,void 0),de.set(this,void 0),he.set(this,void 0),ve.set(this,{button:{},global:{},media:{}}),pe.set(this,[]),me.set(this,""),ye.set(this,void 0),ge.set(this,void 0),be(this,ue,t,"f"),be(this,ye,i,"f"),be(this,ge,n,"f")}return l()(e,[{key:"create",value:function(){var e=this,t=Ee(this,ue,"f").getOptions(),i=t.labels,n=t.defaultLevel,s=t.detachMenus,a=null!==n?parseInt(n||"0",10):Ee(this,ue,"f").getMedia().level;be(this,me,"".concat(a),"f");var r=this._formatMenuItems(),o=r.length?r.find((function(t){return t.key===Ee(e,me,"f")})):null,l=o?o.label:(null==i?void 0:i.auto)||"",f=!1;be(this,de,document.createElement("button"),"f"),Ee(this,de,"f").className="op-controls__levels op-control__".concat(Ee(this,ye,"f")),Ee(this,de,"f").tabIndex=0,Ee(this,de,"f").title=(null==i?void 0:i.mediaLevels)||"",Ee(this,de,"f").setAttribute("aria-controls",Ee(this,ue,"f").id),Ee(this,de,"f").setAttribute("aria-label",(null==i?void 0:i.mediaLevels)||""),Ee(this,de,"f").setAttribute("data-active-level",Ee(this,me,"f")),Ee(this,de,"f").innerHTML="<span>".concat(l,"</span>");var c=function(){Ee(e,pe,"f").length?f||(Ee(e,ue,"f").getMedia().level=a,f=!0):(e._gatherLevels(),setTimeout((function(){Ee(e,ue,"f").getMedia().level=a;var t=C("controlschanged");Ee(e,ue,"f").getElement().dispatchEvent(t)}),0))};Ee(this,ve,"f").media.loadedmetadata=c.bind(this),Ee(this,ve,"f").media.manifestLoaded=c.bind(this),Ee(this,ve,"f").media.hlsManifestParsed=c.bind(this),s&&(this._buildMenu(),Ee(this,ve,"f").button.click=function(){if(s){for(var t=Ee(e,ue,"f").getContainer().querySelectorAll(".op-settings"),i=0,n=t.length;i<n;++i)t[i]!==Ee(e,he,"f")&&t[i].setAttribute("aria-hidden","true");"true"===Ee(e,he,"f").getAttribute("aria-hidden")?Ee(e,he,"f").setAttribute("aria-hidden","false"):Ee(e,he,"f").setAttribute("aria-hidden","true")}},Ee(this,ve,"f").button.mouseover=function(){if(!m&&!y){for(var t=Ee(e,ue,"f").getContainer().querySelectorAll(".op-settings"),i=0,n=t.length;i<n;++i)t[i]!==Ee(e,he,"f")&&t[i].setAttribute("aria-hidden","true");"true"===Ee(e,he,"f").getAttribute("aria-hidden")&&Ee(e,he,"f").setAttribute("aria-hidden","false")}},Ee(this,ve,"f").button.mouseout=function(){if(!m&&!y){for(var t=Ee(e,ue,"f").getContainer().querySelectorAll(".op-settings"),i=0,n=t.length;i<n;++i)t[i].setAttribute("aria-hidden","true");"false"===Ee(e,he,"f").getAttribute("aria-hidden")&&Ee(e,he,"f").setAttribute("aria-hidden","true")}},Ee(this,de,"f").addEventListener("click",Ee(this,ve,"f").button.click,w),Ee(this,de,"f").addEventListener("mouseover",Ee(this,ve,"f").button.mouseover,w),Ee(this,he,"f").addEventListener("mouseover",Ee(this,ve,"f").button.mouseover,w),Ee(this,he,"f").addEventListener("mouseout",Ee(this,ve,"f").button.mouseout,w),Ee(this,ue,"f").getElement().addEventListener("controlshidden",Ee(this,ve,"f").button.mouseout,w)),Ee(this,ve,"f").global.click=function(t){var i=t.target,n=Ee(e,ue,"f").getMedia().currentTime,a=Ee(e,ue,"f").getMedia().paused;if(i.closest("#".concat(Ee(e,ue,"f").id))&&i.classList.contains("op-levels__option")){var r=i.getAttribute("data-value"),o=r?r.replace("levels-",""):"-1";if(be(e,me,"".concat(o),"f"),s){Ee(e,de,"f").setAttribute("data-active-level","".concat(o)),Ee(e,de,"f").innerHTML="<span>".concat(M(i.innerText,!0),"</span>");for(var l=i.parentElement&&i.parentElement.parentElement?i.parentElement.parentElement.querySelectorAll(".op-settings__submenu-item"):[],f=0,c=l.length;f<c;++f)l[f].setAttribute("aria-checked","false");i.parentElement&&i.parentElement.setAttribute("aria-checked","true"),Ee(e,he,"f").setAttribute("aria-hidden","false")}Ee(e,ue,"f").getMedia().level=o,Ee(e,ue,"f").getMedia().currentTime=n,a||Ee(e,ue,"f").play();var u=C("levelchanged",{detail:{label:i.innerText.trim(),level:o}});Ee(e,ue,"f").getElement().dispatchEvent(u),t.preventDefault(),t.stopPropagation()}};var u=(null==h?void 0:h.connection)||(null==h?void 0:h.mozConnection)||(null==h?void 0:h.webkitConnection);Ee(this,ve,"f").global.connection=function(){var t=Ee(e,ue,"f").getMedia().current;if(!le(t)&&!oe(t)){var i=(null==u?void 0:u.effectiveType)||"",n=Ee(e,pe,"f").map((function(e){return Object.assign(Object.assign({},e),{resolution:parseInt(e.label.replace("p",""),10)})})),s=n.find((function(e){return e.resolution<360}));"4g"===i?s=n.find((function(e){return e.resolution>=720})):"3g"===i&&(s=n.find((function(e){return e.resolution>=360&&e.resolution<720}))),s&&(Ee(e,ue,"f").pause(),Ee(e,ue,"f").getMedia().level=s.id,Ee(e,ue,"f").play())}},Object.keys(Ee(this,ve,"f").media).forEach((function(t){Ee(e,ue,"f").getElement().addEventListener(t,Ee(e,ve,"f").media[t],w)})),document.addEventListener("click",Ee(this,ve,"f").global.click,w),u&&u.addEventListener("change",Ee(this,ve,"f").global.connection,w)}},{key:"destroy",value:function(){var e=this,t=Ee(this,ue,"f").getOptions().detachMenus,i=(null==h?void 0:h.connection)||(null==h?void 0:h.mozConnection)||(null==h?void 0:h.webkitConnection);Object.keys(Ee(this,ve,"f").media).forEach((function(t){Ee(e,ue,"f").getElement().removeEventListener(t,Ee(e,ve,"f").media[t])})),document.removeEventListener("click",Ee(this,ve,"f").global.click),i&&i.removeEventListener("change",Ee(this,ve,"f").global.connection),t&&(Ee(this,de,"f").removeEventListener("click",Ee(this,ve,"f").button.click),Ee(this,de,"f").remove(),Ee(this,de,"f").removeEventListener("mouseover",Ee(this,ve,"f").button.mouseover),Ee(this,he,"f").removeEventListener("mouseover",Ee(this,ve,"f").button.mouseover),Ee(this,he,"f").removeEventListener("mouseout",Ee(this,ve,"f").button.mouseout),Ee(this,ue,"f").getElement().removeEventListener("controlshidden",Ee(this,ve,"f").button.mouseout),Ee(this,he,"f").remove())}},{key:"addSettings",value:function(){var e=Ee(this,ue,"f").getOptions(),t=e.labels;if(e.detachMenus)return{};var i=this._formatMenuItems();return i.length>2?{className:"op-levels__option",default:Ee(this,me,"f")||"-1",key:"levels",name:null==t?void 0:t.levels,subitems:i}:{}}},{key:"_formatMenuItems",value:function(){for(var e=Ee(this,ue,"f").getOptions().labels,t=this._gatherLevels(),i=t.length,n=i?[{key:"-1",label:null==e?void 0:e.auto}]:[],s=function(e){var i=t[e];(n=n.filter((function(e){return e.key!==i.id}))).push({key:i.id,label:i.label})},a=0;a<i;a++)s(a);return n.reduce((function(e,t){return e.find((function(e){return e.label===t.label}))?e:e.concat([t])}),[]).sort((function(e,t){return parseInt((null==e?void 0:e.label)||"",10)>parseInt((null==t?void 0:t.label)||"",10)?1:-1}))}},{key:"_getResolutionsLabel",value:function(e){var t=Ee(this,ue,"f").getOptions().labels;return e>=4320?"8K":e>=2160?"4K":e>=1440?"1440p":e>=1080?"1080p":e>=720?"720p":e>=480?"480p":e>=360?"360p":e>=240?"240p":e>=144?"144p":(null==t?void 0:t.auto)||""}},{key:"_gatherLevels",value:function(){var e=this;return Ee(this,pe,"f").length||Ee(this,ue,"f").getMedia().levels.forEach((function(t){Ee(e,pe,"f").push(Object.assign(Object.assign({},t),{label:t.label||e._getResolutionsLabel(t.height)}))})),Ee(this,pe,"f")}},{key:"_buildMenu",value:function(){var e=this;if(Ee(this,ue,"f").getOptions().detachMenus){Ee(this,de,"f").classList.add("op-control--no-hover"),be(this,he,document.createElement("div"),"f"),Ee(this,he,"f").className="op-settings op-levels__menu",Ee(this,he,"f").setAttribute("aria-hidden","true");var t=this._formatMenuItems(),i='<div class="op-settings__menu" role="menu" id="menu-item-levels">\n                '.concat(t.map((function(t){return'\n                <div class="op-settings__submenu-item" tabindex="0" role="menuitemradio"\n                    aria-checked="'.concat(Ee(e,me,"f")===t.key?"true":"false",'">\n                    <div class="op-settings__submenu-label ').concat("op-levels__option",'" data-value="levels-').concat(t.key,'">').concat(t.label,"</div>\n                </div>")})).join(""),"\n            </div>");Ee(this,he,"f").innerHTML=i;var n=document.createElement("div");n.className="op-controls__container op-control__".concat(Ee(this,ye,"f")),n.appendChild(Ee(this,de,"f")),n.appendChild(Ee(this,he,"f")),Ee(this,ue,"f").getControls().getLayer(Ee(this,ge,"f")).appendChild(n)}}}]),e}();ue=new WeakMap,de=new WeakMap,he=new WeakMap,ve=new WeakMap,pe=new WeakMap,me=new WeakMap,ye=new WeakMap,ge=new WeakMap;const _e=we;var ke,Ae,Le,Me,Te,Ce=function(e,t,i,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,i):s?s.value=i:t.set(e,i),i},xe=function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},Se=function(){function e(t,i,n){r()(this,e),ke.set(this,void 0),Ae.set(this,void 0),Le.set(this,{controls:{},media:{}}),Me.set(this,void 0),Te.set(this,void 0),Ce(this,ke,t,"f"),Ce(this,Me,i,"f"),Ce(this,Te,n,"f"),this._enterSpaceKeyEvent=this._enterSpaceKeyEvent.bind(this)}return l()(e,[{key:"create",value:function(){var e,t=this,i=xe(this,ke,"f").getOptions().labels;Ce(this,Ae,document.createElement("button"),"f"),xe(this,Ae,"f").type="button",xe(this,Ae,"f").className="op-controls__playpause op-control__".concat(xe(this,Me,"f")),xe(this,Ae,"f").tabIndex=0,xe(this,Ae,"f").title=(null==i?void 0:i.play)||"",xe(this,Ae,"f").setAttribute("aria-controls",xe(this,ke,"f").id),xe(this,Ae,"f").setAttribute("aria-pressed","false"),xe(this,Ae,"f").setAttribute("aria-label",(null==i?void 0:i.play)||""),xe(this,ke,"f").getControls().getLayer(xe(this,Te,"f")).appendChild(xe(this,Ae,"f")),xe(this,Le,"f").button=function(e){xe(t,Ae,"f").setAttribute("aria-pressed","true");var i=xe(t,ke,"f").activeElement();i.paused||i.ended?(xe(t,ke,"f").getAd()&&(xe(t,ke,"f").getAd().playRequested=!0),i.play(),xe(t,Le,"f").media.play()):(i.pause(),xe(t,Le,"f").media.pause()),e.preventDefault(),e.stopPropagation()};var n=k(xe(this,ke,"f").getElement());xe(this,Le,"f").media.play=function(){var e;xe(t,ke,"f").activeElement().ended?(xe(t,ke,"f").isMedia()?xe(t,Ae,"f").classList.add("op-controls__playpause--replay"):xe(t,Ae,"f").classList.add("op-controls__playpause--pause"),xe(t,Ae,"f").title=(null==i?void 0:i.play)||"",xe(t,Ae,"f").setAttribute("aria-label",(null==i?void 0:i.play)||"")):(xe(t,Ae,"f").classList.remove("op-controls__playpause--replay"),xe(t,Ae,"f").classList.add("op-controls__playpause--pause"),xe(t,Ae,"f").title=(null==i?void 0:i.pause)||"",xe(t,Ae,"f").setAttribute("aria-label",(null==i?void 0:i.pause)||""),(null===(e=xe(t,ke,"f").getOptions())||void 0===e?void 0:e.pauseOthers)&&Object.keys(is.instances).forEach((function(e){e!==xe(t,ke,"f").id&&is.instances[e].activeElement().pause()})))},xe(this,Le,"f").media.loadedmetadata=function(){xe(t,Ae,"f").classList.contains("op-controls__playpause--pause")&&(xe(t,Ae,"f").classList.remove("op-controls__playpause--replay"),xe(t,Ae,"f").classList.remove("op-controls__playpause--pause"),xe(t,Ae,"f").title=(null==i?void 0:i.play)||"",xe(t,Ae,"f").setAttribute("aria-label",(null==i?void 0:i.play)||""))},xe(this,Le,"f").media.playing=function(){xe(t,Ae,"f").classList.contains("op-controls__playpause--pause")||(xe(t,Ae,"f").classList.remove("op-controls__playpause--replay"),xe(t,Ae,"f").classList.add("op-controls__playpause--pause"),xe(t,Ae,"f").title=(null==i?void 0:i.pause)||"",xe(t,Ae,"f").setAttribute("aria-label",(null==i?void 0:i.pause)||""))},xe(this,Le,"f").media.pause=function(){xe(t,Ae,"f").classList.remove("op-controls__playpause--pause"),xe(t,Ae,"f").title=(null==i?void 0:i.play)||"",xe(t,Ae,"f").setAttribute("aria-label",(null==i?void 0:i.play)||"")},xe(this,Le,"f").media.ended=function(){xe(t,ke,"f").activeElement().ended&&xe(t,ke,"f").isMedia()||xe(t,ke,"f").getElement().currentTime>=xe(t,ke,"f").getElement().duration||xe(t,ke,"f").getElement().currentTime<=0?(xe(t,Ae,"f").classList.add("op-controls__playpause--replay"),xe(t,Ae,"f").classList.remove("op-controls__playpause--pause")):(xe(t,Ae,"f").classList.remove("op-controls__playpause--replay"),xe(t,Ae,"f").classList.add("op-controls__playpause--pause")),xe(t,Ae,"f").title=(null==i?void 0:i.play)||"",xe(t,Ae,"f").setAttribute("aria-label",(null==i?void 0:i.play)||"")},xe(this,Le,"f").media.adsmediaended=function(){xe(t,Ae,"f").classList.remove("op-controls__playpause--replay"),xe(t,Ae,"f").classList.add("op-controls__playpause--pause"),xe(t,Ae,"f").title=(null==i?void 0:i.pause)||"",xe(t,Ae,"f").setAttribute("aria-label",(null==i?void 0:i.pause)||"")},xe(this,Le,"f").media.playererror=function(){n&&xe(t,ke,"f").activeElement().pause()};var s=xe(this,ke,"f").getElement();xe(this,Le,"f").controls.controlschanged=function(){if(!xe(t,ke,"f").activeElement().paused){var e=C("playing");s.dispatchEvent(e)}},Object.keys(xe(this,Le,"f").media).forEach((function(e){s.addEventListener(e,xe(t,Le,"f").media[e],w)})),(null===(e=xe(this,ke,"f").getOptions().media)||void 0===e?void 0:e.pauseOnClick)&&s.addEventListener("click",xe(this,Le,"f").button,w),xe(this,ke,"f").getControls().getContainer().addEventListener("controlschanged",xe(this,Le,"f").controls.controlschanged,w),xe(this,ke,"f").getContainer().addEventListener("keydown",this._enterSpaceKeyEvent,w),xe(this,Ae,"f").addEventListener("click",xe(this,Le,"f").button,w)}},{key:"destroy",value:function(){var e,t=this;Object.keys(xe(this,Le,"f").media).forEach((function(e){xe(t,ke,"f").getElement().removeEventListener(e,xe(t,Le,"f").media[e])})),(null===(e=xe(this,ke,"f").getOptions().media)||void 0===e?void 0:e.pauseOnClick)&&xe(this,ke,"f").getElement().removeEventListener("click",xe(this,Le,"f").button),xe(this,ke,"f").getControls().getContainer().removeEventListener("controlschanged",xe(this,Le,"f").controls.controlschanged),xe(this,ke,"f").getContainer().removeEventListener("keydown",this._enterSpaceKeyEvent),xe(this,Ae,"f").removeEventListener("click",xe(this,Le,"f").button),xe(this,Ae,"f").remove()}},{key:"_enterSpaceKeyEvent",value:function(e){var t,i=e.which||e.keyCode||0;!(null===(t=null===document||void 0===document?void 0:document.activeElement)||void 0===t?void 0:t.classList.contains("op-controls__playpause"))||13!==i&&32!==i||xe(this,Le,"f").button(e)}}]),e}();ke=new WeakMap,Ae=new WeakMap,Le=new WeakMap,Me=new WeakMap,Te=new WeakMap;const Oe=Se;var Pe,je,We,Re,Ne,Ie,De,Fe,Be,qe,He=function(e,t,i,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,i):s?s.value=i:t.set(e,i),i},Ke=function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},Ve=function(){function e(t,i,n){r()(this,e),Pe.set(this,void 0),je.set(this,void 0),We.set(this,void 0),Re.set(this,void 0),Ne.set(this,void 0),Ie.set(this,void 0),De.set(this,{container:{},controls:{},global:{},media:{},slider:{}}),Fe.set(this,!1),Be.set(this,void 0),qe.set(this,void 0),He(this,Pe,t,"f"),He(this,Be,i,"f"),He(this,qe,n,"f"),this._enterSpaceKeyEvent=this._enterSpaceKeyEvent.bind(this)}return l()(e,[{key:"create",value:function(){var e,t=this,i=Ke(this,Pe,"f").getOptions(),n=i.labels,s=i.progress;He(this,je,document.createElement("div"),"f"),Ke(this,je,"f").className="op-controls__progress op-control__".concat(Ke(this,Be,"f")),Ke(this,je,"f").tabIndex=0,Ke(this,je,"f").setAttribute("aria-label",(null==n?void 0:n.progressSlider)||""),Ke(this,je,"f").setAttribute("aria-valuemin","0"),He(this,We,document.createElement("input"),"f"),Ke(this,We,"f").type="range",Ke(this,We,"f").className="op-controls__progress--seek",Ke(this,We,"f").tabIndex=-1,Ke(this,We,"f").setAttribute("min","0"),Ke(this,We,"f").setAttribute("max","0"),Ke(this,We,"f").setAttribute("step","0.1"),Ke(this,We,"f").value="0",Ke(this,We,"f").setAttribute("aria-label",(null==n?void 0:n.progressRail)||""),Ke(this,We,"f").setAttribute("role","slider"),He(this,Re,document.createElement("progress"),"f"),Ke(this,Re,"f").className="op-controls__progress--buffer",Ke(this,Re,"f").setAttribute("max","100"),Ke(this,Re,"f").value=0,He(this,Ne,document.createElement("progress"),"f"),Ke(this,Ne,"f").className="op-controls__progress--played",Ke(this,Ne,"f").setAttribute("max","100"),Ke(this,Ne,"f").setAttribute("role","presentation"),Ke(this,Ne,"f").value=0,Ke(this,je,"f").appendChild(Ke(this,We,"f")),Ke(this,je,"f").appendChild(Ke(this,Ne,"f")),Ke(this,je,"f").appendChild(Ke(this,Re,"f")),m||y||(He(this,Ie,document.createElement("span"),"f"),Ke(this,Ie,"f").className="op-controls__tooltip",Ke(this,Ie,"f").tabIndex=-1,Ke(this,Ie,"f").innerHTML="00:00",Ke(this,je,"f").appendChild(Ke(this,Ie,"f")));var a=function(){var e;Ke(t,We,"f").classList.contains("error")&&Ke(t,We,"f").classList.remove("error");var i=Ke(t,Pe,"f").activeElement();if(i.duration===1/0||Ke(t,Pe,"f").getElement().getAttribute("op-live__enabled")||Ke(t,Pe,"f").getElement().getAttribute("op-dvr__enabled"))Ke(t,Pe,"f").getElement().getAttribute("op-dvr__enabled")?(Ke(t,We,"f").setAttribute("max","1"),Ke(t,We,"f").value="1",Ke(t,We,"f").style.backgroundSize="100% 100%",Ke(t,Ne,"f").value=1,Ke(t,je,"f").setAttribute("aria-valuemax","1"),Ke(t,je,"f").setAttribute("aria-hidden","false")):(null===(e=Ke(t,Pe,"f").getOptions().live)||void 0===e?void 0:e.showProgress)||Ke(t,je,"f").setAttribute("aria-hidden","true");else{Ke(t,We,"f").setAttribute("max","".concat(i.duration));var n=Ke(t,Pe,"f").isMedia()?i.currentTime:i.duration-i.currentTime;Ke(t,We,"f").value=n.toString(),Ke(t,je,"f").setAttribute("aria-valuemax",i.duration.toString())}},r=0,o=(null===(e=Ke(this,Pe,"f").getOptions().progress)||void 0===e?void 0:e.duration)||0,l=k(Ke(this,Pe,"f").getElement());Ke(this,De,"f").media.loadedmetadata=a.bind(this),Ke(this,De,"f").controls.controlschanged=a.bind(this),Ke(this,De,"f").media.progress=function(e){var i,n=e.target;if(n.duration===1/0||Ke(t,Pe,"f").getElement().getAttribute("op-live__enabled"))Ke(t,Pe,"f").getElement().getAttribute("op-dvr__enabled")||"false"!==Ke(t,je,"f").getAttribute("aria-hidden")||(null===(i=Ke(t,Pe,"f").getOptions().live)||void 0===i?void 0:i.showProgress)||Ke(t,je,"f").setAttribute("aria-hidden","true");else if(n.duration>0)for(var s=0,a=n.buffered.length;s<a;s++)if(n.buffered.start(n.buffered.length-1-s)<n.currentTime){Ke(t,Re,"f").value=n.buffered.end(n.buffered.length-1-s)/n.duration*100;break}},Ke(this,De,"f").media.waiting=function(){l&&!Ke(t,We,"f").classList.contains("loading")&&Ke(t,We,"f").classList.add("loading"),l&&Ke(t,We,"f").classList.contains("error")&&Ke(t,We,"f").classList.remove("error")},Ke(this,De,"f").media.playererror=function(){l&&!Ke(t,We,"f").classList.contains("error")&&Ke(t,We,"f").classList.add("error"),l&&Ke(t,We,"f").classList.contains("loading")&&Ke(t,We,"f").classList.remove("loading")},Ke(this,De,"f").media.pause=function(){var e=Ke(t,Pe,"f").activeElement();if(e.duration!==1/0&&!Ke(t,Pe,"f").getElement().getAttribute("op-live__enabled")){var i=e.currentTime;Ke(t,je,"f").setAttribute("aria-valuenow",i.toString()),Ke(t,je,"f").setAttribute("aria-valuetext",x(i))}},Ke(this,De,"f").media.play=function(){l&&Ke(t,We,"f").classList.contains("loading")&&Ke(t,We,"f").classList.remove("loading"),l&&Ke(t,We,"f").classList.contains("error")&&Ke(t,We,"f").classList.remove("error"),Ke(t,Pe,"f").activeElement().duration===1/0||Ke(t,Pe,"f").getElement().getAttribute("op-live__enabled")||(Ke(t,je,"f").removeAttribute("aria-valuenow"),Ke(t,je,"f").removeAttribute("aria-valuetext"))},Ke(this,De,"f").media.playing=function(){l&&Ke(t,We,"f").classList.contains("loading")&&Ke(t,We,"f").classList.remove("loading"),l&&Ke(t,We,"f").classList.contains("error")&&Ke(t,We,"f").classList.remove("error")},Ke(this,De,"f").media.timeupdate=function(){var e,i=Ke(t,Pe,"f").activeElement();if(i.duration===1/0||Ke(t,Pe,"f").getElement().getAttribute("op-live__enabled")&&!Ke(t,Pe,"f").getElement().getAttribute("op-dvr__enabled"))Ke(t,Pe,"f").getElement().getAttribute("op-dvr__enabled")||"false"!==Ke(t,je,"f").getAttribute("aria-hidden")||(null===(e=Ke(t,Pe,"f").getOptions().live)||void 0===e?void 0:e.showProgress)||Ke(t,je,"f").setAttribute("aria-hidden","true");else{Ke(t,We,"f").getAttribute("max")&&"0"!==Ke(t,We,"f").getAttribute("max")&&parseFloat(Ke(t,We,"f").getAttribute("max")||"-1")===i.duration||(Ke(t,We,"f").setAttribute("max","".concat(i.duration)),Ke(t,je,"f").setAttribute("aria-hidden","false"));var n=i.duration-i.currentTime+1>=100?100:i.duration-i.currentTime+1,s=Ke(t,Pe,"f").isMedia()?i.currentTime:n,a=parseFloat(Ke(t,We,"f").min),l=parseFloat(Ke(t,We,"f").max);Ke(t,We,"f").value=s.toString(),Ke(t,We,"f").style.backgroundSize="".concat(100*(s-a)/(l-a),"% 100%"),Ke(t,Ne,"f").value=i.duration<=0||Number.isNaN(i.duration)||!Number.isFinite(i.duration)?o:s/i.duration*100,Ke(t,Pe,"f").getElement().getAttribute("op-dvr__enabled")&&Math.floor(Ke(t,Ne,"f").value)>=99&&(r=i.currentTime,Ke(t,je,"f").setAttribute("aria-hidden","false"))}},Ke(this,De,"f").media.durationchange=function(){var e=Ke(t,Pe,"f").activeElement(),i=Ke(t,Pe,"f").isMedia()?e.currentTime:e.duration-e.currentTime;Ke(t,We,"f").setAttribute("max","".concat(e.duration)),Ke(t,je,"f").setAttribute("aria-valuemax",e.duration.toString()),Ke(t,Ne,"f").value=e.duration<=0||Number.isNaN(e.duration)||!Number.isFinite(e.duration)?o:i/e.duration*100},Ke(this,De,"f").media.ended=function(){Ke(t,We,"f").style.backgroundSize="0% 100%",Ke(t,We,"f").setAttribute("max","0"),Ke(t,Re,"f").value=0,Ke(t,Ne,"f").value=0};var f=function(e){var i=Ke(t,Pe,"f").activeElement(),n=e.target,a=parseFloat(n.value);if(Ke(t,We,"f").classList.contains("op-progress--pressed")||a<i.currentTime&&!(null==s?void 0:s.allowRewind)||a>i.currentTime&&!(null==s?void 0:s.allowSkip))Ke(t,We,"f").value=i.currentTime.toString();else{Ke(t,We,"f").classList.add(".op-progress--pressed");var l=parseFloat(n.min),f=parseFloat(n.max),c=parseFloat(n.value);Ke(t,We,"f").style.backgroundSize="".concat(100*(c-l)/(f-l),"% 100%"),Ke(t,Ne,"f").value=i.duration<=0||Number.isNaN(i.duration)||!Number.isFinite(i.duration)?o:c/i.duration*100,Ke(t,Pe,"f").getElement().getAttribute("op-dvr__enabled")?i.currentTime=Math.round(Ke(t,Ne,"f").value)>=99?r:c:i.currentTime=c,Ke(t,We,"f").classList.remove(".op-progress--pressed")}},c=function(){var e=Ke(t,Pe,"f").activeElement();!0===Ke(t,Fe,"f")&&Ke(t,Pe,"f").isMedia()&&e.paused&&(e.play(),He(t,Fe,!1,"f"))};Ke(this,De,"f").slider.input=f.bind(this),Ke(this,De,"f").slider.change=f.bind(this),Ke(this,De,"f").slider.mousedown=function(e){var i=Ke(t,Pe,"f").activeElement(),n=e.which||e.keyCode||0,a=Ke(t,We,"f"),r=Math.round(Number(a.value)),o=Math.round(i.currentTime);!(r<o&&(null==s?void 0:s.allowRewind)||r>=o&&(null==s?void 0:s.allowSkip))||1!==n&&0!==n||!Ke(t,Pe,"f").isMedia()||i.paused||(i.pause(),He(t,Fe,!0,"f"))}.bind(this),Ke(this,De,"f").slider.mouseup=c.bind(this),Ke(this,De,"f").slider.touchstart=function(e){var i,n=Ke(t,Pe,"f").activeElement();if(n.duration!==1/0){var a=(((null===(i=e.changedTouches[0])||void 0===i?void 0:i.pageX)||0)-L(Ke(t,je,"f")).left)/Ke(t,je,"f").offsetWidth*n.duration;(a<n.currentTime&&(null==s?void 0:s.allowRewind)||a>n.currentTime&&(null==s?void 0:s.allowSkip))&&(Ke(t,We,"f").value=a.toString(),f(e),n.paused||(n.pause(),He(t,Fe,!0,"f")))}}.bind(this),Ke(this,De,"f").slider.touchend=c.bind(this),m||y||(Ke(this,De,"f").container.mousemove=function(e){var i=Ke(t,Pe,"f").activeElement();if(i.duration!==1/0&&!Ke(t,Pe,"f").isAd()){var n=e.pageX,s=n-L(Ke(t,je,"f")).left,a=Ke(t,Ie,"f").offsetWidth/2,r=s/Ke(t,je,"f").offsetWidth,o=r*i.duration,l=Ke(t,Pe,"f").getContainer(),f=l.offsetWidth-Ke(t,Ie,"f").offsetWidth;s<=0||n-L(l).left<=a?s=0:n-L(l).left>=f?s=f-L(Ke(t,We,"f")).left-10:s-=a,r>=0&&r<=1?Ke(t,Ie,"f").classList.add("op-controls__tooltip--visible"):Ke(t,Ie,"f").classList.remove("op-controls__tooltip--visible"),Ke(t,Ie,"f").style.left="".concat(s,"px"),Ke(t,Ie,"f").innerHTML=Number.isNaN(o)?"00:00":x(o)}},Ke(this,De,"f").global.mousemove=function(e){e.target.closest(".op-controls__progress")&&!Ke(t,Pe,"f").isAd()||Ke(t,Ie,"f").classList.remove("op-controls__tooltip--visible")}),Object.keys(Ke(this,De,"f").media).forEach((function(e){Ke(t,Pe,"f").getElement().addEventListener(e,Ke(t,De,"f").media[e],w)})),Object.keys(Ke(this,De,"f").slider).forEach((function(e){Ke(t,We,"f").addEventListener(e,Ke(t,De,"f").slider[e],w)})),Ke(this,je,"f").addEventListener("keydown",Ke(this,Pe,"f").getEvents().keydown,w),Ke(this,je,"f").addEventListener("mousemove",Ke(this,De,"f").container.mousemove,w),document.addEventListener("mousemove",Ke(this,De,"f").global.mousemove,w),Ke(this,Pe,"f").getContainer().addEventListener("keydown",this._enterSpaceKeyEvent,w),Ke(this,Pe,"f").getControls().getContainer().addEventListener("controlschanged",Ke(this,De,"f").controls.controlschanged,w),Ke(this,Pe,"f").getControls().getLayer(Ke(this,qe,"f")).appendChild(Ke(this,je,"f"))}},{key:"destroy",value:function(){var e=this;Object.keys(Ke(this,De,"f")).forEach((function(t){Ke(e,Pe,"f").getElement().removeEventListener(t,Ke(e,De,"f")[t])})),Object.keys(Ke(this,De,"f").slider).forEach((function(t){Ke(e,We,"f").removeEventListener(t,Ke(e,De,"f").slider[t])})),Ke(this,je,"f").removeEventListener("keydown",Ke(this,Pe,"f").getEvents().keydown),Ke(this,je,"f").removeEventListener("mousemove",Ke(this,De,"f").container.mousemove),document.removeEventListener("mousemove",Ke(this,De,"f").global.mousemove),Ke(this,Pe,"f").getContainer().removeEventListener("keydown",this._enterSpaceKeyEvent),Ke(this,Pe,"f").getControls().getContainer().removeEventListener("controlschanged",Ke(this,De,"f").controls.controlschanged),Ke(this,Re,"f").remove(),Ke(this,Ne,"f").remove(),Ke(this,We,"f").remove(),m||y||Ke(this,Ie,"f").remove(),Ke(this,je,"f").remove()}},{key:"_enterSpaceKeyEvent",value:function(e){var t=Ke(this,Pe,"f").activeElement(),i=Ke(this,Pe,"f").isAd(),n=e.which||e.keyCode||0;if(!i&&n>=48&&n<=57&&t.duration!==1/0){for(var s=0,a=48;a<=57;a++)a<n&&s++;t.currentTime=t.duration*(.1*s),e.preventDefault(),e.stopPropagation()}}}]),e}();Pe=new WeakMap,je=new WeakMap,We=new WeakMap,Re=new WeakMap,Ne=new WeakMap,Ie=new WeakMap,De=new WeakMap,Fe=new WeakMap,Be=new WeakMap,qe=new WeakMap;const ze=Ve;var Ue,Ge,Qe,$e,Je,Ye,Xe,Ze,et=function(e,t,i,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,i):s?s.value=i:t.set(e,i),i},tt=function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},it=function(){function e(t,i,n){r()(this,e),Ue.set(this,void 0),Ge.set(this,{}),Qe.set(this,void 0),$e.set(this,void 0),Je.set(this,{global:{},media:{}}),Ye.set(this,""),Xe.set(this,void 0),Ze.set(this,void 0),et(this,Ue,t,"f"),et(this,Xe,i,"f"),et(this,Ze,n,"f"),this._enterSpaceKeyEvent=this._enterSpaceKeyEvent.bind(this)}return l()(e,[{key:"create",value:function(){var e=this,t=tt(this,Ue,"f").getOptions().labels;et(this,Qe,document.createElement("button"),"f"),tt(this,Qe,"f").className="op-controls__settings op-control__".concat(tt(this,Xe,"f")),tt(this,Qe,"f").tabIndex=0,tt(this,Qe,"f").title=(null==t?void 0:t.settings)||"",tt(this,Qe,"f").setAttribute("aria-controls",tt(this,Ue,"f").id),tt(this,Qe,"f").setAttribute("aria-pressed","false"),tt(this,Qe,"f").setAttribute("aria-label",(null==t?void 0:t.settings)||""),et(this,$e,document.createElement("div"),"f"),tt(this,$e,"f").className="op-settings",tt(this,$e,"f").setAttribute("aria-hidden","true"),tt(this,$e,"f").innerHTML='<div class="op-settings__menu" role="menu"></div>',this.clickEvent=function(){tt(e,Qe,"f").setAttribute("aria-pressed","true");for(var t=tt(e,Ue,"f").getContainer().querySelectorAll(".op-settings"),i=0,n=t.length;i<n;++i)t[i]!==tt(e,$e,"f")&&t[i].setAttribute("aria-hidden","true");tt(e,$e,"f").setAttribute("aria-hidden","false"===tt(e,$e,"f").getAttribute("aria-hidden")?"true":"false")},this.hideEvent=function(){var t;t&&"undefined"!=typeof window&&window.cancelAnimationFrame(t),"undefined"!=typeof window&&(t=window.requestAnimationFrame((function(){tt(e,$e,"f").innerHTML=tt(e,Ye,"f"),tt(e,$e,"f").setAttribute("aria-hidden","true")})))},this.removeEvent=function(t){var i=t.detail,n=i.id,s=i.type;e.removeItem(n,s)},this.clickEvent=this.clickEvent.bind(this),this.hideEvent=this.hideEvent.bind(this),this.removeEvent=this.removeEvent.bind(this),tt(this,Je,"f").media.controlshidden=this.hideEvent.bind(this),tt(this,Je,"f").media.settingremoved=this.removeEvent.bind(this),tt(this,Je,"f").media.play=this.hideEvent.bind(this),tt(this,Je,"f").media.pause=this.hideEvent.bind(this),tt(this,Ue,"f").getContainer().addEventListener("keydown",this._enterSpaceKeyEvent,w),tt(this,Je,"f").global.click=function(t){var i=t.target;if((null==i?void 0:i.closest("#".concat(tt(e,Ue,"f").id)))&&(null==i?void 0:i.classList.contains("op-speed__option"))){var n=(null==i?void 0:i.getAttribute("data-value"))||"";tt(e,Ue,"f").getMedia().playbackRate=parseFloat(n.replace("speed-",""))}},tt(this,Je,"f").global.resize=this.hideEvent.bind(this),tt(this,Qe,"f").addEventListener("click",this.clickEvent,w),Object.keys(tt(this,Je,"f")).forEach((function(t){tt(e,Ue,"f").getElement().addEventListener(t,tt(e,Je,"f").media[t],w)})),document.addEventListener("click",tt(this,Je,"f").global.click,w),document.addEventListener("keydown",tt(this,Je,"f").global.click,w),"undefined"!=typeof window&&window.addEventListener("resize",tt(this,Je,"f").global.resize,w),tt(this,Ue,"f").getControls().getLayer(tt(this,Ze,"f")).appendChild(tt(this,Qe,"f")),tt(this,Ue,"f").getContainer().appendChild(tt(this,$e,"f"))}},{key:"destroy",value:function(){var e=this;tt(this,Qe,"f").removeEventListener("click",this.clickEvent),Object.keys(tt(this,Je,"f")).forEach((function(t){tt(e,Ue,"f").getElement().removeEventListener(t,tt(e,Je,"f").media[t])})),document.removeEventListener("click",tt(this,Je,"f").global.click),document.removeEventListener("keydown",tt(this,Je,"f").global.click),"undefined"!=typeof window&&window.removeEventListener("resize",tt(this,Je,"f").global.resize),void 0!==tt(this,Je,"f").global["settings.submenu"]&&(document.removeEventListener("click",tt(this,Je,"f").global["settings.submenu"]),tt(this,Ue,"f").getElement().removeEventListener("controlshidden",this.hideEvent)),tt(this,Ue,"f").getContainer().removeEventListener("keydown",this._enterSpaceKeyEvent),tt(this,$e,"f").remove(),tt(this,Qe,"f").remove()}},{key:"addSettings",value:function(){var e=tt(this,Ue,"f").getMedia(),t=tt(this,Ue,"f").getOptions().labels,i=1;return tt(this,Ue,"f")&&e&&(i=e.defaultPlaybackRate!==e.playbackRate?e.playbackRate:e.defaultPlaybackRate),{className:"op-speed__option",default:i.toString(),key:"speed",name:(null==t?void 0:t.speed)||"",subitems:[{key:"0.25",label:"0.25"},{key:"0.5",label:"0.5"},{key:"0.75",label:"0.75"},{key:"1",label:(null==t?void 0:t.speedNormal)||""},{key:"1.25",label:"1.25"},{key:"1.5",label:"1.5"},{key:"2",label:"2"}]}}},{key:"addItem",value:function(e,t,i,n,s){var a=this,r="".concat(t,"-").concat(M(i,!0)),o=document.createElement("div");o.className="op-settings__menu-item",o.tabIndex=0,o.setAttribute("role","menuitemradio"),o.innerHTML='<div class="op-settings__menu-label" data-value="'.concat(r,'">').concat(e,"</div>");var l=n?n.find((function(e){return e.key===i})):null;l&&(o.innerHTML+='<div class="op-settings__menu-content" tabindex="0">'.concat(l.label,"</div>"));var f=tt(this,$e,"f").querySelector(".op-settings__menu");if(f&&f.appendChild(o),et(this,Ye,tt(this,$e,"f").innerHTML,"f"),n){var c='\n                <div class="op-settings__header">\n                    <button type="button" class="op-settings__back" tabindex="0">'.concat(e,'</button>\n                </div>\n                <div class="op-settings__menu" role="menu" id="menu-item-').concat(t,'">\n                    ').concat(n.map((function(e){return'\n                    <div class="op-settings__submenu-item" role="menuitemradio" aria-checked="'.concat(i===e.key?"true":"false",'">\n                        <div class="op-settings__submenu-label ').concat(s||"",'" tabindex="0" data-value="').concat(t,"-").concat(e.key,'">\n                            ').concat(e.label,"\n                        </div>\n                    </div>")})).join(""),"\n                </div>");tt(this,Ge,"f")[t]=c}tt(this,Je,"f").global["settings.submenu"]=function(e){var n=e.target;if(n.closest("#".concat(tt(a,Ue,"f").id))){if(n.classList.contains("op-settings__back"))tt(a,$e,"f").classList.add("op-settings--sliding"),setTimeout((function(){tt(a,$e,"f").innerHTML=tt(a,Ye,"f"),tt(a,$e,"f").classList.remove("op-settings--sliding")}),100);else if(n.classList.contains("op-settings__menu-content")){var s=n.parentElement?n.parentElement.querySelector(".op-settings__menu-label"):null,r=s?s.getAttribute("data-value"):null,o=r?r.split("-"):[];if(o.length>0){o.pop();var l=o.join("-").replace(/^\-|\-$/,"");void 0!==tt(a,Ge,"f")[l]&&(tt(a,$e,"f").classList.add("op-settings--sliding"),setTimeout((function(){tt(a,$e,"f").innerHTML=tt(a,Ge,"f")[l],tt(a,$e,"f").classList.remove("op-settings--sliding")}),100))}}else if(n.classList.contains("op-settings__submenu-label")){var f=n.getAttribute("data-value"),c=f?f.replace("".concat(t,"-"),""):"",u=n.innerText,d=tt(a,$e,"f").querySelector("#menu-item-".concat(t," .op-settings__submenu-item[aria-checked=true]"));d&&(d.setAttribute("aria-checked","false"),n.parentElement&&n.parentElement.setAttribute("aria-checked","true"),tt(a,Ge,"f")[t]=tt(a,$e,"f").innerHTML,tt(a,$e,"f").classList.add("op-settings--sliding"),setTimeout((function(){tt(a,$e,"f").innerHTML=tt(a,Ye,"f");var e=tt(a,$e,"f").querySelector('.op-settings__menu-label[data-value="'.concat(t,"-").concat(i,'"]'));e&&(e.setAttribute("data-value","".concat(f)),e.nextElementSibling&&(e.nextElementSibling.textContent=u)),i=c,et(a,Ye,tt(a,$e,"f").innerHTML,"f"),tt(a,$e,"f").classList.remove("op-settings--sliding")}),100))}}else a.hideEvent()},document.addEventListener("click",tt(this,Je,"f").global["settings.submenu"],w),tt(this,Ue,"f").getElement().addEventListener("controlshidden",this.hideEvent,w)}},{key:"removeItem",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,n=tt(this,Ue,"f").getElement().querySelector(".op-settings__submenu-label[data-value=".concat(t,"-").concat(e,"]"));if(n&&n.remove(),tt(this,Ue,"f").getElement().querySelectorAll(".op-settings__submenu-label[data-value^=".concat(t,"]")).length<i){delete tt(this,Ge,"f")[t];var s=tt(this,Ue,"f").getElement().querySelector(".op-settings__menu-label[data-value^=".concat(t,"]")),a=s?s.closest(".op-settings__menu-item"):null;a&&a.remove()}}},{key:"_enterSpaceKeyEvent",value:function(e){var t,i,n,s,a=e.which||e.keyCode||0,r=tt(this,Ue,"f").isAd(),o=null===(t=null===document||void 0===document?void 0:document.activeElement)||void 0===t?void 0:t.classList.contains("op-controls__settings"),l=(null===(i=null===document||void 0===document?void 0:document.activeElement)||void 0===i?void 0:i.classList.contains("op-settings__menu-content"))||(null===(n=null===document||void 0===document?void 0:document.activeElement)||void 0===n?void 0:n.classList.contains("op-settings__back"))||(null===(s=null===document||void 0===document?void 0:document.activeElement)||void 0===s?void 0:s.classList.contains("op-settings__submenu-label"));r||(!o||13!==a&&32!==a?!l||13!==a&&32!==a||(tt(this,Je,"f").global["settings.submenu"](e),e.preventDefault(),e.stopPropagation()):(this.clickEvent(),e.preventDefault(),e.stopPropagation()))}}]),e}();Ue=new WeakMap,Ge=new WeakMap,Qe=new WeakMap,$e=new WeakMap,Je=new WeakMap,Ye=new WeakMap,Xe=new WeakMap,Ze=new WeakMap;const nt=it;var st,at,rt,ot,lt,ft,ct,ut,dt=function(e,t,i,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,i):s?s.value=i:t.set(e,i),i},ht=function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},vt=function(){function e(t,i,n){r()(this,e),st.set(this,void 0),at.set(this,void 0),rt.set(this,void 0),ot.set(this,void 0),lt.set(this,void 0),ft.set(this,{controls:{},media:{}}),ct.set(this,void 0),ut.set(this,void 0),dt(this,st,t,"f"),dt(this,ct,i,"f"),dt(this,ut,n,"f")}return l()(e,[{key:"create",value:function(){var e=this,t=ht(this,st,"f").getOptions(),i=t.labels,n=t.progress;dt(this,at,document.createElement("time"),"f"),ht(this,at,"f").className="op-controls__current",ht(this,at,"f").setAttribute("role","timer"),ht(this,at,"f").setAttribute("aria-live","off"),ht(this,at,"f").setAttribute("aria-hidden","false"),ht(this,at,"f").innerText="0:00";var s=(null==n?void 0:n.showCurrentTimeOnly)||!1;s||(dt(this,rt,document.createElement("span"),"f"),ht(this,rt,"f").className="op-controls__time-delimiter",ht(this,rt,"f").setAttribute("aria-hidden","false"),ht(this,rt,"f").innerText="/",dt(this,ot,document.createElement("time"),"f"),ht(this,ot,"f").className="op-controls__duration",ht(this,ot,"f").setAttribute("aria-hidden","false"),ht(this,ot,"f").innerText=x((null==n?void 0:n.duration)||0));var a=ht(this,st,"f").getControls().getLayer(ht(this,ut,"f"));dt(this,lt,document.createElement("span"),"f"),ht(this,lt,"f").className="op-controls-time op-control__".concat(ht(this,ct,"f")),ht(this,lt,"f").appendChild(ht(this,at,"f")),s||(ht(this,lt,"f").appendChild(ht(this,rt,"f")),ht(this,lt,"f").appendChild(ht(this,ot,"f"))),a.appendChild(ht(this,lt,"f"));var r=function(){var t,i=ht(e,st,"f").activeElement();if(i.duration===1/0||ht(e,st,"f").getElement().getAttribute("op-live__enabled"))s||(ht(e,ot,"f").setAttribute("aria-hidden","true"),ht(e,rt,"f").setAttribute("aria-hidden","true"));else{if(!s){var n=Number.isNaN(i.duration)?(null===(t=ht(e,st,"f").getOptions().progress)||void 0===t?void 0:t.duration)||0:i.duration;ht(e,ot,"f").innerText=x(n)}ht(e,at,"f").innerText=x(i.currentTime)}};ht(this,ft,"f").media.loadedmetadata=r.bind(this),ht(this,ft,"f").controls.controlschanged=r.bind(this);var o=(ht(this,st,"f").getOptions().live||{}).showLabel;ht(this,ft,"f").media.timeupdate=function(){var t=ht(e,st,"f").activeElement();if(t.duration===1/0||ht(e,st,"f").getElement().getAttribute("op-live__enabled")||ht(e,st,"f").getElement().getAttribute("op-dvr__enabled"))ht(e,st,"f").getElement().getAttribute("op-dvr__enabled")?(s||(ht(e,ot,"f").setAttribute("aria-hidden","true"),ht(e,rt,"f").setAttribute("aria-hidden","true")),ht(e,at,"f").innerText=x(t.currentTime)):s||!ht(e,st,"f").getElement().getAttribute("op-dvr__enabled")&&"false"===ht(e,ot,"f").getAttribute("aria-hidden")?(s||(ht(e,ot,"f").setAttribute("aria-hidden","true"),ht(e,rt,"f").setAttribute("aria-hidden","true")),ht(e,at,"f").innerText=o?(null==i?void 0:i.live)||"":x(t.currentTime)):ht(e,at,"f").innerText=o?(null==i?void 0:i.live)||"":x(t.currentTime);else{var n=x(t.duration);s||Number.isNaN(t.duration)||n===ht(e,ot,"f").innerText?(s||n!==ht(e,ot,"f").innerText)&&(ht(e,at,"f").innerText=o?(null==i?void 0:i.live)||"":x(t.currentTime)):(ht(e,ot,"f").innerText=n,ht(e,ot,"f").setAttribute("aria-hidden","false"),ht(e,rt,"f").setAttribute("aria-hidden","false")),ht(e,at,"f").innerText=x(t.currentTime)}},ht(this,ft,"f").media.ended=function(){var t,i=ht(e,st,"f").activeElement(),n=Number.isNaN(i.duration)?(null===(t=ht(e,st,"f").getOptions().progress)||void 0===t?void 0:t.duration)||0:i.duration;!s&&ht(e,st,"f").isMedia()&&(ht(e,ot,"f").innerText=x(n))},Object.keys(ht(this,ft,"f").media).forEach((function(t){ht(e,st,"f").getElement().addEventListener(t,ht(e,ft,"f").media[t],w)})),ht(this,st,"f").getControls().getContainer().addEventListener("controlschanged",ht(this,ft,"f").controls.controlschanged,w)}},{key:"destroy",value:function(){var e=this;Object.keys(ht(this,ft,"f").media).forEach((function(t){ht(e,st,"f").getElement().removeEventListener(t,ht(e,ft,"f").media[t])})),ht(this,st,"f").getControls().getContainer().removeEventListener("controlschanged",ht(this,ft,"f").controls.controlschanged),ht(this,at,"f").remove(),(ht(this,st,"f").getOptions().progress||{}).showCurrentTimeOnly||(ht(this,rt,"f").remove(),ht(this,ot,"f").remove()),ht(this,lt,"f").remove()}}]),e}();st=new WeakMap,at=new WeakMap,rt=new WeakMap,ot=new WeakMap,lt=new WeakMap,ft=new WeakMap,ct=new WeakMap,ut=new WeakMap;const pt=vt;var mt,yt,gt,bt,Et,wt,_t,kt,At,Lt=function(e,t,i,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,i):s?s.value=i:t.set(e,i),i},Mt=function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},Tt=function(){function e(t,i,n){r()(this,e),mt.set(this,void 0),yt.set(this,void 0),gt.set(this,void 0),bt.set(this,void 0),Et.set(this,void 0),wt.set(this,{button:{},media:{},slider:{}}),_t.set(this,void 0),kt.set(this,void 0),At.set(this,void 0),Lt(this,mt,t,"f"),Lt(this,_t,Mt(this,mt,"f").getMedia().volume,"f"),Lt(this,kt,i,"f"),Lt(this,At,n,"f"),this._enterSpaceKeyEvent=this._enterSpaceKeyEvent.bind(this)}return l()(e,[{key:"create",value:function(){var e=this,t=Mt(this,mt,"f").getOptions().labels;Lt(this,gt,document.createElement("div"),"f"),Mt(this,gt,"f").className="op-controls__volume op-control__".concat(Mt(this,kt,"f")),Mt(this,gt,"f").tabIndex=0,Mt(this,gt,"f").setAttribute("aria-valuemin","0"),Mt(this,gt,"f").setAttribute("aria-valuemax","100"),Mt(this,gt,"f").setAttribute("aria-valuenow","".concat(Mt(this,_t,"f"))),Mt(this,gt,"f").setAttribute("aria-valuetext","".concat((null==t?void 0:t.volume)||"",": ").concat(Mt(this,_t,"f"))),Mt(this,gt,"f").setAttribute("aria-orientation","vertical"),Mt(this,gt,"f").setAttribute("aria-label",(null==t?void 0:t.volumeSlider)||""),Lt(this,Et,document.createElement("input"),"f"),Mt(this,Et,"f").type="range",Mt(this,Et,"f").className="op-controls__volume--input",Mt(this,Et,"f").tabIndex=-1,Mt(this,Et,"f").value=Mt(this,mt,"f").getMedia().volume.toString(),Mt(this,Et,"f").setAttribute("min","0"),Mt(this,Et,"f").setAttribute("max","1"),Mt(this,Et,"f").setAttribute("step","0.1"),Mt(this,Et,"f").setAttribute("aria-label",(null==t?void 0:t.volumeControl)||""),Lt(this,bt,document.createElement("progress"),"f"),Mt(this,bt,"f").className="op-controls__volume--display",Mt(this,bt,"f").setAttribute("max","10"),Mt(this,bt,"f").setAttribute("role","presentation"),Mt(this,bt,"f").value=10*Mt(this,mt,"f").getMedia().volume,Mt(this,gt,"f").appendChild(Mt(this,Et,"f")),Mt(this,gt,"f").appendChild(Mt(this,bt,"f")),Lt(this,yt,document.createElement("button"),"f"),Mt(this,yt,"f").type="button",Mt(this,yt,"f").className="op-controls__mute op-control__".concat(Mt(this,kt,"f")),Mt(this,yt,"f").tabIndex=0,Mt(this,yt,"f").title=(null==t?void 0:t.mute)||"",Mt(this,yt,"f").setAttribute("aria-controls",Mt(this,mt,"f").id),Mt(this,yt,"f").setAttribute("aria-pressed","false"),Mt(this,yt,"f").setAttribute("aria-label",(null==t?void 0:t.mute)||"");var i=function(t){var i=Mt(e,mt,"f").activeElement(),n=parseFloat(t.target.value);i.volume=n,i.muted=0===i.volume,Lt(e,_t,n,"f");var s=Mt(e,mt,"f").getContainer().querySelector(".op-player__unmute");!i.muted&&s&&s.remove();var a=C("volumechange");Mt(e,mt,"f").getElement().dispatchEvent(a)};if(Mt(this,wt,"f").media.volumechange=function(){var i,n,s,a=Mt(e,mt,"f").activeElement();n=1*(i=a).volume,s=Math.floor(100*n),Mt(e,Et,"f").value="".concat(i.volume),Mt(e,bt,"f").value=10*n,Mt(e,gt,"f").setAttribute("aria-valuenow","".concat(s)),Mt(e,gt,"f").setAttribute("aria-valuetext","".concat(null==t?void 0:t.volume,": ").concat(s)),function(t){var i=t.volume;i<=.5&&i>0?(Mt(e,yt,"f").classList.remove("op-controls__mute--muted"),Mt(e,yt,"f").classList.add("op-controls__mute--half")):0===i?(Mt(e,yt,"f").classList.add("op-controls__mute--muted"),Mt(e,yt,"f").classList.remove("op-controls__mute--half")):(Mt(e,yt,"f").classList.remove("op-controls__mute--muted"),Mt(e,yt,"f").classList.remove("op-controls__mute--half"))}(a)},Mt(this,wt,"f").media.loadedmetadata=function(){var t=Mt(e,mt,"f").activeElement();t.muted&&(t.volume=0);var i=C("volumechange");Mt(e,mt,"f").getElement().dispatchEvent(i)},Mt(this,wt,"f").slider.input=i.bind(this),Mt(this,wt,"f").slider.change=i.bind(this),Mt(this,wt,"f").button.click=function(){Mt(e,yt,"f").setAttribute("aria-pressed","true");var i=Mt(e,mt,"f").activeElement();i.muted=!i.muted,i.muted?(i.volume=0,Mt(e,yt,"f").title=(null==t?void 0:t.unmute)||"",Mt(e,yt,"f").setAttribute("aria-label",(null==t?void 0:t.unmute)||"")):(i.volume=Mt(e,_t,"f"),Mt(e,yt,"f").title=(null==t?void 0:t.mute)||"",Mt(e,yt,"f").setAttribute("aria-label",(null==t?void 0:t.mute)||""));var n=C("volumechange");Mt(e,mt,"f").getElement().dispatchEvent(n)},Mt(this,yt,"f").addEventListener("click",Mt(this,wt,"f").button.click,w),Object.keys(Mt(this,wt,"f").media).forEach((function(t){Mt(e,mt,"f").getElement().addEventListener(t,Mt(e,wt,"f").media[t],w)})),Object.keys(Mt(this,wt,"f").slider).forEach((function(t){Mt(e,Et,"f").addEventListener(t,Mt(e,wt,"f").slider[t],w)})),Mt(this,mt,"f").getContainer().addEventListener("keydown",this._enterSpaceKeyEvent,w),!y&&!m||!Mt(this,mt,"f").getOptions().useDeviceVolume){var n=Mt(this,mt,"f").getControls().getLayer(Mt(this,At,"f"));n.appendChild(Mt(this,yt,"f")),n.appendChild(Mt(this,gt,"f"))}}},{key:"destroy",value:function(){var e=this;Mt(this,yt,"f").removeEventListener("click",Mt(this,wt,"f").button.click),Object.keys(Mt(this,wt,"f").media).forEach((function(t){Mt(e,mt,"f").getElement().removeEventListener(t,Mt(e,wt,"f").media[t])})),Object.keys(Mt(this,wt,"f").slider).forEach((function(t){Mt(e,Et,"f").removeEventListener(t,Mt(e,wt,"f").slider[t])})),Mt(this,mt,"f").getContainer().removeEventListener("keydown",this._enterSpaceKeyEvent),Mt(this,Et,"f").remove(),Mt(this,bt,"f").remove(),Mt(this,gt,"f").remove()}},{key:"_enterSpaceKeyEvent",value:function(e){var t,i=e.which||e.keyCode||0,n=Mt(this,mt,"f").activeElement();!(null===(t=null===document||void 0===document?void 0:document.activeElement)||void 0===t?void 0:t.classList.contains("op-controls__mute"))||13!==i&&32!==i||(n.muted=!n.muted,n.volume=n.muted?0:Mt(this,_t,"f"),Mt(this,wt,"f").button.click(),e.preventDefault(),e.stopPropagation())}}]),e}();mt=new WeakMap,yt=new WeakMap,gt=new WeakMap,bt=new WeakMap,Et=new WeakMap,wt=new WeakMap,_t=new WeakMap,kt=new WeakMap,At=new WeakMap;const Ct=Tt;var xt,St,Ot,Pt,jt,Wt,Rt=function(e,t,i,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,i):s?s.value=i:t.set(e,i),i},Nt=function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},It=function(){function e(t){r()(this,e),this.events={media:{},mouse:{}},xt.set(this,void 0),St.set(this,0),Ot.set(this,void 0),Pt.set(this,void 0),jt.set(this,void 0),Wt.set(this,{Captions:G,Fullscreen:re,Levels:_e,Play:Oe,Progress:ze,Settings:nt,Time:pt,Volume:Ct}),Rt(this,Pt,t,"f"),this._setElements()}return l()(e,[{key:"create",value:function(){var e=this;Nt(this,Pt,"f").getElement().controls=!1;var t=_(Nt(this,Pt,"f").getElement());if(this._createControlsLayer(),this._buildElements(),this.events.controlschanged=function(){e.destroy(),e._setElements(),e.create()},this.events.ended=function(){Nt(e,Pt,"f").getContainer().classList.remove("op-controls--hidden")},Nt(this,Pt,"f").getElement().addEventListener("controlschanged",this.events.controlschanged,w),Nt(this,Pt,"f").getElement().addEventListener("ended",this.events.ended,w),!(Nt(this,Pt,"f").getOptions().controls||{}).alwaysVisible){var i=function(){t&&(Nt(e,Pt,"f").getContainer().classList.remove("op-controls--hidden"),e._stopControlTimer())};this.events.mouse.mouseenter=function(){t&&!Nt(e,Pt,"f").activeElement().paused&&(e._stopControlTimer(),Nt(e,Pt,"f").activeElement().currentTime?(Nt(e,Pt,"f").playBtn.setAttribute("aria-hidden",Nt(e,Pt,"f").isMedia()?"false":"true"),Nt(e,Pt,"f").loader.setAttribute("aria-hidden","true")):Nt(e,Pt,"f").getOptions().showLoaderOnInit&&(Nt(e,Pt,"f").playBtn.setAttribute("aria-hidden","true"),Nt(e,Pt,"f").loader.setAttribute("aria-hidden","false")),Nt(e,Pt,"f").getContainer().classList.remove("op-controls--hidden"),e._startControlTimer(2500))},this.events.mouse.mousemove=function(){t&&!Nt(e,Pt,"f").activeElement().paused&&(Nt(e,Pt,"f").activeElement().currentTime?(Nt(e,Pt,"f").loader.setAttribute("aria-hidden","true"),Nt(e,Pt,"f").playBtn.setAttribute("aria-hidden",Nt(e,Pt,"f").isMedia()?"false":"true")):(Nt(e,Pt,"f").playBtn.setAttribute("aria-hidden",Nt(e,Pt,"f").getOptions().showLoaderOnInit?"true":"false"),Nt(e,Pt,"f").loader.setAttribute("aria-hidden",Nt(e,Pt,"f").getOptions().showLoaderOnInit?"false":"true")),Nt(e,Pt,"f").getContainer().classList.remove("op-controls--hidden"),e._startControlTimer(2500))},this.events.mouse.mouseleave=function(){t&&!Nt(e,Pt,"f").activeElement().paused&&e._startControlTimer(1e3)},this.events.media.play=function(){t&&e._startControlTimer(Nt(e,Pt,"f").getOptions().hidePlayBtnTimer||350)},this.events.media.loadedmetadata=i.bind(this),this.events.media.pause=i.bind(this),this.events.media.waiting=i.bind(this),this.events.media.stalled=i.bind(this),this.events.media.playererror=i.bind(this),Object.keys(this.events.media).forEach((function(t){Nt(e,Pt,"f").getElement().addEventListener(t,e.events.media[t],w)})),y||m?Nt(this,Pt,"f").getContainer().addEventListener("click",this.events.mouse.mouseenter,w):Object.keys(this.events.mouse).forEach((function(t){Nt(e,Pt,"f").getContainer().addEventListener(t,e.events.mouse[t],w)})),t&&!Nt(this,Pt,"f").activeElement().paused&&this._startControlTimer(3e3)}}},{key:"destroy",value:function(){var e=this;y||m||(Object.keys(this.events.mouse).forEach((function(t){Nt(e,Pt,"f").getContainer().removeEventListener(t,e.events.mouse[t])})),Object.keys(this.events.media).forEach((function(t){Nt(e,Pt,"f").getElement().removeEventListener(t,e.events.media[t])})),this._stopControlTimer()),Nt(this,Pt,"f").getElement().removeEventListener("controlschanged",this.events.controlschanged),Nt(this,Pt,"f").getElement().removeEventListener("ended",this.events.ended),Object.keys(Nt(this,jt,"f")).forEach((function(t){Nt(e,jt,"f")[t].forEach((function(t){t.custom?e._destroyCustomElement(t):"function"==typeof t.destroy&&t.destroy()}))})),Nt(this,Ot,"f").remove()}},{key:"getContainer",value:function(){return Nt(this,Ot,"f")}},{key:"getLayer",value:function(e){return Nt(this,Ot,"f").querySelector(".op-controls-layer__".concat(e))||Nt(this,Ot,"f")}},{key:"_createControlsLayer",value:function(){if(!Nt(this,Ot,"f")||!Nt(this,Pt,"f").getContainer().querySelector(".op-controls")){Rt(this,Ot,document.createElement("div"),"f"),Nt(this,Ot,"f").className="op-controls",Nt(this,Pt,"f").getContainer().appendChild(Nt(this,Ot,"f"));var e=document.createElement("div");e.className="op-status",e.innerHTML="<span></span>",e.tabIndex=-1,e.setAttribute("aria-hidden","true"),k(Nt(this,Pt,"f").getElement())&&Nt(this,Ot,"f").appendChild(e)}}},{key:"_startControlTimer",value:function(e){var t=this,i=Nt(this,Pt,"f").activeElement();this._stopControlTimer(),"undefined"!=typeof window&&Rt(this,St,window.setTimeout((function(){if((!i.paused||!i.ended)&&_(Nt(t,Pt,"f").getElement())){Nt(t,Pt,"f").getContainer().classList.add("op-controls--hidden"),Nt(t,Pt,"f").playBtn.setAttribute("aria-hidden","true"),t._stopControlTimer();var e=C("controlshidden");Nt(t,Pt,"f").getElement().dispatchEvent(e)}}),e),"f")}},{key:"_stopControlTimer",value:function(){0!==Nt(this,St,"f")&&(clearTimeout(Nt(this,St,"f")),Rt(this,St,0,"f"))}},{key:"_setElements",value:function(){var e,t=this,i=(null===(e=Nt(this,Pt,"f").getOptions().controls)||void 0===e?void 0:e.layers)||{};Rt(this,jt,{"bottom-left":[],"bottom-middle":[],"bottom-right":[],left:[],main:[],middle:[],right:[],"top-left":[],"top-middle":[],"top-right":[]},"f");var n=_(Nt(this,Pt,"f").getElement()),s=k(Nt(this,Pt,"f").getElement()),a=Object.keys(i),r=a.find((function(e){return/^(top|bottom)/.test(e)}));this._createControlsLayer(),a.forEach((function(e){var a=e.split("-"),o=d()(a,2),l=o[0],f=o[1];if(f){Nt(t,Ot,"f").classList.contains("op-controls__stacked")||Nt(t,Ot,"f").classList.add("op-controls__stacked");var c="op-controls-layer__".concat(l);if(!Nt(t,Ot,"f").querySelector(".".concat(c))){var u=document.createElement("div");u.className=c,Nt(t,Ot,"f").appendChild(u)}}else if(r){var h="op-controls-layer__center";if(!Nt(t,Ot,"f").querySelector(".".concat(h))){var v=document.createElement("div");v.className=h,Nt(t,Ot,"f").appendChild(v)}}var p=i?i[e]:null;p&&p.filter((function(e,t,i){return i.indexOf(e)===t})).forEach((function(i){var a=r&&!f?"center":l,o="".concat(i.charAt(0).toUpperCase()).concat(i.slice(1)),c=new(Nt(t,Wt,"f")[o])(Nt(t,Pt,"f"),f||l,a);"settings"===i&&Rt(t,xt,c,"f"),(n||"fullscreen"!==i&&s)&&Nt(t,jt,"f")[e].push(c)}))})),Nt(this,Pt,"f").getCustomControls().forEach((function(e){var i=e.position.split("-"),n=d()(i,2),s=n[0],a=n[1],o=r&&!a?"center":s;e.layer=o,e.position=a||s,"right"===e.position?Nt(t,jt,"f")[e.position].unshift(e):Nt(t,jt,"f")[e.position].push(e)}))}},{key:"_buildElements",value:function(){var e=this;Object.keys(Nt(this,jt,"f")).forEach((function(t){Nt(e,jt,"f")[t].forEach((function(t){t.custom?e._createCustomElement(t):t.create()}))})),Object.keys(Nt(this,jt,"f")).forEach((function(t){Nt(e,jt,"f")[t].forEach((function(t){var i=t;if((!Nt(e,Pt,"f").getOptions().detachMenus||t instanceof nt)&&!i.custom&&"function"==typeof i.addSettings){var n=i.addSettings();Nt(e,xt,"f")&&Object.keys(n).length&&Nt(e,xt,"f").addItem(n.name,n.key,n.default,n.subitems,n.className)}}))}));var t=C("controlschanged");Nt(this,Ot,"f").dispatchEvent(t)}},{key:"_hideCustomMenu",value:function(e){var t;t&&"undefined"!=typeof window&&window.cancelAnimationFrame(t),"undefined"!=typeof window&&(t=window.requestAnimationFrame((function(){e.setAttribute("aria-hidden","true")})))}},{key:"_toggleCustomMenu",value:function(e,t,i){Nt(this,Pt,"f").getContainer().querySelectorAll(".op-settings").forEach((function(e){"false"===e.getAttribute("aria-hidden")&&e.id!==t.id&&e.setAttribute("aria-hidden","true")})),t.setAttribute("aria-hidden","true"===t.getAttribute("aria-hidden")?"false":"true"),"function"==typeof i.click&&i.click(e)}},{key:"_createCustomElement",value:function(e){var t=this,i=document.createElement(e.type);if(i.tabIndex=0,i.id=e.id,i.className="op-controls__".concat(e.id," op-control__").concat(e.position," ").concat(e.showInAds?"":"op-control__hide-in-ad"),e.styles&&Object.assign(i.style,e.styles),"button"===e.type&&e.icon){var n=/\.(jpg|png|svg|gif)$/.test(e.icon)?'<img src="'.concat(M(e.icon),'">'):M(e.icon);i.innerHTML=n}else e.content&&(i.innerHTML=M(e.content,!1));if("button"===e.type&&e.title&&(i.title=e.title),"button"!==e.type&&e.click&&"function"==typeof e.click&&i.setAttribute("aria-role","button"),"button"===e.type&&e.subitems&&Array.isArray(e.subitems)&&e.subitems.length>0){var s=document.createElement("div");s.className="op-settings op-settings__custom",s.id="".concat(e.id,"-menu"),s.setAttribute("aria-hidden","true");var a=e.subitems.map((function(t){var i="";return t.icon&&(i=/\.(jpg|png|svg|gif)$/.test(t.icon)?'<img src="'.concat(t.icon,'">'):t.icon),'<div class="op-settings__menu-item" tabindex="0" '.concat(t.title?'title="'.concat(t.title,'"'):"",' role="menuitemradio">\n                    <div class="op-settings__menu-label" id="').concat(t.id,'" data-value="').concat(e.id,"-").concat(t.id,'">').concat(i," ").concat(t.label,"</div>\n                </div>")}));s.innerHTML='<div class="op-settings__menu" role="menu">'.concat(a.join(""),"</div>"),Nt(this,Pt,"f").getContainer().appendChild(s),e.subitems.forEach((function(e){var t=s.querySelector("#".concat(e.id));t&&e.click&&"function"==typeof e.click&&t.addEventListener("click",e.click,w)})),i.addEventListener("click",(function(i){return t._toggleCustomMenu(i,s,e)}),w),Nt(this,Pt,"f").getElement().addEventListener("controlshidden",(function(){return t._hideCustomMenu(s)}),w)}else e.click&&"function"==typeof e.click&&i.addEventListener("click",e.click,w);e.mouseenter&&"function"==typeof e.mouseenter&&i.addEventListener("mouseenter",e.mouseenter,w),e.mouseleave&&"function"==typeof e.mouseleave&&i.addEventListener("mouseleave",e.mouseleave,w),e.keydown&&"function"==typeof e.keydown&&i.addEventListener("keydown",e.keydown,w),e.blur&&"function"==typeof e.blur&&i.addEventListener("blur",e.blur,w),e.focus&&"function"==typeof e.focus&&i.addEventListener("focus",e.focus,w),e.layer&&("main"===e.layer?Nt(this,Pt,"f").getContainer().appendChild(i):this.getLayer(e.layer).appendChild(i)),e.init&&"function"==typeof e.init&&e.init(Nt(this,Pt,"f"))}},{key:"_destroyCustomElement",value:function(e){var t=this,i=this.getContainer().querySelector(".op-controls__".concat(e.id));if(i){if(e.subitems&&Array.isArray(e.subitems)&&e.subitems.length>0){var n=Nt(this,Pt,"f").getContainer().querySelector("#".concat(e.id,"-menu"));n&&(e.subitems.forEach((function(e){var t=n.querySelector("#".concat(e.id));t&&e.click&&"function"==typeof e.click&&t.removeEventListener("click",e.click)})),i.removeEventListener("click",(function(i){return t._toggleCustomMenu(i,n,e)})),Nt(this,Pt,"f").getElement().removeEventListener("controlshidden",(function(){return t._hideCustomMenu(n)})),n.remove())}e.click&&"function"==typeof e.click&&i.removeEventListener("click",e.click),e.mouseenter&&"function"==typeof e.mouseenter&&i.removeEventListener("mouseenter",e.mouseenter),e.mouseleave&&"function"==typeof e.mouseleave&&i.removeEventListener("mouseleave",e.mouseleave),e.keydown&&"function"==typeof e.keydown&&i.removeEventListener("keydown",e.keydown),e.blur&&"function"==typeof e.blur&&i.removeEventListener("blur",e.blur),e.focus&&"function"==typeof e.focus&&i.removeEventListener("focus",e.focus),i.remove(),e.destroy&&"function"==typeof e.destroy&&e.destroy(Nt(this,Pt,"f"))}}}]),e}();xt=new WeakMap,St=new WeakMap,Ot=new WeakMap,Pt=new WeakMap,jt=new WeakMap,Wt=new WeakMap;const Dt=It;var Ft,Bt=i(506),qt=i.n(Bt),Ht=i(205),Kt=i.n(Ht),Vt=i(585),zt=i.n(Vt),Ut=i(754),Gt=i.n(Ut),Qt=function(e,t,i,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,i):s?s.value=i:t.set(e,i),i},$t=function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},Jt=function(){function e(t,i){r()(this,e),Ft.set(this,void 0),this.element=t,this.media=i,this.promise=new Promise((function(e){e()}))}return l()(e,[{key:"instance",get:function(){return $t(this,Ft,"f")},set:function(e){Qt(this,Ft,e,"f")}},{key:"play",value:function(){return this.element.play()}},{key:"pause",value:function(){this.element.pause()}},{key:"volume",get:function(){return this.element.volume},set:function(e){this.element.volume=e}},{key:"muted",get:function(){return this.element.muted},set:function(e){this.element.muted=e}},{key:"playbackRate",get:function(){return this.element.playbackRate},set:function(e){this.element.playbackRate=e}},{key:"defaultPlaybackRate",get:function(){return this.element.defaultPlaybackRate},set:function(e){this.element.defaultPlaybackRate=e}},{key:"currentTime",get:function(){return this.element.currentTime},set:function(e){this.element.currentTime=e}},{key:"duration",get:function(){return this.element.duration}},{key:"paused",get:function(){return this.element.paused}},{key:"ended",get:function(){return this.element.ended}}]),e}();Ft=new WeakMap;const Yt=Jt;function Xt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=Gt()(e);if(t){var s=Gt()(this).constructor;i=Reflect.construct(n,arguments,s)}else i=n.apply(this,arguments);return zt()(this,i)}}var Zt,ei,ti,ii=function(e,t,i,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,i):s?s.value=i:t.set(e,i),i},ni=function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},si=function(e){Kt()(i,e);var t=Xt(i);function i(e,n,s){var a;return r()(this,i),a=t.call(this,e,n),Zt.set(qt()(a),void 0),ei.set(qt()(a),{}),ti.set(qt()(a),{}),ii(qt()(a),ti,s,"f"),a._assign=a._assign.bind(qt()(a)),a._preparePlayer=a._preparePlayer.bind(qt()(a)),a.promise="undefined"==typeof dashjs?A("https://cdn.dashjs.org/latest/dash.all.min.js"):new Promise((function(e){e({})})),a.promise.then((function(){ii(qt()(a),Zt,dashjs.MediaPlayer().create(),"f"),a.instance=ni(qt()(a),Zt,"f")})),a}return l()(i,[{key:"canPlayType",value:function(e){return E&&"application/dash+xml"===e}},{key:"load",value:function(){var e=this;this._preparePlayer(),ni(this,Zt,"f").attachSource(this.media.src);var t=C("loadedmetadata");this.element.dispatchEvent(t),ni(this,ei,"f")||(ii(this,ei,dashjs.MediaPlayer.events,"f"),Object.keys(ni(this,ei,"f")).forEach((function(t){ni(e,Zt,"f").on(ni(e,ei,"f")[t],e._assign)})))}},{key:"destroy",value:function(){var e=this;ni(this,ei,"f")&&(Object.keys(ni(this,ei,"f")).forEach((function(t){ni(e,Zt,"f").off(ni(e,ei,"f")[t],e._assign)})),ii(this,ei,[],"f")),ni(this,Zt,"f").reset()}},{key:"src",set:function(e){var t=this;le(e)&&(this.destroy(),ii(this,Zt,dashjs.MediaPlayer().create(),"f"),this._preparePlayer(),ni(this,Zt,"f").attachSource(e.src),ii(this,ei,dashjs.MediaPlayer.events,"f"),Object.keys(ni(this,ei,"f")).forEach((function(e){ni(t,Zt,"f").on(ni(t,ei,"f")[e],t._assign)})))}},{key:"levels",get:function(){var e=[];if(ni(this,Zt,"f")){var t=ni(this,Zt,"f").getBitrateInfoListFor("video");t.length&&t.forEach((function(i){if(t[i]){var n=t[i],s=n.height,a=n.name,r={height:s,id:"".concat(i),label:a||null};e.push(r)}}))}return e}},{key:"level",get:function(){return ni(this,Zt,"f")?ni(this,Zt,"f").getQualityFor("video"):"-1"},set:function(e){"0"===e?ni(this,Zt,"f").setAutoSwitchQuality(!0):(ni(this,Zt,"f").setAutoSwitchQuality(!1),ni(this,Zt,"f").setQualityFor("video",e))}},{key:"_assign",value:function(e){if("error"===e.type){var t=C("playererror",{detail:{message:e,type:"M(PEG)-DASH"}});this.element.dispatchEvent(t)}else{var i=C(e.type,{detail:e});this.element.dispatchEvent(i)}}},{key:"_preparePlayer",value:function(){ni(this,Zt,"f").updateSettings(Object.assign({debug:{logLevel:dashjs.Debug.LOG_LEVEL_NONE},streaming:{fastSwitchEnabled:!0,scheduleWhilePaused:!1}},ni(this,ti,"f")||{})),ni(this,Zt,"f").initialize(),ni(this,Zt,"f").attachView(this.element),ni(this,Zt,"f").setAutoPlay(!1)}}]),i}(Yt);Zt=new WeakMap,ei=new WeakMap,ti=new WeakMap;const ai=si;function ri(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=Gt()(e);if(t){var s=Gt()(this).constructor;i=Reflect.construct(n,arguments,s)}else i=n.apply(this,arguments);return zt()(this,i)}}var oi,li,fi,ci=function(e,t,i,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,i):s?s.value=i:t.set(e,i),i},ui=function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},di=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(i[n[s]]=e[n[s]])}return i},hi=function(e){Kt()(i,e);var t=ri(i);function i(e,n,s){var a;return r()(this,i),a=t.call(this,e,n),oi.set(qt()(a),void 0),li.set(qt()(a),{}),fi.set(qt()(a),{}),ci(qt()(a),fi,s,"f"),a.element=e,a.media=n,a._create=a._create.bind(qt()(a)),a._assign=a._assign.bind(qt()(a)),a.promise="undefined"==typeof flvjs?A("https://cdn.jsdelivr.net/npm/flv.js@latest/dist/flv.min.js"):new Promise((function(e){e({})})),a.promise.then(a._create),a}return l()(i,[{key:"canPlayType",value:function(e){return E&&("video/x-flv"===e||"video/flv"===e)}},{key:"load",value:function(){var e=this;ui(this,oi,"f").unload(),ui(this,oi,"f").detachMediaElement(),ui(this,oi,"f").attachMediaElement(this.element),ui(this,oi,"f").load();var t=C("loadedmetadata");this.element.dispatchEvent(t),ui(this,li,"f")||(ci(this,li,flvjs.Events,"f"),Object.keys(ui(this,li,"f")).forEach((function(t){ui(e,oi,"f").on(ui(e,li,"f")[t],(function(){for(var i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return e._assign(ui(e,li,"f")[t],n)}))})))}},{key:"destroy",value:function(){ui(this,oi,"f").destroy(),ci(this,oi,null,"f")}},{key:"src",set:function(e){fe(e)&&(this.destroy(),this._create())}},{key:"levels",get:function(){var e=this,t=[];return ui(this,oi,"f")&&ui(this,oi,"f").levels&&ui(this,oi,"f").levels.length&&Object.keys(ui(this,oi,"f").levels).forEach((function(i){var n=ui(e,oi,"f").levels[i],s={height:n.height,id:i,label:n.name||null};t.push(s)})),t}},{key:"level",get:function(){return ui(this,oi,"f")?ui(this,oi,"f").currentLevel:"-1"},set:function(e){ui(this,oi,"f").currentLevel=e}},{key:"_create",value:function(){var e=this,t=ui(this,fi,"f")||{},i=t.configs,n=di(t,["configs"]);flvjs.LoggingControl.enableDebug=(null==n?void 0:n.debug)||!1,flvjs.LoggingControl.enableVerbose=(null==n?void 0:n.debug)||!1;var s=Object.assign(Object.assign({},n),{type:"flv",url:this.media.src});ci(this,oi,flvjs.createPlayer(s,i||{}),"f"),this.instance=ui(this,oi,"f"),ui(this,li,"f")||(ci(this,li,flvjs.Events,"f"),Object.keys(ui(this,li,"f")).forEach((function(t){ui(e,oi,"f").on(ui(e,li,"f")[t],(function(){for(var i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return e._assign(ui(e,li,"f")[t],n)}))})))}},{key:"_assign",value:function(e,t){if("error"===e){var i=C("playererror",{detail:{data:t,message:"".concat(t[0],": ").concat(t[1]," ").concat(t[2].msg),type:"FLV"}});this.element.dispatchEvent(i)}else{var n=C(e,{detail:{data:t}});this.element.dispatchEvent(n)}}}]),i}(Yt);oi=new WeakMap,li=new WeakMap,fi=new WeakMap;const vi=hi;function pi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=Gt()(e);if(t){var s=Gt()(this).constructor;i=Reflect.construct(n,arguments,s)}else i=n.apply(this,arguments);return zt()(this,i)}}var mi,yi,gi,bi,Ei,wi,_i=function(e,t,i,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,i):s?s.value=i:t.set(e,i),i},ki=function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},Ai=function(e){Kt()(i,e);var t=pi(i);function i(e,n,s,a){var o;return r()(this,i),o=t.call(this,e,n),mi.set(qt()(o),void 0),yi.set(qt()(o),{}),gi.set(qt()(o),0),bi.set(qt()(o),0),Ei.set(qt()(o),void 0),wi.set(qt()(o),void 0),_i(qt()(o),Ei,a||{},"f"),o.element=e,o.media=n,_i(qt()(o),wi,s,"f"),o._create=o._create.bind(qt()(o)),o._play=o._play.bind(qt()(o)),o._pause=o._pause.bind(qt()(o)),o._assign=o._assign.bind(qt()(o)),o.promise="undefined"==typeof Hls?A("https://cdn.jsdelivr.net/npm/hls.js@latest/dist/hls.min.js"):new Promise((function(e){e({})})),o.promise.then(o._create),o}return l()(i,[{key:"canPlayType",value:function(e){return function(){if("undefined"==typeof window)return!1;var e=window.MediaSource||window.WebKitMediaSource,t=window.SourceBuffer||window.WebKitSourceBuffer,i=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),n=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return!!i&&!!n&&!b}()&&"application/x-mpegURL"===e}},{key:"load",value:function(){var e=this;ki(this,mi,"f")&&(ki(this,mi,"f").detachMedia(),ki(this,mi,"f").loadSource(this.media.src),ki(this,mi,"f").attachMedia(this.element));var t=C("loadedmetadata");this.element.dispatchEvent(t),ki(this,yi,"f")||(_i(this,yi,Hls.Events,"f"),Object.keys(ki(this,yi,"f")).forEach((function(t){ki(e,mi,"f").on(ki(e,yi,"f")[t],(function(){for(var i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return e._assign(ki(e,yi,"f")[t],n)}))})))}},{key:"destroy",value:function(){var e=this;ki(this,mi,"f")&&ki(this,mi,"f").stopLoad(),ki(this,yi,"f")&&Object.keys(ki(this,yi,"f")).forEach((function(t){ki(e,mi,"f").off(ki(e,yi,"f")[t],(function(){for(var i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return e._assign(ki(e,yi,"f")[t],n)}))})),this.element.removeEventListener("play",this._play),this.element.removeEventListener("pause",this._pause),ki(this,mi,"f")&&(ki(this,mi,"f").destroy(),_i(this,mi,null,"f"))}},{key:"src",set:function(e){var t=this;oe(e)&&(this.destroy(),_i(this,mi,new Hls(ki(this,Ei,"f")),"f"),ki(this,mi,"f").loadSource(e.src),ki(this,mi,"f").attachMedia(this.element),_i(this,yi,Hls.Events,"f"),Object.keys(ki(this,yi,"f")).forEach((function(e){ki(t,mi,"f").on(ki(t,yi,"f")[e],(function(){for(var i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return t._assign(ki(t,yi,"f")[e],n)}))})))}},{key:"levels",get:function(){var e=this,t=[];return ki(this,mi,"f")&&ki(this,mi,"f").levels&&ki(this,mi,"f").levels.length&&Object.keys(ki(this,mi,"f").levels).forEach((function(i){var n=ki(e,mi,"f").levels[i],s={height:n.height,id:i,label:n.name||null};t.push(s)})),t}},{key:"level",get:function(){return ki(this,mi,"f")?ki(this,mi,"f").currentLevel:"-1"},set:function(e){ki(this,mi,"f").currentLevel=e}},{key:"_create",value:function(){var e=this,t=!("auto"!==this.element.preload&&!ki(this,wi,"f"));ki(this,Ei,"f").autoStartLoad=t,_i(this,mi,new Hls(ki(this,Ei,"f")),"f"),this.instance=ki(this,mi,"f"),_i(this,yi,Hls.Events,"f"),Object.keys(ki(this,yi,"f")).forEach((function(t){ki(e,mi,"f").on(ki(e,yi,"f")[t],(function(){for(var i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return e._assign(ki(e,yi,"f")[t],n)}))})),t||(this.element.addEventListener("play",this._play,w),this.element.addEventListener("pause",this._pause,w))}},{key:"_assign",value:function(e,t){if("hlsError"===e){var i=C("playererror",{detail:{data:t,message:t[1].details,type:"HLS"}});this.element.dispatchEvent(i);var n=t[1].type,s=t[1].fatal,a=t[1];if(s)switch(n){case"mediaError":var r=(new Date).getTime();if(!ki(this,gi,"f")||r-ki(this,gi,"f")>3e3)_i(this,gi,(new Date).getTime(),"f"),ki(this,mi,"f").recoverMediaError();else if(!ki(this,bi,"f")||r-ki(this,bi,"f")>3e3)_i(this,bi,(new Date).getTime(),"f"),console.warn("Attempting to swap Audio Codec and recover from media error"),ki(this,mi,"f").swapAudioCodec(),ki(this,mi,"f").recoverMediaError();else{console.error("Cannot recover, last media error recovery failed");var o=C(n,{detail:{data:a}});this.element.dispatchEvent(o)}break;case"networkError":console.error("Network error");var l=C(n,{detail:{data:a}});this.element.dispatchEvent(l);break;default:ki(this,mi,"f").destroy();var f=C(n,{detail:{data:a}});this.element.dispatchEvent(f)}else{var c=C(n,{detail:{data:a}});this.element.dispatchEvent(c)}}else{var u=t[1];if("hlsLevelLoaded"===e&&!0===u.live){this.element.setAttribute("op-live__enabled","true");var d=C("timeupdate");this.element.dispatchEvent(d)}else if("hlsLevelUpdated"===e&&!0===u.live&&u.totalduration>120){this.element.setAttribute("op-dvr__enabled","true");var h=C("timeupdate");this.element.dispatchEvent(h)}else if("hlsFragParsingMetadata"===e){var v=C("metadataready",{detail:{data:t[1]}});this.element.dispatchEvent(v)}var p=C(e,{detail:{data:t[1]}});this.element.dispatchEvent(p)}}},{key:"_play",value:function(){ki(this,mi,"f")&&ki(this,mi,"f").startLoad()}},{key:"_pause",value:function(){ki(this,mi,"f")&&ki(this,mi,"f").stopLoad()}}]),i}(Yt);mi=new WeakMap,yi=new WeakMap,gi=new WeakMap,bi=new WeakMap,Ei=new WeakMap,wi=new WeakMap;const Li=Ai;function Mi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=Gt()(e);if(t){var s=Gt()(this).constructor;i=Reflect.construct(n,arguments,s)}else i=n.apply(this,arguments);return zt()(this,i)}}var Ti,Ci,xi,Si,Oi,Pi,ji=function(e,t,i,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,i):s?s.value=i:t.set(e,i),i},Wi=function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},Ri=function(e){Kt()(i,e);var t=Mi(i);function i(e,n){var s;if(r()(this,i),s=t.call(this,e,n),Ti.set(qt()(s),void 0),Ci.set(qt()(s),[]),xi.set(qt()(s),!1),Si.set(qt()(s),0),Oi.set(qt()(s),!1),Pi.set(qt()(s),void 0),!k(e)&&!_(e))throw new TypeError("Native method only supports video/audio tags");return s._clearTimeout=s._clearTimeout.bind(qt()(s)),s._setTimeout=s._setTimeout.bind(qt()(s)),s._dispatchError=s._dispatchError.bind(qt()(s)),s._isDvrEnabled=s._isDvrEnabled.bind(qt()(s)),s._readMediadataInfo=s._readMediadataInfo.bind(qt()(s)),ji(qt()(s),xi,oe(n),"f"),s.element.addEventListener("playing",s._clearTimeout,w),s.element.addEventListener("stalled",s._setTimeout,w),s.element.addEventListener("error",s._dispatchError,w),s.element.addEventListener("loadeddata",s._isDvrEnabled,w),s.element.textTracks.addEventListener("addtrack",s._readMediadataInfo,w),s}return l()(i,[{key:"canPlayType",value:function(e){return!!this.element.canPlayType(e).replace("no","")}},{key:"load",value:function(){this.element.load()}},{key:"destroy",value:function(){this.element.removeEventListener("playing",this._clearTimeout),this.element.removeEventListener("stalled",this._setTimeout),this.element.removeEventListener("error",this._dispatchError),this.element.removeEventListener("loadeddata",this._isDvrEnabled),this.element.textTracks.removeEventListener("addtrack",this._readMediadataInfo)}},{key:"levels",get:function(){if(!Wi(this,Ci,"f").length)for(var e=this.element.querySelectorAll("source[title]"),t=0,i=e.length;t<i;++t){var n={height:0,id:"".concat(t),label:e[t].getAttribute("title")||""};Wi(this,Ci,"f").push(n)}return Wi(this,Ci,"f")}},{key:"level",get:function(){var e;return(null===(e=Wi(this,Ti,"f"))||void 0===e?void 0:e.id)||"-1"},set:function(e){var t=Wi(this,Ci,"f").findIndex((function(t){return t.id===e}));if(t>-1){ji(this,Ti,this.levels[t],"f");for(var i=this.element.querySelectorAll("source[title]"),n=0,s=i.length;n<s;++n){var a=i[n].getAttribute("src");a&&parseInt(Wi(this,Ti,"f").id,10)===n&&(this.element.src=a)}}}},{key:"src",set:function(e){this.element.src=e.src}},{key:"_isDvrEnabled",value:function(){var e=this.element.seekable.end(this.element.seekable.length-1)-this.element.seekable.start(0);if(Wi(this,xi,"f")&&e>120&&!this.element.getAttribute("op-dvr__enabled")){this.element.setAttribute("op-dvr__enabled","true");var t=C("timeupdate");this.element.dispatchEvent(t)}}},{key:"_readMediadataInfo",value:function(e){var t,i=this,n=e;"metadata"===(null===(t=null==n?void 0:n.track)||void 0===t?void 0:t.kind)&&(n.track.mode="hidden",n.track.addEventListener("cuechange",(function(e){var t=e.target,n=t.activeCues?t.activeCues[0]:null;if(n){var s=C("metadataready",{detail:n});i.element.dispatchEvent(s)}}),w))}},{key:"_setTimeout",value:function(){var e=this;Wi(this,Oi,"f")||void 0===window||(ji(this,Oi,!0,"f"),ji(this,Pi,window.setInterval((function(){var t;if(Wi(e,Si,"f")>=30){clearInterval(Wi(e,Pi,"f"));var i="Media download failed part-way due to a network error",n=C("playererror",{detail:{data:{message:i,error:2},message:i,type:"HTML5"}});e.element.dispatchEvent(n),ji(e,Si,0,"f"),ji(e,Oi,!1,"f")}else ji(e,Si,(t=Wi(e,Si,"f"),++t),"f")}),1e3),"f"))}},{key:"_clearTimeout",value:function(){Wi(this,Pi,"f")&&(clearInterval(Wi(this,Pi,"f")),ji(this,Si,0,"f"),ji(this,Oi,!1,"f"))}},{key:"_dispatchError",value:function(e){var t,i=e.target,n=null==i?void 0:i.error;switch(null==n?void 0:n.code){case null==n?void 0:n.MEDIA_ERR_ABORTED:t="Media playback aborted";break;case null==n?void 0:n.MEDIA_ERR_NETWORK:t="Media download failed part-way due to a network error";break;case null==n?void 0:n.MEDIA_ERR_DECODE:t="Media playback aborted due to a corruption problem or because the\n                    media used features your browser did not support.";break;case null==n?void 0:n.MEDIA_ERR_SRC_NOT_SUPPORTED:t="Media could not be loaded, either because the server or network failed\n                    or because the format is not supported.";break;default:t="Unknown error occurred."}var s=C("playererror",{detail:{data:Object.assign(Object.assign({},e),{message:t,error:null==n?void 0:n.code}),message:t,type:"HTML5"}});this.element.dispatchEvent(s)}}]),i}(Yt);Ti=new WeakMap,Ci=new WeakMap,xi=new WeakMap,Si=new WeakMap,Oi=new WeakMap,Pi=new WeakMap;const Ni=Ri;var Ii,Di,Fi,Bi,qi,Hi,Ki,Vi,zi,Ui=function(e,t,i,n){return new(i||(i=Promise))((function(s,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,o)}l((n=n.apply(e,t||[])).next())}))},Gi=function(e,t,i,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,i):s?s.value=i:t.set(e,i),i},Qi=function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},$i=function(){function e(t,i,n,s){r()(this,e),Ii.set(this,void 0),Di.set(this,void 0),Fi.set(this,void 0),Bi.set(this,void 0),qi.set(this,void 0),Hi.set(this,void 0),Ki.set(this,!1),Vi.set(this,{media:{},optionsKey:{},rules:[]}),zi.set(this,void 0),Gi(this,Ii,t,"f"),Gi(this,qi,i,"f"),Gi(this,Fi,this._getMediaFiles(),"f"),Gi(this,Vi,s,"f"),Gi(this,Hi,n,"f")}return l()(e,[{key:"canPlayType",value:function(e){return Qi(this,Di,"f").canPlayType(e)}},{key:"load",value:function(){return Ui(this,void 0,void 0,c().mark((function e(){var t=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Qi(this,Ki,"f")){e.next=2;break}return e.abrupt("return");case 2:if(Gi(this,Ki,!0,"f"),Qi(this,Fi,"f").length){e.next=5;break}throw new TypeError("Media not set");case 5:if(Qi(this,Di,"f")&&"function"==typeof Qi(this,Di,"f").destroy&&(1===Qi(this,Fi,"f").length&&Qi(this,Fi,"f")[0].src===Qi(this,Di,"f").media.src||Qi(this,Di,"f").destroy()),Qi(this,Fi,"f").some((function(e){try{Gi(t,Di,t._invoke(e),"f")}catch(i){Gi(t,Di,new Ni(Qi(t,Ii,"f"),e),"f")}return Qi(t,Di,"f").canPlayType(e.type)})),e.prev=7,null!==Qi(this,Di,"f")){e.next=10;break}throw new TypeError("Media cannot be played with any valid media type");case 10:return e.next=12,Qi(this,Di,"f").promise;case 12:Qi(this,Di,"f").load(),e.next=19;break;case 15:throw e.prev=15,e.t0=e.catch(7),Qi(this,Di,"f")&&Qi(this,Di,"f").destroy(),e.t0;case 19:case"end":return e.stop()}}),e,this,[[7,15]])})))}},{key:"play",value:function(){return Ui(this,void 0,void 0,c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Qi(this,Ki,"f")){e.next=7;break}return Gi(this,Ki,!0,"f"),e.next=4,this.load();case 4:Gi(this,Ki,!1,"f"),e.next=9;break;case 7:return e.next=9,Qi(this,Di,"f").promise;case 9:return Gi(this,Bi,Qi(this,Di,"f").play(),"f"),e.abrupt("return",Qi(this,Bi,"f"));case 11:case"end":return e.stop()}}),e,this)})))}},{key:"pause",value:function(){return Ui(this,void 0,void 0,c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===Qi(this,Bi,"f")){e.next=3;break}return e.next=3,Qi(this,Bi,"f");case 3:Qi(this,Di,"f").pause();case 4:case"end":return e.stop()}}),e,this)})))}},{key:"destroy",value:function(){Qi(this,Di,"f")&&Qi(this,Di,"f").destroy()}},{key:"src",get:function(){return Qi(this,Fi,"f")},set:function(e){if("string"==typeof e?Qi(this,Fi,"f").push({src:e,type:ce(e,Qi(this,Ii,"f"))}):Array.isArray(e)?Gi(this,Fi,e,"f"):"object"===s()(e)&&Qi(this,Fi,"f").push(e),Gi(this,Fi,Qi(this,Fi,"f").filter((function(e){return e.src})),"f"),Qi(this,Fi,"f").length>0){var t=Qi(this,Fi,"f"),i=d()(t,1)[0];Qi(this,Ii,"f").src&&Qi(this,Ii,"f").setAttribute("data-op-file",Qi(this,Fi,"f")[0].src),Qi(this,Ii,"f").src=i.src,Gi(this,zi,i,"f"),Qi(this,Di,"f")&&(Qi(this,Di,"f").src=i)}else Qi(this,Ii,"f").src=""}},{key:"current",get:function(){return Qi(this,zi,"f")}},{key:"mediaFiles",get:function(){return Qi(this,Fi,"f")},set:function(e){Gi(this,Fi,e,"f")}},{key:"volume",get:function(){return Qi(this,Di,"f")?Qi(this,Di,"f").volume:Qi(this,Ii,"f").volume},set:function(e){Qi(this,Di,"f")&&(Qi(this,Di,"f").volume=e)}},{key:"muted",get:function(){return Qi(this,Di,"f")?Qi(this,Di,"f").muted:Qi(this,Ii,"f").muted},set:function(e){Qi(this,Di,"f")&&(Qi(this,Di,"f").muted=e)}},{key:"playbackRate",get:function(){return Qi(this,Di,"f")?Qi(this,Di,"f").playbackRate:Qi(this,Ii,"f").playbackRate},set:function(e){Qi(this,Di,"f")&&(Qi(this,Di,"f").playbackRate=e)}},{key:"defaultPlaybackRate",get:function(){return Qi(this,Di,"f")?Qi(this,Di,"f").defaultPlaybackRate:Qi(this,Ii,"f").defaultPlaybackRate},set:function(e){Qi(this,Di,"f")&&(Qi(this,Di,"f").defaultPlaybackRate=e)}},{key:"currentTime",get:function(){return Qi(this,Di,"f")?Qi(this,Di,"f").currentTime:Qi(this,Ii,"f").currentTime},set:function(e){Qi(this,Di,"f")&&(Qi(this,Di,"f").currentTime=e)}},{key:"duration",get:function(){var e=Qi(this,Di,"f")?Qi(this,Di,"f").duration:Qi(this,Ii,"f").duration;return e===1/0&&Qi(this,Ii,"f").seekable&&Qi(this,Ii,"f").seekable.length?Qi(this,Ii,"f").seekable.end(0):e}},{key:"paused",get:function(){return Qi(this,Di,"f")?Qi(this,Di,"f").paused:Qi(this,Ii,"f").paused}},{key:"ended",get:function(){return Qi(this,Di,"f")?Qi(this,Di,"f").ended:Qi(this,Ii,"f").ended}},{key:"loaded",get:function(){return Qi(this,Ki,"f")},set:function(e){Gi(this,Ki,e,"f")}},{key:"level",get:function(){return Qi(this,Di,"f")?Qi(this,Di,"f").level:-1},set:function(e){Qi(this,Di,"f")&&(Qi(this,Di,"f").level=e)}},{key:"levels",get:function(){return Qi(this,Di,"f")?Qi(this,Di,"f").levels:[]}},{key:"instance",get:function(){return Qi(this,Di,"f")?Qi(this,Di,"f").instance:null}},{key:"_getMediaFiles",value:function(){var e=[],t=Qi(this,Ii,"f").querySelectorAll("source"),i=Qi(this,Ii,"f").src;i&&e.push({src:i,type:Qi(this,Ii,"f").getAttribute("type")||ce(i,Qi(this,Ii,"f"))});for(var n=0,s=t.length;n<s;n++){var a=t[n],r=a.src;if(e.push({src:r,type:a.getAttribute("type")||ce(r,Qi(this,Ii,"f"))}),0===n){var o=e[0];Gi(this,zi,o,"f")}}return e.length||e.push({src:"",type:ce("",Qi(this,Ii,"f"))}),e}},{key:"_invoke",value:function(e){var t,i,n,s=this,a=Qi(this,Ii,"f").canPlayType("application/vnd.apple.mpegurl")||Qi(this,Ii,"f").canPlayType("application/x-mpegURL");Gi(this,zi,e,"f");var r,o=(Qi(this,qi,"f").controls||{}).layers,l=!1;if(o&&Object.keys(o).forEach((function(e){var t=o?o[e]:null;t&&t.indexOf("levels")>-1&&(l=!0)})),Object.keys(Qi(this,Vi,"f").media).length)return Qi(this,Vi,"f").rules.forEach((function(t){var i=t(e.src);if(i){var n=Qi(s,Vi,"f").media[i],a=Qi(s,qi,"f")[Qi(s,Vi,"f").optionsKey[i]]||void 0;r=n(Qi(s,Ii,"f"),e,Qi(s,Hi,"f"),a)}})),r?(r.create(),r):new Ni(Qi(this,Ii,"f"),e);if(oe(e)){if(a&&Qi(this,qi,"f").forceNative&&!l)return new Ni(Qi(this,Ii,"f"),e);var f=(null===(t=Qi(this,qi,"f"))||void 0===t?void 0:t.hls)||void 0;return new Li(Qi(this,Ii,"f"),e,Qi(this,Hi,"f"),f)}if(le(e)){var c=(null===(i=Qi(this,qi,"f"))||void 0===i?void 0:i.dash)||void 0;return new ai(Qi(this,Ii,"f"),e,c)}if(fe(e)){var u=(null===(n=Qi(this,qi,"f"))||void 0===n?void 0:n.flv)||{debug:!1,type:"flv",url:e.src};return new vi(Qi(this,Ii,"f"),e,u)}return new Ni(Qi(this,Ii,"f"),e)}}]),e}();Ii=new WeakMap,Di=new WeakMap,Fi=new WeakMap,Bi=new WeakMap,qi=new WeakMap,Hi=new WeakMap,Ki=new WeakMap,Vi=new WeakMap,zi=new WeakMap;const Ji=$i;var Yi,Xi,Zi,en,tn,nn,sn,an,rn,on,ln,fn,cn,un,dn,hn,vn,pn,mn,yn,gn,bn,En,wn,_n,kn,An,Ln,Mn,Tn,Cn,xn,Sn,On=function(e,t,i,n){return new(i||(i=Promise))((function(s,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,o)}l((n=n.apply(e,t||[])).next())}))},Pn=function(e,t,i,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,i):s?s.value=i:t.set(e,i),i},jn=function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},Wn=function(){function e(t,i,n,s,a){var o,l,f,c,u=this;r()(this,e),this.loadedAd=!1,Yi.set(this,!1),Xi.set(this,!1),Zi.set(this,!1),en.set(this,!1),tn.set(this,0),nn.set(this,void 0),sn.set(this,!1),an.set(this,0),rn.set(this,0),on.set(this,null),ln.set(this,void 0),fn.set(this,void 0),cn.set(this,void 0),un.set(this,[]),dn.set(this,void 0),hn.set(this,void 0),vn.set(this,void 0),pn.set(this,void 0),mn.set(this,void 0),yn.set(this,void 0),gn.set(this,void 0),bn.set(this,void 0),En.set(this,!1),wn.set(this,!1),_n.set(this,!1),kn.set(this,void 0),An.set(this,0),Ln.set(this,void 0),Mn.set(this,void 0),Tn.set(this,0),Cn.set(this,[]),xn.set(this,!1),Sn.set(this,null);var d={autoPlayAdBreaks:!0,customClick:{enabled:!1,label:"Click here for more info"},audioSkip:{enabled:!0,label:"Skip Ad",remainingLabel:"Skip in [[secs]] seconds"},debug:!1,enablePreloading:!1,language:"en",loop:!1,numRedirects:4,publisherId:void 0,sdkPath:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",sessionId:void 0,src:[],vpaidMode:"enabled"};Pn(this,ln,t,"f"),Pn(this,dn,i,"f"),Pn(this,fn,t.getMedia(),"f"),Pn(this,cn,t.getElement(),"f"),Pn(this,En,n||!1,"f"),Pn(this,sn,t.getElement().muted,"f"),Pn(this,wn,s||!1,"f"),Pn(this,kn,Object.assign(Object.assign({},d),a),"f"),(null==a?void 0:a.customClick)&&Object.keys(a.customClick).length&&(jn(this,kn,"f").customClick=Object.assign(Object.assign({},d.customClick),a.customClick)),Pn(this,_n,!1,"f"),Pn(this,Ln,jn(this,cn,"f").volume,"f"),Pn(this,nn,jn(this,Ln,"f"),"f");var h=(null===(o=jn(this,kn,"f"))||void 0===o?void 0:o.debug)?null===(f=null===(l=jn(this,kn,"f"))||void 0===l?void 0:l.sdkPath)||void 0===f?void 0:f.replace(/(\.js$)/,"_debug.js"):null===(c=jn(this,kn,"f"))||void 0===c?void 0:c.sdkPath;this.load=this.load.bind(this),this.resizeAds=this.resizeAds.bind(this),this._handleClickInContainer=this._handleClickInContainer.bind(this),this._handleSkipAds=this._handleSkipAds.bind(this),this._loaded=this._loaded.bind(this),this._error=this._error.bind(this),this._assign=this._assign.bind(this),this._contentLoadedAction=this._contentLoadedAction.bind(this),this._loadedMetadataHandler=this._loadedMetadataHandler.bind(this),this._contentEndedListener=this._contentEndedListener.bind(this),this._handleResizeAds=this._handleResizeAds.bind(this),this._onContentPauseRequested=this._onContentPauseRequested.bind(this),this._onContentResumeRequested=this._onContentResumeRequested.bind(this),Pn(this,hn,!h||"undefined"!=typeof google&&void 0!==google.ima?new Promise((function(e){e()})):A(h),"f"),jn(this,hn,"f").then((function(){u.load()})).catch((function(e){var t="Ad script could not be loaded; please check if you have an AdBlock ";t+="turned on, or if you provided a valid URL is correct",console.error("Ad error: ".concat(t,"."));var i=C("playererror",{detail:{data:e,message:t,type:"Ads"}});jn(u,cn,"f").dispatchEvent(i)}))}return l()(e,[{key:"load",value:function(){var e,t,i,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if("undefined"!=typeof google&&google.ima&&(n||!this.loadedAd||!jn(this,kn,"f").autoPlayAdBreaks)&&(jn(this,kn,"f").autoPlayAdBreaks||n)){this.loadedAd=!0;var s=jn(this,ln,"f").getContainer().querySelector(".op-ads");if(s&&s.parentNode&&s.parentNode.removeChild(s),Pn(this,en,!0,"f"),Pn(this,pn,document.createElement("div"),"f"),jn(this,pn,"f").className="op-ads",jn(this,pn,"f").tabIndex=-1,jn(this,cn,"f").parentElement&&jn(this,cn,"f").parentElement.insertBefore(jn(this,pn,"f"),jn(this,cn,"f").nextSibling),jn(this,pn,"f").addEventListener("click",this._handleClickInContainer),(null===(e=jn(this,kn,"f").customClick)||void 0===e?void 0:e.enabled)&&(Pn(this,mn,document.createElement("div"),"f"),jn(this,mn,"f").className="op-ads__click-container",jn(this,mn,"f").innerHTML='<div class="op-ads__click-label">'.concat(jn(this,kn,"f").customClick.label,"</div>"),jn(this,cn,"f").parentElement&&jn(this,cn,"f").parentElement.insertBefore(jn(this,mn,"f"),jn(this,cn,"f").nextSibling)),k(jn(this,cn,"f"))&&(null===(t=jn(this,kn,"f").audioSkip)||void 0===t?void 0:t.enabled)){if(null===(i=jn(this,kn,"f").audioSkip)||void 0===i?void 0:i.element){var a=jn(this,kn,"f").audioSkip||{},r=a.element;if("string"==typeof r){var o=document.getElementById(r);o&&Pn(this,yn,o,"f")}else r instanceof HTMLElement&&Pn(this,yn,r,"f")}else Pn(this,yn,document.createElement("button"),"f"),jn(this,yn,"f").className="op-ads__skip hidden",jn(this,ln,"f").getControls().getContainer().appendChild(jn(this,yn,"f"));jn(this,yn,"f")&&jn(this,yn,"f").addEventListener("click",this._handleSkipAds,w)}Pn(this,Cn,jn(this,fn,"f").src,"f");var l={disabled:google.ima.ImaSdkSettings.VpaidMode.DISABLED,enabled:google.ima.ImaSdkSettings.VpaidMode.ENABLED,insecure:google.ima.ImaSdkSettings.VpaidMode.INSECURE};google.ima.settings.setVpaidMode(l[jn(this,kn,"f").vpaidMode||"enabled"]),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0),google.ima.settings.setAutoPlayAdBreaks(jn(this,kn,"f").autoPlayAdBreaks),google.ima.settings.setNumRedirects(jn(this,kn,"f").numRedirects),google.ima.settings.setLocale(jn(this,kn,"f").language),jn(this,kn,"f").sessionId&&google.ima.settings.setSessionId(jn(this,kn,"f").sessionId),jn(this,kn,"f").publisherId&&google.ima.settings.setPpid(jn(this,kn,"f").publisherId),google.ima.settings.setPlayerType("openplayerjs"),google.ima.settings.setPlayerVersion("3.0.0"),Pn(this,gn,new google.ima.AdDisplayContainer(jn(this,pn,"f"),jn(this,cn,"f"),jn(this,mn,"f")),"f"),Pn(this,vn,new google.ima.AdsLoader(jn(this,gn,"f")),"f"),jn(this,vn,"f").addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this._loaded,w),jn(this,vn,"f").addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this._error,w),"undefined"!=typeof window&&window.addEventListener("resize",this._handleResizeAds,w),jn(this,cn,"f").addEventListener("loadedmetadata",this._handleResizeAds,w),!0!==jn(this,En,"f")&&!0!==jn(this,wn,"f")&&!0!==n&&!0!==jn(this,kn,"f").enablePreloading&&!0!==jn(this,_n,"f")||(jn(this,Xi,"f")||(Pn(this,Xi,!0,"f"),jn(this,gn,"f").initialize()),this._requestAds())}}},{key:"play",value:function(){return On(this,void 0,void 0,c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(jn(this,Xi,"f")){e.next=4;break}return Pn(this,_n,!0,"f"),this._initNotDoneAds(),e.abrupt("return");case 4:if(jn(this,on,"f"))try{jn(this,tn,"f")||!1!==jn(this,Zi,"f")?jn(this,on,"f").resume():jn(this,on,"f").start(),Pn(this,Zi,!0,"f"),t=C("play"),jn(this,cn,"f").dispatchEvent(t)}catch(e){this._resumeMedia()}case 5:case"end":return e.stop()}}),e,this)})))}},{key:"pause",value:function(){if(jn(this,on,"f")){Pn(this,Zi,!1,"f"),jn(this,on,"f").pause();var e=C("pause");jn(this,cn,"f").dispatchEvent(e)}}},{key:"destroy",value:function(){var e,t,i=this;jn(this,on,"f")&&(jn(this,on,"f").removeEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this._error),jn(this,un,"f")&&jn(this,un,"f").forEach((function(e){jn(i,on,"f").removeEventListener(e,i._assign)}))),Pn(this,un,[],"f");var n=jn(this,ln,"f").getControls(),s=n?n.events.mouse:{};Object.keys(s).forEach((function(e){jn(i,pn,"f")&&jn(i,pn,"f").removeEventListener(e,s[e])})),jn(this,vn,"f")&&(jn(this,vn,"f").removeEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this._error),jn(this,vn,"f").removeEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this._loaded));var a=!Array.isArray(jn(this,dn,"f"))||jn(this,An,"f")>jn(this,dn,"f").length;jn(this,on,"f")&&a&&jn(this,on,"f").destroy(),(null===(e=jn(this,kn,"f").customClick)||void 0===e?void 0:e.enabled)&&jn(this,mn,"f")&&jn(this,mn,"f").remove(),(null===(t=jn(this,kn,"f").audioSkip)||void 0===t?void 0:t.enabled)&&jn(this,yn,"f")&&(jn(this,yn,"f").removeEventListener("click",this._handleSkipAds),jn(this,yn,"f").remove()),(m||y)&&jn(this,cn,"f").removeEventListener("loadedmetadata",this._contentLoadedAction),jn(this,cn,"f").removeEventListener("loadedmetadata",this._handleResizeAds),jn(this,cn,"f").removeEventListener("loadedmetadata",this._loadedMetadataHandler),jn(this,cn,"f").removeEventListener("ended",this._contentEndedListener),"undefined"!=typeof window&&window.removeEventListener("resize",this._handleResizeAds),jn(this,pn,"f")&&(jn(this,pn,"f").removeEventListener("click",this._handleClickInContainer),jn(this,pn,"f").remove()),this.loadPromise=null,this.loadedAd=!1,Pn(this,Xi,!1,"f"),Pn(this,_n,!1,"f"),Pn(this,an,0,"f"),Pn(this,rn,0,"f"),Pn(this,Sn,null,"f")}},{key:"resizeAds",value:function(e,t){var i=this;if(jn(this,on,"f")){var n=jn(this,cn,"f"),s="true"===n.getAttribute("data-fullscreen")?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL,a=e,r=e?e.toString():"";e&&r.indexOf("%")>-1&&jn(this,cn,"f").parentElement&&(a=jn(this,cn,"f").parentElement.offsetWidth*(parseInt(r,10)/100));var o,l=t,f=t?t.toString():"";t&&f.indexOf("%")>-1&&jn(this,cn,"f").parentElement&&(l=jn(this,cn,"f").parentElement.offsetHeight*(parseInt(f,10)/100)),o&&"undefined"!=typeof window&&window.cancelAnimationFrame(o),"undefined"!=typeof window&&(o=window.requestAnimationFrame((function(){jn(i,on,"f").resize(a||n.offsetWidth,l||n.offsetHeight,s)})))}}},{key:"getAdsManager",value:function(){return jn(this,on,"f")}},{key:"getAdsLoader",value:function(){return jn(this,vn,"f")}},{key:"started",value:function(){return jn(this,en,"f")}},{key:"src",set:function(e){Pn(this,dn,e,"f")}},{key:"isDone",set:function(e){Pn(this,Xi,e,"f")}},{key:"playRequested",set:function(e){Pn(this,_n,e,"f")}},{key:"volume",get:function(){return jn(this,on,"f")?jn(this,on,"f").getVolume():jn(this,Ln,"f")},set:function(e){jn(this,on,"f")&&(Pn(this,nn,e,"f"),jn(this,on,"f").setVolume(e),this._setMediaVolume(e),Pn(this,sn,0===e,"f"))}},{key:"muted",get:function(){return jn(this,sn,"f")},set:function(e){jn(this,on,"f")&&(e?(jn(this,on,"f").setVolume(0),Pn(this,sn,!0,"f"),this._setMediaVolume(0)):(jn(this,on,"f").setVolume(jn(this,nn,"f")),Pn(this,sn,!1,"f"),this._setMediaVolume(jn(this,nn,"f"))))}},{key:"currentTime",get:function(){return jn(this,rn,"f")},set:function(e){Pn(this,rn,e,"f")}},{key:"duration",get:function(){return jn(this,an,"f")}},{key:"paused",get:function(){return!jn(this,Zi,"f")}},{key:"ended",get:function(){return jn(this,Yi,"f")}},{key:"_assign",value:function(e){var t,i,n=this,s=e.getAd();switch(s&&Pn(this,Sn,s,"f"),e.type){case google.ima.AdEvent.Type.LOADED:if(s.isLinear()){if(p&&_(jn(this,cn,"f"))&&(jn(this,cn,"f").controls=!1),Pn(this,an,s.getDuration(),"f"),Pn(this,rn,s.getDuration(),"f"),!jn(this,xn,"f")&&!m&&!y){var a=C("waiting");jn(this,cn,"f").dispatchEvent(a);var r=C("loadedmetadata");jn(this,cn,"f").dispatchEvent(r),this.resizeAds()}}else this._onContentResumeRequested();break;case google.ima.AdEvent.Type.STARTED:if(s.isLinear()){jn(this,cn,"f").parentElement&&!jn(this,cn,"f").parentElement.classList.contains("op-ads--active")&&jn(this,cn,"f").parentElement.classList.add("op-ads--active"),jn(this,fn,"f").paused||jn(this,fn,"f").pause(),Pn(this,Zi,!0,"f");var o,l=C("play");if(jn(this,cn,"f").dispatchEvent(l),o||(this.resizeAds(),o=!0),jn(this,fn,"f").ended){Pn(this,Yi,!1,"f");var f=C("adsmediaended");jn(this,cn,"f").dispatchEvent(f)}"undefined"!=typeof window&&Pn(this,tn,window.setInterval((function(){if(!0===jn(n,Zi,"f")){Pn(n,rn,Math.round(jn(n,on,"f").getRemainingTime()),"f");var e=C("timeupdate");jn(n,cn,"f").dispatchEvent(e)}}),350),"f")}break;case google.ima.AdEvent.Type.COMPLETE:case google.ima.AdEvent.Type.SKIPPED:if(s.isLinear()){if(e.type===google.ima.AdEvent.Type.SKIPPED){var c=C("adsskipped");jn(this,cn,"f").dispatchEvent(c)}jn(this,cn,"f").parentElement&&jn(this,cn,"f").parentElement.classList.remove("op-ads--active"),Pn(this,Zi,!1,"f"),clearInterval(jn(this,tn,"f"))}break;case google.ima.AdEvent.Type.VOLUME_CHANGED:this._setMediaVolume(this.volume);break;case google.ima.AdEvent.Type.VOLUME_MUTED:if(s.isLinear()){var u=C("volumechange");jn(this,cn,"f").dispatchEvent(u)}break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:if(s.isLinear()&&(Pn(this,Zi,!1,"f"),Pn(this,Yi,!0,"f"),Pn(this,tn,0,"f"),Pn(this,sn,!1,"f"),Pn(this,en,!1,"f"),Pn(this,Sn,null,"f"),jn(this,cn,"f").parentElement&&jn(this,cn,"f").parentElement.classList.remove("op-ads--active"),this.destroy(),jn(this,cn,"f").currentTime>=jn(this,cn,"f").duration)){var d=C("ended");jn(this,cn,"f").dispatchEvent(d)}break;case google.ima.AdEvent.Type.CLICK:var h=C("pause");jn(this,cn,"f").dispatchEvent(h);break;case google.ima.AdEvent.Type.AD_BREAK_READY:jn(this,kn,"f").autoPlayAdBreaks||this.play();break;case google.ima.AdEvent.Type.AD_PROGRESS:var v=e.getAdData(),g=jn(this,Sn,"f")?jn(this,Sn,"f").getSkipTimeOffset():-1;if(jn(this,yn,"f"))if(-1!==g){var b=jn(this,on,"f").getAdSkippableState(),E=Math.ceil(g-v.currentTime);jn(this,yn,"f").classList.remove("hidden"),b?(jn(this,yn,"f").textContent=(null===(t=jn(this,kn,"f").audioSkip)||void 0===t?void 0:t.label)||"",jn(this,yn,"f").classList.remove("disabled")):(jn(this,yn,"f").textContent=(null===(i=jn(this,kn,"f").audioSkip)||void 0===i?void 0:i.remainingLabel.replace("[[secs]]",E.toString()))||"",jn(this,yn,"f").classList.add("disabled"))}else jn(this,yn,"f").classList.add("hidden")}if(e.type===google.ima.AdEvent.Type.LOG){var w=e.getAdData();if(w.adError){var k=w.adError.getMessage();console.warn("Ad warning: Non-fatal error occurred: ".concat(k));var A=C("playererror",{detail:{data:w.adError,message:k,type:"Ads"}});jn(this,cn,"f").dispatchEvent(A)}}else{var L=C("ads".concat(e.type));jn(this,cn,"f").dispatchEvent(L)}}},{key:"_error",value:function(e){var t,i=e.getError(),n=C("playererror",{detail:{data:i,message:i.toString(),type:"Ads"}});jn(this,cn,"f").dispatchEvent(n);Array.isArray(jn(this,dn,"f"))&&jn(this,dn,"f").length>1&&jn(this,An,"f")<jn(this,dn,"f").length-1?(Pn(this,An,(t=jn(this,An,"f"),++t),"f"),this.destroy(),Pn(this,en,!0,"f"),Pn(this,_n,!0,"f"),this.load(!0),console.warn("Ad warning: ".concat(i.toString()))):([100,101,102,300,301,302,303,400,401,402,403,405,406,407,408,409,410,500,501,502,503,900,901,1005].indexOf(i.getErrorCode())>-1?(jn(this,on,"f")&&jn(this,on,"f").destroy(),console.error("Ad error: ".concat(i.toString()))):console.warn("Ad warning: ".concat(i.toString())),Pn(this,Sn,null,"f"),!0!==jn(this,En,"f")&&!0!==jn(this,wn,"f")&&!0!==jn(this,en,"f")||(Pn(this,Zi,!1,"f"),this._resumeMedia()))}},{key:"_loaded",value:function(e){var t=new google.ima.AdsRenderingSettings;t.restoreCustomPlaybackStateOnAdBreakComplete=!1,t.enablePreloading=jn(this,kn,"f").enablePreloading,Pn(this,on,e.getAdsManager(jn(this,cn,"f"),t),"f"),this._start(jn(this,on,"f")),this.loadPromise=new Promise((function(e){e()}))}},{key:"_start",value:function(e){var t=this;jn(this,mn,"f")&&e.isCustomClickTrackingUsed()&&jn(this,mn,"f").classList.add("op-ads__click-container--visible"),e.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this._onContentPauseRequested,w),e.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this._onContentResumeRequested,w),Pn(this,un,[google.ima.AdEvent.Type.ALL_ADS_COMPLETED,google.ima.AdEvent.Type.CLICK,google.ima.AdEvent.Type.VIDEO_CLICKED,google.ima.AdEvent.Type.VIDEO_ICON_CLICKED,google.ima.AdEvent.Type.AD_PROGRESS,google.ima.AdEvent.Type.AD_BUFFERING,google.ima.AdEvent.Type.IMPRESSION,google.ima.AdEvent.Type.DURATION_CHANGE,google.ima.AdEvent.Type.USER_CLOSE,google.ima.AdEvent.Type.LINEAR_CHANGED,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,google.ima.AdEvent.Type.AD_METADATA,google.ima.AdEvent.Type.INTERACTION,google.ima.AdEvent.Type.COMPLETE,google.ima.AdEvent.Type.FIRST_QUARTILE,google.ima.AdEvent.Type.LOADED,google.ima.AdEvent.Type.MIDPOINT,google.ima.AdEvent.Type.PAUSED,google.ima.AdEvent.Type.RESUMED,google.ima.AdEvent.Type.USER_CLOSE,google.ima.AdEvent.Type.STARTED,google.ima.AdEvent.Type.THIRD_QUARTILE,google.ima.AdEvent.Type.SKIPPED,google.ima.AdEvent.Type.VOLUME_CHANGED,google.ima.AdEvent.Type.VOLUME_MUTED,google.ima.AdEvent.Type.LOG],"f"),jn(this,kn,"f").autoPlayAdBreaks||jn(this,un,"f").push(google.ima.AdEvent.Type.AD_BREAK_READY);var i=jn(this,ln,"f").getControls(),n=i?i.events.mouse:{};if(Object.keys(n).forEach((function(e){jn(t,pn,"f")&&jn(t,pn,"f").addEventListener(e,n[e],w)})),jn(this,un,"f").forEach((function(i){e.addEventListener(i,t._assign,w)})),!0===jn(this,En,"f")||!0===jn(this,wn,"f")||!0===jn(this,_n,"f")){if(Pn(this,_n,!1,"f"),!jn(this,Xi,"f"))return void this._initNotDoneAds();e.init(jn(this,cn,"f").offsetWidth,jn(this,cn,"f").offsetHeight,jn(this,cn,"f").parentElement&&"true"===jn(this,cn,"f").parentElement.getAttribute("data-fullscreen")?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL),e.start();var s=C("play");jn(this,cn,"f").dispatchEvent(s)}else!0===jn(this,kn,"f").enablePreloading&&e.init(jn(this,cn,"f").offsetWidth,jn(this,cn,"f").offsetHeight,jn(this,cn,"f").parentElement&&"true"===jn(this,cn,"f").parentElement.getAttribute("data-fullscreen")?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}},{key:"_initNotDoneAds",value:function(){jn(this,gn,"f")?(Pn(this,Xi,!0,"f"),jn(this,gn,"f").initialize(),m||y?(Pn(this,Mn,this._contentLoadedAction,"f"),jn(this,cn,"f").addEventListener("loadedmetadata",this._contentLoadedAction,w),jn(this,cn,"f").load()):this._contentLoadedAction()):(this.load(),this.loadedAd=!1)}},{key:"_contentEndedListener",value:function(){Pn(this,Yi,!0,"f"),Pn(this,Zi,!1,"f"),Pn(this,en,!1,"f"),jn(this,vn,"f").contentComplete()}},{key:"_onContentPauseRequested",value:function(){jn(this,cn,"f").removeEventListener("ended",this._contentEndedListener),Pn(this,Tn,jn(this,fn,"f").currentTime,"f"),jn(this,en,"f")?jn(this,fn,"f").pause():Pn(this,en,!0,"f");var e=C("play");jn(this,cn,"f").dispatchEvent(e)}},{key:"_onContentResumeRequested",value:function(){if(jn(this,cn,"f").addEventListener("ended",this._contentEndedListener,w),jn(this,cn,"f").addEventListener("loadedmetadata",this._loadedMetadataHandler,w),m||y)jn(this,fn,"f").src=jn(this,Cn,"f"),jn(this,fn,"f").load(),this._prepareMedia(),jn(this,cn,"f").parentElement&&jn(this,cn,"f").parentElement.classList.add("op-ads--active");else{var e=C("loadedmetadata");jn(this,cn,"f").dispatchEvent(e)}}},{key:"_loadedMetadataHandler",value:function(){var e;Array.isArray(jn(this,dn,"f"))?(Pn(this,An,(e=jn(this,An,"f"),++e),"f"),jn(this,An,"f")<=jn(this,dn,"f").length-1?(jn(this,on,"f")&&jn(this,on,"f").destroy(),jn(this,vn,"f").contentComplete(),Pn(this,_n,!0,"f"),Pn(this,en,!0,"f"),Pn(this,Xi,!1,"f"),this.load(!0)):(jn(this,kn,"f").autoPlayAdBreaks||this._resetAdsAfterManualBreak(),this._prepareMedia())):jn(this,cn,"f").seekable.length?jn(this,cn,"f").seekable.end(0)>jn(this,Tn,"f")&&(jn(this,kn,"f").autoPlayAdBreaks||this._resetAdsAfterManualBreak(),this._prepareMedia()):setTimeout(this._loadedMetadataHandler,100)}},{key:"_resumeMedia",value:function(){var e=this;if(Pn(this,tn,0,"f"),Pn(this,sn,!1,"f"),Pn(this,en,!1,"f"),Pn(this,an,0,"f"),Pn(this,rn,0,"f"),jn(this,cn,"f").parentElement&&jn(this,cn,"f").parentElement.classList.remove("op-ads--active"),jn(this,fn,"f").ended){var t=C("ended");jn(this,cn,"f").dispatchEvent(t)}else try{jn(this,fn,"f").play(),setTimeout((function(){var t=C("play");jn(e,cn,"f").dispatchEvent(t)}),50)}catch(e){console.error(e)}}},{key:"_requestAds",value:function(){Pn(this,bn,new google.ima.AdsRequest,"f");var e=Array.isArray(jn(this,dn,"f"))?jn(this,dn,"f")[jn(this,An,"f")]:jn(this,dn,"f");!function(e){var t;if("undefined"==typeof DOMParser)return!1;t=function(e){return(new DOMParser).parseFromString(e,"text/xml")};try{if(t(e).getElementsByTagName("parsererror").length>0)return!1}catch(e){return!1}return!0}(e)?jn(this,bn,"f").adTagUrl=e:jn(this,bn,"f").adsResponse=e;var t=jn(this,cn,"f").parentElement?jn(this,cn,"f").parentElement.offsetWidth:0,i=jn(this,cn,"f").parentElement?jn(this,cn,"f").parentElement.offsetHeight:0;jn(this,bn,"f").linearAdSlotWidth=t,jn(this,bn,"f").linearAdSlotHeight=i,jn(this,bn,"f").nonLinearAdSlotWidth=t,jn(this,bn,"f").nonLinearAdSlotHeight=i/3,jn(this,bn,"f").setAdWillAutoPlay(jn(this,En,"f")),jn(this,bn,"f").setAdWillPlayMuted(jn(this,wn,"f")),jn(this,vn,"f").requestAds(jn(this,bn,"f"))}},{key:"_contentLoadedAction",value:function(){jn(this,Mn,"f")&&(jn(this,cn,"f").removeEventListener("loadedmetadata",jn(this,Mn,"f")),Pn(this,Mn,null,"f")),this._requestAds()}},{key:"_resetAdsAfterManualBreak",value:function(){jn(this,on,"f")&&jn(this,on,"f").destroy(),jn(this,vn,"f").contentComplete(),Pn(this,Xi,!1,"f"),Pn(this,_n,!0,"f")}},{key:"_prepareMedia",value:function(){jn(this,fn,"f").currentTime=jn(this,Tn,"f"),jn(this,cn,"f").removeEventListener("loadedmetadata",this._loadedMetadataHandler),this._resumeMedia()}},{key:"_setMediaVolume",value:function(e){jn(this,fn,"f").volume=e,jn(this,fn,"f").muted=0===e}},{key:"_handleClickInContainer",value:function(){if(jn(this,fn,"f").paused){var e=C("paused");jn(this,cn,"f").dispatchEvent(e),this.pause()}}},{key:"_handleResizeAds",value:function(){this.resizeAds()}},{key:"_handleSkipAds",value:function(){jn(this,on,"f").skip()}}]),e}();Yi=new WeakMap,Xi=new WeakMap,Zi=new WeakMap,en=new WeakMap,tn=new WeakMap,nn=new WeakMap,sn=new WeakMap,an=new WeakMap,rn=new WeakMap,on=new WeakMap,ln=new WeakMap,fn=new WeakMap,cn=new WeakMap,un=new WeakMap,dn=new WeakMap,hn=new WeakMap,vn=new WeakMap,pn=new WeakMap,mn=new WeakMap,yn=new WeakMap,gn=new WeakMap,bn=new WeakMap,En=new WeakMap,wn=new WeakMap,_n=new WeakMap,kn=new WeakMap,An=new WeakMap,Ln=new WeakMap,Mn=new WeakMap,Tn=new WeakMap,Cn=new WeakMap,xn=new WeakMap,Sn=new WeakMap;const Rn=Wn;var Nn,In,Dn,Fn,Bn,qn,Hn,Kn,Vn,zn,Un,Gn,Qn,$n,Jn,Yn,Xn=function(e,t,i,n){return new(i||(i=Promise))((function(s,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,o)}l((n=n.apply(e,t||[])).next())}))},Zn=function(e,t,i,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,i):s?s.value=i:t.set(e,i),i},es=function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},ts=function(){function e(t,i){var n;r()(this,e),this.proxy=null,Nn.set(this,void 0),In.set(this,void 0),Dn.set(this,""),Fn.set(this,void 0),Bn.set(this,void 0),qn.set(this,void 0),Hn.set(this,{}),Kn.set(this,!1),Vn.set(this,void 0),zn.set(this,!1),Un.set(this,!1),Gn.set(this,!1),Qn.set(this,void 0),$n.set(this,[]),Jn.set(this,void 0),Yn.set(this,{controls:{alwaysVisible:!1,layers:{left:["play","time","volume"],middle:["progress"],right:["captions","settings","fullscreen"]}},defaultLevel:void 0,detachMenus:!1,forceNative:!0,height:0,hidePlayBtnTimer:350,labels:{auto:"Auto",captions:"CC/Subtitles",click:"Click to unmute",fullscreen:"Fullscreen",lang:{en:"English"},levels:"Quality Levels",live:"Live Broadcast",mediaLevels:"Change Quality",mute:"Mute",off:"Off",pause:"Pause",play:"Play",progressRail:"Time Rail",progressSlider:"Time Slider",settings:"Player Settings",speed:"Speed",speedNormal:"Normal",tap:"Tap to unmute",toggleCaptions:"Toggle Captions",unmute:"Unmute",volume:"Volume",volumeControl:"Volume Control",volumeSlider:"Volume Slider"},live:{showLabel:!0,showProgress:!1},media:{pauseOnClick:!1},mode:"responsive",onError:function(e){return console.error(e)},pauseOthers:!0,progress:{allowRewind:!0,allowSkip:!0,duration:0,showCurrentTimeOnly:!1},showLoaderOnInit:!1,startTime:0,startVolume:1,step:0,useDeviceVolume:!0,width:0}),Zn(this,Fn,t instanceof HTMLMediaElement?t:document.getElementById(t),"f"),es(this,Fn,"f")&&(Zn(this,Kn,es(this,Fn,"f").autoplay||!1,"f"),"string"==typeof i||Array.isArray(i)||this._mergeOptions(i),es(this,Fn,"f").volume=es(this,Qn,"f").startVolume||1,es(this,Qn,"f").ads&&es(this,Qn,"f").ads.src&&Zn(this,Bn,es(this,Qn,"f").ads.src,"f"),((null===(n=es(this,Qn,"f"))||void 0===n?void 0:n.startTime)||0)>0&&(es(this,Fn,"f").currentTime=es(this,Qn,"f").startTime||0),Zn(this,Vn,es(this,Fn,"f").volume,"f")),this._autoplay=this._autoplay.bind(this),this._enableKeyBindings=this._enableKeyBindings.bind(this)}return l()(e,[{key:"init",value:function(){return Xn(this,void 0,void 0,c().mark((function t(){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._isValid()){t.next=9;break}return this._wrapInstance(),t.next=4,this._prepareMedia();case 4:this._createPlayButton(),this._createUID(),this._createControls(),this._setEvents(),e.instances[this.id]=this;case 9:case"end":return t.stop()}}),t,this)})))}},{key:"load",value:function(){return Xn(this,void 0,void 0,c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(es(this,qn,"f")){e.next=4;break}return e.next=3,this._prepareMedia();case 3:return e.abrupt("return",es(this,qn,"f").load());case 4:return es(this,qn,"f").loaded=!1,e.abrupt("return",this.isMedia()?es(this,qn,"f").load():void 0);case 6:case"end":return e.stop()}}),e,this)})))}},{key:"play",value:function(){return Xn(this,void 0,void 0,c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(es(this,qn,"f").loaded){e.next=4;break}return e.next=3,es(this,qn,"f").load();case 3:es(this,qn,"f").loaded=!0;case 4:if(!es(this,In,"f")){e.next=9;break}return es(this,In,"f").playRequested=!0,e.next=8,es(this,In,"f").loadPromise;case 8:return e.abrupt("return",es(this,In,"f").play());case 9:return e.abrupt("return",es(this,qn,"f").play());case 10:case"end":return e.stop()}}),e,this)})))}},{key:"pause",value:function(){es(this,In,"f")?es(this,In,"f").pause():es(this,qn,"f").pause()}},{key:"stop",value:function(){this.pause(),es(this,qn,"f")&&(es(this,qn,"f").currentTime=0,this.src=[{src:"",type:"video/mp4"}])}},{key:"destroy",value:function(){var t,i=this;es(this,In,"f")&&(es(this,In,"f").pause(),es(this,In,"f").destroy()),es(this,Jn,"f")&&es(this,Jn,"f").destroy();var n=es(this,Fn,"f");es(this,qn,"f")&&es(this,qn,"f").destroy(),Object.keys(es(this,Hn,"f")).forEach((function(e){n.removeEventListener(e,es(i,Hn,"f")[e])})),this.getContainer().removeEventListener("keydown",this._enableKeyBindings),es(this,Kn,"f")&&!es(this,Gn,"f")&&_(es(this,Fn,"f"))&&n.removeEventListener("canplay",this._autoplay),es(this,Nn,"f")&&es(this,Nn,"f").destroy(),_(es(this,Fn,"f"))&&(this.playBtn&&this.playBtn.remove(),this.loader&&this.loader.remove()),(null===(t=es(this,Qn,"f"))||void 0===t?void 0:t.onError)&&es(this,Fn,"f").removeEventListener("playererror",es(this,Qn,"f").onError),n.controls=!0,n.setAttribute("id",es(this,Dn,"f")),n.removeAttribute("op-live__enabled"),n.removeAttribute("op-dvr__enabled");var s="fit"!==es(this,Qn,"f").mode||k(n)?n.parentElement:n.closest(".op-player__fit--wrapper");s&&s.parentNode&&s.parentNode.replaceChild(n,s),delete e.instances[es(this,Dn,"f")];var a=C("playerdestroyed");n.dispatchEvent(a)}},{key:"getContainer",value:function(){return es(this,Fn,"f").parentElement||es(this,Fn,"f")}},{key:"getControls",value:function(){return es(this,Nn,"f")}},{key:"getCustomControls",value:function(){return es(this,$n,"f")}},{key:"getElement",value:function(){return es(this,Fn,"f")}},{key:"getEvents",value:function(){return es(this,Hn,"f")}},{key:"getOptions",value:function(){return es(this,Qn,"f")}},{key:"activeElement",value:function(){return es(this,In,"f")&&es(this,In,"f").started()?es(this,In,"f"):es(this,qn,"f")}},{key:"isMedia",value:function(){return this.activeElement()instanceof Ji}},{key:"isAd",value:function(){return this.activeElement()instanceof Rn}},{key:"getMedia",value:function(){return es(this,qn,"f")}},{key:"getAd",value:function(){return es(this,In,"f")}},{key:"addCaptions",value:function(e){if(e.default)for(var t=es(this,Fn,"f").querySelectorAll("track"),i=0,n=t.length;i<n;i++)t[i].default=!1;var s=es(this,Fn,"f"),a=s.querySelector('track[srclang="'.concat(e.srclang,'"][kind="').concat(e.kind,'"]'));a?(a.src=e.src,a.label=e.label,a.default=e.default||!1):((a=document.createElement("track")).srclang=e.srclang,a.src=e.src,a.kind=e.kind,a.label=e.label,a.default=e.default||!1,s.appendChild(a));var r=C("controlschanged");s.dispatchEvent(r)}},{key:"addControl",value:function(e){e.custom=!0,e.type="button",es(this,$n,"f").push(e);var t=C("controlschanged");es(this,Fn,"f").dispatchEvent(t)}},{key:"addElement",value:function(e){e.custom=!0,es(this,$n,"f").push(e);var t=C("controlschanged");es(this,Fn,"f").dispatchEvent(t)}},{key:"removeControl",value:function(e){var t=this;es(this,$n,"f").forEach((function(i,n){i.id===e&&es(t,$n,"f").splice(n,1)}));var i=C("controlschanged");es(this,Fn,"f").dispatchEvent(i)}},{key:"_prepareMedia",value:function(){var t;return Xn(this,void 0,void 0,c().mark((function i(){var n,s;return c().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(i.prev=0,(null===(t=es(this,Qn,"f"))||void 0===t?void 0:t.onError)&&es(this,Fn,"f").addEventListener("playererror",es(this,Qn,"f").onError,w),es(this,Kn,"f")&&_(es(this,Fn,"f"))&&es(this,Fn,"f").addEventListener("canplay",this._autoplay,w),Zn(this,qn,new Ji(es(this,Fn,"f"),es(this,Qn,"f"),es(this,Kn,"f"),e.customMedia),"f"),n=es(this,Fn,"f").getAttribute("preload"),!es(this,Bn,"f")&&n&&"none"===n){i.next=9;break}return i.next=8,es(this,qn,"f").load();case 8:es(this,qn,"f").loaded=!0;case 9:!es(this,Kn,"f")&&es(this,Bn,"f")&&(s=es(this,Qn,"f")&&es(this,Qn,"f").ads?es(this,Qn,"f").ads:void 0,Zn(this,In,new Rn(this,es(this,Bn,"f"),!1,!1,s),"f")),i.next=15;break;case 12:i.prev=12,i.t0=i.catch(0),console.error(i.t0);case 15:case"end":return i.stop()}}),i,this,[[0,12]])})))}},{key:"enableDefaultPlayer",value:function(){var e=this,t=!0,i=0;this.proxy&&!this.proxy.paused&&(t=!1,i=this.proxy.currentTime,this.proxy.pause()),this.proxy=this,this.getElement().addEventListener("loadedmetadata",(function(){e.getMedia().currentTime=i,t||e.play()}))}},{key:"loadAd",value:function(e){return Xn(this,void 0,void 0,c().mark((function t(){var i,n;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{this.isAd()?(this.getAd().destroy(),this.getAd().src=e,this.getAd().loadedAd=!1,this.getAd().load()):(i=es(this,Qn,"f")&&es(this,Qn,"f").ads?es(this,Qn,"f").ads:void 0,n=!this.activeElement().paused||es(this,zn,"f"),Zn(this,In,new Rn(this,e,n,es(this,Un,"f"),i),"f"))}catch(e){console.error(e)}case 1:case"end":return t.stop()}}),t,this)})))}},{key:"src",get:function(){return es(this,qn,"f").src},set:function(e){var t=this;es(this,qn,"f")instanceof Ji?(es(this,qn,"f").mediaFiles=[],es(this,qn,"f").src=e):"string"==typeof e?es(this,Fn,"f").src=e:Array.isArray(e)?e.forEach((function(e){var i=document.createElement("source");i.src=e.src,i.type=e.type||ce(e.src,es(t,Fn,"f")),es(t,Fn,"f").appendChild(i)})):"object"===s()(e)&&(es(this,Fn,"f").src=e.src)}},{key:"id",get:function(){return es(this,Dn,"f")}},{key:"_isValid",value:function(){var e=es(this,Fn,"f");return e instanceof HTMLElement!=!1&&(!(!k(e)&&!_(e))&&!!e.classList.contains("op-player__media"))}},{key:"_wrapInstance",value:function(){var e=document.createElement("div");e.className="op-player op-player__keyboard--inactive",e.className+=k(es(this,Fn,"f"))?" op-player__audio":" op-player__video",e.tabIndex=0,es(this,Fn,"f").classList.remove("op-player"),es(this,Fn,"f").parentElement&&es(this,Fn,"f").parentElement.insertBefore(e,es(this,Fn,"f")),e.appendChild(es(this,Fn,"f"));var t=document.createElement("div");if(t.className="op-status",t.innerHTML="<span></span>",t.tabIndex=-1,t.setAttribute("aria-hidden","true"),_(es(this,Fn,"f"))&&es(this,Fn,"f").parentElement&&es(this,Fn,"f").parentElement.insertBefore(t,es(this,Fn,"f")),e.addEventListener("keydown",(function(){e.classList.contains("op-player__keyboard--inactive")&&e.classList.remove("op-player__keyboard--inactive")}),w),e.addEventListener("click",(function(){e.classList.contains("op-player__keyboard--inactive")||e.classList.add("op-player__keyboard--inactive")}),w),"fill"!==es(this,Qn,"f").mode||k(es(this,Fn,"f"))||p)if("fit"!==es(this,Qn,"f").mode||k(es(this,Fn,"f"))){var i="";if(es(this,Qn,"f").width){var n="number"==typeof es(this,Qn,"f").width?"".concat(es(this,Qn,"f").width,"px"):es(this,Qn,"f").width;i+="width: ".concat(n," !important;")}if(es(this,Qn,"f").height){var s="number"==typeof es(this,Qn,"f").height?"".concat(es(this,Qn,"f").height,"px"):es(this,Qn,"f").height;i+="height: ".concat(s," !important;")}i&&e.setAttribute("style",i)}else{var a=this.getContainer();if(a.parentElement){var r=document.createElement("div");r.className="op-player__fit--wrapper",r.tabIndex=0,a.parentElement.insertBefore(r,a),r.appendChild(a),a.classList.add("op-player__fit")}}else this.getContainer().classList.add("op-player__full")}},{key:"_createControls",value:function(){p&&_(es(this,Fn,"f"))&&this.getContainer().classList.add("op-player__ios--iphone"),Zn(this,Nn,new Dt(this),"f"),es(this,Nn,"f").create()}},{key:"_createUID",value:function(){if(es(this,Fn,"f").id)Zn(this,Dn,es(this,Fn,"f").id,"f"),es(this,Fn,"f").removeAttribute("id");else{var e=crypto,t="function"==typeof e.getRandomBytes?e.getRandomBytes:e.getRandomValues;Zn(this,Dn,"op_".concat(t(new Uint32Array(1))[0].toString(36).substr(2,9)),"f")}es(this,Fn,"f").parentElement&&(es(this,Fn,"f").parentElement.id=es(this,Dn,"f"))}},{key:"_createPlayButton",value:function(){var e,t,i=this;k(es(this,Fn,"f"))||(this.playBtn=document.createElement("button"),this.playBtn.className="op-player__play",this.playBtn.tabIndex=0,this.playBtn.title=(null===(e=es(this,Qn,"f").labels)||void 0===e?void 0:e.play)||"",this.playBtn.innerHTML="<span>".concat((null===(t=es(this,Qn,"f").labels)||void 0===t?void 0:t.play)||"","</span>"),this.playBtn.setAttribute("aria-pressed","false"),this.playBtn.setAttribute("aria-hidden","false"),this.loader=document.createElement("span"),this.loader.className="op-player__loader",this.loader.tabIndex=-1,this.loader.setAttribute("aria-hidden","true"),es(this,Fn,"f").parentElement&&(es(this,Fn,"f").parentElement.insertBefore(this.loader,es(this,Fn,"f")),es(this,Fn,"f").parentElement.insertBefore(this.playBtn,es(this,Fn,"f"))),this.playBtn.addEventListener("click",(function(){es(i,In,"f")&&(es(i,In,"f").playRequested=i.activeElement().paused),i.activeElement().paused?i.activeElement().play():i.activeElement().pause()}),w))}},{key:"_setEvents",value:function(){var e=this;if(_(es(this,Fn,"f"))){es(this,Hn,"f").loadedmetadata=function(){var t=e.activeElement();!es(e,Qn,"f").showLoaderOnInit||m||y?(e.loader.setAttribute("aria-hidden","true"),e.playBtn.setAttribute("aria-hidden","false")):(e.loader.setAttribute("aria-hidden","false"),e.playBtn.setAttribute("aria-hidden","true")),t.paused&&(e.playBtn.classList.remove("op-player__play--paused"),e.playBtn.setAttribute("aria-pressed","false"))},es(this,Hn,"f").waiting=function(){e.playBtn.setAttribute("aria-hidden","true"),e.loader.setAttribute("aria-hidden","false")},es(this,Hn,"f").seeking=function(){var t=e.activeElement();e.playBtn.setAttribute("aria-hidden","true"),e.loader.setAttribute("aria-hidden",t instanceof Ji?"false":"true")},es(this,Hn,"f").seeked=function(){var t=e.activeElement();0===Math.round(t.currentTime)?(e.playBtn.setAttribute("aria-hidden","true"),e.loader.setAttribute("aria-hidden","false")):(e.playBtn.setAttribute("aria-hidden",t instanceof Ji?"false":"true"),e.loader.setAttribute("aria-hidden","true"))},es(this,Hn,"f").play=function(){var t;e.playBtn.classList.add("op-player__play--paused"),e.playBtn.title=(null===(t=es(e,Qn,"f").labels)||void 0===t?void 0:t.pause)||"",e.loader.setAttribute("aria-hidden","true"),es(e,Qn,"f").showLoaderOnInit?e.playBtn.setAttribute("aria-hidden","true"):setTimeout((function(){e.playBtn.setAttribute("aria-hidden","true")}),es(e,Qn,"f").hidePlayBtnTimer)},es(this,Hn,"f").playing=function(){e.loader.setAttribute("aria-hidden","true"),e.playBtn.setAttribute("aria-hidden","true")},es(this,Hn,"f").pause=function(){var t,i=e.activeElement();e.playBtn.classList.remove("op-player__play--paused"),e.playBtn.title=(null===(t=es(e,Qn,"f").labels)||void 0===t?void 0:t.play)||"",es(e,Qn,"f").showLoaderOnInit&&0===Math.round(i.currentTime)?(e.playBtn.setAttribute("aria-hidden","true"),e.loader.setAttribute("aria-hidden","false")):(e.playBtn.setAttribute("aria-hidden","false"),e.loader.setAttribute("aria-hidden","true"))},es(this,Hn,"f").ended=function(){e.loader.setAttribute("aria-hidden","true"),e.playBtn.setAttribute("aria-hidden","true")};var t=!1;es(this,Hn,"f").timeupdate=function(){if(es(e,Fn,"f").loop&&e.isMedia()&&es(e,In,"f")){var i=e.getMedia(),n=i.duration-i.currentTime;if(n>0&&n<=.25&&!t){t=!0;var s=C("ended");es(e,Fn,"f").dispatchEvent(s)}else 0===n&&(t=!1)}}}Object.keys(es(this,Hn,"f")).forEach((function(t){es(e,Fn,"f").addEventListener(t,es(e,Hn,"f")[t],w)})),this.getContainer().addEventListener("keydown",this._enableKeyBindings,w)}},{key:"_autoplay",value:function(){var e,t,i,n,s,a,r=this;es(this,Gn,"f")||(Zn(this,Gn,!0,"f"),es(this,Fn,"f").removeEventListener("canplay",this._autoplay),e=es(this,Fn,"f"),t=es(this,Vn,"f"),i=function(e){Zn(r,zn,e,"f")},n=function(e){Zn(r,Un,e,"f")},s=function(){var e,t;if(es(r,Un,"f")){r.activeElement().muted=!0,r.activeElement().volume=0;var i=C("volumechange");es(r,Fn,"f").dispatchEvent(i);var n=document.createElement("div"),s=m||y?null===(e=es(r,Qn,"f").labels)||void 0===e?void 0:e.tap:null===(t=es(r,Qn,"f").labels)||void 0===t?void 0:t.click;n.className="op-player__unmute",n.innerHTML="<span>".concat(s,"</span>"),n.tabIndex=0,n.addEventListener("click",(function(){r.activeElement().muted=!1,r.activeElement().volume=es(r,Vn,"f");var e=C("volumechange");es(r,Fn,"f").dispatchEvent(e),n.remove()}),w);var a=r.getContainer();a.insertBefore(n,a.firstChild)}else r.activeElement().muted=es(r,Fn,"f").muted,r.activeElement().volume=es(r,Vn,"f");if(es(r,Bn,"f")){var o=es(r,Qn,"f")&&es(r,Qn,"f").ads?es(r,Qn,"f").ads:void 0;Zn(r,In,new Rn(r,es(r,Bn,"f"),es(r,zn,"f"),es(r,Un,"f"),o),"f")}else(es(r,zn,"f")||es(r,Un,"f"))&&r.play()},void 0!==(a=e.play())?a.then((function(){e.pause(),i(!0),n(!1),s()})).catch((function(){e.volume=0,e.muted=!0,e.play().then((function(){e.pause(),i(!0),n(!0),s()})).catch((function(){e.volume=t,e.muted=!1,i(!1),n(!1),s()}))})):(i(!e.paused||"Promise"in window&&a instanceof Promise),e.pause(),n(!1),s()))}},{key:"_mergeOptions",value:function(e){var i=this,n=Object.assign({},e||{});if(Zn(this,Qn,Object.assign(Object.assign({},es(this,Yn,"f")),n),"f"),Object.keys(es(this,Yn,"f")).filter((function(e){return"labels"!==e&&"object"===s()(es(i,Yn,"f")[e])})).forEach((function(e){var t=n[e]||{};t&&Object.keys(t).length&&(es(i,Qn,"f")[e]=Object.assign(Object.assign({},es(i,Yn,"f")[e]),t))})),n.labels){var a=n.labels?Object.keys(n.labels):[],r={};a.forEach((function(e){var i=n.labels?n.labels[e]:null;i&&"object"===s()(i)&&"lang"===e?Object.keys(i).forEach((function(e){var n=i?i[e]:null;n&&(r=Object.assign(Object.assign({},r),{lang:Object.assign(Object.assign({},r.lang),t()({},e,M(n)))}))})):i&&(r=Object.assign(Object.assign({},r),t()({},e,M(i))))})),es(this,Qn,"f").labels=Object.assign(Object.assign({},es(this,Yn,"f").labels),r)}}},{key:"_enableKeyBindings",value:function(e){var t,i,n=e.which||e.keyCode||0,s=this.activeElement(),a=this.isAd(),r=null===(t=null===document||void 0===document?void 0:document.activeElement)||void 0===t?void 0:t.classList.contains("op-player");switch(n){case 13:case 32:case 75:!r||13!==n&&32!==n?75===n&&(s.paused?s.play():s.pause()):s.paused?s.play():s.pause(),e.preventDefault(),e.stopPropagation();break;case 35:a||s.duration===1/0||(s.currentTime=s.duration,e.preventDefault(),e.stopPropagation());break;case 36:a||(s.currentTime=0,e.preventDefault(),e.stopPropagation());break;case 37:case 39:case 74:case 76:if(!a&&s.duration!==1/0){var o=5,l=this.getOptions().step;l?o=74===n||76===n?2*l:l:74!==n&&76!==n||(o=10);var f=s.duration!==1/0?o:(null===(i=this.getOptions().progress)||void 0===i?void 0:i.duration)||0;s.currentTime+=37===n||74===n?-1*f:f,s.currentTime<0?s.currentTime=0:s.currentTime>=s.duration&&(s.currentTime=s.duration),e.preventDefault(),e.stopPropagation()}break;case 38:case 40:var c=38===n?Math.min(s.volume+.1,1):Math.max(s.volume-.1,0);s.volume=c,s.muted=!(c>0),e.preventDefault(),e.stopPropagation();break;case 70:_(es(this,Fn,"f"))&&!e.ctrlKey&&(Zn(this,Jn,new re(this,"",""),"f"),void 0!==es(this,Jn,"f").fullScreenEnabled&&(es(this,Jn,"f").toggleFullscreen(),e.preventDefault(),e.stopPropagation()));break;case 77:s.muted=!s.muted,s.muted?s.volume=0:s.volume=es(this,Vn,"f"),e.preventDefault(),e.stopPropagation();break;case 188:case 190:if(!a&&e.shiftKey){var u=s;u.playbackRate=188===n?Math.max(u.playbackRate-.25,.25):Math.min(u.playbackRate+.25,2);var d=this.getContainer().querySelector(".op-status>span");d&&(d.textContent="".concat(u.playbackRate,"x"),d.parentElement&&d.parentElement.setAttribute("aria-hidden","false"),setTimeout((function(){d.parentElement&&d.parentElement.setAttribute("aria-hidden","true")}),500));var h=C("controlschanged");dispatchEvent(h),e.preventDefault(),e.stopPropagation()}else!a&&s.paused&&(s.currentTime+=.04*(188===n?-1:1),e.preventDefault(),e.stopPropagation())}}}],[{key:"init",value:function(){e.instances={};for(var t=document.querySelectorAll("video.op-player, audio.op-player"),i=0,n=t.length;i<n;i++){var s=t[i],a=s.getAttribute("data-op-settings");new e(s,a?JSON.parse(a):{}).init()}}},{key:"addMedia",value:function(t,i,n,s){e.customMedia.media[i]=s,e.customMedia.optionsKey[i]=t,e.customMedia.rules.push(n)}}]),e}();Nn=new WeakMap,In=new WeakMap,Dn=new WeakMap,Fn=new WeakMap,Bn=new WeakMap,qn=new WeakMap,Hn=new WeakMap,Kn=new WeakMap,Vn=new WeakMap,zn=new WeakMap,Un=new WeakMap,Gn=new WeakMap,Qn=new WeakMap,$n=new WeakMap,Jn=new WeakMap,Yn=new WeakMap,ts.instances={},ts.customMedia={media:{},optionsKey:{},rules:[]};const is=ts;"undefined"!=typeof window&&(window.OpenPlayer=ts,window.OpenPlayerJS=ts,ts.init())})(),n=n.default})()));
>>>>>>> master
