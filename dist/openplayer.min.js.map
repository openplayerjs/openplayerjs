{"version":3,"file":"openplayer.min.js","sources":["../src/utils/constants.ts","../src/utils/general.ts","../src/controls/captions.ts","../src/controls/fullscreen.ts","../src/utils/media.ts","../src/controls/levels.ts","../src/controls/play.ts","../src/utils/time.ts","../src/controls/progress.ts","../src/controls/settings.ts","../src/controls/time.ts","../src/controls/volume.ts","../src/controls.ts","../src/media/native.ts","../src/media/dash.ts","../src/media/flv.ts","../src/media/hls.ts","../src/media/html5.ts","../src/media.ts","../src/media/ads.ts","../src/player.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/ban-ts-comment */\n/* eslint-disable @typescript-eslint/no-explicit-any */\ndeclare global {\n    interface Window {\n        MSStream: any;\n        WebKitMediaSource: any;\n        WebKitSourceBuffer: any;\n    }\n}\n\nexport const NAV: Navigator | null = typeof window !== 'undefined' ? window.navigator : null;\n\nexport const UA: string | null = NAV ? NAV.userAgent.toLowerCase() : null;\n\nexport const IS_IPAD = UA ? /ipad/i.test(UA) && !window.MSStream : false;\n\nexport const IS_IPHONE = UA ? /iphone/i.test(UA) && !window.MSStream : false;\n\nexport const IS_IPOD = UA ? /ipod/i.test(UA) && !window.MSStream : false;\n\nexport const IS_IOS = UA ? /ipad|iphone|ipod/i.test(UA) && !window.MSStream : false;\n\nexport const IS_ANDROID = UA ? /android/i.test(UA) : false;\n\nexport const IS_EDGE = NAV ? 'msLaunchUri' in NAV && !('documentMode' in document) : false;\n\nexport const IS_CHROME = UA ? /chrome/i.test(UA) : false;\n\nexport const IS_FIREFOX = UA ? /firefox/i.test(UA) : false;\n\nexport const IS_SAFARI = UA ? /safari/i.test(UA) && !IS_CHROME : false;\n\nexport const IS_STOCK_ANDROID = UA ? /^mozilla\\/\\d+\\.\\d+\\s\\(linux;\\su;/i.test(UA) : false;\n\nexport const HAS_MSE = typeof window !== 'undefined' ? 'MediaSource' in window : false;\n\n// @see https://github.com/video-dev/hls.js/blob/master/src/is-supported.js\nexport const SUPPORTS_HLS = (): boolean => {\n    if (typeof window === 'undefined') {\n        return false;\n    }\n    const mediaSource = window.MediaSource || window.WebKitMediaSource;\n    const sourceBuffer = window.SourceBuffer || window.WebKitSourceBuffer;\n    const isTypeSupported =\n        mediaSource &&\n        typeof mediaSource.isTypeSupported === 'function' &&\n        mediaSource.isTypeSupported('video/mp4; codecs=\"avc1.42E01E,mp4a.40.2\"');\n\n    const sourceBufferValidAPI =\n        !sourceBuffer ||\n        (sourceBuffer.prototype &&\n            typeof sourceBuffer.prototype.appendBuffer === 'function' &&\n            typeof sourceBuffer.prototype.remove === 'function');\n\n    // Safari is still an exception since it has built-in HLS support; currently HLS.js\n    // is still in beta to support Safari\n    return !!isTypeSupported && !!sourceBufferValidAPI && !IS_SAFARI;\n};\n\nexport const DVR_THRESHOLD = 120;\n\nexport const EVENT_OPTIONS = { passive: false };\n","export function getAbsoluteUrl(url: string): string {\n    const a: HTMLAnchorElement = document.createElement('a');\n    a.href = url;\n    return a.href;\n}\n\nexport function isVideo(element: Element): boolean {\n    return element.tagName.toLowerCase() === 'video';\n}\n\nexport function isAudio(element: Element): boolean {\n    return element.tagName.toLowerCase() === 'audio';\n}\n\nexport function loadScript(url: string): Promise<void> {\n    return new Promise<void>((resolve, reject) => {\n        const script = document.createElement('script');\n        script.src = url;\n        script.async = true;\n        script.onload = (): void => {\n            script.remove();\n            resolve();\n        };\n        script.onerror = (): void => {\n            script.remove();\n            reject(new Error(`${url} could not be loaded`));\n        };\n        if (document.head) {\n            document.head.appendChild(script);\n        }\n    });\n}\n\nexport function offset(el: HTMLElement): { left: number; top: number } {\n    const rect = el.getBoundingClientRect();\n    return {\n        left: rect.left + (window.pageXOffset || document.documentElement.scrollLeft),\n        top: rect.top + (window.pageYOffset || document.documentElement.scrollTop),\n    };\n}\n\nexport function sanitize(html: string, plainText = true): string {\n    const parser = new DOMParser();\n    const content = parser.parseFromString(html, 'text/html');\n    const formattedContent = content.body || document.createElement('body');\n\n    const scripts = formattedContent.querySelectorAll('script');\n    for (let i = 0, total = scripts.length; i < total; i++) {\n        scripts[i].remove();\n    }\n\n    const clean = (element: Element): void => {\n        const nodes = element.children;\n        for (let i = 0, total = nodes.length; i < total; i++) {\n            const node = nodes[i];\n            const { attributes } = node;\n            for (let j = 0, t = attributes.length; j < t; j++) {\n                const { name, value } = attributes[j];\n                const val = value.replace(/\\s+/g, '').toLowerCase();\n                if (['src', 'href', 'xlink:href'].includes(name)) {\n                    // eslint-disable-next-line no-script-url\n                    if (val.includes('javascript:') || val.includes('data:')) {\n                        node.removeAttribute(name);\n                    }\n                }\n                if (name.startsWith('on')) {\n                    node.removeAttribute(name);\n                }\n            }\n            clean(node);\n        }\n    };\n\n    clean(formattedContent);\n    return plainText ? (formattedContent.textContent || '').replace(/\\s{2,}/g, '') : formattedContent.innerHTML;\n}\n\nexport function isXml(input: string): boolean {\n    let parsedXml;\n\n    if (typeof DOMParser !== 'undefined') {\n        parsedXml = (text: string): Document => new DOMParser().parseFromString(text, 'text/xml');\n    } else {\n        return false;\n    }\n\n    try {\n        const response = parsedXml(input);\n        if (response.getElementsByTagName('parsererror').length > 0) {\n            return false;\n        }\n    } catch (e) {\n        return false;\n    }\n    return true;\n}\n\nexport function isJson(item: unknown): boolean {\n    item = typeof item !== 'string' ? JSON.stringify(item) : item;\n    try {\n        item = JSON.parse(item as string);\n    } catch (e) {\n        return false;\n    }\n\n    if (typeof item === 'object' && item !== null) {\n        return true;\n    }\n\n    return false;\n}\n\nexport function addEvent(event: string, details?: CustomEventInit): CustomEvent {\n    let detail = {};\n    if (details && details.detail) {\n        detail = { detail: details.detail };\n    }\n    return new CustomEvent(event, detail);\n}\n","import { EventsList, PlayerComponent, SettingsItem, SettingsSubItem } from '../interfaces';\nimport Player from '../player';\nimport { EVENT_OPTIONS, IS_ANDROID, IS_IOS } from '../utils/constants';\nimport { addEvent } from '../utils/general';\n\nclass Captions implements PlayerComponent {\n    #player: Player;\n\n    #button: HTMLButtonElement;\n\n    #captions: HTMLDivElement;\n\n    #menu: HTMLDivElement;\n\n    #events: EventsList = {\n        button: {},\n        global: {},\n        media: {},\n    };\n\n    #mediaTrackList: TextTrack[];\n\n    #hasTracks: boolean;\n\n    #currentTrack?: TextTrack;\n\n    #default = 'off';\n\n    #controlPosition: string;\n\n    #controlLayer: string;\n\n    constructor(player: Player, position: string, layer: string) {\n        this.#player = player;\n        this.#controlPosition = position;\n        this.#controlLayer = layer;\n\n        this._formatMenuItems = this._formatMenuItems.bind(this);\n        this._setDefaultTrack = this._setDefaultTrack.bind(this);\n        this._showCaptions = this._showCaptions.bind(this);\n        this._hideCaptions = this._hideCaptions.bind(this);\n    }\n\n    custom?: boolean | undefined;\n\n    create(): void {\n        const { textTracks } = this.#player.getElement();\n        const { labels, detachMenus } = this.#player.getOptions();\n\n        this.#mediaTrackList = Object.keys(textTracks)\n            .map((k) => textTracks[Number(k)])\n            .filter((el) => ['subtitles', 'captions'].includes(el.kind) && el.language);\n\n        this.#hasTracks = !!this.#mediaTrackList.length;\n\n        if (!this.#hasTracks) {\n            return;\n        }\n\n        this.#button = document.createElement('button');\n        this.#button.className = `op-controls__captions op-control__${this.#controlPosition}`;\n        this.#button.tabIndex = 0;\n        this.#button.title = labels?.toggleCaptions || '';\n        this.#button.setAttribute('aria-controls', this.#player.id);\n        this.#button.setAttribute('aria-pressed', 'false');\n        this.#button.setAttribute('aria-label', labels?.toggleCaptions || '');\n        this.#button.setAttribute('data-active-captions', 'off');\n\n        // Build container to display captions to mitigate cross browser inconsistencies\n        this.#captions = document.createElement('div');\n        this.#captions.className = 'op-captions';\n        const target = this.#player.getContainer();\n        target.insertBefore(this.#captions, target.firstChild);\n\n        if (detachMenus) {\n            this.#button.classList.add('op-control--no-hover');\n            this.#menu = document.createElement('div');\n            this.#menu.className = 'op-settings op-captions__menu';\n            this.#menu.setAttribute('aria-hidden', 'true');\n            this.#menu.innerHTML = `<div class=\"op-settings__menu\" role=\"menu\" id=\"menu-item-captions\">\n                <div class=\"op-settings__submenu-item\" tabindex=\"0\" role=\"menuitemradio\" aria-checked=\"${\n                    this.#default === 'off' ? 'true' : 'false'\n                }\">\n                    <div class=\"op-settings__submenu-label op-subtitles__option\" data-value=\"captions-off\">${\n                        labels?.off\n                    }</div>\n                </div>\n            </div>`;\n\n            const itemContainer = document.createElement('div');\n            itemContainer.className = `op-controls__container op-control__${this.#controlPosition}`;\n            itemContainer.append(this.#button, this.#menu);\n            this.#player.getControls().getLayer(this.#controlLayer).append(itemContainer);\n\n            for (const track of this.#mediaTrackList) {\n                const item = document.createElement('div');\n                const label = labels?.lang?.[track.language] || null;\n                item.className = 'op-settings__submenu-item';\n                item.tabIndex = 0;\n                item.setAttribute('role', 'menuitemradio');\n                item.setAttribute('aria-checked', this.#default === track.language ? 'true' : 'false');\n                item.innerHTML = `<div class=\"op-settings__submenu-label op-subtitles__option\"\n                    data-value=\"captions-${track.language}\">\n                    ${label || track.label}\n                </div>`;\n                this.#menu.append(item);\n            }\n        } else {\n            this.#player.getControls().getLayer(this.#controlLayer).append(this.#button);\n        }\n\n        // Show/hide captions\n        this.#events.button.click = (e: Event): void => {\n            const button = e.target as HTMLDivElement;\n            if (detachMenus) {\n                const menus = this.#player.getContainer().querySelectorAll('.op-settings');\n                for (const menuItem of Array.from(menus)) {\n                    if (menuItem !== this.#menu) {\n                        menuItem.setAttribute('aria-hidden', 'true');\n                    }\n                }\n                if (this.#menu.getAttribute('aria-hidden') === 'true') {\n                    this.#menu.setAttribute('aria-hidden', 'false');\n                } else {\n                    this.#menu.setAttribute('aria-hidden', 'true');\n                }\n            } else {\n                button.setAttribute('aria-pressed', 'true');\n                if (button.classList.contains('op-controls__captions--on')) {\n                    button.classList.remove('op-controls__captions--on');\n                    button.setAttribute('data-active-captions', 'off');\n                    this._hideCaptions();\n                } else {\n                    button.classList.add('op-controls__captions--on');\n                    button.setAttribute('data-active-captions', this.#currentTrack?.language || 'off');\n                    this._showCaptions();\n                }\n\n                for (const track of this.#mediaTrackList) {\n                    track.mode = button.getAttribute('data-active-captions') === track.language ? 'showing' : 'hidden';\n                }\n            }\n        };\n\n        this.#events.button.mouseover = (): void => {\n            if (!IS_IOS && !IS_ANDROID && detachMenus) {\n                const menus = this.#player.getContainer().querySelectorAll('.op-settings');\n                for (let i = 0, total = menus.length; i < total; ++i) {\n                    if (menus[i] !== this.#menu) {\n                        menus[i].setAttribute('aria-hidden', 'true');\n                    }\n                }\n                if (this.#menu.getAttribute('aria-hidden') === 'true') {\n                    this.#menu.setAttribute('aria-hidden', 'false');\n                }\n            }\n        };\n        this.#events.button.mouseout = (): void => {\n            if (!IS_IOS && !IS_ANDROID && detachMenus) {\n                const menus = this.#player.getContainer().querySelectorAll('.op-settings');\n                for (let i = 0, total = menus.length; i < total; ++i) {\n                    menus[i].setAttribute('aria-hidden', 'true');\n                }\n                if (this.#menu.getAttribute('aria-hidden') === 'false') {\n                    this.#menu.setAttribute('aria-hidden', 'true');\n                }\n            }\n        };\n\n        this.#button.addEventListener('click', this.#events.button.click, EVENT_OPTIONS);\n\n        this.#events.global.click = (e: Event): void => {\n            const option = e.target as HTMLElement;\n            if (option.closest(`#${this.#player.id}`) && option.classList.contains('op-subtitles__option')) {\n                const language = option.getAttribute('data-value')!.replace('captions-', '');\n\n                this._hideCaptions();\n\n                if (language === 'off') {\n                    this.#currentTrack = undefined;\n                }\n\n                for (const track of this.#mediaTrackList) {\n                    track.mode = track.language === language ? 'showing' : 'hidden';\n                    if (track.language === language) {\n                        this.#currentTrack = track;\n                        this._showCaptions();\n                    }\n                }\n\n                if (detachMenus) {\n                    if (this.#button.classList.contains('op-controls__captions--on')) {\n                        this.#button.classList.remove('op-controls__captions--on');\n                        this.#button.setAttribute('data-active-captions', 'off');\n                    } else {\n                        this.#button.classList.add('op-controls__captions--on');\n                        this.#button.setAttribute('data-active-captions', language);\n                    }\n\n                    const captions = this.#menu.querySelectorAll('.op-settings__submenu-item');\n                    for (const caption of Array.from(captions)) {\n                        caption.setAttribute('aria-checked', 'false');\n                    }\n                    option.parentElement!.setAttribute('aria-checked', 'true');\n                    this.#menu.setAttribute('aria-hidden', 'false');\n                } else {\n                    this.#button.setAttribute('data-active-captions', language);\n                }\n                const event = addEvent('captionschanged');\n                this.#player.getElement().dispatchEvent(event);\n            }\n        };\n\n        this.#events.global.cuechange = (e: Event): void => {\n            this._hideCaptions();\n            const t = e.target as TextTrack;\n            if (t.mode !== 'showing' || this.#button.getAttribute('data-active-captions') === 'off') {\n                return;\n            }\n\n            if (t.activeCues && t.activeCues?.length > 0) {\n                this._showCaptions();\n            }\n        };\n\n        if (detachMenus) {\n            this.#button.addEventListener('mouseover', this.#events.button.mouseover, EVENT_OPTIONS);\n            this.#menu.addEventListener('mouseover', this.#events.button.mouseover, EVENT_OPTIONS);\n            this.#menu.addEventListener('mouseout', this.#events.button.mouseout, EVENT_OPTIONS);\n            this.#player.getElement().addEventListener('controlshidden', this.#events.button.mouseout, EVENT_OPTIONS);\n        }\n\n        document.addEventListener('click', this.#events.global.click, EVENT_OPTIONS);\n\n        for (const track of this.#mediaTrackList) {\n            track.mode = track.mode !== 'showing' ? 'hidden' : track.mode;\n            track.addEventListener('cuechange', this.#events.global.cuechange, EVENT_OPTIONS);\n        }\n\n        const targetTrack = this.#player\n            .getElement()\n            .querySelector('track:is([kind=\"subtitles\"],[kind=\"captions\"])[default]') as HTMLTrackElement;\n        if (targetTrack) {\n            const matchTrack = this.#mediaTrackList.find((el) => el.language === targetTrack.srclang);\n            if (matchTrack) {\n                this._setDefaultTrack(matchTrack);\n            }\n        }\n    }\n\n    destroy(): void {\n        const { detachMenus } = this.#player.getOptions();\n\n        if (!this.#hasTracks) {\n            return;\n        }\n\n        for (const track of this.#mediaTrackList) {\n            track.removeEventListener('cuechange', this.#events.global.cuechange);\n        }\n\n        document.removeEventListener('click', this.#events.global.click);\n        this.#button.removeEventListener('click', this.#events.button.click);\n        if (detachMenus) {\n            this.#button.removeEventListener('mouseover', this.#events.button.mouseover);\n            this.#menu.removeEventListener('mouseover', this.#events.button.mouseover);\n            this.#menu.removeEventListener('mouseout', this.#events.button.mouseout);\n            this.#player.getElement().removeEventListener('controlshidden', this.#events.button.mouseout);\n            this.#menu.remove();\n        }\n        this.#button.remove();\n    }\n\n    addSettings(): SettingsItem | unknown {\n        const { detachMenus, labels } = this.#player.getOptions();\n        if (detachMenus || this.#mediaTrackList.length <= 1) {\n            return {};\n        }\n        const subitems = this._formatMenuItems();\n\n        // Avoid implementing submenu for captions if only 2 options were available\n        return subitems.length > 2\n            ? {\n                  className: 'op-subtitles__option',\n                  default: this.#default || 'off',\n                  key: 'captions',\n                  name: labels?.captions || '',\n                  subitems,\n              }\n            : {};\n    }\n\n    private _formatMenuItems(): SettingsSubItem[] {\n        const { labels, detachMenus } = this.#player.getOptions();\n        if (this.#mediaTrackList.length <= 1 && !detachMenus) {\n            return [];\n        }\n\n        let items = [{ key: 'off', label: labels?.off || '' }];\n        for (const track of this.#mediaTrackList) {\n            const label = labels?.lang ? labels.lang[track.language] : null;\n            // Override language item if duplicated when passing list of items\n            items = items.filter((el) => el.key !== track.language);\n            items.push({ key: track.language, label: label || track.label });\n        }\n\n        return items;\n    }\n\n    private _setDefaultTrack(track: TextTrack): void {\n        track.mode = 'showing';\n        this.#default = track.language;\n        this.#button.setAttribute('data-active-captions', this.#default);\n        this.#button.classList.add('op-controls__captions--on');\n        this.#captions.classList.add('op-captions--on');\n        this.#currentTrack = track;\n\n        const options = document.querySelectorAll('.op-settings__submenu-item') || [];\n        for (const option of Array.from(options)) {\n            option.setAttribute('aria-checked', 'false');\n        }\n\n        document\n            .querySelector(`.op-subtitles__option[data-value=\"captions-${track.language}\"]`)\n            ?.parentElement?.setAttribute('aria-checked', 'true');\n    }\n    private _showCaptions() {\n        for (const cue of Array.from(this.#currentTrack?.activeCues || [])) {\n            const content = (cue as VTTCue)?.text || '';\n            if (content && this.#captions) {\n                const caption = document.createElement('span');\n                caption.innerHTML = content;\n                this.#captions.prepend(caption);\n                this.#captions.classList.add('op-captions--on');\n            } else {\n                this._hideCaptions();\n            }\n        }\n    }\n\n    private _hideCaptions() {\n        while (this.#captions?.lastChild) {\n            this.#captions.removeChild(this.#captions.lastChild);\n        }\n    }\n}\n\nexport default Captions;\n","import { FullscreenDocument, FullscreenElement, PlayerComponent } from '../interfaces';\nimport Player from '../player';\nimport { EVENT_OPTIONS, IS_ANDROID, IS_IPHONE } from '../utils/constants';\n\nclass Fullscreen implements PlayerComponent {\n    fullScreenEnabled: boolean;\n\n    #player: Player;\n\n    #isFullscreen: boolean;\n\n    #button: HTMLButtonElement;\n\n    #fullscreenEvents: string[] = [];\n\n    #fullscreenWidth = 0;\n\n    #fullscreenHeight = 0;\n\n    #clickEvent: () => void;\n\n    #controlPosition: string;\n\n    #controlLayer: string;\n\n    constructor(player: Player, position: string, layer: string) {\n        this.#player = player;\n        this.#controlPosition = position;\n        this.#controlLayer = layer;\n        this.#isFullscreen = document.body.classList.contains('op-fullscreen__on');\n\n        const target = document as FullscreenDocument;\n\n        // Check if fullscreen is supported\n        this.fullScreenEnabled = !!(\n            target.fullscreenEnabled ||\n            target.mozFullScreenEnabled ||\n            target.msFullscreenEnabled ||\n            target.webkitSupportsFullscreen ||\n            target.webkitFullscreenEnabled ||\n            (document.createElement('video') as FullscreenElement).webkitRequestFullScreen\n        );\n\n        this._enterSpaceKeyEvent = this._enterSpaceKeyEvent.bind(this);\n        this._resize = this._resize.bind(this);\n        this._fullscreenChange = this._fullscreenChange.bind(this);\n        this._setFullscreen = this._setFullscreen.bind(this);\n        this._unsetFullscreen = this._unsetFullscreen.bind(this);\n\n        this.#fullscreenEvents = [\n            'fullscreenchange',\n            'mozfullscreenchange',\n            'webkitfullscreenchange',\n            'msfullscreenchange',\n        ];\n\n        this.#fullscreenEvents.forEach((event) => {\n            document.addEventListener(event, this._fullscreenChange, EVENT_OPTIONS);\n        });\n        this._setFullscreenData(false);\n\n        this.#player.getContainer().addEventListener('keydown', this._enterSpaceKeyEvent, EVENT_OPTIONS);\n\n        // Since iPhone still doesn't accept the regular Fullscreen API, use the following events\n        if (IS_IPHONE) {\n            this.#player.getElement().addEventListener('webkitbeginfullscreen', this._setFullscreen, EVENT_OPTIONS);\n            this.#player.getElement().addEventListener('webkitendfullscreen', this._unsetFullscreen, EVENT_OPTIONS);\n        }\n    }\n\n    create(): void {\n        const { labels } = this.#player.getOptions();\n        this.#button = document.createElement('button');\n        this.#button.type = 'button';\n        this.#button.className = `op-controls__fullscreen op-control__${this.#controlPosition}`;\n        this.#button.tabIndex = 0;\n        this.#button.title = labels?.fullscreen || '';\n        this.#button.setAttribute('aria-controls', this.#player.id);\n        this.#button.setAttribute('aria-pressed', 'false');\n        this.#button.setAttribute('aria-label', labels?.fullscreen || '');\n\n        this.#clickEvent = (): void => {\n            this.#button.setAttribute('aria-pressed', 'true');\n            this.toggleFullscreen();\n        };\n\n        this.#clickEvent = this.#clickEvent.bind(this);\n\n        this.#button.addEventListener('click', this.#clickEvent, EVENT_OPTIONS);\n\n        this.#player.getControls().getLayer(this.#controlLayer).appendChild(this.#button);\n    }\n\n    destroy(): void {\n        this.#player.getContainer().removeEventListener('keydown', this._enterSpaceKeyEvent);\n\n        this.#fullscreenEvents.forEach((event) => {\n            document.removeEventListener(event, this._fullscreenChange);\n        });\n        if (IS_IPHONE) {\n            this.#player.getElement().removeEventListener('webkitbeginfullscreen', this._setFullscreen);\n            this.#player.getElement().removeEventListener('webkitendfullscreen', this._unsetFullscreen);\n        }\n        this.#button.removeEventListener('click', this.#clickEvent);\n        this.#button.remove();\n    }\n\n    toggleFullscreen(): void {\n        // If browser does not support native Fullscreen API, player will adjust the video\n        // and its parent container's dimensions via width and height styles.\n        if (this.#isFullscreen) {\n            const target = document as FullscreenDocument;\n            if (target.exitFullscreen) {\n                target.exitFullscreen();\n            } else if (target.mozCancelFullScreen) {\n                target.mozCancelFullScreen();\n            } else if (target.webkitCancelFullScreen) {\n                target.webkitCancelFullScreen();\n            } else if (target.msExitFullscreen) {\n                target.msExitFullscreen();\n            } else {\n                this._fullscreenChange();\n            }\n            document.body.classList.remove('op-fullscreen__on');\n        } else {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            const video = this.#player.getElement() as any;\n            this.#fullscreenWidth = window.screen.width;\n            this.#fullscreenHeight = window.screen.height;\n\n            if (video.requestFullscreen) {\n                video.parentElement.requestFullscreen();\n            } else if (video.mozRequestFullScreen) {\n                video.parentElement.mozRequestFullScreen();\n            } else if (video.webkitRequestFullScreen) {\n                video.parentElement.webkitRequestFullScreen();\n            } else if (video.msRequestFullscreen) {\n                video.parentElement.msRequestFullscreen();\n            } else if (video.webkitEnterFullscreen) {\n                video.webkitEnterFullscreen();\n            } else {\n                this._fullscreenChange();\n            }\n\n            document.body.classList.add('op-fullscreen__on');\n        }\n\n        if (typeof window !== 'undefined' && (IS_ANDROID || IS_IPHONE)) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            const { screen } = window as any;\n            if (screen.orientation && !this.#isFullscreen) {\n                screen.orientation.lock('landscape');\n            }\n        }\n    }\n\n    private _fullscreenChange(): void {\n        const width = this.#isFullscreen ? undefined : this.#fullscreenWidth;\n        const height = this.#isFullscreen ? undefined : this.#fullscreenHeight;\n        this._setFullscreenData(!this.#isFullscreen);\n\n        if (this.#player.isAd()) {\n            this.#player.getAd().resizeAds(width, height);\n        }\n        this.#isFullscreen = !this.#isFullscreen;\n\n        if (this.#isFullscreen) {\n            document.body.classList.add('op-fullscreen__on');\n        } else {\n            document.body.classList.remove('op-fullscreen__on');\n        }\n        this._resize(width, height);\n    }\n\n    private _setFullscreenData(isFullscreen: boolean): void {\n        this.#player.getContainer().setAttribute('data-fullscreen', (!!isFullscreen).toString());\n        if (this.#button) {\n            if (isFullscreen) {\n                this.#button.classList.add('op-controls__fullscreen--out');\n            } else {\n                this.#button.classList.remove('op-controls__fullscreen--out');\n            }\n        }\n    }\n\n    private _resize(width?: number, height?: number): void {\n        const wrapper = this.#player.getContainer();\n        const video = this.#player.getElement();\n        const options = this.#player.getOptions();\n        let styles = '';\n        if (width) {\n            wrapper.style.width = '100%';\n            video.style.width = '100%';\n        } else if (options.width) {\n            const defaultWidth = typeof options.width === 'number' ? `${options.width}px` : options.width;\n            styles += `width: ${defaultWidth} !important;`;\n            video.style.removeProperty('width');\n        } else {\n            video.style.removeProperty('width');\n            wrapper.style.removeProperty('width');\n        }\n        if (height) {\n            video.style.height = '100%';\n            wrapper.style.height = '100%';\n        } else if (options.height) {\n            const defaultHeight = typeof options.height === 'number' ? `${options.height}px` : options.height;\n            styles += `height: ${defaultHeight} !important;`;\n            video.style.removeProperty('height');\n        } else {\n            video.style.removeProperty('height');\n            wrapper.style.removeProperty('height');\n        }\n\n        if (styles) {\n            wrapper.setAttribute('style', styles);\n        }\n    }\n\n    private _enterSpaceKeyEvent(e: KeyboardEvent): void {\n        const key = e.which || e.keyCode || 0;\n        const fullscreenBtnFocused = document?.activeElement?.classList.contains('op-controls__fullscreen');\n        if (fullscreenBtnFocused && (key === 13 || key === 32)) {\n            this.toggleFullscreen();\n            e.preventDefault();\n            e.stopPropagation();\n        }\n    }\n\n    private _setFullscreen(): void {\n        this.#isFullscreen = true;\n        this._setFullscreenData(true);\n        document.body.classList.add('op-fullscreen__on');\n    }\n\n    private _unsetFullscreen(): void {\n        this.#isFullscreen = false;\n        this._setFullscreenData(false);\n        document.body.classList.remove('op-fullscreen__on');\n    }\n}\n\nexport default Fullscreen;\n","import { Source } from '../interfaces';\nimport { isAudio } from './general';\n\nexport function getExtension(url: string): string {\n    const baseUrl = url.split('?')[0];\n    const baseFrags = (baseUrl || '').split('\\\\');\n    const baseUrlFragment = (baseFrags || []).pop();\n    const baseNameFrags = (baseUrlFragment || '').split('/');\n    const baseName = (baseNameFrags || []).pop() || '';\n    return baseName.includes('.') ? baseName.substring(baseName.lastIndexOf('.') + 1) : '';\n}\n\nexport function isHlsSource(media: Source): boolean {\n    return (\n        /\\.m3u8$/i.test(media.src) || ['application/x-mpegURL', 'application/vnd.apple.mpegurl'].includes(media.type)\n    );\n}\n\nexport function isM3USource(media: Source): boolean {\n    return /\\.m3u$/i.test(media.src);\n}\n\nexport function isDashSource(media: Source): boolean {\n    return /\\.mpd/i.test(media.src) || media.type === 'application/dash+xml';\n}\n\nexport function isFlvSource(media: Source): boolean {\n    return /(^rtmp:\\/\\/|\\.flv$)/i.test(media.src) || ['video/x-flv', 'video/flv'].includes(media.type);\n}\n\nexport function predictMimeType(url: string, element: HTMLMediaElement): string {\n    const extension = getExtension(url);\n\n    // If no extension found, check if media is a vendor iframe\n    if (!extension) {\n        return isAudio(element) ? 'audio/mp3' : 'video/mp4';\n    }\n\n    // Check native media types\n    switch (extension) {\n        case 'm3u8':\n        case 'm3u':\n            return 'application/x-mpegURL';\n        case 'mpd':\n            return 'application/dash+xml';\n        case 'mp4':\n            return isAudio(element) ? 'audio/mp4' : 'video/mp4';\n        case 'mp3':\n            return 'audio/mp3';\n        case 'webm':\n            return isAudio(element) ? 'audio/webm' : 'video/webm';\n        case 'ogg':\n            return isAudio(element) ? 'audio/ogg' : 'video/ogg';\n        case 'ogv':\n            return 'video/ogg';\n        case 'oga':\n            return 'audio/ogg';\n        case '3gp':\n            return 'audio/3gpp';\n        case 'wav':\n            return 'audio/wav';\n        case 'aac':\n            return 'audio/aac';\n        case 'flac':\n            return 'audio/flac';\n        default:\n            return isAudio(element) ? 'audio/mp3' : 'video/mp4';\n    }\n}\n\n// @see https://raw.githubusercontent.com/googleads/googleads-ima-html5/2.11/attempt_to_autoplay/ads.js\n// @see https://github.com/Modernizr/Modernizr/issues/1095#issuecomment-304682473\nexport function isAutoplaySupported(\n    media: HTMLMediaElement,\n    defaultVol: number,\n    autoplay: (playing: boolean) => void,\n    muted: (playing: boolean) => void,\n    callback: () => void\n): void {\n    const playPromise = media.play();\n    if (playPromise !== undefined) {\n        playPromise\n            .then(() => {\n                // Unmuted autoplay works.\n                media.pause();\n                autoplay(true);\n                muted(false);\n                callback();\n            })\n            .catch(() => {\n                // Unmuted autoplay failed. New attempt with muted autoplay.\n                media.volume = 0;\n                media.muted = true;\n                media\n                    .play()\n                    .then(() => {\n                        // Muted autoplay works.\n                        media.pause();\n                        autoplay(true);\n                        muted(true);\n                        callback();\n                    })\n                    .catch(() => {\n                        // Both muted and unmuted autoplay failed. Fallback to click to play.\n                        media.volume = defaultVol;\n                        media.muted = false;\n                        autoplay(false);\n                        muted(false);\n                        callback();\n                    });\n            });\n    } else {\n        autoplay(!media.paused || ('Promise' in window && (playPromise as Promise<void>) instanceof Promise));\n        media.pause();\n        muted(false);\n        callback();\n    }\n}\n","import { EventsList, Level, PlayerComponent, SettingsItem, SettingsSubItem } from '../interfaces';\nimport Player from '../player';\nimport { EVENT_OPTIONS, IS_ANDROID, IS_IOS, NAV } from '../utils/constants';\nimport { addEvent, sanitize } from '../utils/general';\nimport { isDashSource, isHlsSource } from '../utils/media';\n\nclass Levels implements PlayerComponent {\n    #player: Player;\n\n    #button: HTMLButtonElement;\n\n    #menu: HTMLDivElement;\n\n    #events: EventsList = {\n        button: {},\n        global: {},\n        media: {},\n    };\n\n    #levels: Level[] = [];\n\n    #defaultLevel = '';\n\n    #controlPosition: string;\n\n    #controlLayer: string;\n\n    constructor(player: Player, position: string, layer: string) {\n        this.#player = player;\n        this.#controlPosition = position;\n        this.#controlLayer = layer;\n    }\n\n    create(): void {\n        const { labels, defaultLevel: startLevel, detachMenus } = this.#player.getOptions();\n        const initialLevel = startLevel !== null ? parseInt(startLevel || '0', 10) : this.#player.getMedia().level;\n        this.#defaultLevel = `${initialLevel}`;\n        const menuItems = this._formatMenuItems();\n        const defaultLevel = menuItems.length ? menuItems.find((items) => items.key === this.#defaultLevel) : null;\n        const defaultLabel = defaultLevel ? defaultLevel.label : labels?.auto || '';\n        let levelSet = false;\n\n        this.#button = document.createElement('button');\n        this.#button.className = `op-controls__levels op-control__${this.#controlPosition}`;\n        this.#button.tabIndex = 0;\n        this.#button.title = labels?.mediaLevels || '';\n        this.#button.setAttribute('aria-controls', this.#player.id);\n        this.#button.setAttribute('aria-label', labels?.mediaLevels || '');\n        this.#button.setAttribute('data-active-level', this.#defaultLevel);\n        this.#button.innerHTML = `<span>${defaultLabel}</span>`;\n\n        const loadLevelsEvent = (): void => {\n            if (!this.#levels.length) {\n                this._gatherLevels();\n                setTimeout((): void => {\n                    this.#player.getMedia().level = initialLevel;\n                    const e = addEvent('controlschanged');\n                    this.#player.getElement().dispatchEvent(e);\n                }, 0);\n            } else if (!levelSet) {\n                this.#player.getMedia().level = initialLevel;\n                levelSet = true;\n            }\n        };\n\n        this.#events.media.loadedmetadata = loadLevelsEvent.bind(this);\n        this.#events.media.manifestLoaded = loadLevelsEvent.bind(this);\n        this.#events.media.hlsManifestParsed = loadLevelsEvent.bind(this);\n\n        if (detachMenus) {\n            this._buildMenu();\n            this.#events.button.click = (): void => {\n                if (detachMenus) {\n                    const menus = this.#player.getContainer().querySelectorAll('.op-settings');\n                    for (let i = 0, total = menus.length; i < total; ++i) {\n                        if (menus[i] !== this.#menu) {\n                            menus[i].setAttribute('aria-hidden', 'true');\n                        }\n                    }\n                    if (this.#menu.getAttribute('aria-hidden') === 'true') {\n                        this.#menu.setAttribute('aria-hidden', 'false');\n                    } else {\n                        this.#menu.setAttribute('aria-hidden', 'true');\n                    }\n                }\n            };\n            this.#events.button.mouseover = (): void => {\n                if (!IS_IOS && !IS_ANDROID) {\n                    const menus = this.#player.getContainer().querySelectorAll('.op-settings');\n                    for (let i = 0, total = menus.length; i < total; ++i) {\n                        if (menus[i] !== this.#menu) {\n                            menus[i].setAttribute('aria-hidden', 'true');\n                        }\n                    }\n                    if (this.#menu.getAttribute('aria-hidden') === 'true') {\n                        this.#menu.setAttribute('aria-hidden', 'false');\n                    }\n                }\n            };\n            this.#events.button.mouseout = (): void => {\n                if (!IS_IOS && !IS_ANDROID) {\n                    const menus = this.#player.getContainer().querySelectorAll('.op-settings');\n                    for (let i = 0, total = menus.length; i < total; ++i) {\n                        menus[i].setAttribute('aria-hidden', 'true');\n                    }\n                    if (this.#menu.getAttribute('aria-hidden') === 'false') {\n                        this.#menu.setAttribute('aria-hidden', 'true');\n                    }\n                }\n            };\n\n            this.#button.addEventListener('click', this.#events.button.click, EVENT_OPTIONS);\n            this.#button.addEventListener('mouseover', this.#events.button.mouseover, EVENT_OPTIONS);\n            this.#menu.addEventListener('mouseover', this.#events.button.mouseover, EVENT_OPTIONS);\n            this.#menu.addEventListener('mouseout', this.#events.button.mouseout, EVENT_OPTIONS);\n            this.#player.getElement().addEventListener('controlshidden', this.#events.button.mouseout, EVENT_OPTIONS);\n        }\n\n        this.#events.global.click = (e: Event): void => {\n            const option = e.target as HTMLElement;\n            const { currentTime } = this.#player.getMedia();\n            const isPaused = this.#player.getMedia().paused;\n            if (option.closest(`#${this.#player.id}`) && option.classList.contains('op-levels__option')) {\n                const levelVal = option.getAttribute('data-value');\n                const level = levelVal ? levelVal.replace('levels-', '') : '-1';\n                this.#defaultLevel = `${level}`;\n                if (detachMenus) {\n                    this.#button.setAttribute('data-active-level', `${level}`);\n                    this.#button.innerHTML = `<span>${sanitize(option.innerText, true)}</span>`;\n                    const levels =\n                        option.parentElement && option.parentElement.parentElement\n                            ? option.parentElement.parentElement.querySelectorAll('.op-settings__submenu-item')\n                            : [];\n                    for (let i = 0, total = levels.length; i < total; ++i) {\n                        levels[i].setAttribute('aria-checked', 'false');\n                    }\n                    if (option.parentElement) {\n                        option.parentElement.setAttribute('aria-checked', 'true');\n                    }\n                    this.#menu.setAttribute('aria-hidden', 'false');\n                }\n                this.#player.getMedia().level = level;\n                this.#player.getMedia().currentTime = currentTime;\n                if (!isPaused) {\n                    this.#player.play();\n                }\n\n                const event = addEvent('levelchanged', {\n                    detail: {\n                        label: option.innerText.trim(),\n                        level,\n                    },\n                });\n                this.#player.getElement().dispatchEvent(event);\n                e.preventDefault();\n                e.stopPropagation();\n            }\n        };\n\n        // @ts-ignore\n        const connection = NAV?.connection || NAV?.mozConnection || NAV?.webkitConnection;\n        this.#events.global.connection = (): void => {\n            // Check connectivity to switch levels (only HTML5 since HLS and Dash can use adaptive streaming)\n            const media = this.#player.getMedia().current;\n            if (!isDashSource(media) && !isHlsSource(media)) {\n                const type = connection?.effectiveType || '';\n                const levels = this.#levels.map((item) => ({\n                    ...item,\n                    resolution: parseInt(item.label.replace('p', ''), 10),\n                }));\n\n                let level = levels.find((item) => item.resolution < 360);\n                if (type === '4g') {\n                    level = levels.find((item) => item.resolution >= 720);\n                } else if (type === '3g') {\n                    level = levels.find((item) => item.resolution >= 360 && item.resolution < 720);\n                }\n\n                if (level) {\n                    this.#player.pause();\n                    this.#player.getMedia().level = level.id;\n                    this.#player.play();\n                }\n            }\n        };\n\n        Object.keys(this.#events.media).forEach((event) => {\n            this.#player.getElement().addEventListener(event, this.#events.media[event], EVENT_OPTIONS);\n        });\n\n        document.addEventListener('click', this.#events.global.click, EVENT_OPTIONS);\n        if (connection) {\n            connection.addEventListener('change', this.#events.global.connection, EVENT_OPTIONS);\n        }\n    }\n\n    destroy(): void {\n        const { detachMenus } = this.#player.getOptions();\n        // @ts-ignore\n        const connection = NAV?.connection || NAV?.mozConnection || NAV?.webkitConnection;\n\n        Object.keys(this.#events.media).forEach((event) => {\n            this.#player.getElement().removeEventListener(event, this.#events.media[event]);\n        });\n        document.removeEventListener('click', this.#events.global.click);\n        if (connection) {\n            connection.removeEventListener('change', this.#events.global.connection);\n        }\n        if (detachMenus) {\n            this.#button.removeEventListener('click', this.#events.button.click);\n            this.#button.remove();\n            this.#button.removeEventListener('mouseover', this.#events.button.mouseover);\n            this.#menu.removeEventListener('mouseover', this.#events.button.mouseover);\n            this.#menu.removeEventListener('mouseout', this.#events.button.mouseout);\n            this.#player.getElement().removeEventListener('controlshidden', this.#events.button.mouseout);\n            this.#menu.remove();\n        }\n    }\n\n    addSettings(): SettingsItem | unknown {\n        const { labels, detachMenus } = this.#player.getOptions();\n        if (detachMenus) {\n            return {};\n        }\n        const subitems = this._formatMenuItems();\n        // Avoid implementing submenu for levels if only 2 options were available\n        return subitems.length > 2\n            ? {\n                  className: 'op-levels__option',\n                  default: this.#defaultLevel || '-1',\n                  key: 'levels',\n                  name: labels?.levels,\n                  subitems,\n              }\n            : {};\n    }\n\n    private _formatMenuItems(): SettingsSubItem[] {\n        const { labels } = this.#player.getOptions();\n        const levels = this._gatherLevels();\n        const total = levels.length;\n        let items = total ? [{ key: '-1', label: labels?.auto }] : [];\n        for (let i = 0; i < total; i++) {\n            const level = levels[i];\n            items = items.filter((el) => el.key !== level.id);\n            items.push({ key: level.id, label: level.label });\n        }\n\n        // Remove duplicated labels\n        return items\n            .reduce((acc: SettingsSubItem[], current) => {\n                const duplicate = acc.find((item) => item.label === current.label);\n                if (!duplicate) {\n                    return acc.concat([current]);\n                }\n                return acc;\n            }, [])\n            .sort((a, b) => (parseInt(a?.label || '', 10) > parseInt(b?.label || '', 10) ? 1 : -1));\n    }\n\n    // @see https://en.wikipedia.org/wiki/Computer_display_standard#Standards\n    private _getResolutionsLabel(height: number): string {\n        const { labels } = this.#player.getOptions();\n        if (height >= 4320) {\n            return '8K';\n        }\n        if (height >= 2160) {\n            return '4K';\n        }\n        if (height >= 1440) {\n            return '1440p';\n        }\n        if (height >= 1080) {\n            return '1080p';\n        }\n        if (height >= 720) {\n            return '720p';\n        }\n        if (height >= 480) {\n            return '480p';\n        }\n        if (height >= 360) {\n            return '360p';\n        }\n        if (height >= 240) {\n            return '240p';\n        }\n        if (height >= 144) {\n            return '144p';\n        }\n        return labels?.auto || '';\n    }\n\n    private _gatherLevels(): Level[] {\n        if (!this.#levels.length) {\n            this.#player.getMedia().levels.forEach((level: Level) => {\n                this.#levels.push({ ...level, label: level.label || this._getResolutionsLabel(level.height) });\n            });\n        }\n        return this.#levels;\n    }\n\n    private _buildMenu(): void {\n        const { detachMenus } = this.#player.getOptions();\n        // Build menu if detachMenu is `true`\n        if (detachMenus) {\n            this.#button.classList.add('op-control--no-hover');\n            this.#menu = document.createElement('div');\n            this.#menu.className = 'op-settings op-levels__menu';\n            this.#menu.setAttribute('aria-hidden', 'true');\n            const className = 'op-levels__option';\n            const options = this._formatMenuItems();\n\n            // Store the submenu to reach all options for current menu item\n            const menu = `<div class=\"op-settings__menu\" role=\"menu\" id=\"menu-item-levels\">\n                ${options\n                    .map(\n                        (item) => `\n                <div class=\"op-settings__submenu-item\" tabindex=\"0\" role=\"menuitemradio\"\n                    aria-checked=\"${this.#defaultLevel === item.key ? 'true' : 'false'}\">\n                    <div class=\"op-settings__submenu-label ${className || ''}\" data-value=\"levels-${item.key}\">${\n                        item.label\n                    }</div>\n                </div>`\n                    )\n                    .join('')}\n            </div>`;\n            this.#menu.innerHTML = menu;\n\n            const itemContainer = document.createElement('div');\n            itemContainer.className = `op-controls__container op-control__${this.#controlPosition}`;\n            itemContainer.appendChild(this.#button);\n            itemContainer.appendChild(this.#menu);\n            this.#player.getControls().getLayer(this.#controlLayer).appendChild(itemContainer);\n        }\n    }\n}\n\nexport default Levels;\n","import { EventsList, PlayerComponent } from '../interfaces';\nimport Player from '../player';\nimport { EVENT_OPTIONS } from '../utils/constants';\nimport { addEvent, isAudio } from '../utils/general';\n\nclass Play implements PlayerComponent {\n    #player: Player;\n\n    #button: HTMLButtonElement;\n\n    #events: EventsList = {\n        controls: {},\n        media: {},\n    };\n\n    #controlPosition: string;\n\n    #controlLayer: string;\n\n    constructor(player: Player, position: string, layer: string) {\n        this.#player = player;\n        this.#controlPosition = position;\n        this.#controlLayer = layer;\n\n        this._enterSpaceKeyEvent = this._enterSpaceKeyEvent.bind(this);\n    }\n\n    create(): void {\n        const { labels } = this.#player.getOptions();\n        this.#button = document.createElement('button');\n        this.#button.type = 'button';\n        this.#button.className = `op-controls__playpause op-control__${this.#controlPosition}`;\n        this.#button.tabIndex = 0;\n        this.#button.title = labels?.play || '';\n        this.#button.setAttribute('aria-controls', this.#player.id);\n        this.#button.setAttribute('aria-pressed', 'false');\n        this.#button.setAttribute('aria-label', labels?.play || '');\n\n        this.#player.getControls().getLayer(this.#controlLayer).appendChild(this.#button);\n\n        this.#events.button = (e: Event): void => {\n            this.#button.setAttribute('aria-pressed', 'true');\n            const el = this.#player.activeElement();\n\n            if (el.paused || el.ended) {\n                if (this.#player.getAd()) {\n                    this.#player.getAd().playRequested = true;\n                }\n\n                el.play();\n                this.#events.media.play();\n            } else {\n                el.pause();\n                this.#events.media.pause();\n            }\n\n            e.preventDefault();\n            e.stopPropagation();\n        };\n\n        const isAudioEl = isAudio(this.#player.getElement());\n\n        this.#events.media.play = (): void => {\n            if (this.#player.activeElement().ended) {\n                if (this.#player.isMedia()) {\n                    this.#button.classList.add('op-controls__playpause--replay');\n                } else {\n                    this.#button.classList.add('op-controls__playpause--pause');\n                }\n                this.#button.title = labels?.play || '';\n                this.#button.setAttribute('aria-label', labels?.play || '');\n            } else {\n                this.#button.classList.remove('op-controls__playpause--replay');\n                this.#button.classList.add('op-controls__playpause--pause');\n\n                this.#button.title = labels?.pause || '';\n                this.#button.setAttribute('aria-label', labels?.pause || '');\n\n                if (this.#player.getOptions()?.pauseOthers) {\n                    Object.keys(Player.instances).forEach((key) => {\n                        if (key !== this.#player.id) {\n                            const target = Player.instances[key].activeElement();\n                            target.pause();\n                        }\n                    });\n                }\n            }\n        };\n        this.#events.media.loadedmetadata = (): void => {\n            if (this.#button.classList.contains('op-controls__playpause--pause')) {\n                this.#button.classList.remove('op-controls__playpause--replay');\n                this.#button.classList.remove('op-controls__playpause--pause');\n                this.#button.title = labels?.play || '';\n                this.#button.setAttribute('aria-label', labels?.play || '');\n            }\n        };\n        this.#events.media.playing = (): void => {\n            if (!this.#button.classList.contains('op-controls__playpause--pause')) {\n                this.#button.classList.remove('op-controls__playpause--replay');\n                this.#button.classList.add('op-controls__playpause--pause');\n                this.#button.title = labels?.pause || '';\n                this.#button.setAttribute('aria-label', labels?.pause || '');\n            }\n        };\n        this.#events.media.pause = (): void => {\n            this.#button.classList.remove('op-controls__playpause--pause');\n            this.#button.title = labels?.play || '';\n            this.#button.setAttribute('aria-label', labels?.play || '');\n        };\n        this.#events.media.ended = (): void => {\n            if (this.#player.activeElement().ended && this.#player.isMedia()) {\n                this.#button.classList.add('op-controls__playpause--replay');\n                this.#button.classList.remove('op-controls__playpause--pause');\n            } else if (\n                this.#player.getElement().currentTime >= this.#player.getElement().duration ||\n                this.#player.getElement().currentTime <= 0\n            ) {\n                this.#button.classList.add('op-controls__playpause--replay');\n                this.#button.classList.remove('op-controls__playpause--pause');\n            } else {\n                this.#button.classList.remove('op-controls__playpause--replay');\n                this.#button.classList.add('op-controls__playpause--pause');\n            }\n            this.#button.title = labels?.play || '';\n            this.#button.setAttribute('aria-label', labels?.play || '');\n        };\n        this.#events.media.adsmediaended = (): void => {\n            this.#button.classList.remove('op-controls__playpause--replay');\n            this.#button.classList.add('op-controls__playpause--pause');\n            this.#button.title = labels?.pause || '';\n            this.#button.setAttribute('aria-label', labels?.pause || '');\n        };\n        this.#events.media.playererror = (): void => {\n            if (isAudioEl) {\n                const el = this.#player.activeElement();\n                el.pause();\n            }\n        };\n\n        const element = this.#player.getElement();\n        this.#events.controls.controlschanged = (): void => {\n            if (!this.#player.activeElement().paused) {\n                const event = addEvent('playing');\n                element.dispatchEvent(event);\n            }\n        };\n\n        Object.keys(this.#events.media).forEach((event) => {\n            element.addEventListener(event, this.#events.media[event], EVENT_OPTIONS);\n        });\n\n        if (this.#player.getOptions().media?.pauseOnClick) {\n            element.addEventListener('click', this.#events.button, EVENT_OPTIONS);\n        }\n\n        this.#player\n            .getControls()\n            .getContainer()\n            .addEventListener('controlschanged', this.#events.controls.controlschanged, EVENT_OPTIONS);\n\n        this.#player.getContainer().addEventListener('keydown', this._enterSpaceKeyEvent, EVENT_OPTIONS);\n        this.#button.addEventListener('click', this.#events.button, EVENT_OPTIONS);\n    }\n\n    destroy(): void {\n        Object.keys(this.#events.media).forEach((event) => {\n            this.#player.getElement().removeEventListener(event, this.#events.media[event]);\n        });\n\n        if (this.#player.getOptions().media?.pauseOnClick) {\n            this.#player.getElement().removeEventListener('click', this.#events.button);\n        }\n\n        this.#player\n            .getControls()\n            .getContainer()\n            .removeEventListener('controlschanged', this.#events.controls.controlschanged);\n\n        this.#player.getContainer().removeEventListener('keydown', this._enterSpaceKeyEvent);\n        this.#button.removeEventListener('click', this.#events.button);\n        this.#button.remove();\n    }\n\n    private _enterSpaceKeyEvent(e: KeyboardEvent): void {\n        const key = e.which || e.keyCode || 0;\n        const playBtnFocused = document?.activeElement?.classList.contains('op-controls__playpause');\n        if (playBtnFocused && (key === 13 || key === 32)) {\n            this.#events.button(e);\n        }\n    }\n}\n\nexport default Play;\n","export function formatTime(seconds: number, frameRate?: number): string {\n    const f = Math.floor((seconds % 1) * (frameRate || 0));\n    let s = Math.floor(seconds);\n    let m = Math.floor(s / 60);\n    const h = Math.floor(m / 60);\n    const wrap = (value: number): string => {\n        const formattedVal = value.toString();\n        if (value < 10) {\n            if (value <= 0) {\n                return '00';\n            }\n            return `0${formattedVal}`;\n        }\n        return formattedVal;\n    };\n    m %= 60;\n    s %= 60;\n    return `${h > 0 ? `${wrap(h)}:` : ''}${wrap(m)}:${wrap(s)}${f ? `:${wrap(f)}` : ''}`;\n}\n\n// @see https://en.wikipedia.org/wiki/SMPTE_timecode\nexport function timeToSeconds(timeCode: string): number {\n    const time = timeCode.replace(/;/g, ':').split(':');\n    let seconds = 0;\n    // Hours found; use different calculation\n    if (time.length === 3) {\n        seconds += parseFloat(time[0]) * 60 * 60;\n        seconds += parseFloat(time[1]) * 60;\n        seconds += parseFloat(time[2]);\n    } else {\n        seconds += parseFloat(time[0]) * 60;\n        seconds += parseFloat(time[1]);\n    }\n    return seconds;\n}\n","import { EventsList, PlayerComponent } from '../interfaces';\nimport Player from '../player';\nimport { EVENT_OPTIONS, IS_ANDROID, IS_IOS } from '../utils/constants';\nimport { isAudio, offset } from '../utils/general';\nimport { formatTime } from '../utils/time';\n\nclass Progress implements PlayerComponent {\n    #player: Player;\n\n    #progress: HTMLDivElement;\n\n    #slider: HTMLInputElement;\n\n    #buffer: HTMLProgressElement;\n\n    #played: HTMLProgressElement;\n\n    #tooltip: HTMLSpanElement;\n\n    #events: EventsList = {\n        container: {},\n        controls: {},\n        global: {},\n        media: {},\n        slider: {},\n    };\n\n    #forcePause = false;\n\n    #controlPosition: string;\n\n    #controlLayer: string;\n\n    constructor(player: Player, position: string, layer: string) {\n        this.#player = player;\n        this.#controlPosition = position;\n        this.#controlLayer = layer;\n\n        this._enterSpaceKeyEvent = this._enterSpaceKeyEvent.bind(this);\n    }\n\n    create(): void {\n        const { labels, progress } = this.#player.getOptions();\n        this.#progress = document.createElement('div');\n        this.#progress.className = `op-controls__progress op-control__${this.#controlPosition}`;\n        this.#progress.tabIndex = 0;\n        this.#progress.setAttribute('aria-label', labels?.progressSlider || '');\n        this.#progress.setAttribute('aria-valuemin', '0');\n        this.#progress.setAttribute('aria-valuenow', '0');\n        this.#progress.setAttribute('role', 'slider');\n\n        this.#slider = document.createElement('input');\n        this.#slider.type = 'range';\n        this.#slider.className = 'op-controls__progress--seek';\n        this.#slider.tabIndex = -1;\n        this.#slider.setAttribute('min', '0');\n        this.#slider.setAttribute('step', '0.1');\n        this.#slider.value = '0';\n        this.#slider.setAttribute('aria-label', labels?.progressRail || '');\n        this.#slider.setAttribute('role', 'slider');\n\n        this.#buffer = document.createElement('progress');\n        this.#buffer.className = 'op-controls__progress--buffer';\n        this.#buffer.setAttribute('max', '100');\n        this.#buffer.value = 0;\n\n        this.#played = document.createElement('progress');\n        this.#played.className = 'op-controls__progress--played';\n        this.#played.setAttribute('max', '100');\n        this.#played.value = 0;\n\n        this.#progress.appendChild(this.#slider);\n        this.#progress.appendChild(this.#played);\n        this.#progress.appendChild(this.#buffer);\n\n        if (!IS_IOS && !IS_ANDROID) {\n            this.#tooltip = document.createElement('span');\n            this.#tooltip.className = 'op-controls__tooltip';\n            this.#tooltip.tabIndex = -1;\n            this.#tooltip.innerHTML = '00:00';\n            this.#progress.appendChild(this.#tooltip);\n        }\n\n        const setInitialProgress = (): void => {\n            if (this.#slider.classList.contains('error')) {\n                this.#slider.classList.remove('error');\n            }\n            const el = this.#player.activeElement();\n            if (\n                el.duration !== Infinity &&\n                !this.#player.getElement().getAttribute('op-live__enabled') &&\n                !this.#player.getElement().getAttribute('op-dvr__enabled')\n            ) {\n                const current = this.#player.isMedia() ? el.currentTime : el.duration - el.currentTime;\n                this.#slider.value = current.toString();\n                if (!Number.isNaN(el.duration)) {\n                    this.#slider.setAttribute('max', `${el.duration}`);\n                    this.#progress.setAttribute('aria-valuemax', el.duration.toString());\n                }\n            } else if (this.#player.getElement().getAttribute('op-dvr__enabled')) {\n                this.#slider.setAttribute('max', '1');\n                this.#slider.value = '1';\n                this.#slider.style.backgroundSize = '100% 100%';\n                this.#played.value = 1;\n                this.#progress.setAttribute('aria-valuemax', '1');\n                this.#progress.setAttribute('aria-hidden', 'false');\n            } else if (!this.#player.getOptions().live?.showProgress) {\n                this.#progress.setAttribute('aria-hidden', 'true');\n            }\n        };\n\n        let lastCurrentTime = 0;\n        const defaultDuration = this.#player.getOptions().progress?.duration || 0;\n        const isAudioEl = isAudio(this.#player.getElement());\n\n        this.#events.media.loadedmetadata = setInitialProgress.bind(this);\n        this.#events.controls.controlschanged = setInitialProgress.bind(this);\n\n        this.#events.media.progress = (e: Event): void => {\n            const el = e.target as HTMLMediaElement;\n            if (el.duration !== Infinity && !this.#player.getElement().getAttribute('op-live__enabled')) {\n                if (el.duration > 0) {\n                    for (let i = 0, total = el.buffered.length; i < total; i++) {\n                        if (el.buffered.start(el.buffered.length - 1 - i) < el.currentTime) {\n                            this.#buffer.value = (el.buffered.end(el.buffered.length - 1 - i) / el.duration) * 100;\n                            break;\n                        }\n                    }\n                }\n            } else if (\n                !this.#player.getElement().getAttribute('op-dvr__enabled') &&\n                this.#progress.getAttribute('aria-hidden') === 'false' &&\n                !this.#player.getOptions().live?.showProgress\n            ) {\n                this.#progress.setAttribute('aria-hidden', 'true');\n            }\n        };\n        this.#events.media.waiting = (): void => {\n            if (isAudioEl && !this.#slider.classList.contains('loading')) {\n                this.#slider.classList.add('loading');\n            }\n            if (isAudioEl && this.#slider.classList.contains('error')) {\n                this.#slider.classList.remove('error');\n            }\n        };\n        this.#events.media.playererror = (): void => {\n            if (isAudioEl && !this.#slider.classList.contains('error')) {\n                this.#slider.classList.add('error');\n            }\n            if (isAudioEl && this.#slider.classList.contains('loading')) {\n                this.#slider.classList.remove('loading');\n            }\n        };\n        this.#events.media.pause = (): void => {\n            const el = this.#player.activeElement();\n            if (el.duration !== Infinity && !this.#player.getElement().getAttribute('op-live__enabled')) {\n                const current = el.currentTime;\n                this.#progress.setAttribute('aria-valuenow', current.toString());\n                this.#progress.setAttribute('aria-valuetext', formatTime(current));\n            }\n        };\n        this.#events.media.play = (): void => {\n            if (isAudioEl && this.#slider.classList.contains('loading')) {\n                this.#slider.classList.remove('loading');\n            }\n            if (isAudioEl && this.#slider.classList.contains('error')) {\n                this.#slider.classList.remove('error');\n            }\n            if (\n                this.#player.activeElement().duration !== Infinity &&\n                !this.#player.getElement().getAttribute('op-live__enabled')\n            ) {\n                this.#progress.removeAttribute('aria-valuenow');\n                this.#progress.removeAttribute('aria-valuetext');\n            }\n        };\n        this.#events.media.playing = (): void => {\n            if (isAudioEl && this.#slider.classList.contains('loading')) {\n                this.#slider.classList.remove('loading');\n            }\n            if (isAudioEl && this.#slider.classList.contains('error')) {\n                this.#slider.classList.remove('error');\n            }\n        };\n        this.#events.media.timeupdate = (): void => {\n            const el = this.#player.activeElement();\n            if (\n                el.duration !== Infinity &&\n                (!this.#player.getElement().getAttribute('op-live__enabled') ||\n                    this.#player.getElement().getAttribute('op-dvr__enabled'))\n            ) {\n                if (\n                    !this.#slider.getAttribute('max') ||\n                    this.#slider.getAttribute('max') === '0' ||\n                    parseFloat(this.#slider.getAttribute('max') || '-1') !== el.duration\n                ) {\n                    if (!Number.isNaN(el.duration)) {\n                        this.#slider.setAttribute('max', `${el.duration}`);\n                    }\n                    this.#progress.setAttribute('aria-hidden', 'false');\n                }\n\n                // Adjust current time between Media and Ads; with the latter, it is convenient to add an extra\n                // second to ensure it will reach the end of the rail\n                const duration = el.duration - el.currentTime + 1 >= 100 ? 100 : el.duration - el.currentTime + 1;\n                const current = this.#player.isMedia() ? el.currentTime : duration;\n                const min = parseFloat(this.#slider.min);\n                const max = parseFloat(this.#slider.max);\n                this.#slider.value = current.toString();\n                this.#slider.style.backgroundSize = `${((current - min) * 100) / (max - min)}% 100%`;\n                this.#played.value =\n                    el.duration <= 0 || Number.isNaN(el.duration) || !Number.isFinite(el.duration)\n                        ? defaultDuration\n                        : (current / el.duration) * 100;\n\n                if (this.#player.getElement().getAttribute('op-dvr__enabled') && Math.floor(this.#played.value) >= 99) {\n                    lastCurrentTime = el.currentTime;\n                    this.#progress.setAttribute('aria-hidden', 'false');\n                }\n            } else if (\n                !this.#player.getElement().getAttribute('op-dvr__enabled') &&\n                this.#progress.getAttribute('aria-hidden') === 'false' &&\n                !this.#player.getOptions().live?.showProgress\n            ) {\n                this.#progress.setAttribute('aria-hidden', 'true');\n            }\n        };\n\n        this.#events.media.durationchange = (): void => {\n            const el = this.#player.activeElement();\n            const current = this.#player.isMedia() ? el.currentTime : el.duration - el.currentTime;\n            if (!Number.isNaN(el.duration)) {\n                this.#slider.setAttribute('max', `${el.duration}`);\n                this.#progress.setAttribute('aria-valuemax', el.duration.toString());\n            }\n            this.#played.value =\n                el.duration <= 0 || Number.isNaN(el.duration) || !Number.isFinite(el.duration)\n                    ? defaultDuration\n                    : (current / el.duration) * 100;\n        };\n\n        this.#events.media.ended = (): void => {\n            this.#slider.style.backgroundSize = '0% 100%';\n            if (this.#slider.getAttribute('max')) {\n                this.#slider.setAttribute('max', '0');\n            }\n            this.#buffer.value = 0;\n            this.#played.value = 0;\n        };\n\n        const updateSlider = (e: Event): void => {\n            const el = this.#player.activeElement();\n            const target = e.target as HTMLInputElement;\n            const value = parseFloat(target.value);\n            if (\n                this.#slider.classList.contains('op-progress--pressed') ||\n                (value < el.currentTime && !progress?.allowRewind) ||\n                (value > el.currentTime && !progress?.allowSkip)\n            ) {\n                this.#slider.value = el.currentTime.toString();\n                return;\n            }\n            this.#slider.classList.add('.op-progress--pressed');\n\n            const min = parseFloat(target.min);\n            const max = parseFloat(target.max);\n            const val = parseFloat(target.value);\n            this.#slider.style.backgroundSize = `${((val - min) * 100) / (max - min)}% 100%`;\n            this.#played.value =\n                el.duration <= 0 || Number.isNaN(el.duration) || !Number.isFinite(el.duration)\n                    ? defaultDuration\n                    : (val / el.duration) * 100;\n\n            if (this.#player.getElement().getAttribute('op-dvr__enabled')) {\n                el.currentTime = Math.round(this.#played.value) >= 99 ? lastCurrentTime : val;\n            } else {\n                el.currentTime = val;\n            }\n\n            this.#slider.classList.remove('.op-progress--pressed');\n        };\n\n        const forcePause = (e: KeyboardEvent): void => {\n            const el = this.#player.activeElement();\n            const key = e.which || e.keyCode || 0;\n            const target = this.#slider;\n            const value = Math.round(Number(target.value));\n            const current = Math.round(el.currentTime);\n            const isProgressManipulationAllowed =\n                (value < current && progress?.allowRewind) || (value >= current && progress?.allowSkip);\n\n            // If current progress is not related to an Ad, manipulate current time\n            if (isProgressManipulationAllowed && (key === 1 || key === 0) && this.#player.isMedia() && !el.paused) {\n                el.pause();\n                this.#forcePause = true;\n            }\n        };\n\n        const releasePause = (): void => {\n            const el = this.#player.activeElement();\n            if (this.#forcePause === true && this.#player.isMedia()) {\n                if (el.paused) {\n                    el.play();\n                    this.#forcePause = false;\n                }\n            }\n        };\n\n        // When tapping on mobile, it will update the time and force pause\n        const mobileForcePause = (e: TouchEvent): void => {\n            const el = this.#player.activeElement();\n            if (el.duration !== Infinity) {\n                const { changedTouches } = e;\n                const x = changedTouches[0]?.pageX || 0;\n                const pos = x - offset(this.#progress).left;\n                const percentage = pos / this.#progress.offsetWidth;\n                const time = percentage * el.duration;\n\n                if (\n                    (time < el.currentTime && progress?.allowRewind) ||\n                    (time > el.currentTime && progress?.allowSkip)\n                ) {\n                    this.#slider.value = time.toString();\n                    updateSlider(e);\n                    if (!el.paused) {\n                        el.pause();\n                        this.#forcePause = true;\n                    }\n                }\n            }\n        };\n\n        this.#events.slider.input = updateSlider.bind(this);\n        this.#events.slider.change = updateSlider.bind(this);\n        this.#events.slider.mousedown = forcePause.bind(this);\n        this.#events.slider.mouseup = releasePause.bind(this);\n        this.#events.slider.touchstart = mobileForcePause.bind(this);\n        this.#events.slider.touchend = releasePause.bind(this);\n\n        if (!IS_IOS && !IS_ANDROID) {\n            this.#events.container.mousemove = (e: MouseEvent): void => {\n                const el = this.#player.activeElement();\n                if (el.duration !== Infinity && !this.#player.isAd()) {\n                    const x = e.pageX;\n\n                    let pos = x - offset(this.#progress).left;\n                    const half = this.#tooltip.offsetWidth / 2;\n                    const percentage = pos / this.#progress.offsetWidth;\n                    const time = percentage * el.duration;\n                    const mediaContainer = this.#player.getContainer();\n                    const limit = mediaContainer.offsetWidth - this.#tooltip.offsetWidth;\n\n                    if (pos <= 0 || x - offset(mediaContainer).left <= half) {\n                        pos = 0;\n                    } else if (x - offset(mediaContainer).left >= limit) {\n                        pos = limit - offset(this.#slider).left - 10;\n                    } else {\n                        pos -= half;\n                    }\n\n                    if (percentage >= 0 && percentage <= 1) {\n                        this.#tooltip.classList.add('op-controls__tooltip--visible');\n                    } else {\n                        this.#tooltip.classList.remove('op-controls__tooltip--visible');\n                    }\n\n                    this.#tooltip.style.left = `${pos}px`;\n                    this.#tooltip.innerHTML = Number.isNaN(time) ? '00:00' : formatTime(time);\n                }\n            };\n            this.#events.global.mousemove = (e: MouseEvent): void => {\n                if (!(e.target as HTMLElement).closest('.op-controls__progress') || this.#player.isAd()) {\n                    this.#tooltip.classList.remove('op-controls__tooltip--visible');\n                }\n            };\n        }\n\n        Object.keys(this.#events.media).forEach((event) => {\n            this.#player.getElement().addEventListener(event, this.#events.media[event], EVENT_OPTIONS);\n        });\n\n        Object.keys(this.#events.slider).forEach((event) => {\n            this.#slider.addEventListener(event, this.#events.slider[event], EVENT_OPTIONS);\n        });\n\n        this.#progress.addEventListener('keydown', this.#player.getEvents().keydown, EVENT_OPTIONS);\n        this.#progress.addEventListener('mousemove', this.#events.container.mousemove, EVENT_OPTIONS);\n        document.addEventListener('mousemove', this.#events.global.mousemove, EVENT_OPTIONS);\n        this.#player.getContainer().addEventListener('keydown', this._enterSpaceKeyEvent, EVENT_OPTIONS);\n        this.#player\n            .getControls()\n            .getContainer()\n            .addEventListener('controlschanged', this.#events.controls.controlschanged, EVENT_OPTIONS);\n        this.#player.getControls().getLayer(this.#controlLayer).appendChild(this.#progress);\n    }\n\n    destroy(): void {\n        Object.keys(this.#events).forEach((event) => {\n            this.#player.getElement().removeEventListener(event, this.#events[event]);\n        });\n\n        Object.keys(this.#events.slider).forEach((event) => {\n            this.#slider.removeEventListener(event, this.#events.slider[event]);\n        });\n\n        this.#progress.removeEventListener('keydown', this.#player.getEvents().keydown);\n        this.#progress.removeEventListener('mousemove', this.#events.container.mousemove);\n\n        document.removeEventListener('mousemove', this.#events.global.mousemove);\n\n        this.#player.getContainer().removeEventListener('keydown', this._enterSpaceKeyEvent);\n        this.#player\n            .getControls()\n            .getContainer()\n            .removeEventListener('controlschanged', this.#events.controls.controlschanged);\n\n        this.#buffer.remove();\n        this.#played.remove();\n        this.#slider.remove();\n        if (!IS_IOS && !IS_ANDROID) {\n            this.#tooltip.remove();\n        }\n        this.#progress.remove();\n    }\n\n    private _enterSpaceKeyEvent(e: KeyboardEvent): void {\n        const el = this.#player.activeElement();\n        const isAd = this.#player.isAd();\n        const key = e.which || e.keyCode || 0;\n        // Use the 0-9 keys to manipulate current media time to set media (not Ads) to the 0% to 90% of duration.\n        if (!isAd && key >= 48 && key <= 57 && el.duration !== Infinity) {\n            let step = 0;\n            for (let i = 48, limit = 57; i <= limit; i++) {\n                if (i < key) {\n                    step++;\n                }\n            }\n            el.currentTime = el.duration * (0.1 * step);\n            e.preventDefault();\n            e.stopPropagation();\n        }\n    }\n}\n\nexport default Progress;\n","import { EventsList, PlayerComponent, SettingsItem, SettingsSubItem, SettingsSubMenu } from '../interfaces';\nimport Player from '../player';\nimport { EVENT_OPTIONS } from '../utils/constants';\nimport { sanitize } from '../utils/general';\n\nclass Settings implements PlayerComponent {\n    #player: Player;\n\n    #submenu: SettingsSubMenu = {};\n\n    #button: HTMLButtonElement;\n\n    #menu: HTMLElement;\n\n    #events: EventsList = {\n        global: {},\n        media: {},\n    };\n\n    #originalOutput = '';\n\n    #controlPosition: string;\n\n    #controlLayer: string;\n\n    private clickEvent: () => void;\n\n    private hideEvent: () => void;\n\n    private removeEvent: (e: CustomEvent) => void;\n\n    constructor(player: Player, position: string, layer: string) {\n        this.#player = player;\n        this.#controlPosition = position;\n        this.#controlLayer = layer;\n        this._enterSpaceKeyEvent = this._enterSpaceKeyEvent.bind(this);\n    }\n\n    create(): void {\n        const { labels } = this.#player.getOptions();\n\n        this.#button = document.createElement('button');\n        this.#button.className = `op-controls__settings op-control__${this.#controlPosition}`;\n        this.#button.tabIndex = 0;\n        this.#button.title = labels?.settings || '';\n        this.#button.setAttribute('aria-controls', this.#player.id);\n        this.#button.setAttribute('aria-pressed', 'false');\n        this.#button.setAttribute('aria-label', labels?.settings || '');\n\n        this.#menu = document.createElement('div');\n        this.#menu.className = 'op-settings';\n        this.#menu.setAttribute('aria-hidden', 'true');\n        this.#menu.innerHTML = '<div class=\"op-settings__menu\" role=\"menu\"></div>';\n\n        this.clickEvent = (): void => {\n            this.#button.setAttribute('aria-pressed', 'true');\n            const menus = this.#player.getContainer().querySelectorAll('.op-settings');\n            for (let i = 0, total = menus.length; i < total; ++i) {\n                if (menus[i] !== this.#menu) {\n                    menus[i].setAttribute('aria-hidden', 'true');\n                }\n            }\n            this.#menu.setAttribute(\n                'aria-hidden',\n                this.#menu.getAttribute('aria-hidden') === 'false' ? 'true' : 'false'\n            );\n        };\n\n        this.hideEvent = (): void => {\n            let timeout;\n            if (timeout && typeof window !== 'undefined') {\n                window.cancelAnimationFrame(timeout);\n            }\n\n            if (typeof window !== 'undefined') {\n                timeout = window.requestAnimationFrame((): void => {\n                    this.#menu.innerHTML = this.#originalOutput;\n                    this.#menu.setAttribute('aria-hidden', 'true');\n                });\n            }\n        };\n\n        this.removeEvent = (e: CustomEvent): void => {\n            const { id, type } = e.detail;\n            this.removeItem(id, type);\n        };\n\n        this.clickEvent = this.clickEvent.bind(this);\n        this.hideEvent = this.hideEvent.bind(this);\n        this.removeEvent = this.removeEvent.bind(this);\n\n        this.#events.media.controlshidden = this.hideEvent.bind(this);\n        this.#events.media.settingremoved = this.removeEvent.bind(this);\n        this.#events.media.play = this.hideEvent.bind(this);\n        this.#events.media.pause = this.hideEvent.bind(this);\n\n        this.#player.getContainer().addEventListener('keydown', this._enterSpaceKeyEvent, EVENT_OPTIONS);\n\n        this.#events.global.click = (e: Event): void => {\n            const { target } = e;\n            const current = target as HTMLElement;\n            if (current?.closest(`#${this.#player.id}`) && current?.classList.contains('op-speed__option')) {\n                const level = current?.getAttribute('data-value') || '';\n                this.#player.getMedia().playbackRate = parseFloat(level.replace('speed-', ''));\n            }\n        };\n        this.#events.global.resize = this.hideEvent.bind(this);\n\n        this.#button.addEventListener('click', this.clickEvent, EVENT_OPTIONS);\n        Object.keys(this.#events).forEach((event) => {\n            this.#player.getElement().addEventListener(event, this.#events.media[event], EVENT_OPTIONS);\n        });\n        document.addEventListener('click', this.#events.global.click, EVENT_OPTIONS);\n        document.addEventListener('keydown', this.#events.global.click, EVENT_OPTIONS);\n        if (typeof window !== 'undefined') {\n            window.addEventListener('resize', this.#events.global.resize, EVENT_OPTIONS);\n        }\n\n        this.#player.getControls().getLayer(this.#controlLayer).appendChild(this.#button);\n        this.#player.getContainer().appendChild(this.#menu);\n    }\n\n    destroy(): void {\n        this.#button.removeEventListener('click', this.clickEvent);\n        Object.keys(this.#events).forEach((event) => {\n            this.#player.getElement().removeEventListener(event, this.#events.media[event]);\n        });\n        document.removeEventListener('click', this.#events.global.click);\n        document.removeEventListener('keydown', this.#events.global.click);\n        if (typeof window !== 'undefined') {\n            window.removeEventListener('resize', this.#events.global.resize);\n        }\n        if (this.#events.global['settings.submenu'] !== undefined) {\n            document.removeEventListener('click', this.#events.global['settings.submenu']);\n            this.#player.getElement().removeEventListener('controlshidden', this.hideEvent);\n        }\n\n        this.#player.getContainer().removeEventListener('keydown', this._enterSpaceKeyEvent);\n\n        this.#menu.remove();\n        this.#button.remove();\n    }\n\n    addSettings(): SettingsItem {\n        const media = this.#player.getMedia();\n        const { labels } = this.#player.getOptions();\n\n        let rate = 1;\n        if (this.#player && media) {\n            rate = media.defaultPlaybackRate !== media.playbackRate ? media.playbackRate : media.defaultPlaybackRate;\n        }\n        return {\n            className: 'op-speed__option',\n            default: rate.toString(),\n            key: 'speed',\n            name: labels?.speed || '',\n            subitems: [\n                { key: '0.25', label: '0.25' },\n                { key: '0.5', label: '0.5' },\n                { key: '0.75', label: '0.75' },\n                { key: '1', label: labels?.speedNormal || '' },\n                { key: '1.25', label: '1.25' },\n                { key: '1.5', label: '1.5' },\n                { key: '2', label: '2' },\n            ],\n        };\n    }\n\n    addItem(name: string, key: string, defaultValue: string, submenu?: SettingsSubItem[], className?: string): void {\n        // Build the menu entry first\n        const dataValue = `${key}-${sanitize(defaultValue, true)}`;\n        const menuItem = document.createElement('div');\n        menuItem.className = 'op-settings__menu-item';\n        menuItem.tabIndex = 0;\n        menuItem.setAttribute('role', 'menuitemradio');\n        menuItem.innerHTML = `<div class=\"op-settings__menu-label\" data-value=\"${dataValue}\">${name}</div>`;\n\n        const submenuMatch = submenu ? submenu.find((x) => x.key === defaultValue) : null;\n        if (submenuMatch) {\n            menuItem.innerHTML += `<div class=\"op-settings__menu-content\" tabindex=\"0\">${submenuMatch.label}</div>`;\n        }\n\n        const mainMenu = this.#menu.querySelector('.op-settings__menu');\n        if (mainMenu) {\n            mainMenu.appendChild(menuItem);\n        }\n        this.#originalOutput = this.#menu.innerHTML;\n\n        // Store the submenu to reach all options for current menu item\n        if (submenu) {\n            const subItems = `\n                <div class=\"op-settings__header\">\n                    <button type=\"button\" class=\"op-settings__back\" tabindex=\"0\">${name}</button>\n                </div>\n                <div class=\"op-settings__menu\" role=\"menu\" id=\"menu-item-${key}\">\n                    ${submenu\n                        .map(\n                            (item: SettingsSubItem) => `\n                    <div class=\"op-settings__submenu-item\" role=\"menuitemradio\" aria-checked=\"${\n                        defaultValue === item.key ? 'true' : 'false'\n                    }\">\n                        <div class=\"op-settings__submenu-label ${className || ''}\" tabindex=\"0\" data-value=\"${key}-${\n                                item.key\n                            }\">\n                            ${item.label}\n                        </div>\n                    </div>`\n                        )\n                        .join('')}\n                </div>`;\n            this.#submenu[key] = subItems;\n        }\n\n        this.#events.global['settings.submenu'] = (e: Event): void => {\n            const target = e.target as HTMLElement;\n            if (target.closest(`#${this.#player.id}`)) {\n                if (target.classList.contains('op-settings__back')) {\n                    this.#menu.classList.add('op-settings--sliding');\n                    setTimeout((): void => {\n                        this.#menu.innerHTML = this.#originalOutput;\n                        this.#menu.classList.remove('op-settings--sliding');\n                    }, 100);\n                } else if (target.classList.contains('op-settings__menu-content')) {\n                    const labelEl = target.parentElement\n                        ? target.parentElement.querySelector('.op-settings__menu-label')\n                        : null;\n                    const label = labelEl ? labelEl.getAttribute('data-value') : null;\n                    const fragments = label ? label.split('-') : [];\n                    if (fragments.length > 0) {\n                        fragments.pop();\n\n                        // eslint-disable-next-line no-useless-escape\n                        const current = fragments.join('-').replace(/^\\-|\\-$/, '');\n                        if (typeof this.#submenu[current] !== 'undefined') {\n                            this.#menu.classList.add('op-settings--sliding');\n                            setTimeout((): void => {\n                                this.#menu.innerHTML = this.#submenu[current];\n                                this.#menu.classList.remove('op-settings--sliding');\n                            }, 100);\n                        }\n                    }\n                } else if (target.classList.contains('op-settings__submenu-label')) {\n                    const current = target.getAttribute('data-value');\n                    const value = current ? current.replace(`${key}-`, '') : '';\n                    const label = target.innerText;\n\n                    // Update values in submenu and store\n                    const menuTarget = this.#menu.querySelector(\n                        `#menu-item-${key} .op-settings__submenu-item[aria-checked=true]`\n                    );\n                    if (menuTarget) {\n                        menuTarget.setAttribute('aria-checked', 'false');\n                        if (target.parentElement) {\n                            target.parentElement.setAttribute('aria-checked', 'true');\n                        }\n                        this.#submenu[key] = this.#menu.innerHTML;\n\n                        // Restore original menu, and set the new value\n                        this.#menu.classList.add('op-settings--sliding');\n                        setTimeout((): void => {\n                            this.#menu.innerHTML = this.#originalOutput;\n                            const prev = this.#menu.querySelector(\n                                `.op-settings__menu-label[data-value=\"${key}-${defaultValue}\"]`\n                            );\n                            if (prev) {\n                                prev.setAttribute('data-value', `${current}`);\n                                if (prev.nextElementSibling) {\n                                    prev.nextElementSibling.textContent = label;\n                                }\n                            }\n                            defaultValue = value;\n                            this.#originalOutput = this.#menu.innerHTML;\n                            this.#menu.classList.remove('op-settings--sliding');\n                        }, 100);\n                    }\n                }\n            } else {\n                this.hideEvent();\n            }\n        };\n\n        document.addEventListener('click', this.#events.global['settings.submenu'], EVENT_OPTIONS);\n        this.#player.getElement().addEventListener('controlshidden', this.hideEvent, EVENT_OPTIONS);\n    }\n\n    removeItem(id: string | number, type: string, minItems = 2): void {\n        const target = this.#player.getElement().querySelector(`.op-settings__submenu-label[data-value=${type}-${id}]`);\n        if (target) {\n            target.remove();\n        }\n\n        if (\n            this.#player.getElement().querySelectorAll(`.op-settings__submenu-label[data-value^=${type}]`).length <\n            minItems\n        ) {\n            delete this.#submenu[type];\n            const label = this.#player.getElement().querySelector(`.op-settings__menu-label[data-value^=${type}]`);\n            const menuItem = label ? label.closest('.op-settings__menu-item') : null;\n            if (menuItem) {\n                menuItem.remove();\n            }\n        }\n    }\n\n    private _enterSpaceKeyEvent(e: KeyboardEvent): void {\n        const key = e.which || e.keyCode || 0;\n        const isAd = this.#player.isAd();\n        const settingsBtnFocused = document?.activeElement?.classList.contains('op-controls__settings');\n\n        const menuFocused =\n            document?.activeElement?.classList.contains('op-settings__menu-content') ||\n            document?.activeElement?.classList.contains('op-settings__back') ||\n            document?.activeElement?.classList.contains('op-settings__submenu-label');\n        if (!isAd) {\n            if (settingsBtnFocused && (key === 13 || key === 32)) {\n                this.clickEvent();\n                e.preventDefault();\n                e.stopPropagation();\n            } else if (menuFocused && (key === 13 || key === 32)) {\n                this.#events.global['settings.submenu'](e);\n                e.preventDefault();\n                e.stopPropagation();\n            }\n        }\n    }\n}\n\nexport default Settings;\n","import { EventsList, PlayerComponent } from '../interfaces';\nimport Player from '../player';\nimport { EVENT_OPTIONS } from '../utils/constants';\nimport { formatTime } from '../utils/time';\n\nclass Time implements PlayerComponent {\n    #player: Player;\n\n    #currentTime: HTMLTimeElement;\n\n    #delimiter: HTMLSpanElement;\n\n    #duration: HTMLTimeElement;\n\n    #container: HTMLSpanElement;\n\n    #events: EventsList = {\n        controls: {},\n        media: {},\n    };\n\n    #controlPosition: string;\n\n    #controlLayer: string;\n\n    constructor(player: Player, position: string, layer: string) {\n        this.#player = player;\n        this.#controlPosition = position;\n        this.#controlLayer = layer;\n    }\n\n    create(): void {\n        const { labels, progress } = this.#player.getOptions();\n\n        this.#currentTime = document.createElement('time');\n        this.#currentTime.className = 'op-controls__current';\n        this.#currentTime.setAttribute('role', 'timer');\n        this.#currentTime.setAttribute('aria-live', 'off');\n        this.#currentTime.setAttribute('aria-hidden', 'false');\n        this.#currentTime.innerText = '0:00';\n\n        const showOnlyCurrent = progress?.showCurrentTimeOnly || false;\n\n        if (!showOnlyCurrent) {\n            this.#delimiter = document.createElement('span');\n            this.#delimiter.className = 'op-controls__time-delimiter';\n            this.#delimiter.setAttribute('aria-hidden', 'false');\n            this.#delimiter.innerText = '/';\n\n            this.#duration = document.createElement('time');\n            this.#duration.className = 'op-controls__duration';\n            this.#duration.setAttribute('aria-hidden', 'false');\n            this.#duration.innerText = formatTime(progress?.duration || 0);\n        }\n\n        const controls = this.#player.getControls().getLayer(this.#controlLayer);\n        this.#container = document.createElement('span');\n        this.#container.className = `op-controls-time op-control__${this.#controlPosition}`;\n        this.#container.appendChild(this.#currentTime);\n        if (!showOnlyCurrent) {\n            this.#container.appendChild(this.#delimiter);\n            this.#container.appendChild(this.#duration);\n        }\n        controls.appendChild(this.#container);\n\n        const setInitialTime = (): void => {\n            const el = this.#player.activeElement();\n            if (el.duration !== Infinity && !this.#player.getElement().getAttribute('op-live__enabled')) {\n                if (!showOnlyCurrent) {\n                    const duration = !Number.isNaN(el.duration)\n                        ? el.duration\n                        : this.#player.getOptions().progress?.duration || 0;\n                    this.#duration.innerText = formatTime(duration);\n                }\n                this.#currentTime.innerText = formatTime(el.currentTime);\n            } else if (!showOnlyCurrent) {\n                this.#duration.setAttribute('aria-hidden', 'true');\n                this.#delimiter.setAttribute('aria-hidden', 'true');\n            }\n        };\n\n        this.#events.media.loadedmetadata = setInitialTime.bind(this);\n        this.#events.controls.controlschanged = setInitialTime.bind(this);\n\n        const { showLabel: showLiveLabel } = this.#player.getOptions().live || {};\n\n        this.#events.media.timeupdate = (): void => {\n            const el = this.#player.activeElement();\n            if (\n                el.duration !== Infinity &&\n                !this.#player.getElement().getAttribute('op-live__enabled') &&\n                !this.#player.getElement().getAttribute('op-dvr__enabled')\n            ) {\n                const duration = formatTime(el.duration);\n                if (!showOnlyCurrent && !Number.isNaN(el.duration) && duration !== this.#duration.innerText) {\n                    this.#duration.innerText = duration;\n                    this.#duration.setAttribute('aria-hidden', 'false');\n                    this.#delimiter.setAttribute('aria-hidden', 'false');\n                } else if (showOnlyCurrent || duration !== this.#duration.innerText) {\n                    this.#currentTime.innerText = showLiveLabel ? labels?.live || '' : formatTime(el.currentTime);\n                }\n                this.#currentTime.innerText = formatTime(el.currentTime);\n            } else if (this.#player.getElement().getAttribute('op-dvr__enabled')) {\n                if (!showOnlyCurrent) {\n                    this.#duration.setAttribute('aria-hidden', 'true');\n                    this.#delimiter.setAttribute('aria-hidden', 'true');\n                }\n                this.#currentTime.innerText = formatTime(el.currentTime);\n            } else if (\n                showOnlyCurrent ||\n                (!this.#player.getElement().getAttribute('op-dvr__enabled') &&\n                    this.#duration.getAttribute('aria-hidden') === 'false')\n            ) {\n                if (!showOnlyCurrent) {\n                    this.#duration.setAttribute('aria-hidden', 'true');\n                    this.#delimiter.setAttribute('aria-hidden', 'true');\n                }\n                this.#currentTime.innerText = showLiveLabel ? labels?.live || '' : formatTime(el.currentTime);\n            } else {\n                this.#currentTime.innerText = showLiveLabel ? labels?.live || '' : formatTime(el.currentTime);\n            }\n        };\n        this.#events.media.ended = (): void => {\n            const el = this.#player.activeElement();\n            const duration = !Number.isNaN(el.duration)\n                ? el.duration\n                : this.#player.getOptions().progress?.duration || 0;\n            if (!showOnlyCurrent && this.#player.isMedia()) {\n                this.#duration.innerText = formatTime(duration);\n            }\n        };\n\n        Object.keys(this.#events.media).forEach((event) => {\n            this.#player.getElement().addEventListener(event, this.#events.media[event], EVENT_OPTIONS);\n        });\n\n        this.#player\n            .getControls()\n            .getContainer()\n            .addEventListener('controlschanged', this.#events.controls.controlschanged, EVENT_OPTIONS);\n    }\n\n    destroy(): void {\n        Object.keys(this.#events.media).forEach((event) => {\n            this.#player.getElement().removeEventListener(event, this.#events.media[event]);\n        });\n\n        this.#player\n            .getControls()\n            .getContainer()\n            .removeEventListener('controlschanged', this.#events.controls.controlschanged);\n\n        this.#currentTime.remove();\n        const { showCurrentTimeOnly } = this.#player.getOptions().progress || {};\n        if (!showCurrentTimeOnly) {\n            this.#delimiter.remove();\n            this.#duration.remove();\n        }\n        this.#container.remove();\n    }\n}\n\nexport default Time;\n","import { EventsList, PlayerComponent } from '../interfaces';\nimport Player from '../player';\nimport { EVENT_OPTIONS, IS_ANDROID, IS_IOS } from '../utils/constants';\nimport { addEvent } from '../utils/general';\n\nclass Volume implements PlayerComponent {\n    #player: Player;\n\n    #button: HTMLButtonElement;\n\n    #container: HTMLDivElement;\n\n    #display: HTMLProgressElement;\n\n    #slider: HTMLInputElement;\n\n    #events: EventsList = {\n        button: {},\n        media: {},\n        slider: {},\n    };\n\n    #volume: number;\n\n    #controlPosition: string;\n\n    #controlLayer: string;\n\n    constructor(player: Player, position: string, layer: string) {\n        this.#player = player;\n        this.#volume = this.#player.getMedia().volume;\n        this.#controlPosition = position;\n        this.#controlLayer = layer;\n        this._enterSpaceKeyEvent = this._enterSpaceKeyEvent.bind(this);\n    }\n\n    create(): void {\n        const { labels } = this.#player.getOptions();\n\n        this.#container = document.createElement('div');\n        this.#container.className = `op-controls__volume op-control__${this.#controlPosition}`;\n        this.#container.tabIndex = 0;\n        this.#container.setAttribute('aria-valuemin', '0');\n        this.#container.setAttribute('aria-valuemax', '100');\n        this.#container.setAttribute('aria-valuenow', `${this.#volume}`);\n        this.#container.setAttribute('aria-valuetext', `${labels?.volume || ''}: ${this.#volume}`);\n        this.#container.setAttribute('aria-orientation', 'vertical');\n        this.#container.setAttribute('aria-label', labels?.volumeSlider || '');\n        this.#container.setAttribute('role', 'slider');\n\n        this.#slider = document.createElement('input');\n        this.#slider.type = 'range';\n        this.#slider.className = 'op-controls__volume--input';\n        this.#slider.tabIndex = -1;\n        this.#slider.value = this.#player.getMedia().volume.toString();\n        this.#slider.setAttribute('min', '0');\n        this.#slider.setAttribute('max', '1');\n        this.#slider.setAttribute('step', '0.1');\n        this.#slider.setAttribute('aria-label', labels?.volumeControl || '');\n\n        this.#display = document.createElement('progress');\n        this.#display.className = 'op-controls__volume--display';\n        this.#display.setAttribute('max', '10');\n        this.#display.value = this.#player.getMedia().volume * 10;\n\n        this.#container.appendChild(this.#slider);\n        this.#container.appendChild(this.#display);\n\n        // Use as backup when mute is clicked\n        this.#button = document.createElement('button');\n        this.#button.type = 'button';\n        this.#button.className = `op-controls__mute op-control__${this.#controlPosition}`;\n        this.#button.tabIndex = 0;\n        this.#button.title = labels?.mute || '';\n        this.#button.setAttribute('aria-controls', this.#player.id);\n        this.#button.setAttribute('aria-pressed', 'false');\n        this.#button.setAttribute('aria-label', labels?.mute || '');\n\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const updateSlider = (element: any): void => {\n            const mediaVolume = element.volume * 1;\n            const vol = Math.floor(mediaVolume * 100);\n\n            this.#slider.value = `${element.volume}`;\n            this.#display.value = mediaVolume * 10;\n            this.#container.setAttribute('aria-valuenow', `${vol}`);\n            this.#container.setAttribute('aria-valuetext', `${labels?.volume}: ${vol}`);\n        };\n\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const updateButton = (element: any): void => {\n            const vol = element.volume;\n            if (vol <= 0.5 && vol > 0) {\n                this.#button.classList.remove('op-controls__mute--muted');\n                this.#button.classList.add('op-controls__mute--half');\n            } else if (vol === 0) {\n                this.#button.classList.add('op-controls__mute--muted');\n                this.#button.classList.remove('op-controls__mute--half');\n            } else {\n                this.#button.classList.remove('op-controls__mute--muted');\n                this.#button.classList.remove('op-controls__mute--half');\n            }\n        };\n\n        const updateVolume = (event: Event): void => {\n            const el = this.#player.activeElement();\n            const value = parseFloat((event.target as HTMLInputElement).value);\n            el.volume = value;\n            el.muted = el.volume === 0;\n            this.#volume = value;\n            const unmuteEl = this.#player.getContainer().querySelector('.op-player__unmute');\n            if (!el.muted && unmuteEl) {\n                unmuteEl.remove();\n            }\n            const e = addEvent('volumechange');\n            this.#player.getElement().dispatchEvent(e);\n        };\n\n        this.#events.media.volumechange = (): void => {\n            const el = this.#player.activeElement();\n            updateSlider(el);\n            updateButton(el);\n        };\n        this.#events.media.loadedmetadata = (): void => {\n            const el = this.#player.activeElement();\n            if (el.muted) {\n                el.volume = 0;\n            }\n            const e = addEvent('volumechange');\n            this.#player.getElement().dispatchEvent(e);\n        };\n        this.#events.slider.input = updateVolume.bind(this);\n        this.#events.slider.change = updateVolume.bind(this);\n\n        this.#events.button.click = (): void => {\n            this.#button.setAttribute('aria-pressed', 'true');\n            const el = this.#player.activeElement();\n            el.muted = !el.muted;\n\n            if (el.muted) {\n                el.volume = 0;\n                this.#button.title = labels?.unmute || '';\n                this.#button.setAttribute('aria-label', labels?.unmute || '');\n            } else {\n                el.volume = this.#volume;\n                this.#button.title = labels?.mute || '';\n                this.#button.setAttribute('aria-label', labels?.mute || '');\n            }\n            const event = addEvent('volumechange');\n            this.#player.getElement().dispatchEvent(event);\n        };\n\n        this.#button.addEventListener('click', this.#events.button.click, EVENT_OPTIONS);\n        Object.keys(this.#events.media).forEach((event) => {\n            this.#player.getElement().addEventListener(event, this.#events.media[event], EVENT_OPTIONS);\n        });\n\n        Object.keys(this.#events.slider).forEach((event) => {\n            this.#slider.addEventListener(event, this.#events.slider[event], EVENT_OPTIONS);\n        });\n\n        this.#player.getContainer().addEventListener('keydown', this._enterSpaceKeyEvent, EVENT_OPTIONS);\n\n        if ((!IS_ANDROID && !IS_IOS) || !this.#player.getOptions().useDeviceVolume) {\n            const controls = this.#player.getControls().getLayer(this.#controlLayer);\n            controls.appendChild(this.#button);\n            controls.appendChild(this.#container);\n        }\n    }\n\n    destroy(): void {\n        this.#button.removeEventListener('click', this.#events.button.click);\n        Object.keys(this.#events.media).forEach((event) => {\n            this.#player.getElement().removeEventListener(event, this.#events.media[event]);\n        });\n\n        Object.keys(this.#events.slider).forEach((event) => {\n            this.#slider.removeEventListener(event, this.#events.slider[event]);\n        });\n\n        this.#player.getContainer().removeEventListener('keydown', this._enterSpaceKeyEvent);\n\n        this.#slider.remove();\n        this.#display.remove();\n        this.#container.remove();\n    }\n\n    private _enterSpaceKeyEvent(e: KeyboardEvent): void {\n        const key = e.which || e.keyCode || 0;\n        const el = this.#player.activeElement();\n        const playBtnFocused = document?.activeElement?.classList.contains('op-controls__mute');\n\n        if (playBtnFocused && (key === 13 || key === 32)) {\n            el.muted = !el.muted;\n            el.volume = el.muted ? 0 : this.#volume;\n            this.#events.button.click();\n            e.preventDefault();\n            e.stopPropagation();\n        }\n    }\n}\n\nexport default Volume;\n","import Captions from './controls/captions';\nimport Fullscreen from './controls/fullscreen';\nimport Levels from './controls/levels';\nimport Play from './controls/play';\nimport Progress from './controls/progress';\nimport Settings from './controls/settings';\nimport Time from './controls/time';\nimport Volume from './controls/volume';\nimport { ElementItem, EventsList, PlayerComponent, PlayerLayers, SettingsItem } from './interfaces';\nimport Player from './player';\nimport { EVENT_OPTIONS, IS_ANDROID, IS_IOS } from './utils/constants';\nimport { addEvent, isAudio, isVideo, sanitize } from './utils/general';\n\nclass Controls implements PlayerComponent {\n    events: EventsList = {\n        media: {},\n        mouse: {},\n    };\n\n    #settings: Settings;\n\n    #timer = 0;\n\n    #controls: HTMLDivElement;\n\n    #player: Player;\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    #items: any;\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    #controlEls: any = {\n        Captions,\n        Fullscreen,\n        Levels,\n        Play,\n        Progress,\n        Settings,\n        Time,\n        Volume,\n    };\n\n    constructor(player: Player) {\n        this.#player = player;\n        this._setElements();\n    }\n\n    create(): void {\n        this.#player.getElement().controls = false;\n\n        const isMediaVideo = isVideo(this.#player.getElement());\n\n        this._createControlsLayer();\n        this._buildElements();\n\n        this.events.controlschanged = (): void => {\n            this.destroy();\n            this._setElements();\n            this.create();\n        };\n\n        this.events.ended = (): void => {\n            this.#player.getContainer().classList.remove('op-controls--hidden');\n        };\n\n        this.#player.getElement().addEventListener('controlschanged', this.events.controlschanged, EVENT_OPTIONS);\n        this.#player.getElement().addEventListener('ended', this.events.ended, EVENT_OPTIONS);\n\n        const { alwaysVisible } = this.#player.getOptions().controls || {};\n\n        if (!alwaysVisible) {\n            const showControls = (): void => {\n                if (isMediaVideo) {\n                    this.#player.getContainer().classList.remove('op-controls--hidden');\n                    this._stopControlTimer();\n                }\n            };\n\n            this.events.mouse.mouseenter = (): void => {\n                if (isMediaVideo && !this.#player.activeElement().paused) {\n                    this._stopControlTimer();\n                    if (this.#player.activeElement().currentTime) {\n                        this.#player.playBtn.setAttribute('aria-hidden', this.#player.isMedia() ? 'false' : 'true');\n                        this.#player.loader.setAttribute('aria-hidden', 'true');\n                    } else if (this.#player.getOptions().showLoaderOnInit) {\n                        this.#player.playBtn.setAttribute('aria-hidden', 'true');\n                        this.#player.loader.setAttribute('aria-hidden', 'false');\n                    }\n                    this.#player.getContainer().classList.remove('op-controls--hidden');\n                    this._startControlTimer(2500);\n                }\n            };\n            this.events.mouse.mousemove = (): void => {\n                if (isMediaVideo && !this.#player.activeElement().paused) {\n                    if (this.#player.activeElement().currentTime) {\n                        this.#player.loader.setAttribute('aria-hidden', 'true');\n                        this.#player.playBtn.setAttribute('aria-hidden', this.#player.isMedia() ? 'false' : 'true');\n                    } else {\n                        this.#player.playBtn.setAttribute(\n                            'aria-hidden',\n                            this.#player.getOptions().showLoaderOnInit ? 'true' : 'false'\n                        );\n                        this.#player.loader.setAttribute(\n                            'aria-hidden',\n                            this.#player.getOptions().showLoaderOnInit ? 'false' : 'true'\n                        );\n                    }\n\n                    this.#player.getContainer().classList.remove('op-controls--hidden');\n                    this._startControlTimer(2500);\n                }\n            };\n            this.events.mouse.mouseleave = (): void => {\n                if (isMediaVideo && !this.#player.activeElement().paused) {\n                    this._startControlTimer(1000);\n                }\n            };\n            this.events.media.play = (): void => {\n                if (isMediaVideo) {\n                    this._startControlTimer(this.#player.getOptions().hidePlayBtnTimer || 350);\n                }\n            };\n            this.events.media.loadedmetadata = showControls.bind(this);\n            this.events.media.pause = showControls.bind(this);\n            this.events.media.waiting = showControls.bind(this);\n            this.events.media.stalled = showControls.bind(this);\n            this.events.media.playererror = showControls.bind(this);\n\n            Object.keys(this.events.media).forEach((event) => {\n                this.#player.getElement().addEventListener(event, this.events.media[event], EVENT_OPTIONS);\n            });\n\n            if (IS_ANDROID || IS_IOS) {\n                this.#player.getContainer().addEventListener('click', this.events.mouse.mouseenter, EVENT_OPTIONS);\n            } else {\n                Object.keys(this.events.mouse).forEach((event) => {\n                    this.#player.getContainer().addEventListener(event, this.events.mouse[event], EVENT_OPTIONS);\n                });\n            }\n\n            // Initial countdown to hide controls\n            if (isMediaVideo && !this.#player.activeElement().paused) {\n                this._startControlTimer(3000);\n            }\n        }\n    }\n\n    destroy(): void {\n        if (!IS_ANDROID && !IS_IOS) {\n            Object.keys(this.events.mouse).forEach((event) => {\n                this.#player.getContainer().removeEventListener(event, this.events.mouse[event]);\n            });\n\n            Object.keys(this.events.media).forEach((event) => {\n                this.#player.getElement().removeEventListener(event, this.events.media[event]);\n            });\n\n            this._stopControlTimer();\n        }\n\n        this.#player.getElement().removeEventListener('controlschanged', this.events.controlschanged);\n        this.#player.getElement().removeEventListener('ended', this.events.ended);\n\n        Object.keys(this.#items).forEach((position: string) => {\n            this.#items[position].forEach((item: unknown) => {\n                if ((item as ElementItem).custom) {\n                    this._destroyCustomElement(item as ElementItem);\n                } else if (typeof (item as PlayerComponent).destroy === 'function') {\n                    (item as PlayerComponent).destroy();\n                }\n            });\n        });\n\n        this.#controls.remove();\n    }\n\n    getContainer(): HTMLDivElement {\n        return this.#controls;\n    }\n\n    getLayer(layer: string): HTMLDivElement {\n        return this.#controls.querySelector(`.op-controls-layer__${layer}`) || this.#controls;\n    }\n\n    private _createControlsLayer(): void {\n        if (!this.#controls || !this.#player.getContainer().querySelector('.op-controls')) {\n            this.#controls = document.createElement('div');\n            this.#controls.className = 'op-controls';\n            this.#player.getContainer().appendChild(this.#controls);\n\n            const messageContainer = document.createElement('div');\n            messageContainer.className = 'op-status';\n            messageContainer.innerHTML = '<span></span>';\n            messageContainer.tabIndex = -1;\n            messageContainer.setAttribute('aria-hidden', 'true');\n\n            if (isAudio(this.#player.getElement())) {\n                this.#controls.appendChild(messageContainer);\n            }\n        }\n    }\n\n    private _startControlTimer(time: number): void {\n        const el = this.#player.activeElement();\n        this._stopControlTimer();\n\n        if (typeof window !== 'undefined') {\n            this.#timer = window.setTimeout(() => {\n                if ((!el.paused || !el.ended) && isVideo(this.#player.getElement())) {\n                    this.#player.getContainer().classList.add('op-controls--hidden');\n                    this.#player.playBtn.setAttribute('aria-hidden', 'true');\n                    this._stopControlTimer();\n                    const event = addEvent('controlshidden');\n                    this.#player.getElement().dispatchEvent(event);\n                }\n            }, time);\n        }\n    }\n\n    private _stopControlTimer(): void {\n        if (this.#timer !== 0) {\n            clearTimeout(this.#timer);\n            this.#timer = 0;\n        }\n    }\n\n    private _setElements(): void {\n        const controls = this.#player.getOptions().controls?.layers || {};\n        this.#items = {\n            'bottom-left': [],\n            'bottom-middle': [],\n            'bottom-right': [],\n            left: [],\n            main: [],\n            middle: [],\n            right: [],\n            'top-left': [],\n            'top-middle': [],\n            'top-right': [],\n        };\n\n        const isVideoEl = isVideo(this.#player.getElement());\n        const isAudioEl = isAudio(this.#player.getElement());\n\n        const controlPositions = Object.keys(controls);\n        const layersExist = controlPositions.find((item) => /^(top|bottom)/.test(item));\n        this._createControlsLayer();\n\n        controlPositions.forEach((position: string) => {\n            const [layer, pos] = position.split('-');\n\n            // Create extra layers if top/bottom exist\n            if (pos) {\n                if (!this.#controls.classList.contains('op-controls__stacked')) {\n                    this.#controls.classList.add('op-controls__stacked');\n                }\n                const className = `op-controls-layer__${layer}`;\n                if (!this.#controls.querySelector(`.${className}`)) {\n                    const controlLayer = document.createElement('div');\n                    controlLayer.className = className;\n                    this.#controls.appendChild(controlLayer);\n                }\n            } else if (layersExist) {\n                const className = 'op-controls-layer__center';\n                if (!this.#controls.querySelector(`.${className}`)) {\n                    const controlLayer = document.createElement('div');\n                    controlLayer.className = className;\n                    this.#controls.appendChild(controlLayer);\n                }\n            }\n\n            const layers = controls ? controls[position as keyof PlayerLayers] : null;\n            if (layers) {\n                // remove duplicate values in the same position\n                layers\n                    .filter((v: string, i: number, a: string[]) => a.indexOf(v) === i)\n                    .forEach((el: string) => {\n                        const currentLayer = layersExist && !pos ? 'center' : layer;\n                        const className = `${el.charAt(0).toUpperCase()}${el.slice(1)}`;\n                        const item = new this.#controlEls[className](this.#player, pos || layer, currentLayer);\n                        if (el === 'settings') {\n                            this.#settings = item as Settings;\n                        }\n                        if (isVideoEl || (el !== 'fullscreen' && isAudioEl)) {\n                            this.#items[position].push(item);\n                        }\n                    });\n            }\n        });\n\n        // Append/prepend the custom items (if any) depending on their position:\n        // If position is right, always prepend so Settings and Fullscreen are the last items;\n        // otherwise, append new controls\n        this.#player.getCustomControls().forEach((item) => {\n            const [layer, pos] = item.position.split('-');\n            const currentLayer = layersExist && !pos ? 'center' : layer;\n            item.layer = currentLayer;\n            item.position = pos || layer;\n\n            if (typeof item.index === 'number') {\n                this.#items[item.position].splice(item.index, 0, item);\n            } else if (item.position === 'right') {\n                this.#items[item.position].unshift(item);\n            } else {\n                this.#items[item.position].push(item);\n            }\n        });\n    }\n\n    private _buildElements(): void {\n        // Loop controls to build them and register events\n        Object.keys(this.#items).forEach((position) => {\n            this.#items[position].forEach((item: unknown) => {\n                if ((item as ElementItem).custom) {\n                    this._createCustomElement(item as ElementItem);\n                } else {\n                    (item as PlayerComponent).create();\n                }\n            });\n        });\n\n        Object.keys(this.#items).forEach((position) => {\n            this.#items[position].forEach((item: unknown) => {\n                const allowDefault = !this.#player.getOptions().detachMenus || item instanceof Settings;\n                const current = item as PlayerComponent;\n                if (allowDefault && !current.custom && typeof current.addSettings === 'function') {\n                    const menuItem = current.addSettings() as SettingsItem;\n                    if (this.#settings && Object.keys(menuItem).length) {\n                        this.#settings.addItem(\n                            menuItem.name,\n                            menuItem.key,\n                            menuItem.default,\n                            menuItem.subitems,\n                            menuItem.className\n                        );\n                    }\n                }\n            });\n        });\n\n        const e = addEvent('controlschanged');\n        this.#controls.dispatchEvent(e);\n    }\n\n    private _hideCustomMenu(menu: HTMLDivElement): void {\n        let timeout;\n        if (timeout && typeof window !== 'undefined') {\n            window.cancelAnimationFrame(timeout);\n        }\n\n        if (typeof window !== 'undefined') {\n            timeout = window.requestAnimationFrame(() => {\n                menu.setAttribute('aria-hidden', 'true');\n            });\n        }\n    }\n\n    private _toggleCustomMenu(event: Event, menu: HTMLDivElement, item: ElementItem): void {\n        const menus = this.#player.getContainer().querySelectorAll('.op-settings');\n        menus.forEach((m) => {\n            if (m.getAttribute('aria-hidden') === 'false' && m.id !== menu.id) {\n                m.setAttribute('aria-hidden', 'true');\n            }\n        });\n        menu.setAttribute('aria-hidden', menu.getAttribute('aria-hidden') === 'true' ? 'false' : 'true');\n        if (typeof item.click === 'function') {\n            item.click(event);\n        }\n    }\n\n    private _createCustomElement(item: ElementItem): void {\n        const element = document.createElement(item.type);\n        element.tabIndex = 0;\n        element.id = item.id;\n        element.className = `op-controls__${item.id} op-control__${item.position} ${\n            item.showInAds ? '' : 'op-control__hide-in-ad'\n        }`;\n\n        if (item.styles) {\n            Object.assign(element.style, item.styles);\n        }\n\n        if (item.type === 'button' && item.icon) {\n            element.innerHTML = /\\.(jpg|png|svg|gif)$/.test(item.icon)\n                ? `<img src=\"${sanitize(item.icon)}\"${item.alt ? `alt=\"${sanitize(item.alt)}\"` : ''}>`\n                : sanitize(item.icon);\n        } else if (item.content) {\n            element.innerHTML = sanitize(item.content, false);\n        }\n        if (item.type === 'button' && item.title) {\n            element.title = sanitize(item.title);\n        }\n        if (item.type === 'img' && item.alt) {\n            (element as HTMLImageElement).alt = sanitize(item.alt);\n        }\n        if (item.type !== 'button' && item.click && typeof item.click === 'function') {\n            element.setAttribute('aria-role', 'button');\n        }\n\n        // In the event we have subitems for a button control, create menu and attach events for each item\n        if (item.type === 'button' && item.subitems && Array.isArray(item.subitems) && item.subitems.length > 0) {\n            const menu = document.createElement('div');\n            menu.className = 'op-settings op-settings__custom';\n            menu.id = `${item.id}-menu`;\n            menu.setAttribute('aria-hidden', 'true');\n\n            const items = item.subitems.map((s) => {\n                let itemIcon = '';\n                if (s.icon) {\n                    itemIcon = /\\.(jpg|png|svg|gif)$/.test(s.icon)\n                        ? `<img src=\"${sanitize(s.icon)}\"${s.alt ? `alt=\"${sanitize(s.alt)}\"` : ''}>`\n                        : sanitize(s.icon, false);\n                }\n                return `<div class=\"op-settings__menu-item\" tabindex=\"0\" ${\n                    s.title ? `title=\"${s.title}\"` : ''\n                } role=\"menuitemradio\">\n                    <div class=\"op-settings__menu-label\" id=\"${s.id}\" data-value=\"${item.id}-${s.id}\">${itemIcon} ${\n                    s.label\n                }</div>\n                </div>`;\n            });\n\n            menu.innerHTML = `<div class=\"op-settings__menu\" role=\"menu\">${items.join('')}</div>`;\n            this.#player.getContainer().appendChild(menu);\n\n            item.subitems.forEach((subitem) => {\n                const menuItem = menu.querySelector(`#${subitem.id}`);\n                if (menuItem && subitem.click && typeof subitem.click === 'function') {\n                    menuItem.addEventListener('click', subitem.click, EVENT_OPTIONS);\n                }\n            });\n\n            // Ensure to toggle menu, hide other settings menus and dispatch a general custom\n            // click event (if created)\n            element.addEventListener('click', (e) => this._toggleCustomMenu(e, menu, item), EVENT_OPTIONS);\n\n            this.#player\n                .getElement()\n                .addEventListener('controlshidden', () => this._hideCustomMenu(menu), EVENT_OPTIONS);\n        } else if (item.click && typeof item.click === 'function') {\n            element.addEventListener('click', item.click, EVENT_OPTIONS);\n        }\n        if (item.mouseenter && typeof item.mouseenter === 'function') {\n            element.addEventListener('mouseenter', item.mouseenter, EVENT_OPTIONS);\n        }\n        if (item.mouseleave && typeof item.mouseleave === 'function') {\n            element.addEventListener('mouseleave', item.mouseleave, EVENT_OPTIONS);\n        }\n        if (item.keydown && typeof item.keydown === 'function') {\n            element.addEventListener('keydown', item.keydown, EVENT_OPTIONS);\n        }\n        if (item.blur && typeof item.blur === 'function') {\n            element.addEventListener('blur', item.blur, EVENT_OPTIONS);\n        }\n        if (item.focus && typeof item.focus === 'function') {\n            element.addEventListener('focus', item.focus, EVENT_OPTIONS);\n        }\n        if (item.layer) {\n            if (item.layer === 'main') {\n                this.#player.getContainer().appendChild(element);\n            } else {\n                this.getLayer(item.layer).appendChild(element);\n            }\n        }\n\n        // If there's an initial set of operations to dispatch as soon as the control\n        // is created, dispatch them\n        if (item.init && typeof item.init === 'function') {\n            item.init(this.#player);\n        }\n    }\n\n    private _destroyCustomElement(item: ElementItem): void {\n        const control = this.getContainer().querySelector(`.op-controls__${item.id}`);\n        if (control) {\n            if (item.subitems && Array.isArray(item.subitems) && item.subitems.length > 0) {\n                const menu = this.#player.getContainer().querySelector(`#${item.id}-menu`) as HTMLDivElement;\n                if (menu) {\n                    item.subitems.forEach((subitem) => {\n                        const menuItem = menu.querySelector(`#${subitem.id}`);\n                        if (menuItem && subitem.click && typeof subitem.click === 'function') {\n                            menuItem.removeEventListener('click', subitem.click);\n                        }\n                    });\n\n                    control.removeEventListener('click', (e) => this._toggleCustomMenu(e, menu, item));\n\n                    this.#player.getElement().removeEventListener('controlshidden', () => this._hideCustomMenu(menu));\n                    menu.remove();\n                }\n            }\n            if (item.click && typeof item.click === 'function') {\n                control.removeEventListener('click', item.click);\n            }\n            if (item.mouseenter && typeof item.mouseenter === 'function') {\n                control.removeEventListener('mouseenter', item.mouseenter);\n            }\n            if (item.mouseleave && typeof item.mouseleave === 'function') {\n                control.removeEventListener('mouseleave', item.mouseleave);\n            }\n            if (item.keydown && typeof item.keydown === 'function') {\n                control.removeEventListener('keydown', item.keydown);\n            }\n            if (item.blur && typeof item.blur === 'function') {\n                control.removeEventListener('blur', item.blur);\n            }\n            if (item.focus && typeof item.focus === 'function') {\n                control.removeEventListener('focus', item.focus);\n            }\n            control.remove();\n\n            // If there's an initial set of operations to dispatch as soon as the control\n            // is created, dispatch them\n            if (item.destroy && typeof item.destroy === 'function') {\n                item.destroy(this.#player);\n            }\n        }\n    }\n}\n\nexport default Controls;\n","import { Level, Source } from '../interfaces';\n\nabstract class Native {\n    element: HTMLMediaElement;\n\n    media: Source;\n\n    promise: Promise<unknown>;\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    #customPlayer: any;\n\n    constructor(element: HTMLMediaElement, media: Source) {\n        this.element = element;\n        this.media = media;\n        this.promise = new Promise<void>((resolve) => {\n            resolve();\n        });\n    }\n\n    abstract canPlayType(mimeType: string): boolean;\n\n    abstract load(): void;\n\n    abstract destroy(): void;\n\n    abstract set src(media: Source);\n\n    abstract get src(): Source;\n\n    abstract set level(value: number | string | Record<string, unknown>);\n\n    abstract get level(): number | string;\n\n    abstract get levels(): Level[];\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    set instance(customPlayer: any) {\n        this.#customPlayer = customPlayer;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    get instance(): any {\n        return this.#customPlayer;\n    }\n\n    play(): Promise<void> {\n        return this.element.play();\n    }\n\n    pause(): void {\n        this.element.pause();\n    }\n\n    set volume(value: number) {\n        this.element.volume = value;\n    }\n\n    get volume(): number {\n        return this.element.volume;\n    }\n\n    set muted(value: boolean) {\n        this.element.muted = value;\n    }\n\n    get muted(): boolean {\n        return this.element.muted;\n    }\n\n    set playbackRate(value: number) {\n        this.element.playbackRate = value;\n    }\n\n    get playbackRate(): number {\n        return this.element.playbackRate;\n    }\n\n    set defaultPlaybackRate(value: number) {\n        this.element.defaultPlaybackRate = value;\n    }\n\n    get defaultPlaybackRate(): number {\n        return this.element.defaultPlaybackRate;\n    }\n\n    set currentTime(value: number) {\n        this.element.currentTime = value;\n    }\n\n    get currentTime(): number {\n        return this.element.currentTime;\n    }\n\n    get duration(): number {\n        return this.element.duration;\n    }\n\n    get paused(): boolean {\n        return this.element.paused;\n    }\n\n    get ended(): boolean {\n        return this.element.ended;\n    }\n}\n\nexport default Native;\n","import { EventsList, Level, Source } from '../interfaces';\nimport { HAS_MSE } from '../utils/constants';\nimport { addEvent, loadScript } from '../utils/general';\nimport { isDashSource } from '../utils/media';\nimport Native from './native';\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\ndeclare const dashjs: any;\n\nclass DashMedia extends Native {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    #player: any;\n\n    // @see http://cdn.dashjs.org/latest/jsdoc/MediaPlayerEvents.html\n    #events: EventsList = {};\n\n    #options?: unknown = {};\n\n    constructor(element: HTMLMediaElement, mediaSource: Source, options?: unknown) {\n        super(element, mediaSource);\n        this.#options = options;\n\n        this._assign = this._assign.bind(this);\n        this._preparePlayer = this._preparePlayer.bind(this);\n\n        this.promise =\n            typeof dashjs === 'undefined'\n                ? // Ever-green script\n                  loadScript('https://cdn.dashjs.org/latest/dash.all.min.js')\n                : new Promise((resolve) => {\n                      resolve({});\n                  });\n\n        this.promise.then(() => {\n            this.#player = dashjs.MediaPlayer().create();\n            this.instance = this.#player;\n        });\n    }\n\n    canPlayType(mimeType: string): boolean {\n        return HAS_MSE && mimeType === 'application/dash+xml';\n    }\n\n    load(): void {\n        this._preparePlayer();\n        this.#player.attachSource(this.media.src);\n\n        const e = addEvent('loadedmetadata');\n        this.element.dispatchEvent(e);\n\n        if (!this.#events) {\n            this.#events = dashjs.MediaPlayer.events;\n            Object.keys(this.#events).forEach((event) => {\n                this.#player.on(this.#events[event], this._assign);\n            });\n        }\n    }\n\n    destroy(): void {\n        if (this.#events) {\n            Object.keys(this.#events).forEach((event) => {\n                this.#player.off(this.#events[event], this._assign);\n            });\n            this.#events = [];\n        }\n        this.#player.reset();\n    }\n\n    set src(media: Source) {\n        if (isDashSource(media)) {\n            this.destroy();\n            this.#player = dashjs.MediaPlayer().create();\n            this._preparePlayer();\n            this.#player.attachSource(media.src);\n\n            this.#events = dashjs.MediaPlayer.events;\n            Object.keys(this.#events).forEach((event) => {\n                this.#player.on(this.#events[event], this._assign);\n            });\n        }\n    }\n\n    get levels(): Level[] {\n        const levels: Level[] = [];\n        if (this.#player) {\n            const bitrates = this.#player.getBitrateInfoListFor('video');\n            if (bitrates.length) {\n                bitrates.forEach((item: number) => {\n                    if (bitrates[item]) {\n                        const { height, name } = bitrates[item];\n                        const level = {\n                            height,\n                            id: `${item}`,\n                            label: name || null,\n                        };\n                        levels.push(level);\n                    }\n                });\n            }\n        }\n        return levels;\n    }\n\n    set level(level: string) {\n        if (level === '0') {\n            this.#player.setAutoSwitchQuality(true);\n        } else {\n            this.#player.setAutoSwitchQuality(false);\n            this.#player.setQualityFor('video', level);\n        }\n    }\n\n    get level(): string {\n        return this.#player ? this.#player.getQualityFor('video') : '-1';\n    }\n\n    // @see http://cdn.dashjs.org/latest/jsdoc/MediaPlayerEvents.html\n    private _assign(event: Event): void {\n        if (event.type === 'error') {\n            const details = {\n                detail: {\n                    message: event,\n                    type: 'M(PEG)-DASH',\n                },\n            };\n            const errorEvent = addEvent('playererror', details);\n            this.element.dispatchEvent(errorEvent);\n        } else {\n            const e = addEvent(event.type, { detail: event });\n            this.element.dispatchEvent(e);\n        }\n    }\n\n    private _preparePlayer(): void {\n        this.#player.updateSettings({\n            debug: {\n                logLevel: dashjs.Debug.LOG_LEVEL_NONE,\n            },\n            streaming: {\n                fastSwitchEnabled: true,\n                scheduleWhilePaused: false,\n            },\n            ...((this.#options as Record<string, unknown>) || {}),\n        });\n        this.#player.initialize();\n        this.#player.attachView(this.element);\n        this.#player.setAutoPlay(false);\n    }\n}\n\nexport default DashMedia;\n","import { EventsList, Level, Source } from '../interfaces';\nimport { HAS_MSE } from '../utils/constants';\nimport { addEvent, loadScript } from '../utils/general';\nimport { isFlvSource } from '../utils/media';\nimport Native from './native';\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\ndeclare const flvjs: any;\n\nclass FlvMedia extends Native {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    #player: any;\n\n    // @see https://github.com/video-dev/hls.js/blob/master/src/events.js\n    #events: EventsList = {};\n\n    // @see https://github.com/bilibili/flv.js/blob/master/docs/api.md\n    #options?: unknown = {};\n\n    constructor(element: HTMLMediaElement, mediaSource: Source, options?: unknown) {\n        super(element, mediaSource);\n        this.#options = options;\n        this.element = element;\n        this.media = mediaSource;\n\n        this._create = this._create.bind(this);\n        this._assign = this._assign.bind(this);\n\n        this.promise =\n            typeof flvjs === 'undefined'\n                ? // Ever-green script\n                  loadScript('https://cdn.jsdelivr.net/npm/flv.js@latest/dist/flv.min.js')\n                : new Promise((resolve) => {\n                      resolve({});\n                  });\n\n        this.promise.then(this._create);\n    }\n\n    canPlayType(mimeType: string): boolean {\n        return HAS_MSE && (mimeType === 'video/x-flv' || mimeType === 'video/flv');\n    }\n\n    load(): void {\n        this.#player.unload();\n        this.#player.detachMediaElement();\n        this.#player.attachMediaElement(this.element);\n        this.#player.load();\n\n        const e = addEvent('loadedmetadata');\n        this.element.dispatchEvent(e);\n\n        if (!this.#events) {\n            this.#events = flvjs.Events;\n            Object.keys(this.#events).forEach((event) => {\n                this.#player.on(this.#events[event], (...args: Record<string, unknown>[]) =>\n                    this._assign(this.#events[event], args)\n                );\n            });\n        }\n    }\n\n    destroy(): void {\n        this.#player.destroy();\n        this.#player = null;\n    }\n\n    set src(media: Source) {\n        if (isFlvSource(media)) {\n            this.destroy();\n            this._create();\n        }\n    }\n\n    get levels(): Level[] {\n        const levels: Level[] = [];\n        if (this.#player && this.#player.levels && this.#player.levels.length) {\n            Object.keys(this.#player.levels).forEach((item) => {\n                const { height, name } = this.#player.levels[item];\n                const level = {\n                    height,\n                    id: item,\n                    label: name || null,\n                };\n                levels.push(level);\n            });\n        }\n        return levels;\n    }\n\n    set level(level: string) {\n        this.#player.currentLevel = level;\n    }\n\n    get level(): string {\n        return this.#player ? this.#player.currentLevel : '-1';\n    }\n\n    private _create(): void {\n        const { configs, ...rest } = (this.#options as Record<string, unknown>) || {};\n\n        flvjs.LoggingControl.enableDebug = rest?.debug || false;\n        flvjs.LoggingControl.enableVerbose = rest?.debug || false;\n        const options = { ...rest, type: 'flv', url: this.media.src };\n        this.#player = flvjs.createPlayer(options, configs || {});\n        this.instance = this.#player;\n\n        if (!this.#events) {\n            this.#events = flvjs.Events;\n            Object.keys(this.#events).forEach((event) => {\n                this.#player.on(this.#events[event], (...args: Record<string, unknown>[]) =>\n                    this._assign(this.#events[event], args)\n                );\n            });\n        }\n    }\n\n    // @see https://github.com/bilibili/flv.js/blob/master/docs/api.md#flvjsevents\n    // @see https://github.com/bilibili/flv.js/blob/master/docs/api.md#flvjserrortypes\n    // @see https://github.com/bilibili/flv.js/blob/master/docs/api.md#flvjserrordetails\n    private _assign(event: string, data: Record<string, unknown>[]): void {\n        if (event === 'error') {\n            const errorDetails = {\n                detail: {\n                    data,\n                    message: `${data[0]}: ${data[1]} ${data[2].msg}`,\n                    type: 'FLV',\n                },\n            };\n            const errorEvent = addEvent('playererror', errorDetails);\n            this.element.dispatchEvent(errorEvent);\n        } else {\n            const e = addEvent(event, { detail: { data } });\n            this.element.dispatchEvent(e);\n        }\n    }\n}\n\nexport default FlvMedia;\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { EventsList, Level, Source } from '../interfaces';\nimport { DVR_THRESHOLD, EVENT_OPTIONS, SUPPORTS_HLS } from '../utils/constants';\nimport { addEvent, loadScript } from '../utils/general';\nimport { isHlsSource } from '../utils/media';\nimport Native from './native';\n\ndeclare const Hls: any;\n\n// @see https://github.com/video-dev/hls.js/\nclass HlsMedia extends Native {\n    #player: any;\n\n    // @see https://github.com/video-dev/hls.js/blob/master/src/events.js\n    #events: EventsList = {};\n\n    #recoverDecodingErrorDate = 0;\n\n    #recoverSwapAudioCodecDate = 0;\n\n    // @see https://github.com/video-dev/hls.js/blob/master/docs/API.md#fine-tuning\n    #options?: unknown;\n\n    #autoplay: boolean;\n\n    constructor(element: HTMLMediaElement, mediaSource: Source, autoplay: boolean, options?: unknown) {\n        super(element, mediaSource);\n        this.#options = options || {};\n        this.element = element;\n        this.media = mediaSource;\n        this.#autoplay = autoplay;\n\n        this._create = this._create.bind(this);\n        this._play = this._play.bind(this);\n        this._pause = this._pause.bind(this);\n        this._assign = this._assign.bind(this);\n\n        this.promise =\n            typeof Hls === 'undefined'\n                ? // Ever-green script\n                  loadScript('https://cdn.jsdelivr.net/npm/hls.js@latest/dist/hls.min.js')\n                : new Promise((resolve) => {\n                      resolve({});\n                  });\n\n        this.promise.then(this._create);\n    }\n\n    canPlayType(mimeType: string): boolean {\n        return SUPPORTS_HLS() && mimeType === 'application/x-mpegURL';\n    }\n\n    load(): void {\n        if (this.#player) {\n            this.#player.detachMedia();\n            this.#player.loadSource(this.media.src);\n            this.#player.attachMedia(this.element);\n        }\n\n        const e = addEvent('loadedmetadata');\n        this.element.dispatchEvent(e);\n\n        if (!this.#events) {\n            this.#events = Hls.Events;\n            Object.keys(this.#events).forEach((event) => {\n                this.#player.on(this.#events[event], (...args: Record<string, unknown>[]) =>\n                    this._assign(this.#events[event], args)\n                );\n            });\n        }\n    }\n\n    destroy(): void {\n        if (this.#player) {\n            this.#player.stopLoad();\n        }\n        if (this.#events) {\n            Object.keys(this.#events).forEach((event) => {\n                this.#player.off(this.#events[event], (...args: Record<string, unknown>[]) =>\n                    this._assign(this.#events[event], args)\n                );\n            });\n        }\n        this.element.removeEventListener('play', this._play);\n        this.element.removeEventListener('pause', this._pause);\n        if (this.#player) {\n            this.#player.destroy();\n            this.#player = null;\n        }\n    }\n\n    set src(media: Source) {\n        if (isHlsSource(media)) {\n            this.destroy();\n            this.#player = new Hls(this.#options);\n            this.#player.loadSource(media.src);\n            this.#player.attachMedia(this.element);\n\n            this.#events = Hls.Events;\n            Object.keys(this.#events).forEach((event) => {\n                this.#player.on(this.#events[event], (...args: Record<string, unknown>[]) =>\n                    this._assign(this.#events[event], args)\n                );\n            });\n        }\n    }\n\n    get levels(): Level[] {\n        const levels: Level[] = [];\n        if (this.#player && this.#player.levels && this.#player.levels.length) {\n            Object.keys(this.#player.levels).forEach((item) => {\n                const { height, name } = this.#player.levels[item];\n                const level = {\n                    height,\n                    id: item,\n                    label: name || null,\n                };\n                levels.push(level);\n            });\n        }\n        return levels;\n    }\n\n    set level(level: string) {\n        const formattedLevel = Number(level);\n        if (formattedLevel && formattedLevel > -1) {\n            this.#player.loadLevel = formattedLevel;\n        } else {\n            this.#player.currentLevel = formattedLevel;\n        }\n    }\n\n    get level(): string {\n        return this.#player ? this.#player.currentLevel : '-1';\n    }\n\n    private _create(): void {\n        const autoplay = !!(this.element.preload === 'auto' || this.#autoplay);\n        (this.#options as Record<string, unknown>).autoStartLoad = autoplay;\n\n        this.#player = new Hls(this.#options);\n        this.instance = this.#player;\n        this.#events = Hls.Events;\n        Object.keys(this.#events).forEach((event) => {\n            this.#player.on(this.#events[event], (...args: Record<string, unknown>[]) =>\n                this._assign(this.#events[event], args)\n            );\n        });\n\n        if (!autoplay) {\n            this.element.addEventListener('play', this._play, EVENT_OPTIONS);\n            this.element.addEventListener('pause', this._pause, EVENT_OPTIONS);\n        }\n    }\n\n    // @see https://github.com/video-dev/hls.js/blob/master/src/events.js\n    // @see https://github.com/video-dev/hls.js/blob/master/src/errors.js\n    // @see https://github.com/video-dev/hls.js/blob/master/docs/API.md#runtime-events\n    // @see https://github.com/video-dev/hls.js/blob/master/docs/API.md#errors\n    private _assign(event: string, data: Record<string, unknown>[]): void {\n        if (event === 'hlsError') {\n            const errorDetails = {\n                detail: {\n                    data,\n                    message: data[1].details,\n                    type: 'HLS',\n                },\n            };\n            const errorEvent = addEvent('playererror', errorDetails);\n            this.element.dispatchEvent(errorEvent);\n\n            // borrowed from https://video-dev.github.io/hls.js/demo\n            const type = data[1].type as string;\n            const { fatal } = data[1];\n            const details = data[1];\n            if (fatal) {\n                switch (type) {\n                    case 'mediaError':\n                        const now = new Date().getTime();\n                        if (!this.#recoverDecodingErrorDate || now - this.#recoverDecodingErrorDate > 3000) {\n                            this.#recoverDecodingErrorDate = new Date().getTime();\n                            this.#player.recoverMediaError();\n                        } else if (!this.#recoverSwapAudioCodecDate || now - this.#recoverSwapAudioCodecDate > 3000) {\n                            this.#recoverSwapAudioCodecDate = new Date().getTime();\n                            console.warn('Attempting to swap Audio Codec and recover from media error');\n                            this.#player.swapAudioCodec();\n                            this.#player.recoverMediaError();\n                        } else {\n                            const msg = 'Cannot recover, last media error recovery failed';\n                            console.error(msg);\n                            const mediaEvent = addEvent(type, { detail: { data: details } });\n                            this.element.dispatchEvent(mediaEvent);\n                        }\n                        break;\n                    case 'networkError':\n                        const message = 'Network error';\n                        console.error(message);\n                        const networkEvent = addEvent(type, { detail: { data: details } });\n                        this.element.dispatchEvent(networkEvent);\n                        break;\n                    default:\n                        this.#player.destroy();\n                        const fatalEvent = addEvent(type, { detail: { data: details } });\n                        this.element.dispatchEvent(fatalEvent);\n                        break;\n                }\n            } else {\n                const err = addEvent(type, { detail: { data: details } });\n                this.element.dispatchEvent(err);\n            }\n        } else {\n            const details: Record<string, unknown> = data[1] as Record<string, unknown>;\n            if (event === 'hlsLevelLoaded' && details.live === true) {\n                this.element.setAttribute('op-live__enabled', 'true');\n                const timeEvent = addEvent('timeupdate');\n                this.element.dispatchEvent(timeEvent);\n            } else if (\n                event === 'hlsLevelUpdated' &&\n                details.live === true &&\n                (details.totalduration as number) > DVR_THRESHOLD\n            ) {\n                this.element.setAttribute('op-dvr__enabled', 'true');\n                const timeEvent = addEvent('timeupdate');\n                this.element.dispatchEvent(timeEvent);\n            } else if (event === 'hlsFragParsingMetadata') {\n                const metaEvent = addEvent('metadataready', { detail: { data: data[1] } });\n                this.element.dispatchEvent(metaEvent);\n            }\n            const e = addEvent(event, { detail: { data: data[1] } });\n            this.element.dispatchEvent(e);\n        }\n    }\n\n    private _play(): void {\n        if (this.#player) {\n            this.#player.startLoad();\n        }\n    }\n\n    private _pause(): void {\n        if (this.#player) {\n            this.#player.stopLoad();\n        }\n    }\n}\n\nexport default HlsMedia;\n","import { Level, Source } from '../interfaces';\nimport { DVR_THRESHOLD, EVENT_OPTIONS } from '../utils/constants';\nimport { addEvent, isAudio, isVideo } from '../utils/general';\nimport { isHlsSource } from '../utils/media';\nimport Native from './native';\n\nclass HTML5Media extends Native {\n    #currentLevel: Level;\n\n    #levelList: Level[] = [];\n\n    #isStreaming = false;\n\n    #retryCount = 0;\n\n    #started = false;\n\n    #timer: number;\n\n    constructor(element: HTMLMediaElement, mediaFile: Source) {\n        super(element, mediaFile);\n\n        if (!isAudio(element) && !isVideo(element)) {\n            throw new TypeError('Native method only supports video/audio tags');\n        }\n\n        this._clearTimeout = this._clearTimeout.bind(this);\n        this._setTimeout = this._setTimeout.bind(this);\n        this._dispatchError = this._dispatchError.bind(this);\n        this._isDvrEnabled = this._isDvrEnabled.bind(this);\n        this._readMediadataInfo = this._readMediadataInfo.bind(this);\n\n        this.#isStreaming = isHlsSource(mediaFile);\n        this.element.addEventListener('playing', this._clearTimeout, EVENT_OPTIONS);\n        this.element.addEventListener('stalled', this._setTimeout, EVENT_OPTIONS);\n        this.element.addEventListener('error', this._dispatchError, EVENT_OPTIONS);\n        this.element.addEventListener('loadeddata', this._isDvrEnabled, EVENT_OPTIONS);\n        this.element.textTracks.addEventListener('addtrack', this._readMediadataInfo, EVENT_OPTIONS);\n    }\n\n    canPlayType(mimeType: string): boolean {\n        return !!this.element.canPlayType(mimeType).replace('no', '');\n    }\n\n    load(): void {\n        this.element.load();\n    }\n\n    destroy(): void {\n        this.element.removeEventListener('playing', this._clearTimeout);\n        this.element.removeEventListener('stalled', this._setTimeout);\n        this.element.removeEventListener('error', this._dispatchError);\n        this.element.removeEventListener('loadeddata', this._isDvrEnabled);\n        this.element.textTracks.removeEventListener('addtrack', this._readMediadataInfo);\n    }\n\n    get levels(): Level[] {\n        if (!this.#levelList.length) {\n            const levels = this.element.querySelectorAll('source[title]');\n            for (let i = 0, total = levels.length; i < total; ++i) {\n                const level = {\n                    height: 0,\n                    id: `${i}`,\n                    label: levels[i].getAttribute('title') || '',\n                };\n                this.#levelList.push(level);\n            }\n        }\n        return this.#levelList;\n    }\n\n    set level(level: string) {\n        const idx = this.#levelList.findIndex((item) => item.id === level);\n        if (idx > -1) {\n            this.#currentLevel = this.levels[idx];\n            const levels = this.element.querySelectorAll('source[title]');\n            for (let i = 0, total = levels.length; i < total; ++i) {\n                const source = levels[i].getAttribute('src');\n                if (source && parseInt(this.#currentLevel.id, 10) === i) {\n                    this.element.src = source;\n                }\n            }\n        }\n    }\n\n    get level(): string {\n        return this.#currentLevel?.id || '-1';\n    }\n\n    set src(media: Source) {\n        this.element.src = media.src;\n    }\n\n    private _isDvrEnabled(): void {\n        const time = this.element.seekable.end(this.element.seekable.length - 1) - this.element.seekable.start(0);\n        if (this.#isStreaming && time > DVR_THRESHOLD && !this.element.getAttribute('op-dvr__enabled')) {\n            this.element.setAttribute('op-dvr__enabled', 'true');\n            const timeEvent = addEvent('timeupdate');\n            this.element.dispatchEvent(timeEvent);\n        }\n    }\n\n    private _readMediadataInfo(e: TrackEvent): void {\n        const target = e;\n        if (target?.track?.kind === 'metadata') {\n            target.track.mode = 'hidden';\n            target.track.addEventListener(\n                'cuechange',\n                (event) => {\n                    const track = event.target as TextTrack;\n                    const cue = track.activeCues ? track.activeCues[0] : null;\n                    if (cue) {\n                        const metaDataEvent = addEvent('metadataready', { detail: cue });\n                        this.element.dispatchEvent(metaDataEvent);\n                    }\n                },\n                EVENT_OPTIONS\n            );\n        }\n    }\n\n    private _setTimeout(): void {\n        if (!this.#started && window !== undefined) {\n            this.#started = true;\n            this.#timer = window.setInterval(() => {\n                if (this.#retryCount >= 30) {\n                    clearInterval(this.#timer);\n                    const message = 'Media download failed part-way due to a network error';\n                    const details = {\n                        detail: {\n                            data: { message, error: 2 },\n                            message,\n                            type: 'HTML5',\n                        },\n                    };\n                    const errorEvent = addEvent('playererror', details);\n                    this.element.dispatchEvent(errorEvent);\n                    this.#retryCount = 0;\n                    this.#started = false;\n                } else {\n                    this.#retryCount++;\n                }\n            }, 1000);\n        }\n    }\n\n    private _clearTimeout(): void {\n        if (this.#timer) {\n            clearInterval(this.#timer);\n            this.#retryCount = 0;\n            this.#started = false;\n        }\n    }\n\n    private _dispatchError(e: Event): void {\n        let defaultMessage;\n        const target = e.target as HTMLMediaElement;\n        const error = target?.error;\n        switch (error?.code) {\n            case error?.MEDIA_ERR_ABORTED:\n                defaultMessage = 'Media playback aborted';\n                break;\n            case error?.MEDIA_ERR_NETWORK:\n                defaultMessage = 'Media download failed part-way due to a network error';\n                break;\n            case error?.MEDIA_ERR_DECODE:\n                defaultMessage = `Media playback aborted due to a corruption problem or because the\n                    media used features your browser did not support.`;\n                break;\n            case error?.MEDIA_ERR_SRC_NOT_SUPPORTED:\n                defaultMessage = `Media could not be loaded, either because the server or network failed\n                    or because the format is not supported.`;\n                break;\n            default:\n                defaultMessage = 'Unknown error occurred.';\n                break;\n        }\n        const details = {\n            detail: {\n                data: { ...e, message: defaultMessage, error: error?.code },\n                message: defaultMessage,\n                type: 'HTML5',\n            },\n        };\n        const errorEvent = addEvent('playererror', details);\n        this.element.dispatchEvent(errorEvent);\n    }\n}\n\nexport default HTML5Media;\n","import { CustomMedia, Level, PlayerLayers, PlayerOptions, Source } from './interfaces';\nimport DashMedia from './media/dash';\nimport FlvMedia from './media/flv';\nimport HlsMedia from './media/hls';\nimport HTML5Media from './media/html5';\nimport * as source from './utils/media';\n\nclass Media {\n    #element: HTMLMediaElement;\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    #media: HTML5Media | HlsMedia | DashMedia | any;\n\n    #files: Source[];\n\n    #promisePlay: Promise<void>;\n\n    #options: PlayerOptions;\n\n    #autoplay: boolean;\n\n    #mediaLoaded = false;\n\n    #customMedia: CustomMedia = {\n        media: {},\n        optionsKey: {},\n        rules: [],\n    };\n\n    #currentSrc: Source;\n\n    constructor(element: HTMLMediaElement, options: PlayerOptions, autoplay: boolean, customMedia: CustomMedia) {\n        this.#element = element;\n        this.#options = options;\n        this.#files = this._getMediaFiles();\n        this.#customMedia = customMedia;\n        this.#autoplay = autoplay;\n    }\n\n    canPlayType(mimeType: string): boolean {\n        return this.#media.canPlayType(mimeType);\n    }\n\n    async load(): Promise<void> {\n        if (this.#mediaLoaded) {\n            return;\n        }\n\n        this.#mediaLoaded = true;\n\n        if (!this.#files.length) {\n            throw new TypeError('Media not set');\n        }\n\n        // Remove previous media if any is detected and it's different from current one\n        if (this.#media && typeof this.#media.destroy === 'function') {\n            const sameMedia = this.#files.length === 1 && this.#files[0].src === this.#media.media.src;\n            if (!sameMedia) {\n                this.#media.destroy();\n            }\n        }\n\n        // Loop until first playable source is found\n        this.#files.some((media) => {\n            try {\n                this.#media = this._invoke(media);\n            } catch (e) {\n                this.#media = new HTML5Media(this.#element, media);\n            }\n\n            return this.#media.canPlayType(media.type);\n        });\n\n        try {\n            if (this.#media === null) {\n                throw new TypeError('Media cannot be played with any valid media type');\n            }\n\n            await this.#media.promise;\n            this.#media.load();\n        } catch (e) {\n            // destroy media\n            if (this.#media) {\n                this.#media.destroy();\n            }\n            throw e;\n        }\n    }\n\n    // @see https://developers.google.com/web/updates/2017/06/play-request-was-interrupted\n    async play(): Promise<void> {\n        if (!this.#mediaLoaded) {\n            await this.load();\n            this.#mediaLoaded = false;\n        } else {\n            await this.#media.promise;\n        }\n        this.#promisePlay = this.#media.play();\n        return this.#promisePlay;\n    }\n\n    // @see https://developers.google.com/web/updates/2017/06/play-request-was-interrupted\n    async pause(): Promise<void> {\n        if (this.#promisePlay !== undefined) {\n            await this.#promisePlay;\n        }\n        this.#media.pause();\n    }\n\n    destroy(): void {\n        if (this.#media) {\n            this.#media.destroy();\n        }\n    }\n\n    set src(media) {\n        if (typeof media === 'string') {\n            this.#files.push({\n                src: media,\n                type: source.predictMimeType(media, this.#element),\n            });\n        } else if (Array.isArray(media)) {\n            this.#files = media;\n        } else if (typeof media === 'object') {\n            this.#files.push(media);\n        }\n\n        // Remove files without source\n        this.#files = this.#files.filter((file) => file.src);\n\n        if (this.#files.length > 0) {\n            const [file] = this.#files;\n            // Save copy of original file to restore it when player is destroyed\n            if (this.#element.src) {\n                this.#element.setAttribute('data-op-file', this.#files[0].src);\n            }\n\n            this.#element.src = file.src;\n            this.#currentSrc = file;\n            if (this.#media) {\n                this.#media.src = file;\n            }\n        } else {\n            this.#element.src = '';\n        }\n    }\n\n    get src(): Source[] {\n        return this.#files;\n    }\n\n    get current(): Source {\n        return this.#currentSrc;\n    }\n\n    set mediaFiles(sources: Source[]) {\n        this.#files = sources;\n    }\n\n    get mediaFiles(): Source[] {\n        return this.#files;\n    }\n\n    set volume(value: number) {\n        if (this.#media) {\n            this.#media.volume = value;\n        }\n    }\n\n    get volume(): number {\n        return this.#media ? this.#media.volume : this.#element.volume;\n    }\n\n    set muted(value: boolean) {\n        if (this.#media) {\n            this.#media.muted = value;\n        }\n    }\n\n    get muted(): boolean {\n        return this.#media ? this.#media.muted : this.#element.muted;\n    }\n\n    set playbackRate(value) {\n        if (this.#media) {\n            this.#media.playbackRate = value;\n        }\n    }\n\n    get playbackRate(): number {\n        return this.#media ? this.#media.playbackRate : this.#element.playbackRate;\n    }\n\n    set defaultPlaybackRate(value) {\n        if (this.#media) {\n            this.#media.defaultPlaybackRate = value;\n        }\n    }\n\n    get defaultPlaybackRate(): number {\n        return this.#media ? this.#media.defaultPlaybackRate : this.#element.defaultPlaybackRate;\n    }\n\n    set currentTime(value: number) {\n        if (this.#media) {\n            this.#media.currentTime = value;\n        }\n    }\n\n    get currentTime(): number {\n        return this.#media ? this.#media.currentTime : this.#element.currentTime;\n    }\n\n    get duration(): number {\n        const duration = this.#media ? this.#media.duration : this.#element.duration;\n        // To seek backwards in a live streaming (mobile devices)\n        if (duration === Infinity && this.#element.seekable && this.#element.seekable.length) {\n            return this.#element.seekable.end(0);\n        }\n        return duration;\n    }\n\n    get paused(): boolean {\n        return this.#media ? this.#media.paused : this.#element.paused;\n    }\n\n    get ended(): boolean {\n        return this.#media ? this.#media.ended : this.#element.ended;\n    }\n\n    set loaded(loaded: boolean) {\n        this.#mediaLoaded = loaded;\n    }\n\n    get loaded(): boolean {\n        return this.#mediaLoaded;\n    }\n\n    set level(value: number | string | Level) {\n        if (this.#media) {\n            this.#media.level = value;\n        }\n    }\n\n    get level(): number | string | Level {\n        return this.#media ? this.#media.level : -1;\n    }\n\n    get levels(): Level[] {\n        return this.#media ? this.#media.levels : [];\n    }\n\n    get instance(): Media | null {\n        return this.#media ? this.#media.instance : null;\n    }\n\n    private _getMediaFiles(): Source[] {\n        const mediaFiles = [];\n        const sourceTags = this.#element.querySelectorAll('source');\n        const nodeSource = this.#element.src;\n\n        // Consider if node contains the `src` and `type` attributes\n        if (nodeSource) {\n            mediaFiles.push({\n                src: nodeSource,\n                type: this.#element.getAttribute('type') || source.predictMimeType(nodeSource, this.#element),\n            });\n        }\n\n        // test <source> types to see if they are usable\n        for (let i = 0, total = sourceTags.length; i < total; i++) {\n            const item = sourceTags[i];\n            const { src } = item;\n            mediaFiles.push({\n                src,\n                type: item.getAttribute('type') || source.predictMimeType(src, this.#element),\n            });\n\n            // If tag has the attribute `preload` set as `none`, the current media will\n            // be the first one on the list of sources\n            if (i === 0) {\n                const [file] = mediaFiles;\n                this.#currentSrc = file;\n            }\n        }\n\n        if (!mediaFiles.length) {\n            mediaFiles.push({\n                src: '',\n                type: source.predictMimeType('', this.#element),\n            });\n        }\n\n        return mediaFiles;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    private _invoke(media: Source): HlsMedia | DashMedia | HTML5Media | any {\n        const playHLSNatively =\n            this.#element.canPlayType('application/vnd.apple.mpegurl') ||\n            this.#element.canPlayType('application/x-mpegURL');\n\n        this.#currentSrc = media;\n\n        const { layers } = this.#options.controls || {};\n\n        let activeLevels = false;\n        if (layers) {\n            Object.keys(layers).forEach((layer) => {\n                const current = layers ? layers[layer as keyof PlayerLayers] : null;\n                if (current && current.indexOf('levels') > -1) {\n                    activeLevels = true;\n                }\n            });\n        }\n\n        if (Object.keys(this.#customMedia.media).length) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            let customRef: any;\n            this.#customMedia.rules.forEach((rule) => {\n                const type = rule(media.src);\n                if (type) {\n                    const customMedia = this.#customMedia.media[type];\n                    const customOptions = this.#options[this.#customMedia.optionsKey[type]] || undefined;\n                    customRef = customMedia(this.#element, media, this.#autoplay, customOptions);\n                }\n            });\n            if (customRef) {\n                customRef.create();\n                return customRef;\n            }\n            return new HTML5Media(this.#element, media);\n        }\n        if (source.isHlsSource(media)) {\n            if (playHLSNatively && this.#options.forceNative && !activeLevels) {\n                return new HTML5Media(this.#element, media);\n            }\n            const hlsOptions = this.#options?.hls || undefined;\n            return new HlsMedia(this.#element, media, this.#autoplay, hlsOptions);\n        }\n        if (source.isDashSource(media)) {\n            const dashOptions = this.#options?.dash || undefined;\n            return new DashMedia(this.#element, media, dashOptions);\n        }\n        if (source.isFlvSource(media)) {\n            const flvOptions = this.#options?.flv || {\n                debug: false,\n                type: 'flv',\n                url: media.src,\n            };\n            return new FlvMedia(this.#element, media, flvOptions);\n        }\n\n        return new HTML5Media(this.#element, media);\n    }\n}\n\nexport default Media;\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { AdsOptions, Source } from '../interfaces';\nimport Media from '../media';\nimport Player from '../player';\nimport { EVENT_OPTIONS, IS_ANDROID, IS_IOS, IS_IPHONE } from '../utils/constants';\nimport { addEvent, isAudio, isVideo, isXml, loadScript } from '../utils/general';\n\ndeclare const google: any;\n\n// @see https://developers.google.com/interactive-media-ads/\nclass Ads {\n    loadPromise: unknown;\n\n    loadedAd = false;\n\n    #ended = false;\n\n    #done = false;\n\n    #active = false;\n\n    #started = false;\n\n    #intervalTimer = 0;\n\n    #volume: number;\n\n    #muted = false;\n\n    #duration = 0;\n\n    #currentTime = 0;\n\n    // @see https://tinyurl.com/ybjas4ut\n    #manager: any = null;\n\n    #player: Player;\n\n    #media: Media;\n\n    #element: HTMLMediaElement;\n\n    #events: string[] = [];\n\n    #ads: string | string[];\n\n    #promise: Promise<void>;\n\n    // @see https://tinyurl.com/ycwp4ufd\n    #loader: any;\n\n    #container?: HTMLDivElement;\n\n    #customClickContainer?: HTMLDivElement;\n\n    #skipElement?: HTMLElement;\n\n    // @see https://tinyurl.com/ya3zksso\n    #displayContainer: any;\n\n    // @see https://tinyurl.com/ya8bxjf4\n    #request: any;\n\n    #autostart = false;\n\n    #autostartMuted = false;\n\n    #playTriggered = false;\n\n    #options: AdsOptions;\n\n    #currentIndex = 0;\n\n    #originalVolume: number;\n\n    #preloadContent: any;\n\n    #lastTimePaused = 0;\n\n    #mediaSources: Source[] = [];\n\n    #mediaStarted = false;\n\n    #adEvent: any = null;\n\n    constructor(\n        player: Player,\n        ads: string | string[],\n        autostart?: boolean,\n        autostartMuted?: boolean,\n        options?: AdsOptions\n    ) {\n        const defaultOpts: AdsOptions = {\n            autoPlayAdBreaks: true,\n            customClick: {\n                enabled: false,\n                label: 'Click here for more info',\n            },\n            audioSkip: {\n                enabled: true,\n                label: 'Skip Ad',\n                remainingLabel: 'Skip in [[secs]] seconds',\n            },\n            debug: false,\n            enablePreloading: false,\n            language: 'en',\n            loop: false,\n            numRedirects: 4,\n            publisherId: undefined,\n            sdkPath: 'https://imasdk.googleapis.com/js/sdkloader/ima3.js',\n            sessionId: undefined,\n            src: [],\n            vpaidMode: 'enabled',\n        };\n        this.#player = player;\n        this.#ads = ads;\n        this.#media = player.getMedia();\n        this.#element = player.getElement();\n        this.#autostart = autostart || false;\n        this.#muted = player.getElement().muted;\n        this.#autostartMuted = autostartMuted || false;\n        this.#options = { ...defaultOpts, ...options };\n        if (options?.customClick && Object.keys(options.customClick).length) {\n            this.#options.customClick = { ...defaultOpts.customClick, ...options.customClick };\n        }\n        this.#playTriggered = false;\n        this.#originalVolume = this.#element.volume;\n        this.#volume = this.#originalVolume;\n\n        const path = this.#options?.debug\n            ? this.#options?.sdkPath?.replace(/(\\.js$)/, '_debug.js')\n            : this.#options?.sdkPath;\n\n        this.load = this.load.bind(this);\n        this.resizeAds = this.resizeAds.bind(this);\n        this._handleClickInContainer = this._handleClickInContainer.bind(this);\n        this._handleSkipAds = this._handleSkipAds.bind(this);\n        this._loaded = this._loaded.bind(this);\n        this._error = this._error.bind(this);\n        this._assign = this._assign.bind(this);\n        this._contentLoadedAction = this._contentLoadedAction.bind(this);\n        this._loadedMetadataHandler = this._loadedMetadataHandler.bind(this);\n        this._contentEndedListener = this._contentEndedListener.bind(this);\n        this._handleResizeAds = this._handleResizeAds.bind(this);\n        this._onContentPauseRequested = this._onContentPauseRequested.bind(this);\n        this._onContentResumeRequested = this._onContentResumeRequested.bind(this);\n\n        this.#promise =\n            path && (typeof google === 'undefined' || typeof google.ima === 'undefined')\n                ? loadScript(path)\n                : new Promise((resolve) => {\n                      resolve();\n                  });\n\n        this.#promise\n            .then(() => {\n                this.load();\n            })\n            .catch((error) => {\n                let message = 'Ad script could not be loaded; please check if you have an AdBlock ';\n                message += 'turned on, or if you provided a valid URL is correct';\n                console.error(`Ad error: ${message}.`);\n\n                const details = {\n                    detail: {\n                        data: error,\n                        message,\n                        type: 'Ads',\n                    },\n                };\n                const errorEvent = addEvent('playererror', details);\n                this.#element.dispatchEvent(errorEvent);\n            });\n    }\n\n    load(force = false): void {\n        if (\n            typeof google === 'undefined' ||\n            !google.ima ||\n            (!force && this.loadedAd && this.#options.autoPlayAdBreaks)\n        ) {\n            return;\n        }\n\n        // If we have set `autoPlayAdBreaks` to false and haven't set the force flag, don't load ads yet\n        if (!this.#options.autoPlayAdBreaks && !force) {\n            return;\n        }\n\n        this.loadedAd = true;\n\n        const existingContainer = this.#player.getContainer().querySelector('.op-ads');\n        if (existingContainer && existingContainer.parentNode) {\n            existingContainer.parentNode.removeChild(existingContainer);\n        }\n\n        this.#started = true;\n        this.#container = document.createElement('div');\n        this.#container.className = 'op-ads';\n        this.#container.tabIndex = -1;\n        if (this.#element.parentElement) {\n            this.#element.parentElement.insertBefore(this.#container, this.#element.nextSibling);\n        }\n        this.#container.addEventListener('click', this._handleClickInContainer);\n\n        if (this.#options.customClick?.enabled) {\n            this.#customClickContainer = document.createElement('div');\n            this.#customClickContainer.className = 'op-ads__click-container';\n            this.#customClickContainer.innerHTML = `<div class=\"op-ads__click-label\">${\n                this.#options.customClick.label\n            }</div>`;\n            if (this.#element.parentElement) {\n                this.#element.parentElement.insertBefore(this.#customClickContainer, this.#element.nextSibling);\n            }\n        }\n\n        if (isAudio(this.#element) && this.#options.audioSkip?.enabled) {\n            if (this.#options.audioSkip?.element) {\n                const { element } = this.#options.audioSkip || {};\n                if (typeof element === 'string') {\n                    const target = document.getElementById(element);\n                    if (target) {\n                        this.#skipElement = target;\n                    }\n                } else if (element instanceof HTMLElement) {\n                    this.#skipElement = element;\n                }\n            } else {\n                this.#skipElement = document.createElement('button');\n                this.#skipElement.className = 'op-ads__skip hidden';\n                this.#player.getControls().getContainer().appendChild(this.#skipElement);\n            }\n            if (this.#skipElement) {\n                this.#skipElement.addEventListener('click', this._handleSkipAds, EVENT_OPTIONS);\n            }\n        }\n\n        this.#mediaSources = this.#media.src;\n        const vpaidModeMap: Record<string, unknown> = {\n            disabled: google.ima.ImaSdkSettings.VpaidMode.DISABLED,\n            enabled: google.ima.ImaSdkSettings.VpaidMode.ENABLED,\n            insecure: google.ima.ImaSdkSettings.VpaidMode.INSECURE,\n        };\n\n        google.ima.settings.setVpaidMode(vpaidModeMap[this.#options.vpaidMode || 'enabled']);\n        google.ima.settings.setDisableCustomPlaybackForIOS10Plus(true);\n        google.ima.settings.setAutoPlayAdBreaks(this.#options.autoPlayAdBreaks);\n        google.ima.settings.setNumRedirects(this.#options.numRedirects);\n        google.ima.settings.setLocale(this.#options.language);\n        if (this.#options.sessionId) {\n            google.ima.settings.setSessionId(this.#options.sessionId);\n        }\n        if (this.#options.publisherId) {\n            google.ima.settings.setPpid(this.#options.publisherId);\n        }\n        google.ima.settings.setPlayerType('openplayerjs');\n        google.ima.settings.setPlayerVersion('3.0.0');\n\n        this.#displayContainer = new google.ima.AdDisplayContainer(\n            this.#container,\n            this.#element,\n            this.#customClickContainer\n        );\n\n        this.#loader = new google.ima.AdsLoader(this.#displayContainer);\n        this.#loader.addEventListener(\n            google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,\n            this._loaded,\n            EVENT_OPTIONS\n        );\n\n        this.#loader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR, this._error, EVENT_OPTIONS);\n\n        // Create responsive ad\n        if (typeof window !== 'undefined') {\n            window.addEventListener('resize', this._handleResizeAds, EVENT_OPTIONS);\n        }\n        this.#element.addEventListener('loadedmetadata', this._handleResizeAds, EVENT_OPTIONS);\n\n        // Request Ads automatically if `autoplay` was set\n        if (\n            this.#autostart === true ||\n            this.#autostartMuted === true ||\n            force === true ||\n            this.#options.enablePreloading === true ||\n            this.#playTriggered === true\n        ) {\n            if (!this.#done) {\n                this.#done = true;\n                this.#displayContainer.initialize();\n            }\n            this._requestAds();\n        }\n    }\n\n    async play(): Promise<void> {\n        if (!this.#done) {\n            this.#playTriggered = true;\n            this._initNotDoneAds();\n            return;\n        }\n\n        if (this.#manager) {\n            try {\n                // No timer interval and no Ad active means it's a potential initial ad play\n                if (!this.#intervalTimer && this.#active === false) {\n                    this.#manager.start();\n                } else {\n                    this.#manager.resume();\n                }\n                this.#active = true;\n                const e = addEvent('play');\n                this.#element.dispatchEvent(e);\n            } catch (err) {\n                this._resumeMedia();\n            }\n        }\n    }\n\n    pause(): void {\n        if (this.#manager) {\n            this.#active = false;\n            this.#manager.pause();\n            const e = addEvent('pause');\n            this.#element.dispatchEvent(e);\n        }\n    }\n\n    destroy(): void {\n        if (this.#manager) {\n            this.#manager.removeEventListener(google.ima.AdErrorEvent.Type.AD_ERROR, this._error);\n\n            if (this.#events) {\n                this.#events.forEach((event) => {\n                    this.#manager.removeEventListener(event, this._assign);\n                });\n            }\n        }\n\n        this.#events = [];\n\n        const controls = this.#player.getControls();\n        const mouseEvents = controls ? controls.events.mouse : {};\n        Object.keys(mouseEvents).forEach((event: string) => {\n            if (this.#container) {\n                this.#container.removeEventListener(event, mouseEvents[event]);\n            }\n        });\n\n        if (this.#loader) {\n            this.#loader.removeEventListener(google.ima.AdErrorEvent.Type.AD_ERROR, this._error);\n            this.#loader.removeEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED, this._loaded);\n        }\n\n        const destroy = !Array.isArray(this.#ads) || this.#currentIndex > this.#ads.length;\n        if (this.#manager && destroy) {\n            this.#manager.destroy();\n        }\n\n        if (this.#options.customClick?.enabled && this.#customClickContainer) {\n            this.#customClickContainer.remove();\n        }\n\n        if (this.#options.audioSkip?.enabled && this.#skipElement) {\n            this.#skipElement.removeEventListener('click', this._handleSkipAds);\n            this.#skipElement.remove();\n        }\n\n        if (IS_IOS || IS_ANDROID) {\n            this.#element.removeEventListener('loadedmetadata', this._contentLoadedAction);\n        }\n        this.#element.removeEventListener('loadedmetadata', this._handleResizeAds);\n        this.#element.removeEventListener('loadedmetadata', this._loadedMetadataHandler);\n        this.#element.removeEventListener('ended', this._contentEndedListener);\n        if (typeof window !== 'undefined') {\n            window.removeEventListener('resize', this._handleResizeAds);\n        }\n\n        if (this.#container) {\n            this.#container.removeEventListener('click', this._handleClickInContainer);\n            this.#container.remove();\n        }\n        this.loadPromise = null;\n        this.loadedAd = false;\n        this.#done = false;\n        this.#playTriggered = false;\n        this.#duration = 0;\n        this.#currentTime = 0;\n        this.#adEvent = null;\n    }\n\n    resizeAds(width?: number, height?: number): void {\n        if (this.#manager) {\n            const target = this.#element;\n            const mode =\n                target.getAttribute('data-fullscreen') === 'true'\n                    ? google.ima.ViewMode.FULLSCREEN\n                    : google.ima.ViewMode.NORMAL;\n\n            let formattedWidth = width;\n            const percentageWidth = width ? width.toString() : '';\n            if (width && percentageWidth.indexOf('%') > -1) {\n                if (this.#element.parentElement) {\n                    formattedWidth = this.#element.parentElement.offsetWidth * (parseInt(percentageWidth, 10) / 100);\n                }\n            }\n\n            let formattedHeight = height;\n            const percentageHeight = height ? height.toString() : '';\n            if (height && percentageHeight.indexOf('%') > -1) {\n                if (this.#element.parentElement) {\n                    formattedHeight = this.#element.parentElement.offsetHeight * (parseInt(percentageHeight, 10) / 100);\n                }\n            }\n\n            let timeout;\n\n            if (timeout && typeof window !== 'undefined') {\n                window.cancelAnimationFrame(timeout);\n            }\n            if (typeof window !== 'undefined') {\n                timeout = window.requestAnimationFrame(() => {\n                    this.#manager.resize(\n                        formattedWidth || target.offsetWidth,\n                        formattedHeight || target.offsetHeight,\n                        mode\n                    );\n                });\n            }\n        }\n    }\n\n    getAdsManager(): unknown {\n        return this.#manager;\n    }\n\n    getAdsLoader(): any {\n        return this.#loader;\n    }\n\n    started(): boolean {\n        return this.#started;\n    }\n\n    set src(source: string | string[]) {\n        this.#ads = source;\n    }\n\n    set isDone(value: boolean) {\n        this.#done = value;\n    }\n\n    set playRequested(value: boolean) {\n        this.#playTriggered = value;\n    }\n\n    set volume(value: number) {\n        if (this.#manager) {\n            this.#volume = value;\n            this.#manager.setVolume(value);\n            this._setMediaVolume(value);\n            this.#muted = value === 0;\n        }\n    }\n\n    get volume(): number {\n        return this.#manager ? this.#manager.getVolume() : this.#originalVolume;\n    }\n\n    set muted(value: boolean) {\n        if (this.#manager) {\n            if (value) {\n                this.#manager.setVolume(0);\n                this.#muted = true;\n                this._setMediaVolume(0);\n            } else {\n                this.#manager.setVolume(this.#volume);\n                this.#muted = false;\n                this._setMediaVolume(this.#volume);\n            }\n        }\n    }\n\n    get muted(): boolean {\n        return this.#muted;\n    }\n\n    set currentTime(value: number) {\n        this.#currentTime = value;\n    }\n\n    get currentTime(): number {\n        return this.#currentTime;\n    }\n\n    get duration(): number {\n        return this.#duration;\n    }\n\n    get paused(): boolean {\n        return !this.#active;\n    }\n\n    get ended(): boolean {\n        return this.#ended;\n    }\n\n    private _assign(event: any): void {\n        const ad = event.getAd();\n        if (ad) {\n            this.#adEvent = ad;\n        }\n        switch (event.type) {\n            case google.ima.AdEvent.Type.LOADED:\n                if (!ad.isLinear()) {\n                    this._onContentResumeRequested();\n                } else {\n                    if (IS_IPHONE && isVideo(this.#element)) {\n                        this.#element.controls = false;\n                    }\n                    this.#duration = ad.getDuration();\n                    this.#currentTime = ad.getDuration();\n                    if (!this.#mediaStarted && !IS_IOS && !IS_ANDROID) {\n                        const waitingEvent = addEvent('waiting');\n                        this.#element.dispatchEvent(waitingEvent);\n\n                        const loadedEvent = addEvent('loadedmetadata');\n                        this.#element.dispatchEvent(loadedEvent);\n\n                        this.resizeAds();\n                    }\n                }\n                break;\n            case google.ima.AdEvent.Type.STARTED:\n                if (ad.isLinear()) {\n                    if (\n                        this.#element.parentElement &&\n                        !this.#element.parentElement.classList.contains('op-ads--active')\n                    ) {\n                        this.#element.parentElement.classList.add('op-ads--active');\n                    }\n\n                    if (!this.#media.paused) {\n                        this.#media.pause();\n                    }\n                    this.#active = true;\n                    const playEvent = addEvent('play');\n                    this.#element.dispatchEvent(playEvent);\n                    let resized;\n\n                    if (!resized) {\n                        this.resizeAds();\n                        resized = true;\n                    }\n\n                    if (this.#media.ended) {\n                        this.#ended = false;\n                        const endEvent = addEvent('adsmediaended');\n                        this.#element.dispatchEvent(endEvent);\n                    }\n\n                    if (typeof window !== 'undefined') {\n                        this.#intervalTimer = window.setInterval(() => {\n                            if (this.#active === true) {\n                                this.#currentTime = Math.round(this.#manager.getRemainingTime());\n                                const timeEvent = addEvent('timeupdate');\n                                this.#element.dispatchEvent(timeEvent);\n                            }\n                        }, 350);\n                    }\n                }\n                break;\n            case google.ima.AdEvent.Type.COMPLETE:\n            case google.ima.AdEvent.Type.SKIPPED:\n                if (ad.isLinear()) {\n                    if (event.type === google.ima.AdEvent.Type.SKIPPED) {\n                        const skipEvent = addEvent('adsskipped');\n                        this.#element.dispatchEvent(skipEvent);\n                    }\n\n                    if (this.#element.parentElement) {\n                        this.#element.parentElement.classList.remove('op-ads--active');\n                    }\n                    this.#active = false;\n                    clearInterval(this.#intervalTimer);\n                }\n                break;\n            case google.ima.AdEvent.Type.VOLUME_CHANGED:\n                this._setMediaVolume(this.volume);\n                break;\n            case google.ima.AdEvent.Type.VOLUME_MUTED:\n                if (ad.isLinear()) {\n                    const volumeEvent = addEvent('volumechange');\n                    this.#element.dispatchEvent(volumeEvent);\n                }\n                break;\n            case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:\n                if (ad.isLinear()) {\n                    this.#active = false;\n                    this.#ended = true;\n                    this.#intervalTimer = 0;\n                    this.#muted = false;\n                    this.#started = false;\n                    this.#adEvent = null;\n                    if (this.#element.parentElement) {\n                        this.#element.parentElement.classList.remove('op-ads--active');\n                    }\n                    this.destroy();\n                    if (this.#element.currentTime >= this.#element.duration) {\n                        const endedEvent = addEvent('ended');\n                        this.#element.dispatchEvent(endedEvent);\n                    }\n                }\n                break;\n            case google.ima.AdEvent.Type.CLICK:\n                const pauseEvent = addEvent('pause');\n                this.#element.dispatchEvent(pauseEvent);\n                break;\n            case google.ima.AdEvent.Type.AD_BREAK_READY:\n                if (!this.#options.autoPlayAdBreaks) {\n                    this.play();\n                }\n                break;\n            case google.ima.AdEvent.Type.AD_PROGRESS:\n                const progressData = event.getAdData();\n                const offset = this.#adEvent ? this.#adEvent.getSkipTimeOffset() : -1;\n                if (this.#skipElement) {\n                    if (offset !== -1) {\n                        const canSkip = this.#manager.getAdSkippableState();\n                        const remainingTime = Math.ceil(offset - progressData.currentTime);\n                        this.#skipElement.classList.remove('hidden');\n                        if (canSkip) {\n                            this.#skipElement.textContent = this.#options.audioSkip?.label || '';\n                            this.#skipElement.classList.remove('disabled');\n                        } else {\n                            this.#skipElement.textContent =\n                                this.#options.audioSkip?.remainingLabel.replace('[[secs]]', remainingTime.toString()) ||\n                                '';\n                            this.#skipElement.classList.add('disabled');\n                        }\n                    } else {\n                        this.#skipElement.classList.add('hidden');\n                    }\n                }\n                break;\n            default:\n                break;\n        }\n\n        // Assign events prefixed with `ads` to main element so user\n        // can listen to these events, except if the system detects a non-fatal error\n        if (event.type === google.ima.AdEvent.Type.LOG) {\n            const adData = event.getAdData();\n            if (adData.adError) {\n                const message = adData.adError.getMessage();\n                console.warn(`Ad warning: Non-fatal error occurred: ${message}`);\n                const details = {\n                    detail: {\n                        data: adData.adError,\n                        message,\n                        type: 'Ads',\n                    },\n                };\n                const errorEvent = addEvent('playererror', details);\n                this.#element.dispatchEvent(errorEvent);\n            }\n        } else {\n            const e = addEvent(`ads${event.type}`);\n            this.#element.dispatchEvent(e);\n        }\n    }\n\n    // @see https://developers.google.com/interactive-media-ads/docs/sdks/html5/v3/apis#ima.AdError.ErrorCode\n    private _error(event: any): void {\n        const error = event.getError();\n        const details = {\n            detail: {\n                data: error,\n                message: error.toString(),\n                type: 'Ads',\n            },\n        };\n        const errorEvent = addEvent('playererror', details);\n        this.#element.dispatchEvent(errorEvent);\n\n        // @see https://support.google.com/admanager/answer/4442429?hl=en\n        const fatalErrorCodes = [\n            100, 101, 102, 300, 301, 302, 303, 400, 401, 402, 403, 405, 406, 407, 408, 409, 410, 500, 501, 502, 503,\n            900, 901, 1005,\n        ];\n\n        if (Array.isArray(this.#ads) && this.#ads.length > 1 && this.#currentIndex < this.#ads.length - 1) {\n            this.#currentIndex++;\n            this.destroy();\n            this.#started = true;\n            this.#playTriggered = true;\n            this.load(true);\n            console.warn(`Ad warning: ${error.toString()}`);\n        } else {\n            // Unless there's a fatal error, do not destroy the Ads manager\n            if (fatalErrorCodes.indexOf(error.getErrorCode()) > -1) {\n                if (this.#manager) {\n                    this.#manager.destroy();\n                }\n                console.error(`Ad error: ${error.toString()}`);\n            } else {\n                console.warn(`Ad warning: ${error.toString()}`);\n            }\n            this.#adEvent = null;\n            if (this.#autostart === true || this.#autostartMuted === true || this.#started === true) {\n                this.#active = false;\n                // Sometimes, due to pre-fetch issues, Ads could report an error, but the SDK is able to\n                // play Ads, so check if src was set to determine what action to take\n                this._resumeMedia();\n            }\n        }\n    }\n\n    private _loaded(managerLoadedEvent: any): void {\n        const adsRenderingSettings = new google.ima.AdsRenderingSettings();\n        adsRenderingSettings.restoreCustomPlaybackStateOnAdBreakComplete = false;\n        adsRenderingSettings.enablePreloading = this.#options.enablePreloading;\n        // Get the ads manager.\n        this.#manager = managerLoadedEvent.getAdsManager(this.#element, adsRenderingSettings);\n        this._start(this.#manager);\n        this.loadPromise = new Promise<void>((resolve) => {\n            resolve();\n        });\n    }\n\n    private _start(manager: any): void {\n        if (this.#customClickContainer && manager.isCustomClickTrackingUsed()) {\n            this.#customClickContainer.classList.add('op-ads__click-container--visible');\n        }\n        // Add listeners to the required events.\n        manager.addEventListener(\n            google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,\n            this._onContentPauseRequested,\n            EVENT_OPTIONS\n        );\n        manager.addEventListener(\n            google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,\n            this._onContentResumeRequested,\n            EVENT_OPTIONS\n        );\n\n        this.#events = [\n            google.ima.AdEvent.Type.ALL_ADS_COMPLETED,\n            google.ima.AdEvent.Type.CLICK,\n            google.ima.AdEvent.Type.VIDEO_CLICKED,\n            google.ima.AdEvent.Type.VIDEO_ICON_CLICKED,\n            google.ima.AdEvent.Type.AD_PROGRESS,\n            google.ima.AdEvent.Type.AD_BUFFERING,\n            google.ima.AdEvent.Type.IMPRESSION,\n            google.ima.AdEvent.Type.DURATION_CHANGE,\n            google.ima.AdEvent.Type.USER_CLOSE,\n            google.ima.AdEvent.Type.LINEAR_CHANGED,\n            google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,\n            google.ima.AdEvent.Type.AD_METADATA,\n            google.ima.AdEvent.Type.INTERACTION,\n            google.ima.AdEvent.Type.COMPLETE,\n            google.ima.AdEvent.Type.FIRST_QUARTILE,\n            google.ima.AdEvent.Type.LOADED,\n            google.ima.AdEvent.Type.MIDPOINT,\n            google.ima.AdEvent.Type.PAUSED,\n            google.ima.AdEvent.Type.RESUMED,\n            google.ima.AdEvent.Type.USER_CLOSE,\n            google.ima.AdEvent.Type.STARTED,\n            google.ima.AdEvent.Type.THIRD_QUARTILE,\n            google.ima.AdEvent.Type.SKIPPED,\n            google.ima.AdEvent.Type.VOLUME_CHANGED,\n            google.ima.AdEvent.Type.VOLUME_MUTED,\n            google.ima.AdEvent.Type.LOG,\n        ];\n\n        if (!this.#options.autoPlayAdBreaks) {\n            // Add it to the events array so it gets removed onDestroy\n            this.#events.push(google.ima.AdEvent.Type.AD_BREAK_READY);\n        }\n\n        const controls = this.#player.getControls();\n        const mouseEvents = controls ? controls.events.mouse : {};\n        Object.keys(mouseEvents).forEach((event: string) => {\n            if (this.#container) {\n                this.#container.addEventListener(event, mouseEvents[event], EVENT_OPTIONS);\n            }\n        });\n        this.#events.forEach((event) => {\n            manager.addEventListener(event, this._assign, EVENT_OPTIONS);\n        });\n\n        if (this.#autostart === true || this.#autostartMuted === true || this.#playTriggered === true) {\n            this.#playTriggered = false;\n            if (!this.#done) {\n                this._initNotDoneAds();\n                return;\n            }\n            manager.init(\n                this.#element.offsetWidth,\n                this.#element.offsetHeight,\n                this.#element.parentElement && this.#element.parentElement.getAttribute('data-fullscreen') === 'true'\n                    ? google.ima.ViewMode.FULLSCREEN\n                    : google.ima.ViewMode.NORMAL\n            );\n            manager.start();\n            const e = addEvent('play');\n            this.#element.dispatchEvent(e);\n        } else if (this.#options.enablePreloading === true) {\n            manager.init(\n                this.#element.offsetWidth,\n                this.#element.offsetHeight,\n                this.#element.parentElement && this.#element.parentElement.getAttribute('data-fullscreen') === 'true'\n                    ? google.ima.ViewMode.FULLSCREEN\n                    : google.ima.ViewMode.NORMAL\n            );\n        }\n    }\n\n    private _initNotDoneAds(): void {\n        if (this.#displayContainer) {\n            this.#done = true;\n            this.#displayContainer.initialize();\n\n            if (IS_IOS || IS_ANDROID) {\n                this.#preloadContent = this._contentLoadedAction;\n                this.#element.addEventListener('loadedmetadata', this._contentLoadedAction, EVENT_OPTIONS);\n                this.#element.load();\n            } else {\n                this._contentLoadedAction();\n            }\n        } else {\n            this.load();\n            this.loadedAd = false;\n        }\n    }\n\n    private _contentEndedListener(): void {\n        this.#ended = true;\n        this.#active = false;\n        this.#started = false;\n        this.#loader.contentComplete();\n    }\n\n    private _onContentPauseRequested(): void {\n        this.#element.removeEventListener('ended', this._contentEndedListener);\n        this.#lastTimePaused = this.#media.currentTime;\n\n        if (this.#started) {\n            this.#media.pause();\n        } else {\n            this.#started = true;\n        }\n        const e = addEvent('play');\n        this.#element.dispatchEvent(e);\n    }\n\n    private _onContentResumeRequested(): void {\n        this.#element.addEventListener('ended', this._contentEndedListener, EVENT_OPTIONS);\n        this.#element.addEventListener('loadedmetadata', this._loadedMetadataHandler, EVENT_OPTIONS);\n        if (IS_IOS || IS_ANDROID) {\n            this.#media.src = this.#mediaSources;\n            this.#media.load();\n            this._prepareMedia();\n            if (this.#element.parentElement) {\n                this.#element.parentElement.classList.add('op-ads--active');\n            }\n        } else {\n            const event = addEvent('loadedmetadata');\n            this.#element.dispatchEvent(event);\n        }\n    }\n\n    private _loadedMetadataHandler(): void {\n        if (Array.isArray(this.#ads)) {\n            this.#currentIndex++;\n            if (this.#currentIndex <= this.#ads.length - 1) {\n                if (this.#manager) {\n                    this.#manager.destroy();\n                }\n                this.#loader.contentComplete();\n                this.#playTriggered = true;\n                this.#started = true;\n                this.#done = false;\n                this.load(true);\n            } else {\n                if (!this.#options.autoPlayAdBreaks) {\n                    this._resetAdsAfterManualBreak();\n                }\n                this._prepareMedia();\n            }\n        } else if (this.#element.seekable.length) {\n            if (this.#element.seekable.end(0) > this.#lastTimePaused) {\n                if (!this.#options.autoPlayAdBreaks) {\n                    this._resetAdsAfterManualBreak();\n                }\n                this._prepareMedia();\n            }\n        } else {\n            setTimeout(this._loadedMetadataHandler, 100);\n        }\n    }\n\n    private _resumeMedia(): void {\n        this.#intervalTimer = 0;\n        this.#muted = false;\n        this.#started = false;\n        this.#duration = 0;\n        this.#currentTime = 0;\n        if (this.#element.parentElement) {\n            this.#element.parentElement.classList.remove('op-ads--active');\n        }\n\n        if (this.#media.ended) {\n            const e = addEvent('ended');\n            this.#element.dispatchEvent(e);\n        } else {\n            try {\n                this.#media.play();\n                setTimeout(() => {\n                    const e = addEvent('play');\n                    this.#element.dispatchEvent(e);\n                }, 50);\n            } catch (err) {\n                console.error(err);\n            }\n        }\n    }\n\n    private _requestAds(): void {\n        this.#request = new google.ima.AdsRequest();\n        const ads = Array.isArray(this.#ads) ? this.#ads[this.#currentIndex] : this.#ads;\n\n        if (isXml(ads)) {\n            this.#request.adsResponse = ads;\n        } else {\n            this.#request.adTagUrl = ads;\n        }\n\n        const width = this.#element.parentElement ? this.#element.parentElement.offsetWidth : 0;\n        const height = this.#element.parentElement ? this.#element.parentElement.offsetHeight : 0;\n        this.#request.linearAdSlotWidth = width;\n        this.#request.linearAdSlotHeight = height;\n        this.#request.nonLinearAdSlotWidth = width;\n        this.#request.nonLinearAdSlotHeight = height / 3;\n        this.#request.setAdWillAutoPlay(this.#autostart);\n        this.#request.setAdWillPlayMuted(this.#autostartMuted);\n        this.#loader.requestAds(this.#request);\n    }\n\n    /**\n     * Internal callback to request Ads.\n     *\n     * @memberof Ads\n     */\n    private _contentLoadedAction(): void {\n        if (this.#preloadContent) {\n            this.#element.removeEventListener('loadedmetadata', this.#preloadContent);\n            this.#preloadContent = null;\n        }\n        this._requestAds();\n    }\n\n    // @see https://developers.google.com/interactive-media-ads/docs/sdks/html5/faq#8\n    private _resetAdsAfterManualBreak(): void {\n        if (this.#manager) {\n            this.#manager.destroy();\n        }\n        this.#loader.contentComplete();\n        this.#done = false;\n        this.#playTriggered = true;\n    }\n\n    private _prepareMedia(): void {\n        this.#media.currentTime = this.#lastTimePaused;\n        this.#element.removeEventListener('loadedmetadata', this._loadedMetadataHandler);\n        this._resumeMedia();\n    }\n\n    private _setMediaVolume(volume: number): void {\n        this.#media.volume = volume;\n        this.#media.muted = volume === 0;\n    }\n\n    private _handleClickInContainer(): void {\n        if (this.#media.paused) {\n            const e = addEvent('paused');\n            this.#element.dispatchEvent(e);\n            this.pause();\n        }\n    }\n\n    private _handleResizeAds(): void {\n        this.resizeAds();\n    }\n\n    private _handleSkipAds(): void {\n        this.#manager.skip();\n    }\n}\n\nexport default Ads;\n","import Controls from './controls';\nimport Fullscreen from './controls/fullscreen';\nimport {\n    CustomMedia,\n    ElementItem,\n    EventsList,\n    Languages,\n    PlayerLabels,\n    PlayerOptions,\n    Source,\n    Track,\n} from './interfaces';\nimport Media from './media';\nimport Ads from './media/ads';\nimport { EVENT_OPTIONS, IS_ANDROID, IS_IOS, IS_IPHONE } from './utils/constants';\nimport { addEvent, isAudio, isVideo, sanitize } from './utils/general';\nimport { isAutoplaySupported, predictMimeType } from './utils/media';\n\ninterface P {\n    loader: HTMLSpanElement;\n    playBtn: HTMLButtonElement;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    proxy: any;\n    init(): Promise<void>;\n    load(): Promise<void> | void;\n    play(): Promise<void>;\n    pause(): void;\n    destroy(): void;\n    getContainer(): HTMLElement;\n    getControls(): Controls;\n    getCustomControls(): ElementItem[];\n    getElement(): HTMLMediaElement;\n    getEvents(): EventsList;\n    getOptions(): PlayerOptions;\n    activeElement(): Ads | Media;\n    isMedia(): boolean;\n    isAd(): boolean;\n    getMedia(): Media;\n    getAd(): Ads;\n    addCaptions(args: Track): void;\n    addControl(args: ElementItem): void;\n    removeControl(controlName: string): void;\n    _prepareMedia(): Promise<void>;\n    enableDefaultPlayer(): void;\n    loadAd(src: string | string[]): Promise<void>;\n}\n\nclass Player {\n    static instances: { [id: string]: P } = {};\n\n    static customMedia: CustomMedia = {\n        media: {},\n        optionsKey: {},\n        rules: [],\n    };\n\n    static init(): void {\n        Player.instances = {};\n        const targets = document.querySelectorAll('video.op-player, audio.op-player');\n        for (let i = 0, total = targets.length; i < total; i++) {\n            const target = targets[i] as HTMLMediaElement;\n            const settings = target.getAttribute('data-op-settings');\n            const options = settings ? JSON.parse(settings) : {};\n            const player = new Player(target, options);\n            player.init();\n        }\n    }\n\n    static addMedia(name: string, mimeType: string, valid: (url: string) => string, media: Source): void {\n        Player.customMedia.media[mimeType] = media;\n        Player.customMedia.optionsKey[mimeType] = name;\n        Player.customMedia.rules.push(valid);\n    }\n\n    loader: HTMLSpanElement;\n\n    playBtn: HTMLButtonElement;\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    proxy: any = null;\n\n    #controls: Controls;\n\n    #adsInstance: Ads;\n\n    #uid = '';\n\n    #element: HTMLMediaElement;\n\n    #ads?: string | string[];\n\n    #media: Media;\n\n    #events: EventsList = {};\n\n    #autoplay = false;\n\n    #volume: number;\n\n    #canAutoplay = false;\n\n    #canAutoplayMuted = false;\n\n    #processedAutoplay = false;\n\n    #options: PlayerOptions;\n\n    #customElements: ElementItem[] = [];\n\n    #fullscreen: Fullscreen;\n\n    #defaultOptions: PlayerOptions = {\n        controls: {\n            alwaysVisible: false,\n            layers: {\n                left: ['play', 'time', 'volume'],\n                middle: ['progress'],\n                right: ['captions', 'settings', 'fullscreen'],\n            },\n        },\n        defaultLevel: undefined,\n        detachMenus: false,\n        forceNative: false,\n        height: 0,\n        hidePlayBtnTimer: 350,\n        labels: {\n            auto: 'Auto',\n            captions: 'CC/Subtitles',\n            click: 'Click to unmute',\n            fullscreen: 'Fullscreen',\n            lang: {\n                en: 'English',\n            },\n            levels: 'Quality Levels',\n            live: 'Live Broadcast',\n            mediaLevels: 'Change Quality',\n            mute: 'Mute',\n            off: 'Off',\n            pause: 'Pause',\n            play: 'Play',\n            progressRail: 'Time Rail',\n            progressSlider: 'Time Slider',\n            settings: 'Player Settings',\n            speed: 'Speed',\n            speedNormal: 'Normal',\n            tap: 'Tap to unmute',\n            toggleCaptions: 'Toggle Captions',\n            unmute: 'Unmute',\n            volume: 'Volume',\n            volumeControl: 'Volume Control',\n            volumeSlider: 'Volume Slider',\n        },\n        live: {\n            showLabel: true,\n            showProgress: false,\n        },\n        media: {\n            pauseOnClick: false,\n        },\n        mode: 'responsive', // or `fill` or `fit`\n        onError: (e: unknown) => console.error(e),\n        pauseOthers: true,\n        progress: {\n            allowRewind: true,\n            allowSkip: true,\n            duration: 0,\n            showCurrentTimeOnly: false,\n        },\n        showLoaderOnInit: false,\n        startTime: 0,\n        startVolume: 1,\n        step: 0,\n        useDeviceVolume: true,\n        width: 0,\n    };\n\n    constructor(element: HTMLMediaElement | string, options?: PlayerOptions) {\n        this.#element =\n            element instanceof HTMLMediaElement ? element : (document.getElementById(element) as HTMLMediaElement);\n        if (this.#element) {\n            this.#autoplay = this.#element.autoplay || false;\n            if (typeof options !== 'string' && !Array.isArray(options)) {\n                this._mergeOptions(options);\n            }\n            this.#element.volume = this.#options.startVolume || 1;\n\n            if (this.#options.ads && this.#options.ads.src) {\n                this.#ads = this.#options.ads.src;\n            }\n            if ((this.#options?.startTime || 0) > 0) {\n                this.#element.currentTime = this.#options.startTime || 0;\n            }\n            this.#volume = this.#element.volume;\n        }\n        this._autoplay = this._autoplay.bind(this);\n        this._enableKeyBindings = this._enableKeyBindings.bind(this);\n    }\n\n    async init(): Promise<void> {\n        if (this._isValid()) {\n            this._wrapInstance();\n            await this._prepareMedia();\n            this._createPlayButton();\n            this._createUID();\n            this._createControls();\n            this._setEvents();\n            Player.instances[this.id] = this;\n        }\n    }\n\n    async load(): Promise<void> {\n        if (!this.#media) {\n            await this._prepareMedia();\n            return (this.#media as Media).load();\n        }\n        this.#media.loaded = false;\n        return this.isMedia() ? this.#media.load() : undefined;\n    }\n\n    async play(): Promise<void> {\n        if (!this.#media.loaded) {\n            await this.#media.load();\n            this.#media.loaded = true;\n        }\n        if (this.#adsInstance) {\n            this.#adsInstance.playRequested = true;\n            await this.#adsInstance.loadPromise;\n            return this.#adsInstance.play();\n        }\n        return this.#media.play();\n    }\n\n    pause(): void {\n        if (this.#adsInstance) {\n            this.#adsInstance.pause();\n        } else {\n            this.#media.pause();\n        }\n    }\n\n    stop(): void {\n        this.pause();\n\n        if (this.#media) {\n            this.#media.currentTime = 0;\n            this.src = [{ src: '', type: 'video/mp4' }];\n        }\n    }\n\n    destroy(): void {\n        if (this.#adsInstance) {\n            this.#adsInstance.pause();\n            this.#adsInstance.destroy();\n        }\n\n        if (this.#fullscreen) {\n            this.#fullscreen.destroy();\n        }\n\n        const el = this.#element as HTMLMediaElement;\n        if (this.#media) {\n            this.#media.destroy();\n        }\n\n        Object.keys(this.#events).forEach((event) => {\n            el.removeEventListener(event, this.#events[event]);\n        });\n\n        this.getContainer().removeEventListener('keydown', this._enableKeyBindings);\n\n        if (this.#autoplay && !this.#processedAutoplay && isVideo(this.#element)) {\n            el.removeEventListener('canplay', this._autoplay);\n        }\n        if (this.#controls) {\n            this.#controls.destroy();\n        }\n\n        if (isVideo(this.#element)) {\n            if (this.playBtn) {\n                this.playBtn.remove();\n            }\n            if (this.loader) {\n                this.loader.remove();\n            }\n        }\n\n        if (this.#options?.onError) {\n            this.#element.removeEventListener('playererror', this.#options.onError);\n        }\n\n        el.controls = true;\n        el.setAttribute('id', this.#uid);\n        el.removeAttribute('op-live__enabled');\n        el.removeAttribute('op-dvr__enabled');\n        const parent =\n            this.#options.mode === 'fit' && !isAudio(el) ? el.closest('.op-player__fit--wrapper') : el.parentElement;\n        if (parent && parent.parentNode) {\n            parent.parentNode.replaceChild(el, parent);\n        }\n\n        delete Player.instances[this.#uid];\n\n        const e = addEvent('playerdestroyed');\n        el.dispatchEvent(e);\n    }\n\n    getContainer(): HTMLElement {\n        return this.#element.parentElement || this.#element;\n    }\n\n    getControls(): Controls {\n        return this.#controls;\n    }\n\n    getCustomControls(): ElementItem[] {\n        return this.#customElements;\n    }\n\n    getElement(): HTMLMediaElement {\n        return this.#element;\n    }\n\n    getEvents(): EventsList {\n        return this.#events;\n    }\n\n    getOptions(): PlayerOptions {\n        return this.#options;\n    }\n\n    activeElement(): Ads | Media {\n        return this.#adsInstance && this.#adsInstance.started() ? this.#adsInstance : this.#media;\n    }\n\n    isMedia(): boolean {\n        return this.activeElement() instanceof Media;\n    }\n\n    isAd(): boolean {\n        return this.activeElement() instanceof Ads;\n    }\n\n    getMedia(): Media {\n        return this.#media;\n    }\n\n    getAd(): Ads {\n        return this.#adsInstance;\n    }\n\n    addCaptions(args: Track): void {\n        if (args.default) {\n            const tracks = this.#element.querySelectorAll('track');\n            for (let i = 0, total = tracks.length; i < total; i++) {\n                (tracks[i] as HTMLTrackElement).default = false;\n            }\n        }\n\n        const el = this.#element;\n\n        // If captions have been added previously, just update URL and default status\n        let track = el.querySelector(`track[srclang=\"${args.srclang}\"][kind=\"${args.kind}\"]`) as HTMLTrackElement;\n        if (track) {\n            track.src = args.src;\n            track.label = args.label;\n            track.default = args.default || false;\n        } else {\n            track = document.createElement('track');\n            track.srclang = args.srclang;\n            track.src = args.src;\n            track.kind = args.kind;\n            track.label = args.label;\n            track.default = args.default || false;\n            el.appendChild(track);\n        }\n\n        const e = addEvent('controlschanged');\n        el.dispatchEvent(e);\n    }\n\n    addControl(args: ElementItem): void {\n        args.custom = true;\n        args.type = 'button';\n        this.#customElements.push(args);\n        const e = addEvent('controlschanged');\n        this.#element.dispatchEvent(e);\n    }\n\n    addElement(args: ElementItem): void {\n        args.custom = true;\n        this.#customElements.push(args);\n        const e = addEvent('controlschanged');\n        this.#element.dispatchEvent(e);\n    }\n\n    removeControl(controlName: string): void {\n        // Check custom controls and remove reference there as well\n        this.#customElements.forEach((item: ElementItem, idx: number) => {\n            if (item.id === controlName) {\n                this.#customElements.splice(idx, 1);\n            }\n        });\n        const e = addEvent('controlschanged');\n        this.#element.dispatchEvent(e);\n    }\n\n    async _prepareMedia(): Promise<void> {\n        try {\n            if (this.#options?.onError) {\n                this.#element.addEventListener('playererror', this.#options.onError, EVENT_OPTIONS);\n            }\n            if (this.#autoplay && isVideo(this.#element)) {\n                this.#element.addEventListener('canplay', this._autoplay, EVENT_OPTIONS);\n            }\n            this.#media = new Media(this.#element, this.#options, this.#autoplay, Player.customMedia);\n            const preload = this.#element.getAttribute('preload');\n            if (this.#ads || !preload || preload !== 'none') {\n                await this.#media.load();\n                this.#media.loaded = true;\n            }\n\n            if (!this.#autoplay && this.#ads) {\n                const adsOptions = this.#options && this.#options.ads ? this.#options.ads : undefined;\n                this.#adsInstance = new Ads(this, this.#ads, false, false, adsOptions);\n            }\n        } catch (e) {\n            console.error(e);\n        }\n    }\n\n    enableDefaultPlayer(): void {\n        let paused = true;\n        let currentTime = 0;\n\n        if (this.proxy && !this.proxy.paused) {\n            paused = false;\n            currentTime = this.proxy.currentTime;\n            this.proxy.pause();\n        }\n\n        this.proxy = this;\n        this.getElement().addEventListener('loadedmetadata', (): void => {\n            this.getMedia().currentTime = currentTime;\n            if (!paused) {\n                this.play();\n            }\n        });\n    }\n\n    async loadAd(src: string | string[]): Promise<void> {\n        try {\n            if (this.isAd()) {\n                this.getAd().destroy();\n                this.getAd().src = src;\n                this.getAd().loadedAd = false;\n                this.getAd().load();\n            } else {\n                const adsOptions = this.#options && this.#options.ads ? this.#options.ads : undefined;\n                const autoplay = !this.activeElement().paused || this.#canAutoplay;\n                this.#adsInstance = new Ads(this, src, autoplay, this.#canAutoplayMuted, adsOptions);\n            }\n        } catch (err) {\n            console.error(err);\n        }\n    }\n\n    set src(media) {\n        if (this.#media instanceof Media) {\n            this.#media.mediaFiles = [];\n            this.#media.src = media;\n        } else if (typeof media === 'string') {\n            this.#element.src = media;\n        } else if (Array.isArray(media)) {\n            media.forEach((m) => {\n                const source = document.createElement('source');\n                source.src = m.src;\n                source.type = m.type || predictMimeType(m.src, this.#element);\n                this.#element.appendChild(source);\n            });\n        } else if (typeof media === 'object') {\n            this.#element.src = (media as Source).src;\n        }\n    }\n\n    get src(): Source[] {\n        return this.#media.src;\n    }\n\n    get id(): string {\n        return this.#uid;\n    }\n\n    private _isValid(): boolean {\n        const el = this.#element;\n\n        if (el instanceof HTMLElement === false) {\n            return false;\n        }\n\n        if (!isAudio(el) && !isVideo(el)) {\n            return false;\n        }\n\n        if (!el.classList.contains('op-player__media')) {\n            return false;\n        }\n\n        return true;\n    }\n\n    private _wrapInstance(): void {\n        const wrapper = document.createElement('div');\n        wrapper.className = 'op-player op-player__keyboard--inactive';\n        wrapper.className += isAudio(this.#element) ? ' op-player__audio' : ' op-player__video';\n        wrapper.tabIndex = 0;\n\n        this.#element.classList.remove('op-player');\n        if (this.#element.parentElement) {\n            this.#element.parentElement.insertBefore(wrapper, this.#element);\n        }\n        wrapper.appendChild(this.#element);\n\n        const messageContainer = document.createElement('div');\n        messageContainer.className = 'op-status';\n        messageContainer.innerHTML = '<span></span>';\n        messageContainer.tabIndex = -1;\n        messageContainer.setAttribute('aria-hidden', 'true');\n\n        if (isVideo(this.#element) && this.#element.parentElement) {\n            this.#element.parentElement.insertBefore(messageContainer, this.#element);\n        }\n\n        wrapper.addEventListener(\n            'keydown',\n            (): void => {\n                if (wrapper.classList.contains('op-player__keyboard--inactive')) {\n                    wrapper.classList.remove('op-player__keyboard--inactive');\n                }\n            },\n            EVENT_OPTIONS\n        );\n\n        wrapper.addEventListener(\n            'click',\n            (): void => {\n                if (!wrapper.classList.contains('op-player__keyboard--inactive')) {\n                    wrapper.classList.add('op-player__keyboard--inactive');\n                }\n            },\n            EVENT_OPTIONS\n        );\n\n        if (this.#options.mode === 'fill' && !isAudio(this.#element) && !IS_IPHONE) {\n            // Create fill effect on video, scaling and cropping dimensions relative to its parent, setting just a class.\n            // This method centers the video view using pure CSS in both Ads and Media.\n            // @see https://slicejack.com/fullscreen-html5-video-background-css/\n            this.getContainer().classList.add('op-player__full');\n        } else if (this.#options.mode === 'fit' && !isAudio(this.#element)) {\n            const container = this.getContainer();\n            if (container.parentElement) {\n                const fitWrapper = document.createElement('div');\n                fitWrapper.className = 'op-player__fit--wrapper';\n                fitWrapper.tabIndex = 0;\n                container.parentElement.insertBefore(fitWrapper, container);\n                fitWrapper.appendChild(container);\n                container.classList.add('op-player__fit');\n            }\n        } else {\n            let style = '';\n            if (this.#options.width) {\n                const width =\n                    typeof this.#options.width === 'number' ? `${this.#options.width}px` : this.#options.width;\n                style += `width: ${width} !important;`;\n            }\n            if (this.#options.height) {\n                const height =\n                    typeof this.#options.height === 'number' ? `${this.#options.height}px` : this.#options.height;\n                style += `height: ${height} !important;`;\n            }\n\n            if (style) {\n                wrapper.setAttribute('style', style);\n            }\n        }\n    }\n\n    private _createControls(): void {\n        if (IS_IPHONE && isVideo(this.#element)) {\n            this.getContainer().classList.add('op-player__ios--iphone');\n        }\n        this.#controls = new Controls(this);\n        this.#controls.create();\n    }\n\n    private _createUID(): void {\n        if (this.#element.id) {\n            this.#uid = this.#element.id;\n            this.#element.removeAttribute('id');\n        } else {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            const cryptoLib = crypto as any;\n            const encryption =\n                typeof cryptoLib.getRandomBytes === 'function' ? cryptoLib.getRandomBytes : cryptoLib.getRandomValues;\n            this.#uid = `op_${encryption(new Uint32Array(1))[0].toString(36).substr(2, 9)}`;\n        }\n\n        if (this.#element.parentElement) {\n            this.#element.parentElement.id = this.#uid;\n        }\n    }\n\n    private _createPlayButton(): void {\n        if (isAudio(this.#element)) {\n            return;\n        }\n\n        this.playBtn = document.createElement('button');\n        this.playBtn.className = 'op-player__play';\n        this.playBtn.tabIndex = 0;\n        this.playBtn.title = this.#options.labels?.play || '';\n        this.playBtn.innerHTML = `<span>${this.#options.labels?.play || ''}</span>`;\n        this.playBtn.setAttribute('aria-pressed', 'false');\n        this.playBtn.setAttribute('aria-hidden', 'false');\n\n        this.loader = document.createElement('span');\n        this.loader.className = 'op-player__loader';\n        this.loader.tabIndex = -1;\n        this.loader.setAttribute('aria-hidden', 'true');\n\n        if (this.#element.parentElement) {\n            this.#element.parentElement.insertBefore(this.loader, this.#element);\n            this.#element.parentElement.insertBefore(this.playBtn, this.#element);\n        }\n\n        this.playBtn.addEventListener(\n            'click',\n            (): void => {\n                if (this.#adsInstance) {\n                    this.#adsInstance.playRequested = this.activeElement().paused;\n                }\n                if (this.activeElement().paused) {\n                    this.activeElement().play();\n                } else {\n                    this.activeElement().pause();\n                }\n            },\n            EVENT_OPTIONS\n        );\n    }\n\n    private _setEvents(): void {\n        if (isVideo(this.#element)) {\n            this.#events.loadedmetadata = (): void => {\n                const el = this.activeElement();\n                if (this.#options.showLoaderOnInit && !IS_IOS && !IS_ANDROID) {\n                    this.loader.setAttribute('aria-hidden', 'false');\n                    this.playBtn.setAttribute('aria-hidden', 'true');\n                } else {\n                    this.loader.setAttribute('aria-hidden', 'true');\n                    this.playBtn.setAttribute('aria-hidden', 'false');\n                }\n                if (el.paused) {\n                    this.playBtn.classList.remove('op-player__play--paused');\n                    this.playBtn.setAttribute('aria-pressed', 'false');\n                }\n            };\n            this.#events.waiting = (): void => {\n                this.playBtn.setAttribute('aria-hidden', 'true');\n                this.loader.setAttribute('aria-hidden', 'false');\n            };\n            this.#events.seeking = (): void => {\n                const el = this.activeElement();\n                this.playBtn.setAttribute('aria-hidden', 'true');\n                this.loader.setAttribute('aria-hidden', el instanceof Media ? 'false' : 'true');\n            };\n            this.#events.seeked = (): void => {\n                const el = this.activeElement();\n                if (Math.round(el.currentTime) === 0) {\n                    this.playBtn.setAttribute('aria-hidden', 'true');\n                    this.loader.setAttribute('aria-hidden', 'false');\n                } else {\n                    this.playBtn.setAttribute('aria-hidden', el instanceof Media ? 'false' : 'true');\n                    this.loader.setAttribute('aria-hidden', 'true');\n                }\n            };\n            this.#events.play = (): void => {\n                this.playBtn.classList.add('op-player__play--paused');\n                this.playBtn.title = this.#options.labels?.pause || '';\n                this.loader.setAttribute('aria-hidden', 'true');\n                if (this.#options.showLoaderOnInit) {\n                    this.playBtn.setAttribute('aria-hidden', 'true');\n                } else {\n                    setTimeout((): void => {\n                        this.playBtn.setAttribute('aria-hidden', 'true');\n                    }, this.#options.hidePlayBtnTimer);\n                }\n            };\n            this.#events.playing = (): void => {\n                this.loader.setAttribute('aria-hidden', 'true');\n                this.playBtn.setAttribute('aria-hidden', 'true');\n            };\n            this.#events.pause = (): void => {\n                const el = this.activeElement();\n                this.playBtn.classList.remove('op-player__play--paused');\n                this.playBtn.title = this.#options.labels?.play || '';\n\n                if (this.#options.showLoaderOnInit && Math.round(el.currentTime) === 0) {\n                    this.playBtn.setAttribute('aria-hidden', 'true');\n                    this.loader.setAttribute('aria-hidden', 'false');\n                } else {\n                    this.playBtn.setAttribute('aria-hidden', 'false');\n                    this.loader.setAttribute('aria-hidden', 'true');\n                }\n            };\n            this.#events.ended = (): void => {\n                this.loader.setAttribute('aria-hidden', 'true');\n                this.playBtn.setAttribute('aria-hidden', 'true');\n            };\n            // This workflow is needed when media is on a loop and post roll needs to be played.\n            // This happens because, when in loop, media never sends the `ended` event back;\n            // so, when media reaches a quarter of a second left before the end, Ads would be dispatched\n            // @see https://github.com/googleads/videojs-ima/issues/890\n            let postRollCalled = false;\n            this.#events.timeupdate = (): void => {\n                if (this.#element.loop && this.isMedia() && this.#adsInstance) {\n                    const el = this.getMedia();\n                    const remainingTime = el.duration - el.currentTime;\n                    if (remainingTime > 0 && remainingTime <= 0.25 && !postRollCalled) {\n                        postRollCalled = true;\n                        const e = addEvent('ended');\n                        this.#element.dispatchEvent(e);\n                    } else if (remainingTime === 0) {\n                        postRollCalled = false;\n                    }\n                }\n            };\n        }\n\n        Object.keys(this.#events).forEach((event) => {\n            this.#element.addEventListener(event, this.#events[event], EVENT_OPTIONS);\n        });\n\n        this.getContainer().addEventListener('keydown', this._enableKeyBindings, EVENT_OPTIONS);\n    }\n\n    private _autoplay(): void {\n        if (!this.#processedAutoplay) {\n            this.#processedAutoplay = true;\n            this.#element.removeEventListener('canplay', this._autoplay);\n\n            isAutoplaySupported(\n                this.#element,\n                this.#volume,\n                (autoplay) => {\n                    this.#canAutoplay = autoplay;\n                },\n                (muted) => {\n                    this.#canAutoplayMuted = muted;\n                },\n                (): void => {\n                    if (this.#canAutoplayMuted) {\n                        this.activeElement().muted = true;\n                        this.activeElement().volume = 0;\n\n                        const e = addEvent('volumechange');\n                        this.#element.dispatchEvent(e);\n\n                        // Insert element to unmute if browser allows autoplay with muted media\n                        const volumeEl = document.createElement('div');\n                        const action = IS_IOS || IS_ANDROID ? this.#options.labels?.tap : this.#options.labels?.click;\n                        volumeEl.className = 'op-player__unmute';\n                        volumeEl.innerHTML = `<span>${action}</span>`;\n                        volumeEl.tabIndex = 0;\n\n                        volumeEl.addEventListener(\n                            'click',\n                            (): void => {\n                                this.activeElement().muted = false;\n                                this.activeElement().volume = this.#volume;\n\n                                const event = addEvent('volumechange');\n                                this.#element.dispatchEvent(event);\n\n                                volumeEl.remove();\n                            },\n                            EVENT_OPTIONS\n                        );\n\n                        const target = this.getContainer();\n                        target.insertBefore(volumeEl, target.firstChild);\n                    } else {\n                        this.activeElement().muted = this.#element.muted;\n                        this.activeElement().volume = this.#volume;\n                    }\n\n                    if (this.#ads) {\n                        const adsOptions = this.#options && this.#options.ads ? this.#options.ads : undefined;\n                        this.#adsInstance = new Ads(\n                            this,\n                            this.#ads,\n                            this.#canAutoplay,\n                            this.#canAutoplayMuted,\n                            adsOptions\n                        );\n                    } else if (this.#canAutoplay || this.#canAutoplayMuted) {\n                        this.play();\n                    }\n                }\n            );\n        }\n    }\n\n    private _mergeOptions(playerOptions?: PlayerOptions): void {\n        const opts = { ...(playerOptions || {}) };\n        this.#options = { ...this.#defaultOptions, ...opts };\n        const complexOptions = Object.keys(this.#defaultOptions).filter(\n            (key) => key !== 'labels' && typeof this.#defaultOptions[key] === 'object'\n        );\n        complexOptions.forEach((key) => {\n            const currOption = (opts[key] as Record<string, unknown>) || {};\n            if (currOption && Object.keys(currOption).length) {\n                this.#options[key] = { ...(this.#defaultOptions[key] as Record<string, unknown>), ...currOption };\n            }\n        });\n        if (opts.labels) {\n            const keys = opts.labels ? Object.keys(opts.labels) : [];\n            let sanitizedLabels: PlayerLabels = {};\n\n            keys.forEach((key) => {\n                const current = opts.labels ? opts.labels[key as keyof PlayerLabels] : null;\n                if (current && typeof current === 'object' && key === 'lang') {\n                    Object.keys(current).forEach((k) => {\n                        const lang = current ? (current as Languages)[k] : null;\n                        if (lang) {\n                            sanitizedLabels = {\n                                ...sanitizedLabels,\n                                lang: { ...sanitizedLabels.lang, [k]: sanitize(lang as string) },\n                            };\n                        }\n                    });\n                } else if (current) {\n                    sanitizedLabels = { ...sanitizedLabels, [key]: sanitize(current as string) };\n                }\n            });\n\n            this.#options.labels = { ...this.#defaultOptions.labels, ...sanitizedLabels };\n        }\n    }\n\n    private _enableKeyBindings(e: KeyboardEvent): void {\n        const key = e.which || e.keyCode || 0;\n        const el = this.activeElement();\n        const isAd = this.isAd();\n        const playerFocused = document?.activeElement?.classList.contains('op-player');\n\n        switch (key) {\n            // Toggle play/pause using letter K, Tab or Enter\n            case 13:\n            case 32:\n            case 75:\n                // Avoid interference of Enter/Space keys when focused in the player container\n                if (playerFocused && (key === 13 || key === 32)) {\n                    if (el.paused) {\n                        el.play();\n                    } else {\n                        el.pause();\n                    }\n                } else if (key === 75) {\n                    if (el.paused) {\n                        el.play();\n                    } else {\n                        el.pause();\n                    }\n                }\n                e.preventDefault();\n                e.stopPropagation();\n                break;\n            // End key ends video\n            case 35:\n                if (!isAd && el.duration !== Infinity) {\n                    el.currentTime = el.duration;\n                    e.preventDefault();\n                    e.stopPropagation();\n                }\n                break;\n            // Home key resets progress\n            case 36:\n                if (!isAd) {\n                    el.currentTime = 0;\n                    e.preventDefault();\n                    e.stopPropagation();\n                }\n                break;\n            // Use the left and right arrow keys to manipulate current media time.\n            // Letter J/L will set double of step forward/backward\n            case 37:\n            case 39:\n            case 74:\n            case 76:\n                if (!isAd && el.duration !== Infinity) {\n                    let newStep = 5;\n                    const configStep = this.getOptions().step;\n                    if (configStep) {\n                        newStep = key === 74 || key === 76 ? configStep * 2 : configStep;\n                    } else if (key === 74 || key === 76) {\n                        newStep = 10;\n                    }\n                    const step = el.duration !== Infinity ? newStep : this.getOptions().progress?.duration || 0;\n                    el.currentTime += key === 37 || key === 74 ? step * -1 : step;\n                    if (el.currentTime < 0) {\n                        el.currentTime = 0;\n                    } else if (el.currentTime >= el.duration) {\n                        el.currentTime = el.duration;\n                    }\n                    e.preventDefault();\n                    e.stopPropagation();\n                }\n                break;\n            // Use the up/down arrow keys to manipulate volume.\n            case 38:\n            case 40:\n                const newVol = key === 38 ? Math.min(el.volume + 0.1, 1) : Math.max(el.volume - 0.1, 0);\n                el.volume = newVol;\n                el.muted = !(newVol > 0);\n                e.preventDefault();\n                e.stopPropagation();\n                break;\n            // Letter F sets fullscreen (only video)\n            case 70:\n                if (isVideo(this.#element) && !e.ctrlKey) {\n                    this.#fullscreen = new Fullscreen(this, '', '');\n                    if (typeof this.#fullscreen.fullScreenEnabled !== 'undefined') {\n                        this.#fullscreen.toggleFullscreen();\n                        e.preventDefault();\n                        e.stopPropagation();\n                    }\n                }\n                break;\n            // Letter M toggles mute\n            case 77:\n                el.muted = !el.muted;\n                if (el.muted) {\n                    el.volume = 0;\n                } else {\n                    el.volume = this.#volume;\n                }\n                e.preventDefault();\n                e.stopPropagation();\n                break;\n            // < and > will decrease/increase the speed of playback by 0.25\n            // , and . will go to the prev/next frame of the media\n            case 188:\n            case 190:\n                if (!isAd && e.shiftKey) {\n                    const elem = el as Media;\n                    elem.playbackRate =\n                        key === 188 ? Math.max(elem.playbackRate - 0.25, 0.25) : Math.min(elem.playbackRate + 0.25, 2);\n                    // Show playbackRate and update controls to reflect change in settings\n                    const target = this.getContainer().querySelector('.op-status>span');\n                    if (target) {\n                        target.textContent = `${elem.playbackRate}x`;\n                        if (target.parentElement) {\n                            target.parentElement.setAttribute('aria-hidden', 'false');\n                        }\n                        setTimeout((): void => {\n                            if (target.parentElement) {\n                                target.parentElement.setAttribute('aria-hidden', 'true');\n                            }\n                        }, 500);\n                    }\n                    const ev = addEvent('controlschanged');\n                    dispatchEvent(ev);\n                    e.preventDefault();\n                    e.stopPropagation();\n                } else if (!isAd && el.paused) {\n                    el.currentTime += (1 / 25) * (key === 188 ? -1 : 1);\n                    e.preventDefault();\n                    e.stopPropagation();\n                }\n                break;\n            default:\n                break;\n        }\n    }\n}\n\nexport default Player;\n\n// Expose element globally.\nif (typeof window !== 'undefined') {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    (window as any).OpenPlayer = Player;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    (window as any).OpenPlayerJS = Player;\n    Player.init();\n}\n"],"names":["NAV","UA","IS_IPHONE","IS_IOS","IS_ANDROID","IS_CHROME","IS_SAFARI","HAS_MSE","SUPPORTS_HLS","mediaSource","sourceBuffer","isTypeSupported","sourceBufferValidAPI","DVR_THRESHOLD","EVENT_OPTIONS","isVideo","element","isAudio","loadScript","url","resolve","reject","script","offset","el","rect","sanitize","html","plainText","formattedContent","scripts","i","total","clean","nodes","node","attributes","j","t","name","value","val","isXml","input","parsedXml","text","addEvent","event","details","detail","Captions","player","position","layer","__privateAdd","_player","_button","_captions","_menu","_events","_mediaTrackList","_hasTracks","_currentTrack","_default","_controlPosition","_controlLayer","__privateSet","textTracks","__privateGet","labels","detachMenus","k","target","itemContainer","track","item","label","_a","e","button","menus","menuItem","option","language","captions","caption","targetTrack","matchTrack","subitems","items","options","_b","cue","content","Fullscreen","_isFullscreen","_fullscreenEvents","_fullscreenWidth","_fullscreenHeight","_clickEvent","video","screen","width","height","isFullscreen","wrapper","styles","defaultWidth","defaultHeight","key","getExtension","baseName","isHlsSource","media","isDashSource","isFlvSource","predictMimeType","extension","isAutoplaySupported","defaultVol","autoplay","muted","callback","playPromise","Levels","_levels","_defaultLevel","startLevel","initialLevel","menuItems","defaultLevel","defaultLabel","levelSet","loadLevelsEvent","currentTime","isPaused","levelVal","level","levels","connection","type","acc","current","b","className","menu","Play","isAudioEl","Player","formatTime","seconds","frameRate","f","s","m","h","wrap","formattedVal","Progress","_progress","_slider","_buffer","_played","_tooltip","_forcePause","progress","setInitialProgress","lastCurrentTime","defaultDuration","duration","min","max","updateSlider","forcePause","releasePause","mobileForcePause","changedTouches","time","x","pos","half","percentage","mediaContainer","limit","isAd","step","Settings","_submenu","_originalOutput","timeout","id","rate","defaultValue","submenu","dataValue","submenuMatch","mainMenu","subItems","labelEl","fragments","menuTarget","prev","minItems","settingsBtnFocused","menuFocused","_c","_d","Time","_currentTime","_delimiter","_duration","_container","showOnlyCurrent","controls","setInitialTime","showLiveLabel","showCurrentTimeOnly","Volume","_display","_volume","mediaVolume","vol","updateButton","updateVolume","unmuteEl","Controls","_settings","_timer","_controls","_items","_controlEls","isMediaVideo","alwaysVisible","showControls","messageContainer","isVideoEl","controlPositions","layersExist","controlLayer","layers","v","a","currentLayer","allowDefault","itemIcon","subitem","control","Native","_customPlayer","customPlayer","DashMedia","_options","mimeType","bitrates","errorEvent","FlvMedia","args","configs","rest","data","errorDetails","HlsMedia","_recoverDecodingErrorDate","_recoverSwapAudioCodecDate","_autoplay","formattedLevel","fatal","now","mediaEvent","networkEvent","fatalEvent","err","timeEvent","metaEvent","HTML5Media","mediaFile","_currentLevel","_levelList","_isStreaming","_retryCount","_started","idx","source","metaDataEvent","message","__privateWrapper","defaultMessage","error","Media","customMedia","_element","_media","_files","_promisePlay","_mediaLoaded","_customMedia","_currentSrc","source.predictMimeType","file","sources","loaded","mediaFiles","sourceTags","nodeSource","src","playHLSNatively","activeLevels","customRef","rule","customOptions","source.isHlsSource","hlsOptions","source.isDashSource","dashOptions","source.isFlvSource","flvOptions","Ads","ads","autostart","autostartMuted","_ended","_done","_active","_intervalTimer","_muted","_manager","_ads","_promise","_loader","_customClickContainer","_skipElement","_displayContainer","_request","_autostart","_autostartMuted","_playTriggered","_currentIndex","_originalVolume","_preloadContent","_lastTimePaused","_mediaSources","_mediaStarted","_adEvent","defaultOpts","path","force","existingContainer","vpaidModeMap","mouseEvents","destroy","mode","formattedWidth","percentageWidth","formattedHeight","percentageHeight","ad","waitingEvent","loadedEvent","playEvent","resized","endEvent","skipEvent","volumeEvent","endedEvent","pauseEvent","progressData","canSkip","remainingTime","adData","fatalErrorCodes","managerLoadedEvent","adsRenderingSettings","manager","volume","_Player","_adsInstance","_uid","_canAutoplay","_canAutoplayMuted","_processedAutoplay","_customElements","_fullscreen","_defaultOptions","targets","settings","valid","parent","tracks","controlName","preload","adsOptions","paused","container","fitWrapper","style","cryptoLib","encryption","postRollCalled","volumeEl","action","playerOptions","opts","currOption","keys","sanitizedLabels","lang","playerFocused","newStep","configStep","newVol","elem","ev","Player$1"],"mappings":"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"}